{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{\"/sK6\":function(module,exports,__webpack_require__){var factory;window,factory=function(__WEBPACK_EXTERNAL_MODULE_tui_code_snippet__){return function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&\"object\"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,\"default\",{enumerable:!0,value:t}),2&e&&\"string\"!=typeof t)for(var r in t)n.d(i,r,(function(e){return t[e]}).bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,\"a\",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p=\"dist\",n(n.s=0)}({\"./node_modules/webpack/buildin/global.js\":function(module,exports){eval('var g;\\n\\n// This works in non-strict mode\\ng = (function() {\\n\\treturn this;\\n})();\\n\\ntry {\\n\\t// This works if eval is allowed (see CSP)\\n\\tg = g || new Function(\"return this\")();\\n} catch (e) {\\n\\t// This works if the window reference is available\\n\\tif (typeof window === \"object\") g = window;\\n}\\n\\n// g can still be undefined, but nothing to do about it...\\n// We return undefined, instead of nothing here, so it\\'s\\n// easier to handle this case. if(!global) { ...}\\n\\nmodule.exports = g;\\n\\n\\n//# sourceURL=webpack://tui.colorPicker/(webpack)/buildin/global.js?')},\"./src/js/colorutil.js\":function(module,exports,__webpack_require__){\"use strict\";eval(\"/**\\n * @fileoverview Utility methods to manipulate colors\\n * @author NHN. FE Development Team <dl_javascript@nhn.com>\\n */\\n\\n\\nvar hexRX = /(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i;\\nvar colorutil = {\\n  /**\\n   * pad left zero characters.\\n   * @param {number} number number value to pad zero.\\n   * @param {number} length pad length to want.\\n   * @returns {string} padded string.\\n   */\\n  leadingZero: function (number, length) {\\n    var zero = '',\\n        i = 0;\\n\\n    if ((number + '').length > length) {\\n      return number + '';\\n    }\\n\\n    for (; i < length - 1; i += 1) {\\n      zero += '0';\\n    }\\n\\n    return (zero + number).slice(length * -1);\\n  },\\n\\n  /**\\n   * Check validate of hex string value is RGB\\n   * @param {string} str - rgb hex string\\n   * @returns {boolean} return true when supplied str is valid RGB hex string\\n   */\\n  isValidRGB: function (str) {\\n    return hexRX.test(str);\\n  },\\n  // @license RGB <-> HSV conversion utilities based off of http://www.cs.rit.edu/~ncs/color/t_convert.html\\n\\n  /**\\n   * Convert color hex string to rgb number array\\n   * @param {string} hexStr - hex string\\n   * @returns {number[]} rgb numbers\\n   */\\n  hexToRGB: function (hexStr) {\\n    var r, g, b;\\n\\n    if (!colorutil.isValidRGB(hexStr)) {\\n      return false;\\n    }\\n\\n    hexStr = hexStr.substring(1);\\n    r = parseInt(hexStr.substr(0, 2), 16);\\n    g = parseInt(hexStr.substr(2, 2), 16);\\n    b = parseInt(hexStr.substr(4, 2), 16);\\n    return [r, g, b];\\n  },\\n\\n  /**\\n   * Convert rgb number to hex string\\n   * @param {number} r - red\\n   * @param {number} g - green\\n   * @param {number} b - blue\\n   * @returns {string|boolean} return false when supplied rgb number is not valid. otherwise, converted hex string\\n   */\\n  rgbToHEX: function (r, g, b) {\\n    var hexStr = '#' + colorutil.leadingZero(r.toString(16), 2) + colorutil.leadingZero(g.toString(16), 2) + colorutil.leadingZero(b.toString(16), 2);\\n\\n    if (colorutil.isValidRGB(hexStr)) {\\n      return hexStr;\\n    }\\n\\n    return false;\\n  },\\n\\n  /**\\n   * Convert rgb number to HSV value\\n   * @param {number} r - red\\n   * @param {number} g - green\\n   * @param {number} b - blue\\n   * @returns {number[]} hsv value\\n   */\\n  rgbToHSV: function (r, g, b) {\\n    var max, min, h, s, v, d;\\n    r /= 255;\\n    g /= 255;\\n    b /= 255;\\n    max = Math.max(r, g, b);\\n    min = Math.min(r, g, b);\\n    v = max;\\n    d = max - min;\\n    s = max === 0 ? 0 : d / max;\\n\\n    if (max === min) {\\n      h = 0;\\n    } else {\\n      switch (max) {\\n        case r:\\n          h = (g - b) / d + (g < b ? 6 : 0);\\n          break;\\n\\n        case g:\\n          h = (b - r) / d + 2;\\n          break;\\n\\n        case b:\\n          h = (r - g) / d + 4;\\n          break;\\n        // no default\\n      }\\n\\n      h /= 6;\\n    }\\n\\n    return [Math.round(h * 360), Math.round(s * 100), Math.round(v * 100)];\\n  },\\n\\n  /**\\n   * Convert HSV number to RGB\\n   * @param {number} h - hue\\n   * @param {number} s - saturation\\n   * @param {number} v - value\\n   * @returns {number[]} rgb value\\n   */\\n  hsvToRGB: function (h, s, v) {\\n    var r, g, b;\\n    var i;\\n    var f, p, q, t;\\n    h = Math.max(0, Math.min(360, h));\\n    s = Math.max(0, Math.min(100, s));\\n    v = Math.max(0, Math.min(100, v));\\n    s /= 100;\\n    v /= 100;\\n\\n    if (s === 0) {\\n      // Achromatic (grey)\\n      r = g = b = v;\\n      return [Math.round(r * 255), Math.round(g * 255), Math.round(b * 255)];\\n    }\\n\\n    h /= 60; // sector 0 to 5\\n\\n    i = Math.floor(h);\\n    f = h - i; // factorial part of h\\n\\n    p = v * (1 - s);\\n    q = v * (1 - s * f);\\n    t = v * (1 - s * (1 - f));\\n\\n    switch (i) {\\n      case 0:\\n        r = v;\\n        g = t;\\n        b = p;\\n        break;\\n\\n      case 1:\\n        r = q;\\n        g = v;\\n        b = p;\\n        break;\\n\\n      case 2:\\n        r = p;\\n        g = v;\\n        b = t;\\n        break;\\n\\n      case 3:\\n        r = p;\\n        g = q;\\n        b = v;\\n        break;\\n\\n      case 4:\\n        r = t;\\n        g = p;\\n        b = v;\\n        break;\\n\\n      default:\\n        r = v;\\n        g = p;\\n        b = q;\\n        break;\\n    }\\n\\n    return [Math.round(r * 255), Math.round(g * 255), Math.round(b * 255)];\\n  }\\n};\\nmodule.exports = colorutil;\\n\\n//# sourceURL=webpack://tui.colorPicker/./src/js/colorutil.js?\")},\"./src/js/core/collection.js\":function(module,exports,__webpack_require__){\"use strict\";eval(\"/**\\n * @fileoverview Common collections.\\n * @author NHN. FE Development Team <dl_javascript@nhn.com>\\n */\\n\\n\\nvar snippet = __webpack_require__(/*! tui-code-snippet */ \\\"tui-code-snippet\\\");\\n\\nvar util = snippet,\\n    forEachProp = util.forEachOwnProperties,\\n    forEachArr = util.forEachArray,\\n    isFunc = util.isFunction,\\n    isObj = util.isObject;\\nvar aps = Array.prototype.slice;\\n/**\\n * Common collection.\\n *\\n * It need function for get model's unique id.\\n *\\n * if the function is not supplied then it use default function {@link Collection#getItemID}\\n * @constructor\\n * @param {function} [getItemIDFn] function for get model's id.\\n * @ignore\\n */\\n\\nfunction Collection(getItemIDFn) {\\n  /**\\n   * @type {object.<string, *>}\\n   */\\n  this.items = {};\\n  /**\\n   * @type {number}\\n   */\\n\\n  this.length = 0;\\n\\n  if (isFunc(getItemIDFn)) {\\n    /**\\n     * @type {function}\\n     */\\n    this.getItemID = getItemIDFn;\\n  }\\n}\\n/**********\\n * static props\\n **********/\\n\\n/**\\n * Combind supplied function filters and condition.\\n * @param {...function} filters - function filters\\n * @returns {function} combined filter\\n */\\n\\n\\nCollection.and = function (filters) {\\n  var cnt;\\n  filters = aps.call(arguments);\\n  cnt = filters.length;\\n  return function (item) {\\n    var i = 0;\\n\\n    for (; i < cnt; i += 1) {\\n      if (!filters[i].call(null, item)) {\\n        return false;\\n      }\\n    }\\n\\n    return true;\\n  };\\n};\\n/**\\n * Combine multiple function filters with OR clause.\\n * @param {...function} filters - function filters\\n * @returns {function} combined filter\\n */\\n\\n\\nCollection.or = function (filters) {\\n  var cnt;\\n  filters = aps.call(arguments);\\n  cnt = filters.length;\\n  return function (item) {\\n    var i = 1,\\n        result = filters[0].call(null, item);\\n\\n    for (; i < cnt; i += 1) {\\n      result = result || filters[i].call(null, item);\\n    }\\n\\n    return result;\\n  };\\n};\\n/**\\n * Merge several collections.\\n *\\n * You can\\\\'t merge collections different _getEventID functions. Take case of use.\\n * @param {...Collection} collections collection arguments to merge\\n * @returns {Collection} merged collection.\\n */\\n// eslint-disable-next-line no-unused-vars\\n\\n\\nCollection.merge = function (collections) {\\n  // eslint-disable-line\\n  var cols = aps.call(arguments),\\n      newItems = {},\\n      merged = new Collection(cols[0].getItemID),\\n      extend = util.extend;\\n  forEachArr(cols, function (col) {\\n    extend(newItems, col.items);\\n  });\\n  merged.items = newItems;\\n  merged.length = util.keys(merged.items).length;\\n  return merged;\\n};\\n/**********\\n * prototype props\\n **********/\\n\\n/**\\n * get model's unique id.\\n * @param {object} item model instance.\\n * @returns {number} model unique id.\\n */\\n\\n\\nCollection.prototype.getItemID = function (item) {\\n  return item._id + '';\\n};\\n/**\\n * add models.\\n * @param {...*} item models to add this collection.\\n */\\n\\n\\nCollection.prototype.add = function (item) {\\n  var id, ownItems;\\n\\n  if (arguments.length > 1) {\\n    forEachArr(aps.call(arguments), function (o) {\\n      this.add(o);\\n    }, this);\\n    return;\\n  }\\n\\n  id = this.getItemID(item);\\n  ownItems = this.items;\\n\\n  if (!ownItems[id]) {\\n    this.length += 1;\\n  }\\n\\n  ownItems[id] = item;\\n};\\n/**\\n * remove models.\\n * @param {...(object|string|number)} id model instance or unique id to delete.\\n * @returns {array} deleted model list.\\n */\\n\\n\\nCollection.prototype.remove = function (id) {\\n  var removed = [],\\n      ownItems,\\n      itemToRemove;\\n\\n  if (!this.length) {\\n    return removed;\\n  }\\n\\n  if (arguments.length > 1) {\\n    removed = util.map(aps.call(arguments), function (id) {\\n      return this.remove(id);\\n    }, this);\\n    return removed;\\n  }\\n\\n  ownItems = this.items;\\n\\n  if (isObj(id)) {\\n    id = this.getItemID(id);\\n  }\\n\\n  if (!ownItems[id]) {\\n    return removed;\\n  }\\n\\n  this.length -= 1;\\n  itemToRemove = ownItems[id];\\n  delete ownItems[id];\\n  return itemToRemove;\\n};\\n/**\\n * remove all models in collection.\\n */\\n\\n\\nCollection.prototype.clear = function () {\\n  this.items = {};\\n  this.length = 0;\\n};\\n/**\\n * check collection has specific model.\\n * @param {(object|string|number|function)} id model instance or id or filter function to check\\n * @returns {boolean} is has model?\\n */\\n\\n\\nCollection.prototype.has = function (id) {\\n  var isFilter, has;\\n\\n  if (!this.length) {\\n    return false;\\n  }\\n\\n  isFilter = isFunc(id);\\n  has = false;\\n\\n  if (isFilter) {\\n    this.each(function (item) {\\n      if (id(item) === true) {\\n        has = true;\\n        return false;\\n      }\\n\\n      return true;\\n    });\\n  } else {\\n    id = isObj(id) ? this.getItemID(id) : id;\\n    has = util.isExisty(this.items[id]);\\n  }\\n\\n  return has;\\n};\\n/**\\n * invoke callback when model exist in collection.\\n * @param {(string|number)} id model unique id.\\n * @param {function} fn the callback.\\n * @param {*} [context] callback context.\\n */\\n\\n\\nCollection.prototype.doWhenHas = function (id, fn, context) {\\n  var item = this.items[id];\\n\\n  if (!util.isExisty(item)) {\\n    return;\\n  }\\n\\n  fn.call(context || this, item);\\n};\\n/**\\n * Search model. and return new collection.\\n * @param {function} filter filter function.\\n * @returns {Collection} new collection with filtered models.\\n * @example\\n * collection.find(function(item) {\\n *     return item.edited === true;\\n * });\\n *\\n * function filter1(item) {\\n *     return item.edited === false;\\n * }\\n *\\n * function filter2(item) {\\n *     return item.disabled === false;\\n * }\\n *\\n * collection.find(Collection.and(filter1, filter2));\\n *\\n * collection.find(Collection.or(filter1, filter2));\\n */\\n\\n\\nCollection.prototype.find = function (filter) {\\n  var result = new Collection();\\n\\n  if (this.hasOwnProperty('getItemID')) {\\n    result.getItemID = this.getItemID;\\n  }\\n\\n  this.each(function (item) {\\n    if (filter(item) === true) {\\n      result.add(item);\\n    }\\n  });\\n  return result;\\n};\\n/**\\n * Group element by specific key values.\\n *\\n * if key parameter is function then invoke it and use returned value.\\n * @param {(string|number|function|array)} key key property or getter function. if string[] supplied, create each collection before grouping.\\n * @param {function} [groupFunc] - function that return each group's key\\n * @returns {object.<string, Collection>} grouped object\\n * @example\\n *\\n * // pass `string`, `number`, `boolean` type value then group by property value.\\n * collection.groupBy('gender');    // group by 'gender' property value.\\n * collection.groupBy(50);          // group by '50' property value.\\n *\\n * // pass `function` then group by return value. each invocation `function` is called with `(item)`.\\n * collection.groupBy(function(item) {\\n *     if (item.score > 60) {\\n *         return 'pass';\\n *     }\\n *     return 'fail';\\n * });\\n *\\n * // pass `array` with first arguments then create each collection before grouping.\\n * collection.groupBy(['go', 'ruby', 'javascript']);\\n * // result: { 'go': empty Collection, 'ruby': empty Collection, 'javascript': empty Collection }\\n *\\n * // can pass `function` with `array` then group each elements.\\n * collection.groupBy(['go', 'ruby', 'javascript'], function(item) {\\n *     if (item.isFast) {\\n *         return 'go';\\n *     }\\n *\\n *     return item.name;\\n * });\\n */\\n\\n\\nCollection.prototype.groupBy = function (key, groupFunc) {\\n  var result = {},\\n      collection,\\n      baseValue,\\n      keyIsFunc = isFunc(key),\\n      getItemIDFn = this.getItemID;\\n\\n  if (util.isArray(key)) {\\n    util.forEachArray(key, function (k) {\\n      result[k + ''] = new Collection(getItemIDFn);\\n    });\\n\\n    if (!groupFunc) {\\n      return result;\\n    }\\n\\n    key = groupFunc;\\n    keyIsFunc = true;\\n  }\\n\\n  this.each(function (item) {\\n    if (keyIsFunc) {\\n      baseValue = key(item);\\n    } else {\\n      baseValue = item[key];\\n\\n      if (isFunc(baseValue)) {\\n        baseValue = baseValue.apply(item);\\n      }\\n    }\\n\\n    collection = result[baseValue];\\n\\n    if (!collection) {\\n      collection = result[baseValue] = new Collection(getItemIDFn);\\n    }\\n\\n    collection.add(item);\\n  });\\n  return result;\\n};\\n/**\\n * Return single item in collection.\\n *\\n * Returned item is inserted in this collection firstly.\\n * @returns {object} item.\\n */\\n\\n\\nCollection.prototype.single = function () {\\n  var result;\\n  this.each(function (item) {\\n    result = item;\\n    return false;\\n  }, this);\\n  return result;\\n};\\n/**\\n * sort a basis of supplied compare function.\\n * @param {function} compareFunction compareFunction\\n * @returns {array} sorted array.\\n */\\n\\n\\nCollection.prototype.sort = function (compareFunction) {\\n  var arr = [];\\n  this.each(function (item) {\\n    arr.push(item);\\n  });\\n\\n  if (isFunc(compareFunction)) {\\n    arr = arr.sort(compareFunction);\\n  }\\n\\n  return arr;\\n};\\n/**\\n * iterate each model element.\\n *\\n * when iteratee return false then break the loop.\\n * @param {function} iteratee iteratee(item, index, items)\\n * @param {*} [context] context\\n */\\n\\n\\nCollection.prototype.each = function (iteratee, context) {\\n  forEachProp(this.items, iteratee, context || this);\\n};\\n/**\\n * return new array with collection items.\\n * @returns {array} new array.\\n */\\n\\n\\nCollection.prototype.toArray = function () {\\n  if (!this.length) {\\n    return [];\\n  }\\n\\n  return util.map(this.items, function (item) {\\n    return item;\\n  });\\n};\\n\\nmodule.exports = Collection;\\n\\n//# sourceURL=webpack://tui.colorPicker/./src/js/core/collection.js?\")},\"./src/js/core/domevent.js\":function(module,exports,__webpack_require__){\"use strict\";eval(\"/**\\n * @fileoverview Utility module for handling DOM events.\\n * @author NHN. FE Development Team <dl_javascript@nhn.com>\\n */\\n\\n\\nvar snippet = __webpack_require__(/*! tui-code-snippet */ \\\"tui-code-snippet\\\");\\n\\nvar util = snippet,\\n    browser = util.browser,\\n    eventKey = '_evt',\\n    DRAG = {\\n  START: ['touchstart', 'mousedown'],\\n  END: {\\n    mousedown: 'mouseup',\\n    touchstart: 'touchend',\\n    pointerdown: 'touchend',\\n    MSPointerDown: 'touchend'\\n  },\\n  MOVE: {\\n    mousedown: 'mousemove',\\n    touchstart: 'touchmove',\\n    pointerdown: 'touchmove',\\n    MSPointerDown: 'touchmove'\\n  }\\n};\\nvar domevent = {\\n  /**\\n   * Bind dom events.\\n   * @param {HTMLElement} obj HTMLElement to bind events.\\n   * @param {(string|object)} types Space splitted events names or eventName:handler object.\\n   * @param {*} fn handler function or context for handler method.\\n   * @param {*} [context] context object for handler method.\\n   */\\n  on: function (obj, types, fn, context) {\\n    if (util.isString(types)) {\\n      util.forEach(types.split(' '), function (type) {\\n        domevent._on(obj, type, fn, context);\\n      });\\n      return;\\n    }\\n\\n    util.forEachOwnProperties(types, function (handler, type) {\\n      domevent._on(obj, type, handler, fn);\\n    });\\n  },\\n\\n  /**\\n   * DOM event binding.\\n   * @param {HTMLElement} obj HTMLElement to bind events.\\n   * @param {String} type The name of events.\\n   * @param {*} fn handler function\\n   * @param {*} [context] context object for handler method.\\n   * @private\\n   */\\n  _on: function (obj, type, fn, context) {\\n    var id, handler, originHandler;\\n    id = type + util.stamp(fn) + (context ? '_' + util.stamp(context) : '');\\n\\n    if (obj[eventKey] && obj[eventKey][id]) {\\n      return;\\n    }\\n\\n    handler = function (e) {\\n      fn.call(context || obj, e || window.event);\\n    };\\n\\n    originHandler = handler;\\n\\n    if ('addEventListener' in obj) {\\n      if (type === 'mouseenter' || type === 'mouseleave') {\\n        handler = function (e) {\\n          e = e || window.event;\\n\\n          if (!domevent._checkMouse(obj, e)) {\\n            return;\\n          }\\n\\n          originHandler(e);\\n        };\\n\\n        obj.addEventListener(type === 'mouseenter' ? 'mouseover' : 'mouseout', handler, false);\\n      } else {\\n        if (type === 'mousewheel') {\\n          obj.addEventListener('DOMMouseScroll', handler, false);\\n        }\\n\\n        obj.addEventListener(type, handler, false);\\n      }\\n    } else if ('attachEvent' in obj) {\\n      obj.attachEvent('on' + type, handler);\\n    }\\n\\n    obj[eventKey] = obj[eventKey] || {};\\n    obj[eventKey][id] = handler;\\n  },\\n\\n  /**\\n   * Unbind DOM Event handler.\\n   * @param {HTMLElement} obj HTMLElement to unbind.\\n   * @param {(string|object)} types Space splitted events names or eventName:handler object.\\n   * @param {*} fn handler function or context for handler method.\\n   * @param {*} [context] context object for handler method.\\n   */\\n  off: function (obj, types, fn, context) {\\n    if (util.isString(types)) {\\n      util.forEach(types.split(' '), function (type) {\\n        domevent._off(obj, type, fn, context);\\n      });\\n      return;\\n    }\\n\\n    util.forEachOwnProperties(types, function (handler, type) {\\n      domevent._off(obj, type, handler, fn);\\n    });\\n  },\\n\\n  /**\\n   * Unbind DOM event handler.\\n   * @param {HTMLElement} obj HTMLElement to unbind.\\n   * @param {String} type The name of event to unbind.\\n   * @param {function()} fn Event handler that supplied when binding.\\n   * @param {*} context context object that supplied when binding.\\n   * @private\\n   */\\n  _off: function (obj, type, fn, context) {\\n    var id = type + util.stamp(fn) + (context ? '_' + util.stamp(context) : ''),\\n        handler = obj[eventKey] && obj[eventKey][id];\\n\\n    if (!handler) {\\n      return;\\n    }\\n\\n    if ('removeEventListener' in obj) {\\n      if (type === 'mouseenter' || type === 'mouseleave') {\\n        obj.removeEventListener(type === 'mouseenter' ? 'mouseover' : 'mouseout', handler, false);\\n      } else {\\n        if (type === 'mousewheel') {\\n          obj.removeEventListener('DOMMouseScroll', handler, false);\\n        }\\n\\n        obj.removeEventListener(type, handler, false);\\n      }\\n    } else if ('detachEvent' in obj) {\\n      try {\\n        obj.detachEvent('on' + type, handler);\\n      } catch (e) {} //eslint-disable-line\\n\\n    }\\n\\n    delete obj[eventKey][id];\\n\\n    if (util.keys(obj[eventKey]).length) {\\n      return;\\n    } // throw exception when deleting host object's property in below IE8\\n\\n\\n    if (util.browser.msie && util.browser.version < 9) {\\n      obj[eventKey] = null;\\n      return;\\n    }\\n\\n    delete obj[eventKey];\\n  },\\n\\n  /**\\n   * Bind DOM event. this event will unbind after invokes.\\n   * @param {HTMLElement} obj HTMLElement to bind events.\\n   * @param {(string|object)} types Space splitted events names or eventName:handler object.\\n   * @param {*} fn handler function or context for handler method.\\n   * @param {*} [context] context object for handler method.\\n   */\\n  once: function (obj, types, fn, context) {\\n    var that = this;\\n\\n    if (util.isObject(types)) {\\n      util.forEachOwnProperties(types, function (handler, type) {\\n        domevent.once(obj, type, handler, fn);\\n      });\\n      return;\\n    }\\n\\n    function onceHandler() {\\n      fn.apply(context || obj, arguments);\\n\\n      that._off(obj, types, onceHandler, context);\\n    }\\n\\n    domevent.on(obj, types, onceHandler, context);\\n  },\\n\\n  /**\\n   * Cancel event bubbling.\\n   * @param {Event} e Event object.\\n   */\\n  stopPropagation: function (e) {\\n    if (e.stopPropagation) {\\n      e.stopPropagation();\\n    } else {\\n      e.cancelBubble = true;\\n    }\\n  },\\n\\n  /**\\n   * Cancel browser default actions.\\n   * @param {Event} e Event object.\\n   */\\n  preventDefault: function (e) {\\n    if (e.preventDefault) {\\n      e.preventDefault();\\n    } else {\\n      e.returnValue = false;\\n    }\\n  },\\n\\n  /**\\n   * Syntatic sugar of stopPropagation and preventDefault\\n   * @param {Event} e Event object.\\n   */\\n  stop: function (e) {\\n    domevent.preventDefault(e);\\n    domevent.stopPropagation(e);\\n  },\\n\\n  /**\\n   * Stop scroll events.\\n   * @param {HTMLElement} el HTML element to prevent scroll.\\n   */\\n  disableScrollPropagation: function (el) {\\n    domevent.on(el, 'mousewheel MozMousePixelScroll', domevent.stopPropagation);\\n  },\\n\\n  /**\\n   * Stop all events related with click.\\n   * @param {HTMLElement} el HTML element to prevent all event related with click.\\n   */\\n  disableClickPropagation: function (el) {\\n    domevent.on(el, DRAG.START.join(' ') + ' click dblclick', domevent.stopPropagation);\\n  },\\n\\n  /**\\n   * Get mouse position from mouse event.\\n   *\\n   * If supplied relatveElement parameter then return relative position based on element.\\n   * @param {Event} mouseEvent Mouse event object\\n   * @param {HTMLElement} relativeElement HTML element that calculate relative position.\\n   * @returns {number[]} mouse position.\\n   */\\n  getMousePosition: function (mouseEvent, relativeElement) {\\n    var rect;\\n\\n    if (!relativeElement) {\\n      return [mouseEvent.clientX, mouseEvent.clientY];\\n    }\\n\\n    rect = relativeElement.getBoundingClientRect();\\n    return [mouseEvent.clientX - rect.left - relativeElement.clientLeft, mouseEvent.clientY - rect.top - relativeElement.clientTop];\\n  },\\n\\n  /**\\n   * Normalize mouse wheel event that different each browsers.\\n   * @param {MouseEvent} e Mouse wheel event.\\n   * @returns {Number} delta\\n   */\\n  getWheelDelta: function (e) {\\n    var delta = 0;\\n\\n    if (e.wheelDelta) {\\n      delta = e.wheelDelta / 120;\\n    }\\n\\n    if (e.detail) {\\n      delta = -e.detail / 3;\\n    }\\n\\n    return delta;\\n  },\\n\\n  /**\\n   * prevent firing mouseleave event when mouse entered child elements.\\n   * @param {HTMLElement} el HTML element\\n   * @param {MouseEvent} e Mouse event\\n   * @returns {Boolean} leave?\\n   * @private\\n   */\\n  _checkMouse: function (el, e) {\\n    var related = e.relatedTarget;\\n\\n    if (!related) {\\n      return true;\\n    }\\n\\n    try {\\n      while (related && related !== el) {\\n        related = related.parentNode;\\n      }\\n    } catch (err) {\\n      return false;\\n    }\\n\\n    return related !== el;\\n  },\\n\\n  /**\\n   * Trigger specific events to html element.\\n   * @param {HTMLElement} obj HTMLElement\\n   * @param {string} type Event type name\\n   * @param {object} [eventData] Event data\\n   */\\n  trigger: function (obj, type, eventData) {\\n    var rMouseEvent = /(mouse|click)/;\\n\\n    if (util.isUndefined(eventData) && rMouseEvent.exec(type)) {\\n      eventData = domevent.mouseEvent(type);\\n    }\\n\\n    if (obj.dispatchEvent) {\\n      obj.dispatchEvent(eventData);\\n    } else if (obj.fireEvent) {\\n      obj.fireEvent('on' + type, eventData);\\n    }\\n  },\\n\\n  /**\\n   * Create virtual mouse event.\\n   *\\n   * Tested at\\n   *\\n   * - IE7 ~ IE11\\n   * - Chrome\\n   * - Firefox\\n   * - Safari\\n   * @param {string} type Event type\\n   * @param {object} [eventObj] Event data\\n   * @returns {MouseEvent} Virtual mouse event.\\n   */\\n  mouseEvent: function (type, eventObj) {\\n    var evt, e;\\n    e = util.extend({\\n      bubbles: true,\\n      cancelable: type !== 'mousemove',\\n      view: window,\\n      wheelDelta: 0,\\n      detail: 0,\\n      screenX: 0,\\n      screenY: 0,\\n      clientX: 0,\\n      clientY: 0,\\n      ctrlKey: false,\\n      altKey: false,\\n      shiftKey: false,\\n      metaKey: false,\\n      button: 0,\\n      relatedTarget: undefined // eslint-disable-line\\n\\n    }, eventObj); // prevent throw error when inserting wheelDelta property to mouse event on below IE8\\n\\n    if (browser.msie && browser.version < 9) {\\n      delete e.wheelDelta;\\n    }\\n\\n    if (typeof document.createEvent === 'function') {\\n      evt = document.createEvent('MouseEvents');\\n      evt.initMouseEvent(type, e.bubbles, e.cancelable, e.view, e.detail, e.screenX, e.screenY, e.clientX, e.clientY, e.ctrlKey, e.altKey, e.shiftKey, e.metaKey, e.button, document.body.parentNode);\\n    } else if (document.createEventObject) {\\n      evt = document.createEventObject();\\n      util.forEach(e, function (value, propName) {\\n        evt[propName] = value;\\n      }, this);\\n      evt.button = {\\n        0: 1,\\n        1: 4,\\n        2: 2\\n      }[evt.button] || evt.button;\\n    }\\n\\n    return evt;\\n  },\\n\\n  /**\\n   * Normalize mouse event's button attributes.\\n   *\\n   * Can detect which button is clicked by this method.\\n   *\\n   * Meaning of return numbers\\n   *\\n   * - 0: primary mouse button\\n   * - 1: wheel button or center button\\n   * - 2: secondary mouse button\\n   * @param {MouseEvent} mouseEvent - The mouse event object want to know.\\n   * @returns {number} - The value of meaning which button is clicked?\\n   */\\n  getMouseButton: function (mouseEvent) {\\n    var primary = '0,1,3,5,7';\\n    var secondary = '2,6';\\n    var wheel = '4';\\n    var button, result;\\n    /* istanbul ignore else */\\n\\n    if (document.implementation.hasFeature('MouseEvents', '2.0')) {\\n      return mouseEvent.button;\\n    }\\n\\n    button = mouseEvent.button + '';\\n\\n    if (~primary.indexOf(button)) {\\n      result = 0;\\n    } else if (~secondary.indexOf(button)) {\\n      result = 2;\\n    } else if (~wheel.indexOf(button)) {\\n      result = 1;\\n    }\\n\\n    return result;\\n  }\\n};\\nmodule.exports = domevent;\\n\\n//# sourceURL=webpack://tui.colorPicker/./src/js/core/domevent.js?\")},\"./src/js/core/domutil.js\":function(module,exports,__webpack_require__){\"use strict\";eval(\"/**\\n * @fileoverview Utility modules for manipulate DOM elements.\\n * @author NHN. FE Development Team <dl_javascript@nhn.com>\\n */\\n\\n\\nvar snippet = __webpack_require__(/*! tui-code-snippet */ \\\"tui-code-snippet\\\");\\n\\nvar domevent = __webpack_require__(/*! ./domevent */ \\\"./src/js/core/domevent.js\\\");\\n\\nvar Collection = __webpack_require__(/*! ./collection */ \\\"./src/js/core/collection.js\\\");\\n\\nvar util = snippet,\\n    posKey = '_pos',\\n    supportSelectStart = 'onselectstart' in document,\\n    prevSelectStyle = '',\\n    domutil,\\n    userSelectProperty;\\nvar CSS_AUTO_REGEX = /^auto$|^$|%/;\\n\\nfunction trim(str) {\\n  return str.replace(/^\\\\s\\\\s*/, '').replace(/\\\\s\\\\s*$/, '');\\n}\\n\\ndomutil = {\\n  /**\\n   * Create DOM element and return it.\\n   * @param {string} tagName Tag name to append.\\n   * @param {HTMLElement} [container] HTML element will be parent to created element.\\n   * if not supplied, will use **document.body**\\n   * @param {string} [className] Design class names to appling created element.\\n   * @returns {HTMLElement} HTML element created.\\n   */\\n  appendHTMLElement: function (tagName, container, className) {\\n    var el;\\n    className = className || '';\\n    el = document.createElement(tagName);\\n    el.className = className;\\n\\n    if (container) {\\n      container.appendChild(el);\\n    } else {\\n      document.body.appendChild(el);\\n    }\\n\\n    return el;\\n  },\\n\\n  /**\\n   * Remove element from parent node.\\n   * @param {HTMLElement} el - element to remove.\\n   */\\n  remove: function (el) {\\n    if (el && el.parentNode) {\\n      el.parentNode.removeChild(el);\\n    }\\n  },\\n\\n  /**\\n   * Get element by id\\n   * @param {string} id element id attribute\\n   * @returns {HTMLElement} element\\n   */\\n  get: function (id) {\\n    return document.getElementById(id);\\n  },\\n\\n  /**\\n   * Check supplied element is matched selector.\\n   * @param {HTMLElement} el - element to check\\n   * @param {string} selector - selector string to check\\n   * @returns {boolean} match?\\n   */\\n  _matcher: function (el, selector) {\\n    var cssClassSelector = /^\\\\./;\\n    var idSelector = /^#/;\\n    var result = el.nodeName.toLowerCase() === selector.toLowerCase();\\n\\n    if (cssClassSelector.test(selector)) {\\n      result = domutil.hasClass(el, selector.replace('.', ''));\\n    } else if (idSelector.test(selector)) {\\n      result = el.id === selector.replace('#', '');\\n    }\\n\\n    return result;\\n  },\\n\\n  /**\\n   * Find DOM element by specific selectors.\\n   * below three selector only supported.\\n   *\\n   * 1. css selector\\n   * 2. id selector\\n   * 3. nodeName selector\\n   * @param {string} selector selector\\n   * @param {(HTMLElement|string)} [root] You can assign root element to find. if not supplied, document.body will use.\\n   * @param {boolean|function} [multiple=false] - set true then return all elements that meet condition, if set function then use it filter function.\\n   * @returns {HTMLElement} HTML element finded.\\n   */\\n  find: function (selector, root, multiple) {\\n    var result = [],\\n        found = false,\\n        isFirst = util.isUndefined(multiple) || multiple === false,\\n        isFilter = util.isFunction(multiple);\\n\\n    if (util.isString(root)) {\\n      root = domutil.get(root);\\n    }\\n\\n    root = root || window.document.body;\\n\\n    function recurse(el, selector) {\\n      var childNodes = el.childNodes,\\n          i = 0,\\n          len = childNodes.length,\\n          cursor;\\n\\n      for (; i < len; i += 1) {\\n        cursor = childNodes[i];\\n\\n        if (cursor.nodeName === '#text') {\\n          continue;\\n        }\\n\\n        if (domutil._matcher(cursor, selector)) {\\n          if (isFilter && multiple(cursor) || !isFilter) {\\n            result.push(cursor);\\n          }\\n\\n          if (isFirst) {\\n            found = true;\\n            break;\\n          }\\n        } else if (cursor.childNodes.length > 0) {\\n          recurse(cursor, selector);\\n\\n          if (found) {\\n            break;\\n          }\\n        }\\n      }\\n    }\\n\\n    recurse(root, selector);\\n    return isFirst ? result[0] || null : result;\\n  },\\n\\n  /**\\n   * Find parent element recursively.\\n   * @param {HTMLElement} el - base element to start find.\\n   * @param {string} selector - selector string for find\\n   * @returns {HTMLElement} - element finded or undefined.\\n   */\\n  closest: function (el, selector) {\\n    var parent = el.parentNode;\\n\\n    if (domutil._matcher(el, selector)) {\\n      return el;\\n    }\\n\\n    while (parent && parent !== window.document.body) {\\n      if (domutil._matcher(parent, selector)) {\\n        return parent;\\n      }\\n\\n      parent = parent.parentNode;\\n    }\\n  },\\n\\n  /**\\n   * Return texts inside element.\\n   * @param {HTMLElement} el target element\\n   * @returns {string} text inside node\\n   */\\n  text: function (el) {\\n    var ret = '',\\n        i = 0,\\n        nodeType = el.nodeType;\\n\\n    if (nodeType) {\\n      if (nodeType === 1 || nodeType === 9 || nodeType === 11) {\\n        // nodes that available contain other nodes\\n        if (typeof el.textContent === 'string') {\\n          return el.textContent;\\n        }\\n\\n        for (el = el.firstChild; el; el = el.nextSibling) {\\n          ret += domutil.text(el);\\n        }\\n      } else if (nodeType === 3 || nodeType === 4) {\\n        // TEXT, CDATA SECTION\\n        return el.nodeValue;\\n      }\\n    } else {\\n      for (; el[i]; i += 1) {\\n        ret += domutil.text(el[i]);\\n      }\\n    }\\n\\n    return ret;\\n  },\\n\\n  /**\\n   * Set data attribute to target element\\n   * @param {HTMLElement} el - element to set data attribute\\n   * @param {string} key - key\\n   * @param {string|number} data - data value\\n   */\\n  setData: function (el, key, data) {\\n    if ('dataset' in el) {\\n      el.dataset[key] = data;\\n      return;\\n    }\\n\\n    el.setAttribute('data-' + key, data);\\n  },\\n\\n  /**\\n   * Get data value from data-attribute\\n   * @param {HTMLElement} el - target element\\n   * @param {string} key - key\\n   * @returns {string} value\\n   */\\n  getData: function (el, key) {\\n    if ('dataset' in el) {\\n      return el.dataset[key];\\n    }\\n\\n    return el.getAttribute('data-' + key);\\n  },\\n\\n  /**\\n   * Check element has specific design class name.\\n   * @param {HTMLElement} el target element\\n   * @param {string} name css class\\n   * @returns {boolean} return true when element has that css class name\\n   */\\n  hasClass: function (el, name) {\\n    var className;\\n\\n    if (!util.isUndefined(el.classList)) {\\n      return el.classList.contains(name);\\n    }\\n\\n    className = domutil.getClass(el);\\n    return className.length > 0 && new RegExp('(^|\\\\\\\\s)' + name + '(\\\\\\\\s|$)').test(className);\\n  },\\n\\n  /**\\n   * Add design class to HTML element.\\n   * @param {HTMLElement} el target element\\n   * @param {string} name css class name\\n   */\\n  addClass: function (el, name) {\\n    var className;\\n\\n    if (!util.isUndefined(el.classList)) {\\n      util.forEachArray(name.split(' '), function (value) {\\n        el.classList.add(value);\\n      });\\n    } else if (!domutil.hasClass(el, name)) {\\n      className = domutil.getClass(el);\\n      domutil.setClass(el, (className ? className + ' ' : '') + name);\\n    }\\n  },\\n\\n  /**\\n   *\\n   * Overwrite design class to HTML element.\\n   * @param {HTMLElement} el target element\\n   * @param {string} name css class name\\n   */\\n  setClass: function (el, name) {\\n    if (util.isUndefined(el.className.baseVal)) {\\n      el.className = name;\\n    } else {\\n      el.className.baseVal = name;\\n    }\\n  },\\n\\n  /**\\n   * Element\\uc5d0 cssClass\\uc18d\\uc131\\uc744 \\uc81c\\uac70\\ud558\\ub294 \\uba54\\uc11c\\ub4dc\\n   * Remove specific design class from HTML element.\\n   * @param {HTMLElement} el target element\\n   * @param {string} name class name to remove\\n   */\\n  removeClass: function (el, name) {\\n    var removed = '';\\n\\n    if (!util.isUndefined(el.classList)) {\\n      el.classList.remove(name);\\n    } else {\\n      removed = (' ' + domutil.getClass(el) + ' ').replace(' ' + name + ' ', ' ');\\n      domutil.setClass(el, trim(removed));\\n    }\\n  },\\n\\n  /**\\n   * Get HTML element's design classes.\\n   * @param {HTMLElement} el target element\\n   * @returns {string} element css class name\\n   */\\n  getClass: function (el) {\\n    if (!el || !el.className) {\\n      return '';\\n    }\\n\\n    return util.isUndefined(el.className.baseVal) ? el.className : el.className.baseVal;\\n  },\\n\\n  /**\\n   * Get specific CSS style value from HTML element.\\n   * @param {HTMLElement} el target element\\n   * @param {string} style css attribute name\\n   * @returns {(string|null)} css style value\\n   */\\n  getStyle: function (el, style) {\\n    var value = el.style[style] || el.currentStyle && el.currentStyle[style],\\n        css;\\n\\n    if ((!value || value === 'auto') && document.defaultView) {\\n      css = document.defaultView.getComputedStyle(el, null);\\n      value = css ? css[style] : null;\\n    }\\n\\n    return value === 'auto' ? null : value;\\n  },\\n\\n  /**\\n   * get element's computed style values.\\n   *\\n   * in lower IE8. use polyfill function that return object. it has only one function 'getPropertyValue'\\n   * @param {HTMLElement} el - element want to get style.\\n   * @returns {object} virtual CSSStyleDeclaration object.\\n   */\\n  getComputedStyle: function (el) {\\n    var defaultView = document.defaultView;\\n\\n    if (!defaultView || !defaultView.getComputedStyle) {\\n      return {\\n        getPropertyValue: function (prop) {\\n          var re = /(\\\\-([a-z]){1})/g;\\n\\n          if (prop === 'float') {\\n            prop = 'styleFloat';\\n          }\\n\\n          if (re.test(prop)) {\\n            prop = prop.replace(re, function () {\\n              return arguments[2].toUpperCase();\\n            });\\n          }\\n\\n          return el.currentStyle[prop] ? el.currentStyle[prop] : null;\\n        }\\n      };\\n    }\\n\\n    return document.defaultView.getComputedStyle(el);\\n  },\\n\\n  /**\\n   * Set position CSS style.\\n   * @param {HTMLElement} el target element\\n   * @param {number} [x=0] left pixel value.\\n   * @param {number} [y=0] top pixel value.\\n   */\\n  setPosition: function (el, x, y) {\\n    x = util.isUndefined(x) ? 0 : x;\\n    y = util.isUndefined(y) ? 0 : y;\\n    el[posKey] = [x, y];\\n    el.style.left = x + 'px';\\n    el.style.top = y + 'px';\\n  },\\n\\n  /**\\n   * Get position from HTML element.\\n   * @param {HTMLElement} el target element\\n   * @param {boolean} [clear=false] clear cache before calculating position.\\n   * @returns {number[]} point\\n   */\\n  getPosition: function (el, clear) {\\n    var left, top, bound;\\n\\n    if (clear) {\\n      el[posKey] = null;\\n    }\\n\\n    if (el[posKey]) {\\n      return el[posKey];\\n    }\\n\\n    left = 0;\\n    top = 0;\\n\\n    if ((CSS_AUTO_REGEX.test(el.style.left) || CSS_AUTO_REGEX.test(el.style.top)) && 'getBoundingClientRect' in el) {\\n      // \\uc5d8\\ub9ac\\uba3c\\ud2b8\\uc758 left\\ub610\\ub294 top\\uc774 'auto'\\uc77c \\ub54c \\uc218\\ub2e8\\n      bound = el.getBoundingClientRect();\\n      left = bound.left;\\n      top = bound.top;\\n    } else {\\n      left = parseFloat(el.style.left || 0);\\n      top = parseFloat(el.style.top || 0);\\n    }\\n\\n    return [left, top];\\n  },\\n\\n  /**\\n   * Return element's size\\n   * @param {HTMLElement} el target element\\n   * @returns {number[]} width, height\\n   */\\n  getSize: function (el) {\\n    var bound,\\n        width = domutil.getStyle(el, 'width'),\\n        height = domutil.getStyle(el, 'height');\\n\\n    if ((CSS_AUTO_REGEX.test(width) || CSS_AUTO_REGEX.test(height)) && 'getBoundingClientRect' in el) {\\n      bound = el.getBoundingClientRect();\\n      width = bound.width;\\n      height = bound.height;\\n    } else {\\n      width = parseFloat(width || 0);\\n      height = parseFloat(height || 0);\\n    }\\n\\n    return [width, height];\\n  },\\n\\n  /**\\n   * Check specific CSS style is available.\\n   * @param {array} props property name to testing\\n   * @returns {(string|boolean)} return true when property is available\\n   * @example\\n   * var props = ['transform', '-webkit-transform'];\\n   * domutil.testProp(props);    // 'transform'\\n   */\\n  testProp: function (props) {\\n    var style = document.documentElement.style,\\n        i = 0,\\n        len = props.length;\\n\\n    for (; i < len; i += 1) {\\n      if (props[i] in style) {\\n        return props[i];\\n      }\\n    }\\n\\n    return false;\\n  },\\n\\n  /**\\n   * Get form data\\n   * @param {HTMLFormElement} formElement - form element to extract data\\n   * @returns {object} form data\\n   */\\n  getFormData: function (formElement) {\\n    var groupedByName = new Collection(function () {\\n      return this.length;\\n    }),\\n        noDisabledFilter = function (el) {\\n      return !el.disabled;\\n    },\\n        output = {};\\n\\n    groupedByName.add.apply(groupedByName, domutil.find('input', formElement, noDisabledFilter).concat(domutil.find('select', formElement, noDisabledFilter)).concat(domutil.find('textarea', formElement, noDisabledFilter)));\\n    groupedByName = groupedByName.groupBy(function (el) {\\n      return el && el.getAttribute('name') || '_other';\\n    });\\n    util.forEach(groupedByName, function (elements, name) {\\n      if (name === '_other') {\\n        return;\\n      }\\n\\n      elements.each(function (el) {\\n        var nodeName = el.nodeName.toLowerCase(),\\n            type = el.type,\\n            result = [];\\n\\n        if (type === 'radio') {\\n          result = [elements.find(function (el) {\\n            return el.checked;\\n          }).toArray().pop()];\\n        } else if (type === 'checkbox') {\\n          result = elements.find(function (el) {\\n            return el.checked;\\n          }).toArray();\\n        } else if (nodeName === 'select') {\\n          elements.find(function (el) {\\n            return !!el.childNodes.length;\\n          }).each(function (el) {\\n            result = result.concat(domutil.find('option', el, function (opt) {\\n              return opt.selected;\\n            }));\\n          });\\n        } else {\\n          result = elements.find(function (el) {\\n            return el.value !== '';\\n          }).toArray();\\n        }\\n\\n        result = util.map(result, function (el) {\\n          return el.value;\\n        });\\n\\n        if (!result.length) {\\n          result = '';\\n        } else if (result.length === 1) {\\n          result = result[0];\\n        }\\n\\n        output[name] = result;\\n      });\\n    });\\n    return output;\\n  }\\n};\\nuserSelectProperty = domutil.testProp(['userSelect', 'WebkitUserSelect', 'OUserSelect', 'MozUserSelect', 'msUserSelect']);\\n/**\\n * Disable browser's text selection behaviors.\\n * @method\\n */\\n\\ndomutil.disableTextSelection = function () {\\n  if (supportSelectStart) {\\n    return function () {\\n      domevent.on(window, 'selectstart', domevent.preventDefault);\\n    };\\n  }\\n\\n  return function () {\\n    var style = document.documentElement.style;\\n    prevSelectStyle = style[userSelectProperty];\\n    style[userSelectProperty] = 'none';\\n  };\\n}();\\n/**\\n * Enable browser's text selection behaviors.\\n * @method\\n */\\n\\n\\ndomutil.enableTextSelection = function () {\\n  if (supportSelectStart) {\\n    return function () {\\n      domevent.off(window, 'selectstart', domevent.preventDefault);\\n    };\\n  }\\n\\n  return function () {\\n    document.documentElement.style[userSelectProperty] = prevSelectStyle;\\n  };\\n}();\\n/**\\n * Disable browser's image drag behaviors.\\n */\\n\\n\\ndomutil.disableImageDrag = function () {\\n  domevent.on(window, 'dragstart', domevent.preventDefault);\\n};\\n/**\\n * Enable browser's image drag behaviors.\\n */\\n\\n\\ndomutil.enableImageDrag = function () {\\n  domevent.off(window, 'dragstart', domevent.preventDefault);\\n};\\n/**\\n * Replace matched property with template\\n * @param {string} template - String of template\\n * @param {Object} propObj - Properties\\n * @returns {string} Replaced template string\\n */\\n\\n\\ndomutil.applyTemplate = function (template, propObj) {\\n  var newTemplate = template.replace(/\\\\{\\\\{(\\\\w*)\\\\}\\\\}/g, function (value, prop) {\\n    return propObj.hasOwnProperty(prop) ? propObj[prop] : '';\\n  });\\n  return newTemplate;\\n};\\n\\nmodule.exports = domutil;\\n\\n//# sourceURL=webpack://tui.colorPicker/./src/js/core/domutil.js?\")},\"./src/js/core/drag.js\":function(module,exports,__webpack_require__){\"use strict\";eval(\"/* WEBPACK VAR INJECTION */(function(global) {/**\\n * @fileoverview General drag handler\\n * @author NHN. FE Development Team <dl_javascript@nhn.com>\\n */\\n\\n\\nvar util = __webpack_require__(/*! tui-code-snippet */ \\\"tui-code-snippet\\\");\\n\\nvar domutil = __webpack_require__(/*! ./domutil */ \\\"./src/js/core/domutil.js\\\");\\n\\nvar domevent = __webpack_require__(/*! ./domevent */ \\\"./src/js/core/domevent.js\\\");\\n/**\\n * @constructor\\n * @mixes CustomEvents\\n * @param {object} options - options for drag handler\\n * @param {number} [options.distance=10] - distance in pixels after mouse must move before dragging should start\\n * @param {HTMLElement} container - container element to bind drag events\\n * @ignore\\n */\\n\\n\\nfunction Drag(options, container) {\\n  domevent.on(container, 'mousedown', this._onMouseDown, this);\\n  this.options = util.extend({\\n    distance: 10\\n  }, options);\\n  /**\\n   * @type {HTMLElement}\\n   */\\n\\n  this.container = container;\\n  /**\\n   * @type {boolean}\\n   */\\n\\n  this._isMoved = false;\\n  /**\\n   * dragging distance in pixel between mousedown and firing dragStart events\\n   * @type {number}\\n   */\\n\\n  this._distance = 0;\\n  /**\\n   * @type {boolean}\\n   */\\n\\n  this._dragStartFired = false;\\n  /**\\n   * @type {object}\\n   */\\n\\n  this._dragStartEventData = null;\\n}\\n/**\\n * Destroy method.\\n */\\n\\n\\nDrag.prototype.destroy = function () {\\n  domevent.off(this.container, 'mousedown', this._onMouseDown, this);\\n  this.options = this.container = this._isMoved = this._distance = this._dragStartFired = this._dragStartEventData = null;\\n};\\n/**\\n * Toggle events for mouse dragging.\\n * @param {boolean} toBind - bind events related with dragging when supplied \\\"true\\\"\\n */\\n\\n\\nDrag.prototype._toggleDragEvent = function (toBind) {\\n  var container = this.container,\\n      domMethod,\\n      method;\\n\\n  if (toBind) {\\n    domMethod = 'on';\\n    method = 'disable';\\n  } else {\\n    domMethod = 'off';\\n    method = 'enable';\\n  }\\n\\n  domutil[method + 'TextSelection'](container);\\n  domutil[method + 'ImageDrag'](container);\\n  domevent[domMethod](global.document, {\\n    mousemove: this._onMouseMove,\\n    mouseup: this._onMouseUp\\n  }, this);\\n};\\n/**\\n * Normalize mouse event object.\\n * @param {MouseEvent} mouseEvent - mouse event object.\\n * @returns {object} normalized mouse event data.\\n */\\n\\n\\nDrag.prototype._getEventData = function (mouseEvent) {\\n  return {\\n    target: mouseEvent.target || mouseEvent.srcElement,\\n    originEvent: mouseEvent\\n  };\\n};\\n/**\\n * MouseDown DOM event handler.\\n * @param {MouseEvent} mouseDownEvent MouseDown event object.\\n */\\n\\n\\nDrag.prototype._onMouseDown = function (mouseDownEvent) {\\n  // only primary button can start drag.\\n  if (domevent.getMouseButton(mouseDownEvent) !== 0) {\\n    return;\\n  }\\n\\n  this._distance = 0;\\n  this._dragStartFired = false;\\n  this._dragStartEventData = this._getEventData(mouseDownEvent);\\n\\n  this._toggleDragEvent(true);\\n};\\n/**\\n * MouseMove DOM event handler.\\n * @emits Drag#drag\\n * @emits Drag#dragStart\\n * @param {MouseEvent} mouseMoveEvent MouseMove event object.\\n */\\n\\n\\nDrag.prototype._onMouseMove = function (mouseMoveEvent) {\\n  var distance = this.options.distance; // prevent automatic scrolling.\\n\\n  domevent.preventDefault(mouseMoveEvent);\\n  this._isMoved = true;\\n\\n  if (this._distance < distance) {\\n    this._distance += 1;\\n    return;\\n  }\\n\\n  if (!this._dragStartFired) {\\n    this._dragStartFired = true;\\n    /**\\n     * Drag starts events. cancelable.\\n     * @event Drag#dragStart\\n     * @type {object}\\n     * @property {HTMLElement} target - target element in this event.\\n     * @property {MouseEvent} originEvent - original mouse event object.\\n     */\\n\\n    if (!this.invoke('dragStart', this._dragStartEventData)) {\\n      this._toggleDragEvent(false);\\n\\n      return;\\n    }\\n  }\\n  /**\\n   * Events while dragging.\\n   * @event Drag#drag\\n   * @type {object}\\n   * @property {HTMLElement} target - target element in this event.\\n   * @property {MouseEvent} originEvent - original mouse event object.\\n   */\\n\\n\\n  this.fire('drag', this._getEventData(mouseMoveEvent));\\n};\\n/**\\n * MouseUp DOM event handler.\\n * @param {MouseEvent} mouseUpEvent MouseUp event object.\\n * @emits Drag#dragEnd\\n * @emits Drag#click\\n */\\n\\n\\nDrag.prototype._onMouseUp = function (mouseUpEvent) {\\n  this._toggleDragEvent(false); // emit \\\"click\\\" event when not emitted drag event between mousedown and mouseup.\\n\\n\\n  if (this._isMoved) {\\n    this._isMoved = false;\\n    /**\\n     * Drag end events.\\n     * @event Drag#dragEnd\\n     * @type {MouseEvent}\\n     * @property {HTMLElement} target - target element in this event.\\n     * @property {MouseEvent} originEvent - original mouse event object.\\n     */\\n\\n    this.fire('dragEnd', this._getEventData(mouseUpEvent));\\n    return;\\n  }\\n  /**\\n   * Click events.\\n   * @event Drag#click\\n   * @type {MouseEvent}\\n   * @property {HTMLElement} target - target element in this event.\\n   * @property {MouseEvent} originEvent - original mouse event object.\\n   */\\n\\n\\n  this.fire('click', this._getEventData(mouseUpEvent));\\n};\\n\\nutil.CustomEvents.mixin(Drag);\\nmodule.exports = Drag;\\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../../node_modules/webpack/buildin/global.js */ \\\"./node_modules/webpack/buildin/global.js\\\")))\\n\\n//# sourceURL=webpack://tui.colorPicker/./src/js/core/drag.js?\")},\"./src/js/core/view.js\":function(module,exports,__webpack_require__){\"use strict\";eval(\"/**\\n * @fileoverview The base class of views.\\n * @author NHN. FE Development Team <dl_javascript@nhn.com>\\n */\\n\\n\\nvar util = __webpack_require__(/*! tui-code-snippet */ \\\"tui-code-snippet\\\");\\n\\nvar domutil = __webpack_require__(/*! ./domutil */ \\\"./src/js/core/domutil.js\\\");\\n\\nvar Collection = __webpack_require__(/*! ./collection */ \\\"./src/js/core/collection.js\\\");\\n/**\\n * Base class of views.\\n *\\n * All views create own container element inside supplied container element.\\n * @constructor\\n * @param {options} options The object for describe view's specs.\\n * @param {HTMLElement} container Default container element for view. you can use this element for this.container syntax.\\n * @ignore\\n */\\n\\n\\nfunction View(options, container) {\\n  var id = util.stamp(this);\\n  options = options || {};\\n\\n  if (util.isUndefined(container)) {\\n    container = domutil.appendHTMLElement('div');\\n  }\\n\\n  domutil.addClass(container, 'tui-view-' + id);\\n  /**\\n   * unique id\\n   * @type {number}\\n   */\\n\\n  this.id = id;\\n  /**\\n   * base element of view.\\n   * @type {HTMLDIVElement}\\n   */\\n\\n  this.container = container;\\n  /**\\n   * child views.\\n   * @type {Collection}\\n   */\\n\\n  this.childs = new Collection(function (view) {\\n    return util.stamp(view);\\n  });\\n  /**\\n   * parent view instance.\\n   * @type {View}\\n   */\\n\\n  this.parent = null;\\n}\\n/**\\n * Add child views.\\n * @param {View} view The view instance to add.\\n * @param {function} [fn] Function for invoke before add. parent view class is supplied first arguments.\\n */\\n\\n\\nView.prototype.addChild = function (view, fn) {\\n  if (fn) {\\n    fn.call(view, this);\\n  } // add parent view\\n\\n\\n  view.parent = this;\\n  this.childs.add(view);\\n};\\n/**\\n * Remove added child view.\\n * @param {(number|View)} id View id or instance itself to remove.\\n * @param {function} [fn] Function for invoke before remove. parent view class is supplied first arguments.\\n */\\n\\n\\nView.prototype.removeChild = function (id, fn) {\\n  var view = util.isNumber(id) ? this.childs.items[id] : id;\\n  id = util.stamp(view);\\n\\n  if (fn) {\\n    fn.call(view, this);\\n  }\\n\\n  this.childs.remove(id);\\n};\\n/**\\n * Render view recursively.\\n */\\n\\n\\nView.prototype.render = function () {\\n  this.childs.each(function (childView) {\\n    childView.render();\\n  });\\n};\\n/**\\n * Invoke function recursively.\\n * @param {function} fn - function to invoke child view recursively\\n * @param {boolean} [skipThis=false] - set true then skip invoke with this(root) view.\\n */\\n\\n\\nView.prototype.recursive = function (fn, skipThis) {\\n  if (!util.isFunction(fn)) {\\n    return;\\n  }\\n\\n  if (!skipThis) {\\n    fn(this);\\n  }\\n\\n  this.childs.each(function (childView) {\\n    childView.recursive(fn);\\n  });\\n};\\n/**\\n * Resize view recursively to parent.\\n */\\n\\n\\nView.prototype.resize = function () {\\n  var args = Array.prototype.slice.call(arguments),\\n      parent = this.parent;\\n\\n  while (parent) {\\n    if (util.isFunction(parent._onResize)) {\\n      parent._onResize.apply(parent, args);\\n    }\\n\\n    parent = parent.parent;\\n  }\\n};\\n/**\\n * Invoking method before destroying.\\n */\\n\\n\\nView.prototype._beforeDestroy = function () {};\\n/**\\n * Clear properties\\n */\\n\\n\\nView.prototype._destroy = function () {\\n  this._beforeDestroy();\\n\\n  this.childs.clear();\\n  this.container.innerHTML = '';\\n  this.id = this.parent = this.childs = this.container = null;\\n};\\n/**\\n * Destroy child view recursively.\\n * @param {boolean} isChildView - Whether it is the child view or not\\n */\\n\\n\\nView.prototype.destroy = function (isChildView) {\\n  this.childs.each(function (childView) {\\n    childView.destroy(true);\\n\\n    childView._destroy();\\n  });\\n\\n  if (isChildView) {\\n    return;\\n  }\\n\\n  this._destroy();\\n};\\n/**\\n * Calculate view's container element bound.\\n * @returns {object} The bound of container element.\\n */\\n\\n\\nView.prototype.getViewBound = function () {\\n  var container = this.container,\\n      position = domutil.getPosition(container),\\n      size = domutil.getSize(container);\\n  return {\\n    x: position[0],\\n    y: position[1],\\n    width: size[0],\\n    height: size[1]\\n  };\\n};\\n\\nmodule.exports = View;\\n\\n//# sourceURL=webpack://tui.colorPicker/./src/js/core/view.js?\")},\"./src/js/factory.js\":function(module,exports,__webpack_require__){\"use strict\";eval(\"/**\\n * @fileoverview ColorPicker factory module\\n * @author NHN. FE Development Team <dl_javascript@nhn.com>\\n */\\n\\n\\nvar util = __webpack_require__(/*! tui-code-snippet */ \\\"tui-code-snippet\\\");\\n\\nvar colorutil = __webpack_require__(/*! ./colorutil */ \\\"./src/js/colorutil.js\\\");\\n\\nvar Layout = __webpack_require__(/*! ./layout */ \\\"./src/js/layout.js\\\");\\n\\nvar Palette = __webpack_require__(/*! ./palette */ \\\"./src/js/palette.js\\\");\\n\\nvar Slider = __webpack_require__(/*! ./slider */ \\\"./src/js/slider.js\\\");\\n/**\\n * @constructor\\n * @param {object} options - options for colorpicker component\\n *  @param {HTMLDivElement} options.container - container element\\n *  @param {string} [options.color='#ffffff'] - default selected color\\n *  @param {string[]} [options.preset] - color preset for palette (use base16 palette if not supplied)\\n *  @param {string} [options.cssPrefix='tui-colorpicker-'] - css prefix text for each child elements\\n *  @param {string} [options.detailTxt='Detail'] - text for detail button.\\n *  @param {boolean} [options.usageStatistics=true] - Let us know the hostname. If you don't want to send the hostname, please set to false.\\n * @example\\n * var colorPicker = tui.colorPicker; // or require('tui-color-picker')\\n *\\n * var instance = colorPicker.create({\\n *   container: document.getElementById('color-picker')\\n * });\\n */\\n\\n\\nfunction ColorPicker(options) {\\n  var layout;\\n\\n  if (!(this instanceof ColorPicker)) {\\n    return new ColorPicker(options);\\n  }\\n  /**\\n   * Option object\\n   * @type {object}\\n   * @private\\n   */\\n\\n\\n  options = this.options = util.extend({\\n    container: null,\\n    color: '#f8f8f8',\\n    preset: ['#181818', '#282828', '#383838', '#585858', '#b8b8b8', '#d8d8d8', '#e8e8e8', '#f8f8f8', '#ab4642', '#dc9656', '#f7ca88', '#a1b56c', '#86c1b9', '#7cafc2', '#ba8baf', '#a16946'],\\n    cssPrefix: 'tui-colorpicker-',\\n    detailTxt: 'Detail',\\n    usageStatistics: true\\n  }, options);\\n\\n  if (!options.container) {\\n    throw new Error('ColorPicker(): need container option.');\\n  }\\n  /**********\\n   * Create layout view\\n   **********/\\n\\n  /**\\n   * @type {Layout}\\n   * @private\\n   */\\n\\n\\n  layout = this.layout = new Layout(options, options.container);\\n  /**********\\n   * Create palette view\\n   **********/\\n\\n  this.palette = new Palette(options, layout.container);\\n  this.palette.on({\\n    _selectColor: this._onSelectColorInPalette,\\n    _toggleSlider: this._onToggleSlider\\n  }, this);\\n  /**********\\n   * Create slider view\\n   **********/\\n\\n  this.slider = new Slider(options, layout.container);\\n  this.slider.on('_selectColor', this._onSelectColorInSlider, this);\\n  /**********\\n   * Add child views\\n   **********/\\n\\n  layout.addChild(this.palette);\\n  layout.addChild(this.slider);\\n  this.render(options.color);\\n\\n  if (options.usageStatistics) {\\n    util.sendHostname('color-picker', 'UA-129987462-1');\\n  }\\n}\\n/**\\n * Handler method for Palette#_selectColor event\\n * @private\\n * @fires ColorPicker#selectColor\\n * @param {object} selectColorEventData - event data\\n */\\n\\n\\nColorPicker.prototype._onSelectColorInPalette = function (selectColorEventData) {\\n  var color = selectColorEventData.color,\\n      opt = this.options;\\n\\n  if (!colorutil.isValidRGB(color) && color !== '') {\\n    this.render();\\n    return;\\n  }\\n  /**\\n   * @event ColorPicker#selectColor\\n   * @type {object}\\n   * @property {string} color - selected color (hex string)\\n   * @property {string} origin - flags for represent the source of event fires.\\n   */\\n\\n\\n  this.fire('selectColor', {\\n    color: color,\\n    origin: 'palette'\\n  });\\n\\n  if (opt.color === color) {\\n    return;\\n  }\\n\\n  opt.color = color;\\n  this.render(color);\\n};\\n/**\\n * Handler method for Palette#_toggleSlider event\\n * @private\\n */\\n\\n\\nColorPicker.prototype._onToggleSlider = function () {\\n  this.slider.toggle(!this.slider.isVisible());\\n};\\n/**\\n * Handler method for Slider#_selectColor event\\n * @private\\n * @fires ColorPicker#selectColor\\n * @param {object} selectColorEventData - event data\\n */\\n\\n\\nColorPicker.prototype._onSelectColorInSlider = function (selectColorEventData) {\\n  var color = selectColorEventData.color,\\n      opt = this.options;\\n  /**\\n   * @event ColorPicker#selectColor\\n   * @type {object}\\n   * @property {string} color - selected color (hex string)\\n   * @property {string} origin - flags for represent the source of event fires.\\n   * @ignore\\n   */\\n\\n  this.fire('selectColor', {\\n    color: color,\\n    origin: 'slider'\\n  });\\n\\n  if (opt.color === color) {\\n    return;\\n  }\\n\\n  opt.color = color;\\n  this.palette.render(color);\\n};\\n/**********\\n * PUBLIC API\\n **********/\\n\\n/**\\n * Set color to colorpicker instance.<br>\\n * The string parameter must be hex color value\\n * @param {string} hexStr - hex formatted color string\\n * @example\\n * instance.setColor('#ffff00');\\n */\\n\\n\\nColorPicker.prototype.setColor = function (hexStr) {\\n  if (!colorutil.isValidRGB(hexStr)) {\\n    throw new Error('ColorPicker#setColor(): need valid hex string color value');\\n  }\\n\\n  this.options.color = hexStr;\\n  this.render(hexStr);\\n};\\n/**\\n * Get hex color string of current selected color in colorpicker instance.\\n * @returns {string} hex string formatted color\\n * @example\\n * instance.setColor('#ffff00');\\n * instance.getColor(); // '#ffff00';\\n */\\n\\n\\nColorPicker.prototype.getColor = function () {\\n  return this.options.color;\\n};\\n/**\\n * Toggle colorpicker element. set true then reveal colorpicker view.\\n * @param {boolean} [isShow=false] - A flag to show\\n * @example\\n * instance.toggle(false); // hide\\n * instance.toggle(); // hide\\n * instance.toggle(true); // show\\n */\\n\\n\\nColorPicker.prototype.toggle = function (isShow) {\\n  this.layout.container.style.display = !!isShow ? 'block' : 'none';\\n};\\n/**\\n * Render colorpicker\\n * @param {string} [color] - selected color\\n * @ignore\\n */\\n\\n\\nColorPicker.prototype.render = function (color) {\\n  this.layout.render(color || this.options.color);\\n};\\n/**\\n * Destroy colorpicker instance.\\n * @example\\n * instance.destroy(); // DOM-element is removed\\n */\\n\\n\\nColorPicker.prototype.destroy = function () {\\n  this.layout.destroy();\\n  this.options.container.innerHTML = '';\\n  this.layout = this.slider = this.palette = this.options = null;\\n};\\n\\nutil.CustomEvents.mixin(ColorPicker);\\nmodule.exports = ColorPicker;\\n\\n//# sourceURL=webpack://tui.colorPicker/./src/js/factory.js?\")},\"./src/js/index.js\":function(module,exports,__webpack_require__){\"use strict\";eval('\\n\\nvar domutil = __webpack_require__(/*! ./core/domutil */ \"./src/js/core/domutil.js\");\\n\\nvar domevent = __webpack_require__(/*! ./core/domevent */ \"./src/js/core/domevent.js\");\\n\\nvar Collection = __webpack_require__(/*! ./core/collection */ \"./src/js/core/collection.js\");\\n\\nvar View = __webpack_require__(/*! ./core/view */ \"./src/js/core/view.js\");\\n\\nvar Drag = __webpack_require__(/*! ./core/drag */ \"./src/js/core/drag.js\");\\n\\nvar create = __webpack_require__(/*! ./factory */ \"./src/js/factory.js\");\\n\\nvar Palette = __webpack_require__(/*! ./palette */ \"./src/js/palette.js\");\\n\\nvar Slider = __webpack_require__(/*! ./slider */ \"./src/js/slider.js\");\\n\\nvar colorutil = __webpack_require__(/*! ./colorutil */ \"./src/js/colorutil.js\");\\n\\nvar svgvml = __webpack_require__(/*! ./svgvml */ \"./src/js/svgvml.js\");\\n\\nvar colorPicker = {\\n  domutil: domutil,\\n  domevent: domevent,\\n  Collection: Collection,\\n  View: View,\\n  Drag: Drag,\\n  create: create,\\n  Palette: Palette,\\n  Slider: Slider,\\n  colorutil: colorutil,\\n  svgvml: svgvml\\n};\\nmodule.exports = colorPicker;\\n\\n//# sourceURL=webpack://tui.colorPicker/./src/js/index.js?')},\"./src/js/layout.js\":function(module,exports,__webpack_require__){\"use strict\";eval(\"/**\\n * @fileoverview ColorPicker layout module\\n * @author NHN. FE Development Team <dl_javascript@nhn.com>\\n */\\n\\n\\nvar util = __webpack_require__(/*! tui-code-snippet */ \\\"tui-code-snippet\\\");\\n\\nvar domutil = __webpack_require__(/*! ./core/domutil */ \\\"./src/js/core/domutil.js\\\");\\n\\nvar View = __webpack_require__(/*! ./core/view */ \\\"./src/js/core/view.js\\\");\\n/**\\n * @constructor\\n * @extends {View}\\n * @param {object} options - option object\\n *  @param {string} options.cssPrefix - css prefix for each child elements\\n * @param {HTMLDivElement} container - container\\n * @ignore\\n */\\n\\n\\nfunction Layout(options, container) {\\n  /**\\n   * option object\\n   * @type {object}\\n   */\\n  this.options = util.extend({\\n    cssPrefix: 'tui-colorpicker-'\\n  }, options);\\n  container = domutil.appendHTMLElement('div', container, this.options.cssPrefix + 'container');\\n  View.call(this, options, container);\\n  this.render();\\n}\\n\\nutil.inherit(Layout, View);\\n/**\\n * @override\\n * @param {string} [color] - selected color\\n */\\n\\nLayout.prototype.render = function (color) {\\n  this.recursive(function (view) {\\n    view.render(color);\\n  }, true);\\n};\\n\\nmodule.exports = Layout;\\n\\n//# sourceURL=webpack://tui.colorPicker/./src/js/layout.js?\")},\"./src/js/palette.js\":function(module,exports,__webpack_require__){\"use strict\";eval(\"/**\\n * @fileoverview Color palette view\\n * @author NHN. FE Development Team <dl_javascript@nhn.com>\\n */\\n\\n\\nvar util = __webpack_require__(/*! tui-code-snippet */ \\\"tui-code-snippet\\\");\\n\\nvar domutil = __webpack_require__(/*! ./core/domutil */ \\\"./src/js/core/domutil.js\\\");\\n\\nvar colorutil = __webpack_require__(/*! ./colorutil */ \\\"./src/js/colorutil.js\\\");\\n\\nvar domevent = __webpack_require__(/*! ./core/domevent */ \\\"./src/js/core/domevent.js\\\");\\n\\nvar View = __webpack_require__(/*! ./core/view */ \\\"./src/js/core/view.js\\\");\\n\\nvar tmpl = __webpack_require__(/*! ../template/palette */ \\\"./src/template/palette.js\\\");\\n/**\\n * @constructor\\n * @extends {View}\\n * @mixes CustomEvents\\n * @param {object} options - options for color palette view\\n *  @param {string[]} options.preset - color list\\n * @param {HTMLDivElement} container - container element\\n * @ignore\\n */\\n\\n\\nfunction Palette(options, container) {\\n  /**\\n   * option object\\n   * @type {object}\\n   */\\n  this.options = util.extend({\\n    cssPrefix: 'tui-colorpicker-',\\n    preset: ['#181818', '#282828', '#383838', '#585858', '#B8B8B8', '#D8D8D8', '#E8E8E8', '#F8F8F8', '#AB4642', '#DC9656', '#F7CA88', '#A1B56C', '#86C1B9', '#7CAFC2', '#BA8BAF', '#A16946'],\\n    detailTxt: 'Detail'\\n  }, options);\\n  container = domutil.appendHTMLElement('div', container, this.options.cssPrefix + 'palette-container');\\n  View.call(this, options, container);\\n}\\n\\nutil.inherit(Palette, View);\\n/**\\n * Mouse click event handler\\n * @fires Palette#_selectColor\\n * @fires Palette#_toggleSlider\\n * @param {MouseEvent} clickEvent - mouse event object\\n */\\n\\nPalette.prototype._onClick = function (clickEvent) {\\n  var options = this.options,\\n      target = clickEvent.srcElement || clickEvent.target,\\n      eventData = {};\\n\\n  if (domutil.hasClass(target, options.cssPrefix + 'palette-button')) {\\n    eventData.color = target.value;\\n    /**\\n     * @event Palette#_selectColor\\n     * @type {object}\\n     * @property {string} color - selected color value\\n     */\\n\\n    this.fire('_selectColor', eventData);\\n    return;\\n  }\\n\\n  if (domutil.hasClass(target, options.cssPrefix + 'palette-toggle-slider')) {\\n    /**\\n     * @event Palette#_toggleSlider\\n     */\\n    this.fire('_toggleSlider');\\n  }\\n};\\n/**\\n * Textbox change event handler\\n * @fires Palette#_selectColor\\n * @param {Event} changeEvent - change event object\\n */\\n\\n\\nPalette.prototype._onChange = function (changeEvent) {\\n  var options = this.options,\\n      target = changeEvent.srcElement || changeEvent.target,\\n      eventData = {};\\n\\n  if (domutil.hasClass(target, options.cssPrefix + 'palette-hex')) {\\n    eventData.color = target.value;\\n    /**\\n     * @event Palette#_selectColor\\n     * @type {object}\\n     * @property {string} color - selected color value\\n     */\\n\\n    this.fire('_selectColor', eventData);\\n  }\\n};\\n/**\\n * Invoke before destory\\n * @override\\n */\\n\\n\\nPalette.prototype._beforeDestroy = function () {\\n  this._toggleEvent(false);\\n};\\n/**\\n * Toggle view DOM events\\n * @param {boolean} [onOff=false] - true to bind event.\\n */\\n\\n\\nPalette.prototype._toggleEvent = function (onOff) {\\n  var options = this.options,\\n      container = this.container,\\n      method = domevent[!!onOff ? 'on' : 'off'],\\n      hexTextBox;\\n  method(container, 'click', this._onClick, this);\\n  hexTextBox = domutil.find('.' + options.cssPrefix + 'palette-hex', container);\\n\\n  if (hexTextBox) {\\n    method(hexTextBox, 'change', this._onChange, this);\\n  }\\n};\\n/**\\n * Render palette\\n * @override\\n */\\n\\n\\nPalette.prototype.render = function (color) {\\n  var options = this.options,\\n      html = '';\\n\\n  this._toggleEvent(false);\\n\\n  html = tmpl.layout.replace('{{colorList}}', util.map(options.preset, function (itemColor) {\\n    var itemHtml = '';\\n    var style = '';\\n\\n    if (colorutil.isValidRGB(itemColor)) {\\n      style = domutil.applyTemplate(tmpl.itemStyle, {\\n        color: itemColor\\n      });\\n    }\\n\\n    itemHtml = domutil.applyTemplate(tmpl.item, {\\n      itemStyle: style,\\n      itemClass: !itemColor ? ' ' + options.cssPrefix + 'color-transparent' : '',\\n      color: itemColor,\\n      cssPrefix: options.cssPrefix,\\n      selected: itemColor === color ? ' ' + options.cssPrefix + 'selected' : ''\\n    });\\n    return itemHtml;\\n  }).join(''));\\n  html = domutil.applyTemplate(html, {\\n    cssPrefix: options.cssPrefix,\\n    detailTxt: options.detailTxt,\\n    color: color\\n  });\\n  this.container.innerHTML = html;\\n\\n  this._toggleEvent(true);\\n};\\n\\nutil.CustomEvents.mixin(Palette);\\nmodule.exports = Palette;\\n\\n//# sourceURL=webpack://tui.colorPicker/./src/js/palette.js?\")},\"./src/js/slider.js\":function(module,exports,__webpack_require__){\"use strict\";eval(\"/**\\n * @fileoverview Slider view\\n * @author NHN. FE Development Team <dl_javascript@nhn.com>\\n */\\n\\n\\nvar util = __webpack_require__(/*! tui-code-snippet */ \\\"tui-code-snippet\\\");\\n\\nvar domutil = __webpack_require__(/*! ./core/domutil */ \\\"./src/js/core/domutil.js\\\");\\n\\nvar domevent = __webpack_require__(/*! ./core/domevent */ \\\"./src/js/core/domevent.js\\\");\\n\\nvar svgvml = __webpack_require__(/*! ./svgvml */ \\\"./src/js/svgvml.js\\\");\\n\\nvar colorutil = __webpack_require__(/*! ./colorutil */ \\\"./src/js/colorutil.js\\\");\\n\\nvar View = __webpack_require__(/*! ./core/view */ \\\"./src/js/core/view.js\\\");\\n\\nvar Drag = __webpack_require__(/*! ./core/drag */ \\\"./src/js/core/drag.js\\\");\\n\\nvar tmpl = __webpack_require__(/*! ../template/slider */ \\\"./src/template/slider.js\\\"); // Limitation position of point element inside of colorslider and hue bar\\n// Minimum value can to be negative because that using color point of handle element is center point. not left, top point.\\n\\n\\nvar COLORSLIDER_POS_LIMIT_RANGE = [-7, 112];\\nvar HUEBAR_POS_LIMIT_RANGE = [-3, 115];\\nvar HUE_WHEEL_MAX = 359.99;\\n/**\\n * @constructor\\n * @extends {View}\\n * @mixes CustomEvents\\n * @param {object} options - options for view\\n *  @param {string} options.cssPrefix - design css prefix\\n * @param {HTMLElement} container - container element\\n * @ignore\\n */\\n\\nfunction Slider(options, container) {\\n  container = domutil.appendHTMLElement('div', container, options.cssPrefix + 'slider-container');\\n  container.style.display = 'none';\\n  View.call(this, options, container);\\n  /**\\n   * @type {object}\\n   */\\n\\n  this.options = util.extend({\\n    color: '#f8f8f8',\\n    cssPrefix: 'tui-colorpicker-'\\n  }, options);\\n  /**\\n   * Cache immutable data in click, drag events.\\n   *\\n   * (i.e. is event related with colorslider? or huebar?)\\n   * @type {object}\\n   * @property {boolean} isColorSlider\\n   * @property {number[]} containerSize\\n   */\\n\\n  this._dragDataCache = {};\\n  /**\\n   * Color slider handle element\\n   * @type {SVG|VML}\\n   */\\n\\n  this.sliderHandleElement = null;\\n  /**\\n   * hue bar handle element\\n   * @type {SVG|VML}\\n   */\\n\\n  this.huebarHandleElement = null;\\n  /**\\n   * Element that render base color in colorslider part\\n   * @type {SVG|VML}\\n   */\\n\\n  this.baseColorElement = null;\\n  /**\\n   * @type {Drag}\\n   */\\n\\n  this.drag = new Drag({\\n    distance: 0\\n  }, container); // bind drag events\\n\\n  this.drag.on({\\n    dragStart: this._onDragStart,\\n    drag: this._onDrag,\\n    dragEnd: this._onDragEnd,\\n    click: this._onClick\\n  }, this);\\n}\\n\\nutil.inherit(Slider, View);\\n/**\\n * @override\\n */\\n\\nSlider.prototype._beforeDestroy = function () {\\n  this.drag.off();\\n  this.drag = this.options = this._dragDataCache = this.sliderHandleElement = this.huebarHandleElement = this.baseColorElement = null;\\n};\\n/**\\n * Toggle slider view\\n * @param {boolean} onOff - set true then reveal slider view\\n */\\n\\n\\nSlider.prototype.toggle = function (onOff) {\\n  this.container.style.display = !!onOff ? 'block' : 'none';\\n};\\n/**\\n * Get slider display status\\n * @returns {boolean} return true when slider is visible\\n */\\n\\n\\nSlider.prototype.isVisible = function () {\\n  return this.container.style.display === 'block';\\n};\\n/**\\n * Render slider view\\n * @override\\n * @param {string} colorStr - hex string color from parent view (Layout)\\n */\\n\\n\\nSlider.prototype.render = function (colorStr) {\\n  var that = this,\\n      container = that.container,\\n      options = that.options,\\n      html = tmpl.layout,\\n      rgb,\\n      hsv;\\n\\n  if (!colorutil.isValidRGB(colorStr)) {\\n    return;\\n  }\\n\\n  html = html.replace(/{{slider}}/, tmpl.slider);\\n  html = html.replace(/{{huebar}}/, tmpl.huebar);\\n  html = html.replace(/{{cssPrefix}}/g, options.cssPrefix);\\n  that.container.innerHTML = html;\\n  that.sliderHandleElement = domutil.find('.' + options.cssPrefix + 'slider-handle', container);\\n  that.huebarHandleElement = domutil.find('.' + options.cssPrefix + 'huebar-handle', container);\\n  that.baseColorElement = domutil.find('.' + options.cssPrefix + 'slider-basecolor', container);\\n  rgb = colorutil.hexToRGB(colorStr);\\n  hsv = colorutil.rgbToHSV.apply(null, rgb);\\n  this.moveHue(hsv[0], true);\\n  this.moveSaturationAndValue(hsv[1], hsv[2], true);\\n};\\n/**\\n * Move colorslider by newLeft(X), newTop(Y) value\\n * @private\\n * @param {number} newLeft - left pixel value to move handle\\n * @param {number} newTop - top pixel value to move handle\\n * @param {boolean} [silent=false] - set true then not fire custom event\\n */\\n\\n\\nSlider.prototype._moveColorSliderHandle = function (newLeft, newTop, silent) {\\n  var handle = this.sliderHandleElement,\\n      handleColor; // Check position limitation.\\n\\n  newTop = Math.max(COLORSLIDER_POS_LIMIT_RANGE[0], newTop);\\n  newTop = Math.min(COLORSLIDER_POS_LIMIT_RANGE[1], newTop);\\n  newLeft = Math.max(COLORSLIDER_POS_LIMIT_RANGE[0], newLeft);\\n  newLeft = Math.min(COLORSLIDER_POS_LIMIT_RANGE[1], newLeft);\\n  svgvml.setTranslateXY(handle, newLeft, newTop);\\n  handleColor = newTop > 50 ? 'white' : 'black';\\n  svgvml.setStrokeColor(handle, handleColor);\\n\\n  if (!silent) {\\n    this.fire('_selectColor', {\\n      color: colorutil.rgbToHEX.apply(null, this.getRGB())\\n    });\\n  }\\n};\\n/**\\n * Move colorslider by supplied saturation and values.\\n *\\n * The movement of color slider handle follow HSV cylinder model. {@link https://en.wikipedia.org/wiki/HSL_and_HSV}\\n * @param {number} saturation - the percent of saturation (0% ~ 100%)\\n * @param {number} value - the percent of saturation (0% ~ 100%)\\n * @param {boolean} [silent=false] - set true then not fire custom event\\n */\\n\\n\\nSlider.prototype.moveSaturationAndValue = function (saturation, value, silent) {\\n  var absMin, maxValue, newLeft, newTop;\\n  saturation = saturation || 0;\\n  value = value || 0;\\n  absMin = Math.abs(COLORSLIDER_POS_LIMIT_RANGE[0]);\\n  maxValue = COLORSLIDER_POS_LIMIT_RANGE[1]; // subtract absMin value because current color position is not left, top of handle element.\\n  // The saturation. from left 0 to right 100\\n\\n  newLeft = saturation * maxValue / 100 - absMin; // The Value. from top 100 to bottom 0. that why newTop subtract by maxValue.\\n\\n  newTop = maxValue - value * maxValue / 100 - absMin;\\n\\n  this._moveColorSliderHandle(newLeft, newTop, silent);\\n};\\n/**\\n * Move color slider handle to supplied position\\n *\\n * The number of X, Y must be related value from color slider container\\n * @private\\n * @param {number} x - the pixel value to move handle\\n * @param {number} y - the pixel value to move handle\\n */\\n\\n\\nSlider.prototype._moveColorSliderByPosition = function (x, y) {\\n  var offset = COLORSLIDER_POS_LIMIT_RANGE[0];\\n\\n  this._moveColorSliderHandle(x + offset, y + offset);\\n};\\n/**\\n * Get saturation and value value.\\n * @returns {number[]} saturation and value\\n */\\n\\n\\nSlider.prototype.getSaturationAndValue = function () {\\n  var absMin = Math.abs(COLORSLIDER_POS_LIMIT_RANGE[0]),\\n      maxValue = absMin + COLORSLIDER_POS_LIMIT_RANGE[1],\\n      position = svgvml.getTranslateXY(this.sliderHandleElement),\\n      saturation,\\n      value;\\n  saturation = (position[1] + absMin) / maxValue * 100; // The value of HSV color model is inverted. top 100 ~ bottom 0. so subtract by 100\\n\\n  value = 100 - (position[0] + absMin) / maxValue * 100;\\n  return [saturation, value];\\n};\\n/**\\n * Move hue handle supplied pixel value\\n * @private\\n * @param {number} newTop - pixel to move hue handle\\n * @param {boolean} [silent=false] - set true then not fire custom event\\n */\\n\\n\\nSlider.prototype._moveHueHandle = function (newTop, silent) {\\n  var hueHandleElement = this.huebarHandleElement,\\n      baseColorElement = this.baseColorElement,\\n      newGradientColor,\\n      hexStr;\\n  newTop = Math.max(HUEBAR_POS_LIMIT_RANGE[0], newTop);\\n  newTop = Math.min(HUEBAR_POS_LIMIT_RANGE[1], newTop);\\n  svgvml.setTranslateY(hueHandleElement, newTop);\\n  newGradientColor = colorutil.hsvToRGB(this.getHue(), 100, 100);\\n  hexStr = colorutil.rgbToHEX.apply(null, newGradientColor);\\n  svgvml.setGradientColorStop(baseColorElement, hexStr);\\n\\n  if (!silent) {\\n    this.fire('_selectColor', {\\n      color: colorutil.rgbToHEX.apply(null, this.getRGB())\\n    });\\n  }\\n};\\n/**\\n * Move hue bar handle by supplied degree\\n * @param {number} degree - (0 ~ 359.9 degree)\\n * @param {boolean} [silent=false] - set true then not fire custom event\\n */\\n\\n\\nSlider.prototype.moveHue = function (degree, silent) {\\n  var newTop = 0,\\n      absMin,\\n      maxValue;\\n  absMin = Math.abs(HUEBAR_POS_LIMIT_RANGE[0]);\\n  maxValue = absMin + HUEBAR_POS_LIMIT_RANGE[1];\\n  degree = degree || 0;\\n  newTop = maxValue * degree / HUE_WHEEL_MAX - absMin;\\n\\n  this._moveHueHandle(newTop, silent);\\n};\\n/**\\n * Move hue bar handle by supplied percent\\n * @private\\n * @param {number} y - pixel value to move hue handle\\n */\\n\\n\\nSlider.prototype._moveHueByPosition = function (y) {\\n  var offset = HUEBAR_POS_LIMIT_RANGE[0];\\n\\n  this._moveHueHandle(y + offset);\\n};\\n/**\\n * Get huebar handle position by color degree\\n * @returns {number} degree (0 ~ 359.9 degree)\\n */\\n\\n\\nSlider.prototype.getHue = function () {\\n  var handle = this.huebarHandleElement,\\n      position = svgvml.getTranslateXY(handle),\\n      absMin,\\n      maxValue;\\n  absMin = Math.abs(HUEBAR_POS_LIMIT_RANGE[0]);\\n  maxValue = absMin + HUEBAR_POS_LIMIT_RANGE[1]; // maxValue : 359.99 = pos.y : x\\n\\n  return (position[0] + absMin) * HUE_WHEEL_MAX / maxValue;\\n};\\n/**\\n * Get HSV value from slider\\n * @returns {number[]} hsv values\\n */\\n\\n\\nSlider.prototype.getHSV = function () {\\n  var sv = this.getSaturationAndValue(),\\n      h = this.getHue();\\n  return [h].concat(sv);\\n};\\n/**\\n * Get RGB value from slider\\n * @returns {number[]} RGB value\\n */\\n\\n\\nSlider.prototype.getRGB = function () {\\n  return colorutil.hsvToRGB.apply(null, this.getHSV());\\n};\\n/**********\\n * Drag event handler\\n **********/\\n\\n/**\\n * Cache immutable data when dragging or click view\\n * @param {object} event - Click, DragStart event.\\n * @returns {object} cached data.\\n */\\n\\n\\nSlider.prototype._prepareColorSliderForMouseEvent = function (event) {\\n  var options = this.options,\\n      sliderPart = domutil.closest(event.target, '.' + options.cssPrefix + 'slider-part'),\\n      cache;\\n  cache = this._dragDataCache = {\\n    isColorSlider: domutil.hasClass(sliderPart, options.cssPrefix + 'slider-left'),\\n    parentElement: sliderPart\\n  };\\n  return cache;\\n};\\n/**\\n * Click event handler\\n * @param {object} clickEvent - Click event from Drag module\\n */\\n\\n\\nSlider.prototype._onClick = function (clickEvent) {\\n  var cache = this._prepareColorSliderForMouseEvent(clickEvent),\\n      mousePos = domevent.getMousePosition(clickEvent.originEvent, cache.parentElement);\\n\\n  if (cache.isColorSlider) {\\n    this._moveColorSliderByPosition(mousePos[0], mousePos[1]);\\n  } else {\\n    this._moveHueByPosition(mousePos[1]);\\n  }\\n\\n  this._dragDataCache = null;\\n};\\n/**\\n * DragStart event handler\\n * @param {object} dragStartEvent - dragStart event data from Drag#dragStart\\n */\\n\\n\\nSlider.prototype._onDragStart = function (dragStartEvent) {\\n  this._prepareColorSliderForMouseEvent(dragStartEvent);\\n};\\n/**\\n * Drag event handler\\n * @param {Drag#drag} dragEvent - drag event data\\n */\\n\\n\\nSlider.prototype._onDrag = function (dragEvent) {\\n  var cache = this._dragDataCache,\\n      mousePos = domevent.getMousePosition(dragEvent.originEvent, cache.parentElement);\\n\\n  if (cache.isColorSlider) {\\n    this._moveColorSliderByPosition(mousePos[0], mousePos[1]);\\n  } else {\\n    this._moveHueByPosition(mousePos[1]);\\n  }\\n};\\n/**\\n * Drag#dragEnd event handler\\n */\\n\\n\\nSlider.prototype._onDragEnd = function () {\\n  this._dragDataCache = null;\\n};\\n\\nutil.CustomEvents.mixin(Slider);\\nmodule.exports = Slider;\\n\\n//# sourceURL=webpack://tui.colorPicker/./src/js/slider.js?\")},\"./src/js/svgvml.js\":function(module,exports,__webpack_require__){\"use strict\";eval(\"/**\\n * @fileoverview module for manipulate SVG or VML object\\n * @author NHN. FE Development Team <dl_javascript@nhn.com>\\n */\\n\\n\\nvar util = __webpack_require__(/*! tui-code-snippet */ \\\"tui-code-snippet\\\");\\n\\nvar PARSE_TRANSLATE_NUM_REGEX = /[\\\\.\\\\-0-9]+/g;\\nvar SVG_HUE_HANDLE_RIGHT_POS = -6;\\n/* istanbul ignore next */\\n\\nvar svgvml = {\\n  /**\\n   * Return true when browser is below IE8.\\n   * @returns {boolean} is old browser?\\n   */\\n  isOldBrowser: function () {\\n    var _isOldBrowser = svgvml._isOldBrowser;\\n\\n    if (!util.isExisty(_isOldBrowser)) {\\n      svgvml._isOldBrowser = _isOldBrowser = util.browser.msie && util.browser.version < 9;\\n    }\\n\\n    return _isOldBrowser;\\n  },\\n\\n  /**\\n   * Get translate transform value\\n   * @param {SVG|VML} obj - svg or vml object that want to know translate x, y\\n   * @returns {number[]} translated coordinates [x, y]\\n   */\\n  getTranslateXY: function (obj) {\\n    var temp;\\n\\n    if (svgvml.isOldBrowser()) {\\n      temp = obj.style;\\n      return [parseFloat(temp.top), parseFloat(temp.left)];\\n    }\\n\\n    temp = obj.getAttribute('transform');\\n\\n    if (!temp) {\\n      return [0, 0];\\n    }\\n\\n    temp = temp.match(PARSE_TRANSLATE_NUM_REGEX); // need caution for difference of VML, SVG coordinates system.\\n    // translate command need X coords in first parameter. but VML is use CSS coordinate system(top, left)\\n\\n    return [parseFloat(temp[1]), parseFloat(temp[0])];\\n  },\\n\\n  /**\\n   * Set translate transform value\\n   * @param {SVG|VML} obj - SVG or VML object to setting translate transform.\\n   * @param {number} x - translate X value\\n   * @param {number} y - translate Y value\\n   */\\n  setTranslateXY: function (obj, x, y) {\\n    if (svgvml.isOldBrowser()) {\\n      obj.style.left = x + 'px';\\n      obj.style.top = y + 'px';\\n    } else {\\n      obj.setAttribute('transform', 'translate(' + x + ',' + y + ')');\\n    }\\n  },\\n\\n  /**\\n   * Set translate only Y value\\n   * @param {SVG|VML} obj - SVG or VML object to setting translate transform.\\n   * @param {number} y - translate Y value\\n   */\\n  setTranslateY: function (obj, y) {\\n    if (svgvml.isOldBrowser()) {\\n      obj.style.top = y + 'px';\\n    } else {\\n      obj.setAttribute('transform', 'translate(' + SVG_HUE_HANDLE_RIGHT_POS + ',' + y + ')');\\n    }\\n  },\\n\\n  /**\\n   * Set stroke color to SVG or VML object\\n   * @param {SVG|VML} obj - SVG or VML object to setting stroke color\\n   * @param {string} colorStr - color string\\n   */\\n  setStrokeColor: function (obj, colorStr) {\\n    if (svgvml.isOldBrowser()) {\\n      obj.strokecolor = colorStr;\\n    } else {\\n      obj.setAttribute('stroke', colorStr);\\n    }\\n  },\\n\\n  /**\\n   * Set gradient stop color to SVG, VML object.\\n   * @param {SVG|VML} obj - SVG, VML object to applying gradient stop color\\n   * @param {string} colorStr - color string\\n   */\\n  setGradientColorStop: function (obj, colorStr) {\\n    if (svgvml.isOldBrowser()) {\\n      obj.color = colorStr;\\n    } else {\\n      obj.setAttribute('stop-color', colorStr);\\n    }\\n  }\\n};\\nmodule.exports = svgvml;\\n\\n//# sourceURL=webpack://tui.colorPicker/./src/js/svgvml.js?\")},\"./src/styl/tui-color-picker.styl\":function(module,exports,__webpack_require__){eval(\"// extracted by mini-css-extract-plugin\\n\\n//# sourceURL=webpack://tui.colorPicker/./src/styl/tui-color-picker.styl?\")},\"./src/template/palette.js\":function(module,exports,__webpack_require__){\"use strict\";eval('/**\\n * @fileoverview Palette view template\\n * @author NHN. FE Development Team <dl_javascript@nhn.com>\\n */\\n\\n\\nvar layout = [\\'<ul class=\"{{cssPrefix}}clearfix\">{{colorList}}</ul>\\', \\'<div class=\"{{cssPrefix}}clearfix\" style=\"overflow:hidden\">\\', \\'<input type=\"button\" class=\"{{cssPrefix}}palette-toggle-slider\" value=\"{{detailTxt}}\" />\\', \\'<input type=\"text\" class=\"{{cssPrefix}}palette-hex\" value=\"{{color}}\" maxlength=\"7\" />\\', \\'<span class=\"{{cssPrefix}}palette-preview\" style=\"background-color:{{color}};color:{{color}}\">{{color}}</span>\\', \\'</div>\\'].join(\\'\\\\n\\');\\nvar item = \\'<li><input class=\"{{cssPrefix}}palette-button{{selected}}{{itemClass}}\" type=\"button\" style=\"{{itemStyle}}\" title=\"{{color}}\" value=\"{{color}}\" /></li>\\';\\nvar itemStyle = \\'background-color:{{color}};color:{{color}}\\';\\nmodule.exports = {\\n  layout: layout,\\n  item: item,\\n  itemStyle: itemStyle\\n};\\n\\n//# sourceURL=webpack://tui.colorPicker/./src/template/palette.js?')},\"./src/template/slider.js\":function(module,exports,__webpack_require__){\"use strict\";eval('/* WEBPACK VAR INJECTION */(function(global) {/**\\n * @fileoverview Slider template\\n * @author NHN. FE Development Team <dl_javascript@nhn.com>\\n */\\n\\n\\nvar util = __webpack_require__(/*! tui-code-snippet */ \"tui-code-snippet\");\\n\\nvar layout = [\\'<div class=\"{{cssPrefix}}slider-left {{cssPrefix}}slider-part\">{{slider}}</div>\\', \\'<div class=\"{{cssPrefix}}slider-right {{cssPrefix}}slider-part\">{{huebar}}</div>\\'].join(\\'\\\\n\\');\\nvar SVGSlider = [\\'<svg class=\"{{cssPrefix}}svg {{cssPrefix}}svg-slider\">\\', \\'<defs>\\', \\'<linearGradient id=\"{{cssPrefix}}svg-fill-color\" x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"0%\">\\', \\'<stop offset=\"0%\" stop-color=\"rgb(255,255,255)\" />\\', \\'<stop class=\"{{cssPrefix}}slider-basecolor\" offset=\"100%\" stop-color=\"rgb(255,0,0)\" />\\', \\'</linearGradient>\\', \\'<linearGradient id=\"{{cssPrefix}}svn-fill-black\" x1=\"0%\" y1=\"0%\" x2=\"0%\" y2=\"100%\">\\', \\'<stop offset=\"0%\" style=\"stop-color:rgb(0,0,0);stop-opacity:0\" />\\', \\'<stop offset=\"100%\" style=\"stop-color:rgb(0,0,0);stop-opacity:1\" />\\', \\'</linearGradient>\\', \\'</defs>\\', \\'<rect width=\"100%\" height=\"100%\" fill=\"url(#{{cssPrefix}}svg-fill-color)\"></rect>\\', \\'<rect width=\"100%\" height=\"100%\" fill=\"url(#{{cssPrefix}}svn-fill-black)\"></rect>\\', \\'<path transform=\"translate(0,0)\" class=\"{{cssPrefix}}slider-handle\" d=\"M0 7.5 L15 7.5 M7.5 15 L7.5 0 M2 7 a5.5 5.5 0 1 1 0 1 Z\" stroke=\"black\" stroke-width=\"0.75\" fill=\"none\" />\\', \\'</svg>\\'].join(\\'\\\\n\\');\\nvar VMLSlider = [\\'<div class=\"{{cssPrefix}}vml-slider\">\\', \\'<v:rect strokecolor=\"none\" class=\"{{cssPrefix}}vml {{cssPrefix}}vml-slider-bg\">\\', \\'<v:fill class=\"{{cssPrefix}}vml {{cssPrefix}}slider-basecolor\" type=\"gradient\" method=\"none\" color=\"#ff0000\" color2=\"#fff\" angle=\"90\" />\\', \\'</v:rect>\\', \\'<v:rect strokecolor=\"#ccc\" class=\"{{cssPrefix}}vml {{cssPrefix}}vml-slider-bg\">\\', \\'<v:fill type=\"gradient\" method=\"none\" color=\"black\" color2=\"white\" o:opacity2=\"0%\" class=\"{{cssPrefix}}vml\" />\\', \\'</v:rect>\\', \\'<v:shape class=\"{{cssPrefix}}vml {{cssPrefix}}slider-handle\" coordsize=\"1 1\" style=\"width:1px;height:1px;\"\\' + \\'path=\"m 0,7 l 14,7 m 7,14 l 7,0 ar 12,12 2,2 z\" filled=\"false\" stroked=\"true\" />\\', \\'</div>\\'].join(\\'\\\\n\\');\\nvar SVGHuebar = [\\'<svg class=\"{{cssPrefix}}svg {{cssPrefix}}svg-huebar\">\\', \\'<defs>\\', \\'<linearGradient id=\"g\" x1=\"0%\" y1=\"0%\" x2=\"0%\" y2=\"100%\">\\', \\'<stop offset=\"0%\" stop-color=\"rgb(255,0,0)\" />\\', \\'<stop offset=\"16.666%\" stop-color=\"rgb(255,255,0)\" />\\', \\'<stop offset=\"33.333%\" stop-color=\"rgb(0,255,0)\" />\\', \\'<stop offset=\"50%\" stop-color=\"rgb(0,255,255)\" />\\', \\'<stop offset=\"66.666%\" stop-color=\"rgb(0,0,255)\" />\\', \\'<stop offset=\"83.333%\" stop-color=\"rgb(255,0,255)\" />\\', \\'<stop offset=\"100%\" stop-color=\"rgb(255,0,0)\" />\\', \\'</linearGradient>\\', \\'</defs>\\', \\'<rect width=\"18px\" height=\"100%\" fill=\"url(#g)\"></rect>\\', \\'<path transform=\"translate(-6,-3)\" class=\"{{cssPrefix}}huebar-handle\" d=\"M0 0 L4 4 L0 8 L0 0 Z\" fill=\"black\" stroke=\"none\" />\\', \\'</svg>\\'].join(\\'\\\\n\\');\\nvar VMLHuebar = [\\'<div class=\"{{cssPrefix}}vml-huebar\">\\', \\'<v:rect strokecolor=\"#ccc\" class=\"{{cssPrefix}}vml {{cssPrefix}}vml-huebar-bg\">\\', \\'<v:fill type=\"gradient\" method=\"none\" colors=\"\\' + \\'0% rgb(255,0,0), 16.666% rgb(255,255,0), 33.333% rgb(0,255,0), 50% rgb(0,255,255), 66.666% rgb(0,0,255), 83.333% rgb(255,0,255), 100% rgb(255,0,0)\\' + \\'\" angle=\"180\" class=\"{{cssPrefix}}vml\" />\\', \\'</v:rect>\\', \\'<v:shape class=\"{{cssPrefix}}vml {{cssPrefix}}huebar-handle\" coordsize=\"1 1\" style=\"width:1px;height:1px;position:absolute;z-index:1;right:22px;top:-3px;\"\\' + \\'path=\"m 0,0 l 4,4 l 0,8 l 0,0 z\" filled=\"true\" fillcolor=\"black\" stroked=\"false\" />\\', \\'</div>\\'].join(\\'\\\\n\\');\\nvar isOldBrowser = util.browser.msie && util.browser.version < 9;\\n\\nif (isOldBrowser) {\\n  global.document.namespaces.add(\\'v\\', \\'urn:schemas-microsoft-com:vml\\');\\n}\\n\\nmodule.exports = {\\n  layout: layout,\\n  slider: isOldBrowser ? VMLSlider : SVGSlider,\\n  huebar: isOldBrowser ? VMLHuebar : SVGHuebar\\n};\\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../node_modules/webpack/buildin/global.js */ \"./node_modules/webpack/buildin/global.js\")))\\n\\n//# sourceURL=webpack://tui.colorPicker/./src/template/slider.js?')},0:function(module,exports,__webpack_require__){eval('__webpack_require__(/*! ./src/styl/tui-color-picker.styl */\"./src/styl/tui-color-picker.styl\");\\nmodule.exports = __webpack_require__(/*! ./src/js/index.js */\"./src/js/index.js\");\\n\\n\\n//# sourceURL=webpack://tui.colorPicker/multi_./src/styl/tui-color-picker.styl_./src/js/index.js?')},\"tui-code-snippet\":function(module,exports){eval(\"module.exports = __WEBPACK_EXTERNAL_MODULE_tui_code_snippet__;\\n\\n//# sourceURL=webpack://tui.colorPicker/external_%7B%22commonjs%22:%22tui-code-snippet%22,%22commonjs2%22:%22tui-code-snippet%22,%22amd%22:%22tui-code-snippet%22,%22root%22:%5B%22tui%22,%22util%22%5D%7D?\")}})},module.exports=factory(__webpack_require__(\"SuO2\"))},0:function(t,e,n){t.exports=n(\"zUnb\")},1:function(t,e){},2:function(t,e){},3:function(t,e){},L3Vq:function(t,e,n){var i,r,o,a,s,l,c,u,h,d,f,p,g,m,v,y,b,_,w,x,C=C||{version:\"3.3.0\"};if(e.fabric=C,\"undefined\"!=typeof document&&\"undefined\"!=typeof window)C.document=document instanceof(\"undefined\"!=typeof HTMLDocument?HTMLDocument:Document)?document:document.implementation.createHTMLDocument(\"\"),C.window=window;else{var S=new(n(1).JSDOM)(decodeURIComponent(\"%3C!DOCTYPE%20html%3E%3Chtml%3E%3Chead%3E%3C%2Fhead%3E%3Cbody%3E%3C%2Fbody%3E%3C%2Fhtml%3E\"),{features:{FetchExternalResources:[\"img\"]},resources:\"usable\"}).window;C.document=S.document,C.jsdomImplForWrapper=n(2).implForWrapper,C.nodeCanvas=n(3).Canvas,C.window=S,DOMParser=C.window.DOMParser}function k(t,e){var n=t.canvas,i=e.targetCanvas,r=i.getContext(\"2d\");r.translate(0,i.height),r.scale(1,-1),r.drawImage(n,0,n.height-i.height,i.width,i.height,0,0,i.width,i.height)}function E(t,e){var n=e.targetCanvas.getContext(\"2d\"),i=e.destinationWidth,r=e.destinationHeight,o=i*r*4,a=new Uint8Array(this.imageBuffer,0,o),s=new Uint8ClampedArray(this.imageBuffer,0,o);t.readPixels(0,0,i,r,t.RGBA,t.UNSIGNED_BYTE,a);var l=new ImageData(s,i,r);n.putImageData(l,0,0)}C.isTouchSupported=\"ontouchstart\"in C.window||\"ontouchstart\"in C.document||C.window&&C.window.navigator&&C.window.navigator.maxTouchPoints>0,C.isLikelyNode=\"undefined\"!=typeof Buffer&&\"undefined\"==typeof window,C.SHARED_ATTRIBUTES=[\"display\",\"transform\",\"fill\",\"fill-opacity\",\"fill-rule\",\"opacity\",\"stroke\",\"stroke-dasharray\",\"stroke-linecap\",\"stroke-dashoffset\",\"stroke-linejoin\",\"stroke-miterlimit\",\"stroke-opacity\",\"stroke-width\",\"id\",\"paint-order\",\"vector-effect\",\"instantiated_by_use\",\"clip-path\"],C.DPI=96,C.reNum=\"(?:[-+]?(?:\\\\d+|\\\\d*\\\\.\\\\d+)(?:[eE][-+]?\\\\d+)?)\",C.fontPaths={},C.iMatrix=[1,0,0,1,0,0],C.perfLimitSizeTotal=2097152,C.maxCacheSideLimit=4096,C.minCacheSideLimit=256,C.charWidthsCache={},C.textureSize=2048,C.disableStyleCopyPaste=!1,C.enableGLFiltering=!0,C.devicePixelRatio=C.window.devicePixelRatio||C.window.webkitDevicePixelRatio||C.window.mozDevicePixelRatio||1,C.browserShadowBlurConstant=1,C.arcToSegmentsCache={},C.boundsOfCurveCache={},C.cachesBoundsOfCurve=!0,C.forceGLPutImageData=!1,C.initFilterBackend=function(){return C.enableGLFiltering&&C.isWebglSupported&&C.isWebglSupported(C.textureSize)?(console.log(\"max texture size: \"+C.maxTextureSize),new C.WebglFilterBackend({tileSize:C.textureSize})):C.Canvas2dFilterBackend?new C.Canvas2dFilterBackend:void 0},\"undefined\"!=typeof document&&\"undefined\"!=typeof window&&(window.fabric=C),function(){function t(t,e){if(this.__eventListeners[t]){var n=this.__eventListeners[t];e?n[n.indexOf(e)]=!1:C.util.array.fill(n,!1)}}function e(t,e){if(this.__eventListeners||(this.__eventListeners={}),1===arguments.length)for(var n in t)this.on(n,t[n]);else this.__eventListeners[t]||(this.__eventListeners[t]=[]),this.__eventListeners[t].push(e);return this}function n(e,n){if(!this.__eventListeners)return this;if(0===arguments.length)for(e in this.__eventListeners)t.call(this,e);else if(1===arguments.length&&\"object\"==typeof arguments[0])for(var i in e)t.call(this,i,e[i]);else t.call(this,e,n);return this}function i(t,e){if(!this.__eventListeners)return this;var n=this.__eventListeners[t];if(!n)return this;for(var i=0,r=n.length;i<r;i++)n[i]&&n[i].call(this,e||{});return this.__eventListeners[t]=n.filter(function(t){return!1!==t}),this}C.Observable={observe:e,stopObserving:n,fire:i,on:e,off:n,trigger:i}}(),C.Collection={_objects:[],add:function(){if(this._objects.push.apply(this._objects,arguments),this._onObjectAdded)for(var t=0,e=arguments.length;t<e;t++)this._onObjectAdded(arguments[t]);return this.renderOnAddRemove&&this.requestRenderAll(),this},insertAt:function(t,e,n){var i=this._objects;return n?i[e]=t:i.splice(e,0,t),this._onObjectAdded&&this._onObjectAdded(t),this.renderOnAddRemove&&this.requestRenderAll(),this},remove:function(){for(var t,e=this._objects,n=!1,i=0,r=arguments.length;i<r;i++)-1!==(t=e.indexOf(arguments[i]))&&(n=!0,e.splice(t,1),this._onObjectRemoved&&this._onObjectRemoved(arguments[i]));return this.renderOnAddRemove&&n&&this.requestRenderAll(),this},forEachObject:function(t,e){for(var n=this.getObjects(),i=0,r=n.length;i<r;i++)t.call(e,n[i],i,n);return this},getObjects:function(t){return void 0===t?this._objects.concat():this._objects.filter(function(e){return e.type===t})},item:function(t){return this._objects[t]},isEmpty:function(){return 0===this._objects.length},size:function(){return this._objects.length},contains:function(t){return this._objects.indexOf(t)>-1},complexity:function(){return this._objects.reduce(function(t,e){return t+(e.complexity?e.complexity():0)},0)}},C.CommonMethods={_setOptions:function(t){for(var e in t)this.set(e,t[e])},_initGradient:function(t,e){!t||!t.colorStops||t instanceof C.Gradient||this.set(e,new C.Gradient(t))},_initPattern:function(t,e,n){!t||!t.source||t instanceof C.Pattern?n&&n():this.set(e,new C.Pattern(t,n))},_initClipping:function(t){if(t.clipTo&&\"string\"==typeof t.clipTo){var e=C.util.getFunctionBody(t.clipTo);void 0!==e&&(this.clipTo=new Function(\"ctx\",e))}},_setObject:function(t){for(var e in t)this._set(e,t[e])},set:function(t,e){return\"object\"==typeof t?this._setObject(t):this._set(t,\"function\"==typeof e&&\"clipTo\"!==t?e(this.get(t)):e),this},_set:function(t,e){this[t]=e},toggle:function(t){var e=this.get(t);return\"boolean\"==typeof e&&this.set(t,!e),this},get:function(t){return this[t]}},i=e,r=Math.sqrt,o=Math.atan2,a=Math.pow,s=Math.abs,l=Math.PI/180,c=Math.PI/2,C.util={cos:function(t){if(0===t)return 1;switch(t<0&&(t=-t),t/c){case 1:case 3:return 0;case 2:return-1}return Math.cos(t)},sin:function(t){if(0===t)return 0;var e=1;switch(t<0&&(e=-1),t/c){case 1:return e;case 2:return 0;case 3:return-e}return Math.sin(t)},removeFromArray:function(t,e){var n=t.indexOf(e);return-1!==n&&t.splice(n,1),t},getRandomInt:function(t,e){return Math.floor(Math.random()*(e-t+1))+t},degreesToRadians:function(t){return t*l},radiansToDegrees:function(t){return t/l},rotatePoint:function(t,e,n){t.subtractEquals(e);var i=C.util.rotateVector(t,n);return new C.Point(i.x,i.y).addEquals(e)},rotateVector:function(t,e){var n=C.util.sin(e),i=C.util.cos(e);return{x:t.x*i-t.y*n,y:t.x*n+t.y*i}},transformPoint:function(t,e,n){return n?new C.Point(e[0]*t.x+e[2]*t.y,e[1]*t.x+e[3]*t.y):new C.Point(e[0]*t.x+e[2]*t.y+e[4],e[1]*t.x+e[3]*t.y+e[5])},makeBoundingBoxFromPoints:function(t){var e=[t[0].x,t[1].x,t[2].x,t[3].x],n=C.util.array.min(e),i=C.util.array.max(e)-n,r=[t[0].y,t[1].y,t[2].y,t[3].y],o=C.util.array.min(r);return{left:n,top:o,width:i,height:C.util.array.max(r)-o}},invertTransform:function(t){var e=1/(t[0]*t[3]-t[1]*t[2]),n=[e*t[3],-e*t[1],-e*t[2],e*t[0]],i=C.util.transformPoint({x:t[4],y:t[5]},n,!0);return n[4]=-i.x,n[5]=-i.y,n},toFixed:function(t,e){return parseFloat(Number(t).toFixed(e))},parseUnit:function(t,e){var n=/\\D{0,2}$/.exec(t),i=parseFloat(t);switch(e||(e=C.Text.DEFAULT_SVG_FONT_SIZE),n[0]){case\"mm\":return i*C.DPI/25.4;case\"cm\":return i*C.DPI/2.54;case\"in\":return i*C.DPI;case\"pt\":return i*C.DPI/72;case\"pc\":return i*C.DPI/72*12;case\"em\":return i*e;default:return i}},falseFunction:function(){return!1},getKlass:function(t,e){return t=C.util.string.camelize(t.charAt(0).toUpperCase()+t.slice(1)),C.util.resolveNamespace(e)[t]},getSvgAttributes:function(t){var e=[\"instantiated_by_use\",\"style\",\"id\",\"class\"];switch(t){case\"linearGradient\":e=e.concat([\"x1\",\"y1\",\"x2\",\"y2\",\"gradientUnits\",\"gradientTransform\"]);break;case\"radialGradient\":e=e.concat([\"gradientUnits\",\"gradientTransform\",\"cx\",\"cy\",\"r\",\"fx\",\"fy\",\"fr\"]);break;case\"stop\":e=e.concat([\"offset\",\"stop-color\",\"stop-opacity\"])}return e},resolveNamespace:function(t){if(!t)return C;var e,n=t.split(\".\"),r=n.length,o=i||C.window;for(e=0;e<r;++e)o=o[n[e]];return o},loadImage:function(t,e,n,i){if(t){var r=C.util.createImage(),o=function(){e&&e.call(n,r),r=r.onload=r.onerror=null};r.onload=o,r.onerror=function(){C.log(\"Error loading \"+r.src),e&&e.call(n,null,!0),r=r.onload=r.onerror=null},0!==t.indexOf(\"data\")&&i&&(r.crossOrigin=i),\"data:image/svg\"===t.substring(0,14)&&(r.onload=null,C.util.loadImageInDom(r,o)),r.src=t}else e&&e.call(n,t)},loadImageInDom:function(t,e){var n=C.document.createElement(\"div\");n.style.width=n.style.height=\"1px\",n.style.left=n.style.top=\"-100%\",n.style.position=\"absolute\",n.appendChild(t),C.document.querySelector(\"body\").appendChild(n),t.onload=function(){e(),n.parentNode.removeChild(n),n=null}},enlivenObjects:function(t,e,n,i){var r=[],o=0,a=(t=t||[]).length;function s(){++o===a&&e&&e(r.filter(function(t){return t}))}a?t.forEach(function(t,e){t&&t.type?C.util.getKlass(t.type,n).fromObject(t,function(n,o){o||(r[e]=n),i&&i(t,n,o),s()}):s()}):e&&e(r)},enlivenPatterns:function(t,e){function n(){++r===o&&e&&e(i)}var i=[],r=0,o=(t=t||[]).length;o?t.forEach(function(t,e){t&&t.source?new C.Pattern(t,function(t){i[e]=t,n()}):(i[e]=t,n())}):e&&e(i)},groupSVGElements:function(t,e,n){var i;return t&&1===t.length?t[0]:(e&&(e.width&&e.height?e.centerPoint={x:e.width/2,y:e.height/2}:(delete e.width,delete e.height)),i=new C.Group(t,e),void 0!==n&&(i.sourcePath=n),i)},populateWithProperties:function(t,e,n){if(n&&\"[object Array]\"===Object.prototype.toString.call(n))for(var i=0,r=n.length;i<r;i++)n[i]in t&&(e[n[i]]=t[n[i]])},drawDashedLine:function(t,e,n,i,a,s){var l=i-e,c=a-n,u=r(l*l+c*c),h=o(c,l),d=s.length,f=0,p=!0;for(t.save(),t.translate(e,n),t.moveTo(0,0),t.rotate(h),e=0;u>e;)(e+=s[f++%d])>u&&(e=u),t[p?\"lineTo\":\"moveTo\"](e,0),p=!p;t.restore()},createCanvasElement:function(){return C.document.createElement(\"canvas\")},copyCanvasElement:function(t){var e=C.util.createCanvasElement();return e.width=t.width,e.height=t.height,e.getContext(\"2d\").drawImage(t,0,0),e},toDataURL:function(t,e,n){return t.toDataURL(\"image/\"+e,n)},createImage:function(){return C.document.createElement(\"img\")},clipContext:function(t,e){e.save(),e.beginPath(),t.clipTo(e),e.clip()},multiplyTransformMatrices:function(t,e,n){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],n?0:t[0]*e[4]+t[2]*e[5]+t[4],n?0:t[1]*e[4]+t[3]*e[5]+t[5]]},qrDecompose:function(t){var e=o(t[1],t[0]),n=a(t[0],2)+a(t[1],2),i=r(n),s=(t[0]*t[3]-t[2]*t[1])/i,c=o(t[0]*t[2]+t[1]*t[3],n);return{angle:e/l,scaleX:i,scaleY:s,skewX:c/l,skewY:0,translateX:t[4],translateY:t[5]}},customTransformMatrix:function(t,e,n){var i=[1,0,s(Math.tan(n*l)),1],r=[s(t),0,0,s(e)];return C.util.multiplyTransformMatrices(r,i,!0)},resetObjectTransform:function(t){t.scaleX=1,t.scaleY=1,t.skewX=0,t.skewY=0,t.flipX=!1,t.flipY=!1,t.rotate(0)},saveObjectTransform:function(t){return{scaleX:t.scaleX,scaleY:t.scaleY,skewX:t.skewX,skewY:t.skewY,angle:t.angle,left:t.left,flipX:t.flipX,flipY:t.flipY,top:t.top}},getFunctionBody:function(t){return(String(t).match(/function[^{]*\\{([\\s\\S]*)\\}/)||{})[1]},isTransparent:function(t,e,n,i){i>0&&(e>i?e-=i:e=0,n>i?n-=i:n=0);var r,o=!0,a=t.getImageData(e,n,2*i||1,2*i||1),s=a.data.length;for(r=3;r<s&&0!=(o=a.data[r]<=0);r+=4);return a=null,o},parsePreserveAspectRatioAttribute:function(t){var e,n=\"meet\",i=t.split(\" \");return i&&i.length&&(\"meet\"!==(n=i.pop())&&\"slice\"!==n?(e=n,n=\"meet\"):i.length&&(e=i.pop())),{meetOrSlice:n,alignX:\"none\"!==e?e.slice(1,4):\"none\",alignY:\"none\"!==e?e.slice(5,8):\"none\"}},clearFabricFontCache:function(t){(t=(t||\"\").toLowerCase())?C.charWidthsCache[t]&&delete C.charWidthsCache[t]:C.charWidthsCache={}},limitDimsByArea:function(t,e){var n=Math.sqrt(e*t),i=Math.floor(e/n);return{x:Math.floor(n),y:i}},capValue:function(t,e,n){return Math.max(t,Math.min(e,n))},findScaleToFit:function(t,e){return Math.min(e.width/t.width,e.height/t.height)},findScaleToCover:function(t,e){return Math.max(e.width/t.width,e.height/t.height)},matrixToSVG:function(t){return\"matrix(\"+t.map(function(t){return C.util.toFixed(t,C.Object.NUM_FRACTION_DIGITS)}).join(\" \")+\")\"}},function(){var t=Array.prototype.join;function e(e,r,o,a,s,l,c){var u=t.call(arguments);if(C.arcToSegmentsCache[u])return C.arcToSegmentsCache[u];var h=Math.PI,d=c*h/180,f=C.util.sin(d),p=C.util.cos(d),g=0,m=0,v=-p*e*.5-f*r*.5,y=-p*r*.5+f*e*.5,b=(o=Math.abs(o))*o,_=(a=Math.abs(a))*a,w=y*y,x=v*v,S=b*_-b*w-_*x,k=0;if(S<0){var E=Math.sqrt(1-S/(b*_));o*=E,a*=E}else k=(s===l?-1:1)*Math.sqrt(S/(b*w+_*x));var T=k*o*y/a,O=-k*a*v/o,P=p*T-f*O+.5*e,j=f*T+p*O+.5*r,A=i(1,0,(v-T)/o,(y-O)/a),M=i((v-T)/o,(y-O)/a,(-v-T)/o,(-y-O)/a);0===l&&M>0?M-=2*h:1===l&&M<0&&(M+=2*h);for(var D=Math.ceil(Math.abs(M/h*2)),I=[],R=M/D,L=8/3*Math.sin(R/4)*Math.sin(R/4)/Math.sin(R/2),F=A+R,N=0;N<D;N++)I[N]=n(A,F,p,f,o,a,P,j,L,g,m),g=I[N][4],m=I[N][5],A=F,F+=R;return C.arcToSegmentsCache[u]=I,I}function n(t,e,n,i,r,o,a,s,l,c,u){var h=C.util.cos(t),d=C.util.sin(t),f=C.util.cos(e),p=C.util.sin(e),g=n*r*f-i*o*p+a,m=i*r*f+n*o*p+s;return[c+l*(-n*r*d-i*o*h),u+l*(-i*r*d+n*o*h),g+l*(n*r*p+i*o*f),m+l*(i*r*p-n*o*f),g,m]}function i(t,e,n,i){var r=Math.atan2(e,t),o=Math.atan2(i,n);return o>=r?o-r:2*Math.PI-(r-o)}function r(e,n,i,r,o,a,s,l){var c;if(C.cachesBoundsOfCurve&&(c=t.call(arguments),C.boundsOfCurveCache[c]))return C.boundsOfCurveCache[c];var u,h,d,f,p,g,m,v,y=Math.sqrt,b=Math.min,_=Math.max,w=Math.abs,x=[],S=[[],[]];h=6*e-12*i+6*o,u=-3*e+9*i-9*o+3*s,d=3*i-3*e;for(var k=0;k<2;++k)if(k>0&&(h=6*n-12*r+6*a,u=-3*n+9*r-9*a+3*l,d=3*r-3*n),w(u)<1e-12){if(w(h)<1e-12)continue;0<(f=-d/h)&&f<1&&x.push(f)}else(m=h*h-4*d*u)<0||(0<(p=(-h+(v=y(m)))/(2*u))&&p<1&&x.push(p),0<(g=(-h-v)/(2*u))&&g<1&&x.push(g));for(var E,T=x.length,O=T;T--;)S[0][T]=(E=1-(f=x[T]))*E*E*e+3*E*E*f*i+3*E*f*f*o+f*f*f*s,S[1][T]=E*E*E*n+3*E*E*f*r+3*E*f*f*a+f*f*f*l;S[0][O]=e,S[1][O]=n,S[0][O+1]=s,S[1][O+1]=l;var P=[{x:b.apply(null,S[0]),y:b.apply(null,S[1])},{x:_.apply(null,S[0]),y:_.apply(null,S[1])}];return C.cachesBoundsOfCurve&&(C.boundsOfCurveCache[c]=P),P}C.util.drawArc=function(t,n,i,r){for(var o=[[],[],[],[]],a=e(r[5]-n,r[6]-i,r[0],r[1],r[3],r[4],r[2]),s=0,l=a.length;s<l;s++)o[s][0]=a[s][0]+n,o[s][1]=a[s][1]+i,o[s][2]=a[s][2]+n,o[s][3]=a[s][3]+i,o[s][4]=a[s][4]+n,o[s][5]=a[s][5]+i,t.bezierCurveTo.apply(t,o[s])},C.util.getBoundsOfArc=function(t,n,i,o,a,s,l,c,u){for(var h,d=0,f=0,p=[],g=e(c-t,u-n,i,o,s,l,a),m=0,v=g.length;m<v;m++)h=r(d,f,g[m][0],g[m][1],g[m][2],g[m][3],g[m][4],g[m][5]),p.push({x:h[0].x+t,y:h[0].y+n}),p.push({x:h[1].x+t,y:h[1].y+n}),d=g[m][4],f=g[m][5];return p},C.util.getBoundsOfCurve=r}(),function(){var t=Array.prototype.slice;function e(t,e,n){if(t&&0!==t.length){var i=t.length-1,r=e?t[i][e]:t[i];if(e)for(;i--;)n(t[i][e],r)&&(r=t[i][e]);else for(;i--;)n(t[i],r)&&(r=t[i]);return r}}C.util.array={fill:function(t,e){for(var n=t.length;n--;)t[n]=e;return t},invoke:function(e,n){for(var i=t.call(arguments,2),r=[],o=0,a=e.length;o<a;o++)r[o]=i.length?e[o][n].apply(e[o],i):e[o][n].call(e[o]);return r},min:function(t,n){return e(t,n,function(t,e){return t<e})},max:function(t,n){return e(t,n,function(t,e){return t>=e})}}}(),function(){function t(e,n,i){if(i)if(!C.isLikelyNode&&n instanceof Element)e=n;else if(n instanceof Array){e=[];for(var r=0,o=n.length;r<o;r++)e[r]=t({},n[r],i)}else if(n&&\"object\"==typeof n)for(var a in n)\"canvas\"===a?e[a]=t({},n[a]):n.hasOwnProperty(a)&&(e[a]=t({},n[a],i));else e=n;else for(var a in n)e[a]=n[a];return e}C.util.object={extend:t,clone:function(e,n){return t({},e,n)}},C.util.object.extend(C.util,C.Observable)}(),function(){function t(t,e){var n=t.charCodeAt(e);if(isNaN(n))return\"\";if(n<55296||n>57343)return t.charAt(e);if(55296<=n&&n<=56319){if(t.length<=e+1)throw\"High surrogate without following low surrogate\";var i=t.charCodeAt(e+1);if(56320>i||i>57343)throw\"High surrogate without following low surrogate\";return t.charAt(e)+t.charAt(e+1)}if(0===e)throw\"Low surrogate without preceding high surrogate\";var r=t.charCodeAt(e-1);if(55296>r||r>56319)throw\"Low surrogate without preceding high surrogate\";return!1}C.util.string={camelize:function(t){return t.replace(/-+(.)?/g,function(t,e){return e?e.toUpperCase():\"\"})},capitalize:function(t,e){return t.charAt(0).toUpperCase()+(e?t.slice(1):t.slice(1).toLowerCase())},escapeXml:function(t){return t.replace(/&/g,\"&amp;\").replace(/\"/g,\"&quot;\").replace(/'/g,\"&apos;\").replace(/</g,\"&lt;\").replace(/>/g,\"&gt;\")},graphemeSplit:function(e){var n,i=0,r=[];for(i=0;i<e.length;i++)!1!==(n=t(e,i))&&r.push(n);return r}}}(),function(){var t=Array.prototype.slice,e=function(){},n=function(){for(var t in{toString:1})if(\"toString\"===t)return!1;return!0}(),i=function(t,e,i){for(var r in e)t.prototype[r]=r in t.prototype&&\"function\"==typeof t.prototype[r]&&(e[r]+\"\").indexOf(\"callSuper\")>-1?function(t){return function(){var n=this.constructor.superclass;this.constructor.superclass=i;var r=e[t].apply(this,arguments);if(this.constructor.superclass=n,\"initialize\"!==t)return r}}(r):e[r],n&&(e.toString!==Object.prototype.toString&&(t.prototype.toString=e.toString),e.valueOf!==Object.prototype.valueOf&&(t.prototype.valueOf=e.valueOf))};function r(){}function o(e){for(var n=null,i=this;i.constructor.superclass;){var r=i.constructor.superclass.prototype[e];if(i[e]!==r){n=r;break}i=i.constructor.superclass.prototype}return n?arguments.length>1?n.apply(this,t.call(arguments,1)):n.call(this):console.log(\"tried to callSuper \"+e+\", method not found in prototype chain\",this)}C.util.createClass=function(){var n=null,a=t.call(arguments,0);function s(){this.initialize.apply(this,arguments)}\"function\"==typeof a[0]&&(n=a.shift()),s.superclass=n,s.subclasses=[],n&&(r.prototype=n.prototype,s.prototype=new r,n.subclasses.push(s));for(var l=0,c=a.length;l<c;l++)i(s,a[l],n);return s.prototype.initialize||(s.prototype.initialize=e),s.prototype.constructor=s,s.prototype.callSuper=o,s}}(),x=!!C.document.createElement(\"div\").attachEvent,C.util.addListener=function(t,e,n,i){t&&t.addEventListener(e,n,!x&&i)},C.util.removeListener=function(t,e,n,i){t&&t.removeEventListener(e,n,!x&&i)},C.util.getPointer=function(t){var e=C.util.getScrollLeftTop(t.target),n=function(t){var e=t.changedTouches;return e&&e[0]?e[0]:t}(t);return{x:n.clientX+e.left,y:n.clientY+e.top}},b=C.document.createElement(\"div\"),_=/alpha\\s*\\(\\s*opacity\\s*=\\s*([^\\)]+)\\)/,w=function(t){return t},\"string\"==typeof b.style.opacity?w=function(t,e){return t.style.opacity=e,t}:\"string\"==typeof b.style.filter&&(w=function(t,e){var n=t.style;return t.currentStyle&&!t.currentStyle.hasLayout&&(n.zoom=1),_.test(n.filter)?n.filter=n.filter.replace(_,e=e>=.9999?\"\":\"alpha(opacity=\"+100*e+\")\"):n.filter+=\" alpha(opacity=\"+100*e+\")\",t}),C.util.setStyle=function(t,e){var n=t.style;if(!n)return t;if(\"string\"==typeof e)return t.style.cssText+=\";\"+e,e.indexOf(\"opacity\")>-1?w(t,e.match(/opacity:\\s*(\\d?\\.?\\d*)/)[1]):t;for(var i in e)\"opacity\"===i?w(t,e[i]):n[\"float\"===i||\"cssFloat\"===i?void 0===n.styleFloat?\"cssFloat\":\"styleFloat\":i]=e[i];return t},function(){var t,e,n,i,r=Array.prototype.slice,o=function(t){return r.call(t,0)};try{t=o(C.document.childNodes)instanceof Array}catch(l){}function a(t,e){var n=C.document.createElement(t);for(var i in e)\"class\"===i?n.className=e[i]:\"for\"===i?n.htmlFor=e[i]:n.setAttribute(i,e[i]);return n}function s(t){for(var e=0,n=0,i=C.document.documentElement,r=C.document.body||{scrollLeft:0,scrollTop:0};t&&(t.parentNode||t.host)&&((t=t.parentNode||t.host)===C.document?(e=r.scrollLeft||i.scrollLeft||0,n=r.scrollTop||i.scrollTop||0):(e+=t.scrollLeft||0,n+=t.scrollTop||0),1!==t.nodeType||\"fixed\"!==t.style.position););return{left:e,top:n}}t||(o=function(t){for(var e=new Array(t.length),n=t.length;n--;)e[n]=t[n];return e}),e=C.document.defaultView&&C.document.defaultView.getComputedStyle?function(t,e){var n=C.document.defaultView.getComputedStyle(t,null);return n?n[e]:void 0}:function(t,e){var n=t.style[e];return!n&&t.currentStyle&&(n=t.currentStyle[e]),n},i=\"userSelect\"in(n=C.document.documentElement.style)?\"userSelect\":\"MozUserSelect\"in n?\"MozUserSelect\":\"WebkitUserSelect\"in n?\"WebkitUserSelect\":\"KhtmlUserSelect\"in n?\"KhtmlUserSelect\":\"\",C.util.makeElementUnselectable=function(t){return void 0!==t.onselectstart&&(t.onselectstart=C.util.falseFunction),i?t.style[i]=\"none\":\"string\"==typeof t.unselectable&&(t.unselectable=\"on\"),t},C.util.makeElementSelectable=function(t){return void 0!==t.onselectstart&&(t.onselectstart=null),i?t.style[i]=\"\":\"string\"==typeof t.unselectable&&(t.unselectable=\"\"),t},C.util.getScript=function(t,e){var n=C.document.getElementsByTagName(\"head\")[0],i=C.document.createElement(\"script\"),r=!0;i.onload=i.onreadystatechange=function(t){if(r){if(\"string\"==typeof this.readyState&&\"loaded\"!==this.readyState&&\"complete\"!==this.readyState)return;r=!1,e(t||C.window.event),i=i.onload=i.onreadystatechange=null}},i.src=t,n.appendChild(i)},C.util.getById=function(t){return\"string\"==typeof t?C.document.getElementById(t):t},C.util.toArray=o,C.util.makeElement=a,C.util.addClass=function(t,e){t&&-1===(\" \"+t.className+\" \").indexOf(\" \"+e+\" \")&&(t.className+=(t.className?\" \":\"\")+e)},C.util.wrapElement=function(t,e,n){return\"string\"==typeof e&&(e=a(e,n)),t.parentNode&&t.parentNode.replaceChild(e,t),e.appendChild(t),e},C.util.getScrollLeftTop=s,C.util.getElementOffset=function(t){var n,i,r=t&&t.ownerDocument,o={left:0,top:0},a={left:0,top:0},l={borderLeftWidth:\"left\",borderTopWidth:\"top\",paddingLeft:\"left\",paddingTop:\"top\"};if(!r)return a;for(var c in l)a[l[c]]+=parseInt(e(t,c),10)||0;return n=r.documentElement,void 0!==t.getBoundingClientRect&&(o=t.getBoundingClientRect()),i=s(t),{left:o.left+i.left-(n.clientLeft||0)+a.left,top:o.top+i.top-(n.clientTop||0)+a.top}},C.util.getElementStyle=e,C.util.getNodeCanvas=function(t){var e=C.jsdomImplForWrapper(t);return e._canvas||e._image},C.util.cleanUpJsdomNode=function(t){if(C.isLikelyNode){var e=C.jsdomImplForWrapper(t);e&&(e._image=null,e._canvas=null,e._currentSrc=null,e._attributes=null,e._classList=null)}}}(),function(){function t(){}C.util.request=function(e,n){n||(n={});var i=n.method?n.method.toUpperCase():\"GET\",r=n.onComplete||function(){},o=new C.window.XMLHttpRequest,a=n.body||n.parameters;return o.onreadystatechange=function(){4===o.readyState&&(r(o),o.onreadystatechange=t)},\"GET\"===i&&(a=null,\"string\"==typeof n.parameters&&(e=function(t,e){return t+(/\\?/.test(t)?\"&\":\"?\")+e}(e,n.parameters))),o.open(i,e,!0),\"POST\"!==i&&\"PUT\"!==i||o.setRequestHeader(\"Content-Type\",\"application/x-www-form-urlencoded\"),o.send(a),o}}(),C.log=function(){},C.warn=function(){},\"undefined\"!=typeof console&&[\"log\",\"warn\"].forEach(function(t){void 0!==console[t]&&\"function\"==typeof console[t].apply&&(C[t]=function(){return console[t].apply(console,arguments)})}),function(){function t(){return!1}var e=C.window.requestAnimationFrame||C.window.webkitRequestAnimationFrame||C.window.mozRequestAnimationFrame||C.window.oRequestAnimationFrame||C.window.msRequestAnimationFrame||function(t){return C.window.setTimeout(t,1e3/60)},n=C.window.cancelAnimationFrame||C.window.clearTimeout;function i(){return e.apply(C.window,arguments)}C.util.animate=function(e){i(function(n){e||(e={});var r,o=n||+new Date,a=e.duration||500,s=o+a,l=e.onChange||t,c=e.abort||t,u=e.onComplete||t,h=e.easing||function(t,e,n,i){return-n*Math.cos(t/i*(Math.PI/2))+n+e},d=\"startValue\"in e?e.startValue:0,f=\"endValue\"in e?e.endValue:100,p=e.byValue||f-d;e.onStart&&e.onStart(),function t(n){if(c())u(f,1,1);else{var g=(r=n||+new Date)>s?a:r-o,m=g/a,v=h(g,d,p,a),y=Math.abs((v-d)/p);l(v,y,m),r>s?e.onComplete&&e.onComplete():i(t)}}(o)})},C.util.requestAnimFrame=i,C.util.cancelAnimFrame=function(){return n.apply(C.window,arguments)}}(),C.util.animateColor=function(t,e,n,i){var r=new C.Color(t).getSource(),o=new C.Color(e).getSource();C.util.animate(C.util.object.extend(i=i||{},{duration:n||500,startValue:r,endValue:o,byValue:o,easing:function(t,e,n,r){var o,a,s,l;return o=e,a=n,s=i.colorEasing?i.colorEasing(t,r):1-Math.cos(t/r*(Math.PI/2)),l=\"rgba(\"+parseInt(o[0]+s*(a[0]-o[0]),10)+\",\"+parseInt(o[1]+s*(a[1]-o[1]),10)+\",\"+parseInt(o[2]+s*(a[2]-o[2]),10),(l+=\",\"+(o&&a?parseFloat(o[3]+s*(a[3]-o[3])):1))+\")\"}}))},function(){function t(t,e,n,i){return t<Math.abs(e)?(t=e,i=n/4):i=0===e&&0===t?n/(2*Math.PI)*Math.asin(1):n/(2*Math.PI)*Math.asin(e/t),{a:t,c:e,p:n,s:i}}function e(t,e,n){return t.a*Math.pow(2,10*(e-=1))*Math.sin((e*n-t.s)*(2*Math.PI)/t.p)}function n(t,e,n,r){return n-i(r-t,0,n,r)+e}function i(t,e,n,i){return(t/=i)<1/2.75?n*(7.5625*t*t)+e:t<2/2.75?n*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?n*(7.5625*(t-=2.25/2.75)*t+.9375)+e:n*(7.5625*(t-=2.625/2.75)*t+.984375)+e}C.util.ease={easeInQuad:function(t,e,n,i){return n*(t/=i)*t+e},easeOutQuad:function(t,e,n,i){return-n*(t/=i)*(t-2)+e},easeInOutQuad:function(t,e,n,i){return(t/=i/2)<1?n/2*t*t+e:-n/2*(--t*(t-2)-1)+e},easeInCubic:function(t,e,n,i){return n*(t/=i)*t*t+e},easeOutCubic:function(t,e,n,i){return n*((t=t/i-1)*t*t+1)+e},easeInOutCubic:function(t,e,n,i){return(t/=i/2)<1?n/2*t*t*t+e:n/2*((t-=2)*t*t+2)+e},easeInQuart:function(t,e,n,i){return n*(t/=i)*t*t*t+e},easeOutQuart:function(t,e,n,i){return-n*((t=t/i-1)*t*t*t-1)+e},easeInOutQuart:function(t,e,n,i){return(t/=i/2)<1?n/2*t*t*t*t+e:-n/2*((t-=2)*t*t*t-2)+e},easeInQuint:function(t,e,n,i){return n*(t/=i)*t*t*t*t+e},easeOutQuint:function(t,e,n,i){return n*((t=t/i-1)*t*t*t*t+1)+e},easeInOutQuint:function(t,e,n,i){return(t/=i/2)<1?n/2*t*t*t*t*t+e:n/2*((t-=2)*t*t*t*t+2)+e},easeInSine:function(t,e,n,i){return-n*Math.cos(t/i*(Math.PI/2))+n+e},easeOutSine:function(t,e,n,i){return n*Math.sin(t/i*(Math.PI/2))+e},easeInOutSine:function(t,e,n,i){return-n/2*(Math.cos(Math.PI*t/i)-1)+e},easeInExpo:function(t,e,n,i){return 0===t?e:n*Math.pow(2,10*(t/i-1))+e},easeOutExpo:function(t,e,n,i){return t===i?e+n:n*(1-Math.pow(2,-10*t/i))+e},easeInOutExpo:function(t,e,n,i){return 0===t?e:t===i?e+n:(t/=i/2)<1?n/2*Math.pow(2,10*(t-1))+e:n/2*(2-Math.pow(2,-10*--t))+e},easeInCirc:function(t,e,n,i){return-n*(Math.sqrt(1-(t/=i)*t)-1)+e},easeOutCirc:function(t,e,n,i){return n*Math.sqrt(1-(t=t/i-1)*t)+e},easeInOutCirc:function(t,e,n,i){return(t/=i/2)<1?-n/2*(Math.sqrt(1-t*t)-1)+e:n/2*(Math.sqrt(1-(t-=2)*t)+1)+e},easeInElastic:function(n,i,r,o){var a=0;return 0===n?i:1==(n/=o)?i+r:(a||(a=.3*o),-e(t(r,r,a,1.70158),n,o)+i)},easeOutElastic:function(e,n,i,r){var o=0;if(0===e)return n;if(1==(e/=r))return n+i;o||(o=.3*r);var a=t(i,i,o,1.70158);return a.a*Math.pow(2,-10*e)*Math.sin((e*r-a.s)*(2*Math.PI)/a.p)+a.c+n},easeInOutElastic:function(n,i,r,o){var a=0;if(0===n)return i;if(2==(n/=o/2))return i+r;a||(a=o*(.3*1.5));var s=t(r,r,a,1.70158);return n<1?-.5*e(s,n,o)+i:s.a*Math.pow(2,-10*(n-=1))*Math.sin((n*o-s.s)*(2*Math.PI)/s.p)*.5+s.c+i},easeInBack:function(t,e,n,i,r){return void 0===r&&(r=1.70158),n*(t/=i)*t*((r+1)*t-r)+e},easeOutBack:function(t,e,n,i,r){return void 0===r&&(r=1.70158),n*((t=t/i-1)*t*((r+1)*t+r)+1)+e},easeInOutBack:function(t,e,n,i,r){return void 0===r&&(r=1.70158),(t/=i/2)<1?n/2*(t*t*((1+(r*=1.525))*t-r))+e:n/2*((t-=2)*t*((1+(r*=1.525))*t+r)+2)+e},easeInBounce:n,easeOutBounce:i,easeInOutBounce:function(t,e,r,o){return t<o/2?.5*n(2*t,0,r,o)+e:.5*i(2*t-o,0,r,o)+.5*r+e}}}(),function(t){\"use strict\";var n=e.fabric||(e.fabric={}),i=n.util.object.extend,r=n.util.object.clone,o=n.util.toFixed,a=n.util.parseUnit,s=n.util.multiplyTransformMatrices,l={cx:\"left\",x:\"left\",r:\"radius\",cy:\"top\",y:\"top\",display:\"visible\",visibility:\"visible\",transform:\"transformMatrix\",\"fill-opacity\":\"fillOpacity\",\"fill-rule\":\"fillRule\",\"font-family\":\"fontFamily\",\"font-size\":\"fontSize\",\"font-style\":\"fontStyle\",\"font-weight\":\"fontWeight\",\"letter-spacing\":\"charSpacing\",\"paint-order\":\"paintFirst\",\"stroke-dasharray\":\"strokeDashArray\",\"stroke-dashoffset\":\"strokeDashOffset\",\"stroke-linecap\":\"strokeLineCap\",\"stroke-linejoin\":\"strokeLineJoin\",\"stroke-miterlimit\":\"strokeMiterLimit\",\"stroke-opacity\":\"strokeOpacity\",\"stroke-width\":\"strokeWidth\",\"text-decoration\":\"textDecoration\",\"text-anchor\":\"textAnchor\",opacity:\"opacity\",\"clip-path\":\"clipPath\",\"clip-rule\":\"clipRule\",\"vector-effect\":\"strokeUniform\"},c={stroke:\"strokeOpacity\",fill:\"fillOpacity\"};function u(t){return t in l?l[t]:t}function h(t,e,i,r){var o,l=\"[object Array]\"===Object.prototype.toString.call(e);if(\"fill\"!==t&&\"stroke\"!==t||\"none\"!==e)if(\"vector-effect\"===t)e=\"non-scaling-stroke\"===e;else if(\"strokeDashArray\"===t)e=\"none\"===e?null:e.replace(/,/g,\" \").split(/\\s+/).map(parseFloat);else if(\"transformMatrix\"===t)e=i&&i.transformMatrix?s(i.transformMatrix,n.parseTransformAttribute(e)):n.parseTransformAttribute(e);else if(\"visible\"===t)e=\"none\"!==e&&\"hidden\"!==e,i&&!1===i.visible&&(e=!1);else if(\"opacity\"===t)e=parseFloat(e),i&&void 0!==i.opacity&&(e*=i.opacity);else if(\"textAnchor\"===t)e=\"start\"===e?\"left\":\"end\"===e?\"right\":\"center\";else if(\"charSpacing\"===t)o=a(e,r)/r*1e3;else if(\"paintFirst\"===t){var c=e.indexOf(\"fill\"),u=e.indexOf(\"stroke\");e=\"fill\",c>-1&&u>-1&&u<c?e=\"stroke\":-1===c&&u>-1&&(e=\"stroke\")}else{if(\"href\"===t||\"xlink:href\"===t)return e;o=l?e.map(a):a(e,r)}else e=\"\";return!l&&isNaN(o)?e:o}function d(t){return new RegExp(\"^(\"+t.join(\"|\")+\")\\\\b\",\"i\")}function f(t,e){var n,i,r,o=[];for(i=0,r=e.length;i<r;i++)n=t.getElementsByTagName(e[i]),o=o.concat(Array.prototype.slice.call(n));return o}function p(t,e){var n,i=!0;return(n=g(t,e.pop()))&&e.length&&(i=function(t,e){for(var n,i=!0;t.parentNode&&1===t.parentNode.nodeType&&e.length;)i&&(n=e.pop()),i=g(t=t.parentNode,n);return 0===e.length}(t,e)),n&&i&&0===e.length}function g(t,e){var n,i,r=t.nodeName,o=t.getAttribute(\"class\"),a=t.getAttribute(\"id\");if(n=new RegExp(\"^\"+r,\"i\"),e=e.replace(n,\"\"),a&&e.length&&(n=new RegExp(\"#\"+a+\"(?![a-zA-Z\\\\-]+)\",\"i\"),e=e.replace(n,\"\")),o&&e.length)for(i=(o=o.split(\" \")).length;i--;)n=new RegExp(\"\\\\.\"+o[i]+\"(?![a-zA-Z\\\\-]+)\",\"i\"),e=e.replace(n,\"\");return 0===e.length}function m(t,e){var n;if(t.getElementById&&(n=t.getElementById(e)),n)return n;var i,r,o,a=t.getElementsByTagName(\"*\");for(r=0,o=a.length;r<o;r++)if(e===(i=a[r]).getAttribute(\"id\"))return i}n.svgValidTagNamesRegEx=d([\"path\",\"circle\",\"polygon\",\"polyline\",\"ellipse\",\"rect\",\"line\",\"image\",\"text\"]),n.svgViewBoxElementsRegEx=d([\"symbol\",\"image\",\"marker\",\"pattern\",\"view\",\"svg\"]),n.svgInvalidAncestorsRegEx=d([\"pattern\",\"defs\",\"symbol\",\"metadata\",\"clipPath\",\"mask\",\"desc\"]),n.svgValidParentsRegEx=d([\"symbol\",\"g\",\"a\",\"svg\",\"clipPath\",\"defs\"]),n.cssRules={},n.gradientDefs={},n.clipPaths={},n.parseTransformAttribute=function(){function t(t,e,i){t[i]=Math.tan(n.util.degreesToRadians(e[0]))}var e=n.iMatrix,i=n.reNum,r=\"(?:\\\\s+,?\\\\s*|,\\\\s*)\",o=\"(?:(?:(matrix)\\\\s*\\\\(\\\\s*(\"+i+\")\"+r+\"(\"+i+\")\"+r+\"(\"+i+\")\"+r+\"(\"+i+\")\"+r+\"(\"+i+\")\"+r+\"(\"+i+\")\\\\s*\\\\))|(?:(translate)\\\\s*\\\\(\\\\s*(\"+i+\")(?:\"+r+\"(\"+i+\"))?\\\\s*\\\\))|(?:(scale)\\\\s*\\\\(\\\\s*(\"+i+\")(?:\"+r+\"(\"+i+\"))?\\\\s*\\\\))|(?:(rotate)\\\\s*\\\\(\\\\s*(\"+i+\")(?:\"+r+\"(\"+i+\")\"+r+\"(\"+i+\"))?\\\\s*\\\\))|(?:(skewX)\\\\s*\\\\(\\\\s*(\"+i+\")\\\\s*\\\\))|(?:(skewY)\\\\s*\\\\(\\\\s*(\"+i+\")\\\\s*\\\\)))\",a=new RegExp(\"^\\\\s*(?:(?:\"+o+\"(?:\"+r+\"*\"+o+\")*)?)\\\\s*$\"),s=new RegExp(o,\"g\");return function(i){var r=e.concat(),l=[];if(!i||i&&!a.test(i))return r;i.replace(s,function(i){var a=new RegExp(o).exec(i).filter(function(t){return!!t}),s=a[1],c=a.slice(2).map(parseFloat);switch(s){case\"translate\":!function(t,e){t[4]=e[0],2===e.length&&(t[5]=e[1])}(r,c);break;case\"rotate\":c[0]=n.util.degreesToRadians(c[0]),function(t,e){var i=n.util.cos(e[0]),r=n.util.sin(e[0]),o=0,a=0;3===e.length&&(o=e[1],a=e[2]),t[0]=i,t[1]=r,t[2]=-r,t[3]=i,t[4]=o-(i*o-r*a),t[5]=a-(r*o+i*a)}(r,c);break;case\"scale\":!function(t,e){var n=2===e.length?e[1]:e[0];t[0]=e[0],t[3]=n}(r,c);break;case\"skewX\":t(r,c,2);break;case\"skewY\":t(r,c,1);break;case\"matrix\":r=c}l.push(r.concat()),r=e.concat()});for(var c=l[0];l.length>1;)l.shift(),c=n.util.multiplyTransformMatrices(c,l[0]);return c}}();var v=new RegExp(\"^\\\\s*(\"+n.reNum+\"+)\\\\s*,?\\\\s*(\"+n.reNum+\"+)\\\\s*,?\\\\s*(\"+n.reNum+\"+)\\\\s*,?\\\\s*(\"+n.reNum+\"+)\\\\s*$\");function y(t){var e,i,r,o,s,l,c=t.getAttribute(\"viewBox\"),u=1,h=1,d=t.getAttribute(\"width\"),f=t.getAttribute(\"height\"),p=t.getAttribute(\"x\")||0,g=t.getAttribute(\"y\")||0,m=t.getAttribute(\"preserveAspectRatio\")||\"\",y=!c||!n.svgViewBoxElementsRegEx.test(t.nodeName)||!(c=c.match(v)),b=!d||!f||\"100%\"===d||\"100%\"===f,_=y&&b,w={},x=\"\",C=0,S=0;if(w.width=0,w.height=0,w.toBeParsed=_,_)return w;if(y)return w.width=a(d),w.height=a(f),w;if(e=-parseFloat(c[1]),i=-parseFloat(c[2]),r=parseFloat(c[3]),o=parseFloat(c[4]),b?(w.width=r,w.height=o):(w.width=a(d),w.height=a(f),u=w.width/r,h=w.height/o),\"none\"!==(m=n.util.parsePreserveAspectRatioAttribute(m)).alignX&&(\"meet\"===m.meetOrSlice&&(h=u=u>h?h:u),\"slice\"===m.meetOrSlice&&(h=u=u>h?u:h),C=w.width-r*u,S=w.height-o*u,\"Mid\"===m.alignX&&(C/=2),\"Mid\"===m.alignY&&(S/=2),\"Min\"===m.alignX&&(C=0),\"Min\"===m.alignY&&(S=0)),1===u&&1===h&&0===e&&0===i&&0===p&&0===g)return w;if((p||g)&&(x=\" translate(\"+a(p)+\" \"+a(g)+\") \"),w.viewboxTransform=n.parseTransformAttribute(s=x+\" matrix(\"+u+\" 0 0 \"+h+\" \"+(e*u+C)+\" \"+(i*h+S)+\") \"),\"svg\"===t.nodeName){for(l=t.ownerDocument.createElement(\"g\");t.firstChild;)l.appendChild(t.firstChild);t.appendChild(l)}else s=(l=t).getAttribute(\"transform\")+s;return l.setAttribute(\"transform\",s),w}function b(t,e){var n=m(t,e.getAttribute(\"xlink:href\").substr(1));if(n&&n.getAttribute(\"xlink:href\")&&b(t,n),[\"gradientTransform\",\"x1\",\"x2\",\"y1\",\"y2\",\"gradientUnits\",\"cx\",\"cy\",\"r\",\"fx\",\"fy\"].forEach(function(t){e.hasAttribute(t)||e.setAttribute(t,n.getAttribute(t))}),!e.children.length)for(var i=n.cloneNode(!0);i.firstChild;)e.appendChild(i.firstChild);e.removeAttribute(\"xlink:href\")}n.parseSVGDocument=function(t,e,i,o){if(t){!function(t){for(var e=f(t,[\"use\",\"svg:use\"]),n=0;e.length&&n<e.length;){var i,r,o,a,s=e[n],l=(s.getAttribute(\"xlink:href\")||s.getAttribute(\"href\")).substr(1),c=s.getAttribute(\"x\")||0,u=s.getAttribute(\"y\")||0,h=m(t,l).cloneNode(!0),d=(h.getAttribute(\"transform\")||\"\")+\" translate(\"+c+\", \"+u+\")\",p=e.length;if(y(h),/^svg$/i.test(h.nodeName)){var g=h.ownerDocument.createElement(\"g\");for(r=0,a=(o=h.attributes).length;r<a;r++)i=o.item(r),g.setAttribute(i.nodeName,i.nodeValue);for(;h.firstChild;)g.appendChild(h.firstChild);h=g}for(r=0,a=(o=s.attributes).length;r<a;r++)\"x\"!==(i=o.item(r)).nodeName&&\"y\"!==i.nodeName&&\"xlink:href\"!==i.nodeName&&\"href\"!==i.nodeName&&(\"transform\"===i.nodeName?d=i.nodeValue+\" \"+d:h.setAttribute(i.nodeName,i.nodeValue));h.setAttribute(\"transform\",d),h.setAttribute(\"instantiated_by_use\",\"1\"),h.removeAttribute(\"id\"),s.parentNode.replaceChild(h,s),e.length===p&&n++}}(t);var a,s,l=n.Object.__uid++,c=y(t),u=n.util.toArray(t.getElementsByTagName(\"*\"));if(c.crossOrigin=o&&o.crossOrigin,c.svgUid=l,0===u.length&&n.isLikelyNode){var h=[];for(a=0,s=(u=t.selectNodes('//*[name(.)!=\"svg\"]')).length;a<s;a++)h[a]=u[a];u=h}var d=u.filter(function(t){return y(t),n.svgValidTagNamesRegEx.test(t.nodeName.replace(\"svg:\",\"\"))&&!function(t,e){for(;t&&(t=t.parentNode);)if(t.nodeName&&e.test(t.nodeName.replace(\"svg:\",\"\"))&&!t.getAttribute(\"instantiated_by_use\"))return!0;return!1}(t,n.svgInvalidAncestorsRegEx)});if(!d||d&&!d.length)e&&e([],{});else{var p={};u.filter(function(t){return\"clipPath\"===t.nodeName.replace(\"svg:\",\"\")}).forEach(function(t){var e=t.getAttribute(\"id\");p[e]=n.util.toArray(t.getElementsByTagName(\"*\")).filter(function(t){return n.svgValidTagNamesRegEx.test(t.nodeName.replace(\"svg:\",\"\"))})}),n.gradientDefs[l]=n.getGradientDefs(t),n.cssRules[l]=n.getCSSRules(t),n.clipPaths[l]=p,n.parseElements(d,function(t,i){e&&(e(t,c,i,u),delete n.gradientDefs[l],delete n.cssRules[l],delete n.clipPaths[l])},r(c),i,o)}}};var _=new RegExp(\"(normal|italic)?\\\\s*(normal|small-caps)?\\\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\\\s*(\"+n.reNum+\"(?:px|cm|mm|em|pt|pc|in)*)(?:\\\\/(normal|\"+n.reNum+\"))?\\\\s+(.*)\");i(n,{parseFontDeclaration:function(t,e){var n=t.match(_);if(n){var i=n[1],r=n[3],o=n[4],s=n[5],l=n[6];i&&(e.fontStyle=i),r&&(e.fontWeight=isNaN(parseFloat(r))?r:parseFloat(r)),o&&(e.fontSize=a(o)),l&&(e.fontFamily=l),s&&(e.lineHeight=\"normal\"===s?1:s)}},getGradientDefs:function(t){var e,n=f(t,[\"linearGradient\",\"radialGradient\",\"svg:linearGradient\",\"svg:radialGradient\"]),i=0,r={};for(i=n.length;i--;)(e=n[i]).getAttribute(\"xlink:href\")&&b(t,e),r[e.getAttribute(\"id\")]=e;return r},parseAttributes:function(t,e,r){if(t){var s,l,d,f={};void 0===r&&(r=t.getAttribute(\"svgUid\")),t.parentNode&&n.svgValidParentsRegEx.test(t.parentNode.nodeName)&&(f=n.parseAttributes(t.parentNode,e,r));var g=e.reduce(function(e,n){return(s=t.getAttribute(n))&&(e[n]=s),e},{});g=i(g,i(function(t,e){var i={};for(var r in n.cssRules[e])if(p(t,r.split(\" \")))for(var o in n.cssRules[e][r])i[o]=n.cssRules[e][r][o];return i}(t,r),n.parseStyleAttribute(t))),l=d=f.fontSize||n.Text.DEFAULT_SVG_FONT_SIZE,g[\"font-size\"]&&(g[\"font-size\"]=l=a(g[\"font-size\"],d));var m,v,y={};for(var b in g)v=h(m=u(b),g[b],f,l),y[m]=v;y&&y.font&&n.parseFontDeclaration(y.font,y);var _=i(f,y);return n.svgValidParentsRegEx.test(t.nodeName)?_:function(t){for(var e in c)if(void 0!==t[c[e]]&&\"\"!==t[e]){if(void 0===t[e]){if(!n.Object.prototype[e])continue;t[e]=n.Object.prototype[e]}if(0!==t[e].indexOf(\"url(\")){var i=new n.Color(t[e]);t[e]=i.setAlpha(o(i.getAlpha()*t[c[e]],2)).toRgba()}}return t}(_)}},parseElements:function(t,e,i,r,o){new n.ElementsParser(t,e,i,r,o).parse()},parseStyleAttribute:function(t){var e={},n=t.getAttribute(\"style\");return n?(\"string\"==typeof n?function(t,e){var n,i;t.replace(/;\\s*$/,\"\").split(\";\").forEach(function(t){var r=t.split(\":\");n=r[0].trim().toLowerCase(),i=r[1].trim(),e[n]=i})}(n,e):function(t,e){for(var n in t)void 0!==t[n]&&(e[n.toLowerCase()]=t[n])}(n,e),e):e},parsePointsAttribute:function(t){if(!t)return null;var e,n,i=[];for(e=0,n=(t=(t=t.replace(/,/g,\" \").trim()).split(/\\s+/)).length;e<n;e+=2)i.push({x:parseFloat(t[e]),y:parseFloat(t[e+1])});return i},getCSSRules:function(t){var e,i,r=t.getElementsByTagName(\"style\"),o={};for(e=0,i=r.length;e<i;e++){var a=r[e].textContent||r[e].text;\"\"!==(a=a.replace(/\\/\\*[\\s\\S]*?\\*\\//g,\"\")).trim()&&a.match(/[^{]*\\{[\\s\\S]*?\\}/g).map(function(t){return t.trim()}).forEach(function(t){var r=t.match(/([\\s\\S]*?)\\s*\\{([^}]*)\\}/),a={},s=r[2].trim().replace(/;$/,\"\").split(/\\s*;\\s*/);for(e=0,i=s.length;e<i;e++){var l=s[e].split(/\\s*:\\s*/);a[l[0]]=l[1]}(t=r[1]).split(\",\").forEach(function(t){\"\"!==(t=t.replace(/^svg/i,\"\").trim())&&(o[t]?n.util.object.extend(o[t],a):o[t]=n.util.object.clone(a))})})}return o},loadSVGFromURL:function(t,e,i,r){t=t.replace(/^\\n\\s*/,\"\").trim(),new n.util.request(t,{method:\"get\",onComplete:function(t){var o=t.responseXML;if(o&&!o.documentElement&&n.window.ActiveXObject&&t.responseText&&((o=new ActiveXObject(\"Microsoft.XMLDOM\")).async=\"false\",o.loadXML(t.responseText.replace(/<!DOCTYPE[\\s\\S]*?(\\[[\\s\\S]*\\])*?>/i,\"\"))),!o||!o.documentElement)return e&&e(null),!1;n.parseSVGDocument(o.documentElement,function(t,n,i,r){e&&e(t,n,i,r)},i,r)}})},loadSVGFromString:function(t,e,i,r){var o;if(t=t.trim(),void 0!==n.window.DOMParser){var a=new n.window.DOMParser;a&&a.parseFromString&&(o=a.parseFromString(t,\"text/xml\"))}else n.window.ActiveXObject&&((o=new ActiveXObject(\"Microsoft.XMLDOM\")).async=\"false\",o.loadXML(t.replace(/<!DOCTYPE[\\s\\S]*?(\\[[\\s\\S]*\\])*?>/i,\"\")));n.parseSVGDocument(o.documentElement,function(t,n,i,r){e(t,n,i,r)},i,r)}})}(),C.ElementsParser=function(t,e,n,i,r){this.elements=t,this.callback=e,this.options=n,this.reviver=i,this.svgUid=n&&n.svgUid||0,this.parsingOptions=r,this.regexUrl=/^url\\(['\"]?#([^'\"]+)['\"]?\\)/g},(u=C.ElementsParser.prototype).parse=function(){this.instances=new Array(this.elements.length),this.numElements=this.elements.length,this.createObjects()},u.createObjects=function(){var t=this;this.elements.forEach(function(e,n){e.setAttribute(\"svgUid\",t.svgUid),t.createObject(e,n)})},u.findTag=function(t){return C[C.util.string.capitalize(t.tagName.replace(\"svg:\",\"\"))]},u.createObject=function(t,e){var n=this.findTag(t);if(n&&n.fromElement)try{n.fromElement(t,this.createCallback(e,t),this.options)}catch(i){C.log(i)}else this.checkIfDone()},u.createCallback=function(t,e){var n=this;return function(i){var r;n.resolveGradient(i,\"fill\"),n.resolveGradient(i,\"stroke\"),i instanceof C.Image&&i._originalElement&&(r=i.parsePreserveAspectRatioAttribute(e)),i._removeTransformMatrix(r),n.resolveClipPath(i),n.reviver&&n.reviver(e,i),n.instances[t]=i,n.checkIfDone()}},u.extractPropertyDefinition=function(t,e,n){var i=t[e];if(/^url\\(/.test(i)){var r=this.regexUrl.exec(i)[1];return this.regexUrl.lastIndex=0,C[n][this.svgUid][r]}},u.resolveGradient=function(t,e){var n=this.extractPropertyDefinition(t,e,\"gradientDefs\");n&&t.set(e,C.Gradient.fromElement(n,t))},u.createClipPathCallback=function(t,e){return function(t){t._removeTransformMatrix(),t.fillRule=t.clipRule,e.push(t)}},u.resolveClipPath=function(t){var e,n,i,r,o=this.extractPropertyDefinition(t,\"clipPath\",\"clipPaths\");if(o){i=[],n=C.util.invertTransform(t.calcTransformMatrix());for(var a=0;a<o.length;a++)this.findTag(e=o[a]).fromElement(e,this.createClipPathCallback(t,i),this.options);o=1===i.length?i[0]:new C.Group(i),r=C.util.multiplyTransformMatrices(n,o.calcTransformMatrix());var s=C.util.qrDecompose(r);o.flipX=!1,o.flipY=!1,o.set(\"scaleX\",s.scaleX),o.set(\"scaleY\",s.scaleY),o.angle=s.angle,o.skewX=s.skewX,o.skewY=0,o.setPositionByOrigin({x:s.translateX,y:s.translateY},\"center\",\"center\"),t.clipPath=o}},u.checkIfDone=function(){0==--this.numElements&&(this.instances=this.instances.filter(function(t){return null!=t}),this.callback(this.instances,this.elements))},function(t){\"use strict\";var n=e.fabric||(e.fabric={});function i(t,e){this.x=t,this.y=e}n.Point?n.warn(\"fabric.Point is already defined\"):(n.Point=i,i.prototype={type:\"point\",constructor:i,add:function(t){return new i(this.x+t.x,this.y+t.y)},addEquals:function(t){return this.x+=t.x,this.y+=t.y,this},scalarAdd:function(t){return new i(this.x+t,this.y+t)},scalarAddEquals:function(t){return this.x+=t,this.y+=t,this},subtract:function(t){return new i(this.x-t.x,this.y-t.y)},subtractEquals:function(t){return this.x-=t.x,this.y-=t.y,this},scalarSubtract:function(t){return new i(this.x-t,this.y-t)},scalarSubtractEquals:function(t){return this.x-=t,this.y-=t,this},multiply:function(t){return new i(this.x*t,this.y*t)},multiplyEquals:function(t){return this.x*=t,this.y*=t,this},divide:function(t){return new i(this.x/t,this.y/t)},divideEquals:function(t){return this.x/=t,this.y/=t,this},eq:function(t){return this.x===t.x&&this.y===t.y},lt:function(t){return this.x<t.x&&this.y<t.y},lte:function(t){return this.x<=t.x&&this.y<=t.y},gt:function(t){return this.x>t.x&&this.y>t.y},gte:function(t){return this.x>=t.x&&this.y>=t.y},lerp:function(t,e){return void 0===e&&(e=.5),e=Math.max(Math.min(1,e),0),new i(this.x+(t.x-this.x)*e,this.y+(t.y-this.y)*e)},distanceFrom:function(t){var e=this.x-t.x,n=this.y-t.y;return Math.sqrt(e*e+n*n)},midPointFrom:function(t){return this.lerp(t)},min:function(t){return new i(Math.min(this.x,t.x),Math.min(this.y,t.y))},max:function(t){return new i(Math.max(this.x,t.x),Math.max(this.y,t.y))},toString:function(){return this.x+\",\"+this.y},setXY:function(t,e){return this.x=t,this.y=e,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setFromPoint:function(t){return this.x=t.x,this.y=t.y,this},swap:function(t){var e=this.x,n=this.y;this.x=t.x,this.y=t.y,t.x=e,t.y=n},clone:function(){return new i(this.x,this.y)}})}(),function(t){\"use strict\";var n=e.fabric||(e.fabric={});function i(t){this.status=t,this.points=[]}n.Intersection?n.warn(\"fabric.Intersection is already defined\"):(n.Intersection=i,n.Intersection.prototype={constructor:i,appendPoint:function(t){return this.points.push(t),this},appendPoints:function(t){return this.points=this.points.concat(t),this}},n.Intersection.intersectLineLine=function(t,e,r,o){var a,s=(o.x-r.x)*(t.y-r.y)-(o.y-r.y)*(t.x-r.x),l=(e.x-t.x)*(t.y-r.y)-(e.y-t.y)*(t.x-r.x),c=(o.y-r.y)*(e.x-t.x)-(o.x-r.x)*(e.y-t.y);if(0!==c){var u=s/c,h=l/c;0<=u&&u<=1&&0<=h&&h<=1?(a=new i(\"Intersection\")).appendPoint(new n.Point(t.x+u*(e.x-t.x),t.y+u*(e.y-t.y))):a=new i}else a=new i(0===s||0===l?\"Coincident\":\"Parallel\");return a},n.Intersection.intersectLinePolygon=function(t,e,n){var r,o,a=new i,s=n.length;for(o=0;o<s;o++)r=i.intersectLineLine(t,e,n[o],n[(o+1)%s]),a.appendPoints(r.points);return a.points.length>0&&(a.status=\"Intersection\"),a},n.Intersection.intersectPolygonPolygon=function(t,e){var n,r=new i,o=t.length;for(n=0;n<o;n++){var a=i.intersectLinePolygon(t[n],t[(n+1)%o],e);r.appendPoints(a.points)}return r.points.length>0&&(r.status=\"Intersection\"),r},n.Intersection.intersectPolygonRectangle=function(t,e,r){var o=e.min(r),a=e.max(r),s=new n.Point(a.x,o.y),l=new n.Point(o.x,a.y),c=i.intersectLinePolygon(o,s,t),u=i.intersectLinePolygon(s,a,t),h=i.intersectLinePolygon(a,l,t),d=i.intersectLinePolygon(l,o,t),f=new i;return f.appendPoints(c.points),f.appendPoints(u.points),f.appendPoints(h.points),f.appendPoints(d.points),f.points.length>0&&(f.status=\"Intersection\"),f})}(),function(t){\"use strict\";var n=e.fabric||(e.fabric={});function i(t){t?this._tryParsingColor(t):this.setSource([0,0,0,1])}function r(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t}n.Color?n.warn(\"fabric.Color is already defined.\"):(n.Color=i,n.Color.prototype={_tryParsingColor:function(t){var e;t in i.colorNameMap&&(t=i.colorNameMap[t]),\"transparent\"===t&&(e=[255,255,255,0]),e||(e=i.sourceFromHex(t)),e||(e=i.sourceFromRgb(t)),e||(e=i.sourceFromHsl(t)),e||(e=[0,0,0,1]),e&&this.setSource(e)},_rgbToHsl:function(t,e,i){var r,o,a,s=n.util.array.max([t/=255,e/=255,i/=255]),l=n.util.array.min([t,e,i]);if(a=(s+l)/2,s===l)r=o=0;else{var c=s-l;switch(o=a>.5?c/(2-s-l):c/(s+l),s){case t:r=(e-i)/c+(e<i?6:0);break;case e:r=(i-t)/c+2;break;case i:r=(t-e)/c+4}r/=6}return[Math.round(360*r),Math.round(100*o),Math.round(100*a)]},getSource:function(){return this._source},setSource:function(t){this._source=t},toRgb:function(){var t=this.getSource();return\"rgb(\"+t[0]+\",\"+t[1]+\",\"+t[2]+\")\"},toRgba:function(){var t=this.getSource();return\"rgba(\"+t[0]+\",\"+t[1]+\",\"+t[2]+\",\"+t[3]+\")\"},toHsl:function(){var t=this.getSource(),e=this._rgbToHsl(t[0],t[1],t[2]);return\"hsl(\"+e[0]+\",\"+e[1]+\"%,\"+e[2]+\"%)\"},toHsla:function(){var t=this.getSource(),e=this._rgbToHsl(t[0],t[1],t[2]);return\"hsla(\"+e[0]+\",\"+e[1]+\"%,\"+e[2]+\"%,\"+t[3]+\")\"},toHex:function(){var t,e,n,i=this.getSource();return t=1===(t=i[0].toString(16)).length?\"0\"+t:t,e=1===(e=i[1].toString(16)).length?\"0\"+e:e,n=1===(n=i[2].toString(16)).length?\"0\"+n:n,t.toUpperCase()+e.toUpperCase()+n.toUpperCase()},toHexa:function(){var t,e=this.getSource();return t=1===(t=(t=Math.round(255*e[3])).toString(16)).length?\"0\"+t:t,this.toHex()+t.toUpperCase()},getAlpha:function(){return this.getSource()[3]},setAlpha:function(t){var e=this.getSource();return e[3]=t,this.setSource(e),this},toGrayscale:function(){var t=this.getSource(),e=parseInt((.3*t[0]+.59*t[1]+.11*t[2]).toFixed(0),10);return this.setSource([e,e,e,t[3]]),this},toBlackWhite:function(t){var e=this.getSource(),n=(.3*e[0]+.59*e[1]+.11*e[2]).toFixed(0),i=e[3];return t=t||127,n=Number(n)<Number(t)?0:255,this.setSource([n,n,n,i]),this},overlayWith:function(t){t instanceof i||(t=new i(t));var e,n=[],r=this.getAlpha(),o=this.getSource(),a=t.getSource();for(e=0;e<3;e++)n.push(Math.round(.5*o[e]+.5*a[e]));return n[3]=r,this.setSource(n),this}},n.Color.reRGBa=/^rgba?\\(\\s*(\\d{1,3}(?:\\.\\d+)?\\%?)\\s*,\\s*(\\d{1,3}(?:\\.\\d+)?\\%?)\\s*,\\s*(\\d{1,3}(?:\\.\\d+)?\\%?)\\s*(?:\\s*,\\s*((?:\\d*\\.?\\d+)?)\\s*)?\\)$/i,n.Color.reHSLa=/^hsla?\\(\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3}\\%)\\s*,\\s*(\\d{1,3}\\%)\\s*(?:\\s*,\\s*(\\d+(?:\\.\\d+)?)\\s*)?\\)$/i,n.Color.reHex=/^#?([0-9a-f]{8}|[0-9a-f]{6}|[0-9a-f]{4}|[0-9a-f]{3})$/i,n.Color.colorNameMap={aliceblue:\"#F0F8FF\",antiquewhite:\"#FAEBD7\",aqua:\"#00FFFF\",aquamarine:\"#7FFFD4\",azure:\"#F0FFFF\",beige:\"#F5F5DC\",bisque:\"#FFE4C4\",black:\"#000000\",blanchedalmond:\"#FFEBCD\",blue:\"#0000FF\",blueviolet:\"#8A2BE2\",brown:\"#A52A2A\",burlywood:\"#DEB887\",cadetblue:\"#5F9EA0\",chartreuse:\"#7FFF00\",chocolate:\"#D2691E\",coral:\"#FF7F50\",cornflowerblue:\"#6495ED\",cornsilk:\"#FFF8DC\",crimson:\"#DC143C\",cyan:\"#00FFFF\",darkblue:\"#00008B\",darkcyan:\"#008B8B\",darkgoldenrod:\"#B8860B\",darkgray:\"#A9A9A9\",darkgrey:\"#A9A9A9\",darkgreen:\"#006400\",darkkhaki:\"#BDB76B\",darkmagenta:\"#8B008B\",darkolivegreen:\"#556B2F\",darkorange:\"#FF8C00\",darkorchid:\"#9932CC\",darkred:\"#8B0000\",darksalmon:\"#E9967A\",darkseagreen:\"#8FBC8F\",darkslateblue:\"#483D8B\",darkslategray:\"#2F4F4F\",darkslategrey:\"#2F4F4F\",darkturquoise:\"#00CED1\",darkviolet:\"#9400D3\",deeppink:\"#FF1493\",deepskyblue:\"#00BFFF\",dimgray:\"#696969\",dimgrey:\"#696969\",dodgerblue:\"#1E90FF\",firebrick:\"#B22222\",floralwhite:\"#FFFAF0\",forestgreen:\"#228B22\",fuchsia:\"#FF00FF\",gainsboro:\"#DCDCDC\",ghostwhite:\"#F8F8FF\",gold:\"#FFD700\",goldenrod:\"#DAA520\",gray:\"#808080\",grey:\"#808080\",green:\"#008000\",greenyellow:\"#ADFF2F\",honeydew:\"#F0FFF0\",hotpink:\"#FF69B4\",indianred:\"#CD5C5C\",indigo:\"#4B0082\",ivory:\"#FFFFF0\",khaki:\"#F0E68C\",lavender:\"#E6E6FA\",lavenderblush:\"#FFF0F5\",lawngreen:\"#7CFC00\",lemonchiffon:\"#FFFACD\",lightblue:\"#ADD8E6\",lightcoral:\"#F08080\",lightcyan:\"#E0FFFF\",lightgoldenrodyellow:\"#FAFAD2\",lightgray:\"#D3D3D3\",lightgrey:\"#D3D3D3\",lightgreen:\"#90EE90\",lightpink:\"#FFB6C1\",lightsalmon:\"#FFA07A\",lightseagreen:\"#20B2AA\",lightskyblue:\"#87CEFA\",lightslategray:\"#778899\",lightslategrey:\"#778899\",lightsteelblue:\"#B0C4DE\",lightyellow:\"#FFFFE0\",lime:\"#00FF00\",limegreen:\"#32CD32\",linen:\"#FAF0E6\",magenta:\"#FF00FF\",maroon:\"#800000\",mediumaquamarine:\"#66CDAA\",mediumblue:\"#0000CD\",mediumorchid:\"#BA55D3\",mediumpurple:\"#9370DB\",mediumseagreen:\"#3CB371\",mediumslateblue:\"#7B68EE\",mediumspringgreen:\"#00FA9A\",mediumturquoise:\"#48D1CC\",mediumvioletred:\"#C71585\",midnightblue:\"#191970\",mintcream:\"#F5FFFA\",mistyrose:\"#FFE4E1\",moccasin:\"#FFE4B5\",navajowhite:\"#FFDEAD\",navy:\"#000080\",oldlace:\"#FDF5E6\",olive:\"#808000\",olivedrab:\"#6B8E23\",orange:\"#FFA500\",orangered:\"#FF4500\",orchid:\"#DA70D6\",palegoldenrod:\"#EEE8AA\",palegreen:\"#98FB98\",paleturquoise:\"#AFEEEE\",palevioletred:\"#DB7093\",papayawhip:\"#FFEFD5\",peachpuff:\"#FFDAB9\",peru:\"#CD853F\",pink:\"#FFC0CB\",plum:\"#DDA0DD\",powderblue:\"#B0E0E6\",purple:\"#800080\",rebeccapurple:\"#663399\",red:\"#FF0000\",rosybrown:\"#BC8F8F\",royalblue:\"#4169E1\",saddlebrown:\"#8B4513\",salmon:\"#FA8072\",sandybrown:\"#F4A460\",seagreen:\"#2E8B57\",seashell:\"#FFF5EE\",sienna:\"#A0522D\",silver:\"#C0C0C0\",skyblue:\"#87CEEB\",slateblue:\"#6A5ACD\",slategray:\"#708090\",slategrey:\"#708090\",snow:\"#FFFAFA\",springgreen:\"#00FF7F\",steelblue:\"#4682B4\",tan:\"#D2B48C\",teal:\"#008080\",thistle:\"#D8BFD8\",tomato:\"#FF6347\",turquoise:\"#40E0D0\",violet:\"#EE82EE\",wheat:\"#F5DEB3\",white:\"#FFFFFF\",whitesmoke:\"#F5F5F5\",yellow:\"#FFFF00\",yellowgreen:\"#9ACD32\"},n.Color.fromRgb=function(t){return i.fromSource(i.sourceFromRgb(t))},n.Color.sourceFromRgb=function(t){var e=t.match(i.reRGBa);if(e){var n=parseInt(e[1],10)/(/%$/.test(e[1])?100:1)*(/%$/.test(e[1])?255:1),r=parseInt(e[2],10)/(/%$/.test(e[2])?100:1)*(/%$/.test(e[2])?255:1),o=parseInt(e[3],10)/(/%$/.test(e[3])?100:1)*(/%$/.test(e[3])?255:1);return[parseInt(n,10),parseInt(r,10),parseInt(o,10),e[4]?parseFloat(e[4]):1]}},n.Color.fromRgba=i.fromRgb,n.Color.fromHsl=function(t){return i.fromSource(i.sourceFromHsl(t))},n.Color.sourceFromHsl=function(t){var e=t.match(i.reHSLa);if(e){var n,o,a,s=(parseFloat(e[1])%360+360)%360/360,l=parseFloat(e[2])/(/%$/.test(e[2])?100:1),c=parseFloat(e[3])/(/%$/.test(e[3])?100:1);if(0===l)n=o=a=c;else{var u=c<=.5?c*(l+1):c+l-c*l,h=2*c-u;n=r(h,u,s+1/3),o=r(h,u,s),a=r(h,u,s-1/3)}return[Math.round(255*n),Math.round(255*o),Math.round(255*a),e[4]?parseFloat(e[4]):1]}},n.Color.fromHsla=i.fromHsl,n.Color.fromHex=function(t){return i.fromSource(i.sourceFromHex(t))},n.Color.sourceFromHex=function(t){if(t.match(i.reHex)){var e=t.slice(t.indexOf(\"#\")+1),n=3===e.length||4===e.length,r=8===e.length||4===e.length,o=n?e.charAt(0)+e.charAt(0):e.substring(0,2),a=n?e.charAt(1)+e.charAt(1):e.substring(2,4),s=n?e.charAt(2)+e.charAt(2):e.substring(4,6),l=r?n?e.charAt(3)+e.charAt(3):e.substring(6,8):\"FF\";return[parseInt(o,16),parseInt(a,16),parseInt(s,16),parseFloat((parseInt(l,16)/255).toFixed(2))]}},n.Color.fromSource=function(t){var e=new i;return e.setSource(t),e})}(),function(){function t(t){var e,n,i,r,o=t.getAttribute(\"style\"),a=t.getAttribute(\"offset\")||0;if(a=(a=parseFloat(a)/(/%$/.test(a)?100:1))<0?0:a>1?1:a,o){var s=o.split(/\\s*;\\s*/);for(\"\"===s[s.length-1]&&s.pop(),r=s.length;r--;){var l=s[r].split(/\\s*:\\s*/),c=l[0].trim(),u=l[1].trim();\"stop-color\"===c?e=u:\"stop-opacity\"===c&&(i=u)}}return e||(e=t.getAttribute(\"stop-color\")||\"rgb(0,0,0)\"),i||(i=t.getAttribute(\"stop-opacity\")),n=(e=new C.Color(e)).getAlpha(),i=isNaN(parseFloat(i))?1:parseFloat(i),i*=n,{offset:a,color:e.toRgb(),opacity:i}}var e=C.util.object.clone;function n(t,e,n){var i,r=0,o=1,a=\"\";for(var s in e)\"Infinity\"===e[s]?e[s]=1:\"-Infinity\"===e[s]&&(e[s]=0),i=parseFloat(e[s],10),o=\"string\"==typeof e[s]&&/^(\\d+\\.\\d+)%|(\\d+)%$/.test(e[s])?.01:1,\"x1\"===s||\"x2\"===s||\"r2\"===s?(o*=\"objectBoundingBox\"===n?t.width:1,r=\"objectBoundingBox\"===n&&t.left||0):\"y1\"!==s&&\"y2\"!==s||(o*=\"objectBoundingBox\"===n?t.height:1,r=\"objectBoundingBox\"===n&&t.top||0),e[s]=i*o+r;if(\"ellipse\"===t.type&&null!==e.r2&&\"objectBoundingBox\"===n&&t.rx!==t.ry){var l=t.ry/t.rx;a=\" scale(1, \"+l+\")\",e.y1&&(e.y1/=l),e.y2&&(e.y2/=l)}return a}C.Gradient=C.util.createClass({offsetX:0,offsetY:0,initialize:function(t){t||(t={});var e={};this.id=C.Object.__uid++,this.type=t.type||\"linear\",e={x1:t.coords.x1||0,y1:t.coords.y1||0,x2:t.coords.x2||0,y2:t.coords.y2||0},\"radial\"===this.type&&(e.r1=t.coords.r1||0,e.r2=t.coords.r2||0),this.coords=e,this.colorStops=t.colorStops.slice(),t.gradientTransform&&(this.gradientTransform=t.gradientTransform),this.offsetX=t.offsetX||this.offsetX,this.offsetY=t.offsetY||this.offsetY},addColorStop:function(t){for(var e in t){var n=new C.Color(t[e]);this.colorStops.push({offset:parseFloat(e),color:n.toRgb(),opacity:n.getAlpha()})}return this},toObject:function(t){var e={type:this.type,coords:this.coords,colorStops:this.colorStops,offsetX:this.offsetX,offsetY:this.offsetY,gradientTransform:this.gradientTransform?this.gradientTransform.concat():this.gradientTransform};return C.util.populateWithProperties(this,e,t),e},toSVG:function(t,n){var i,r,o,a,s=e(this.coords,!0),l=(n=n||{},e(this.colorStops,!0)),c=s.r1>s.r2,u=this.gradientTransform?this.gradientTransform.concat():C.iMatrix.concat(),h=t.width/2-this.offsetX,d=t.height/2-this.offsetY,f=!!n.additionalTransform;if(l.sort(function(t,e){return t.offset-e.offset}),\"path\"===t.type&&(h-=t.pathOffset.x,d-=t.pathOffset.y),u[4]-=h,u[5]-=d,a='id=\"SVGID_'+this.id+'\" gradientUnits=\"userSpaceOnUse\"',a+=' gradientTransform=\"'+(f?n.additionalTransform+\" \":\"\")+C.util.matrixToSVG(u)+'\" ',\"linear\"===this.type?o=[\"<linearGradient \",a,' x1=\"',s.x1,'\" y1=\"',s.y1,'\" x2=\"',s.x2,'\" y2=\"',s.y2,'\">\\n']:\"radial\"===this.type&&(o=[\"<radialGradient \",a,' cx=\"',c?s.x1:s.x2,'\" cy=\"',c?s.y1:s.y2,'\" r=\"',c?s.r1:s.r2,'\" fx=\"',c?s.x2:s.x1,'\" fy=\"',c?s.y2:s.y1,'\">\\n']),\"radial\"===this.type){if(c)for((l=l.concat()).reverse(),i=0,r=l.length;i<r;i++)l[i].offset=1-l[i].offset;var p=Math.min(s.r1,s.r2);if(p>0){var g=p/Math.max(s.r1,s.r2);for(i=0,r=l.length;i<r;i++)l[i].offset+=g*(1-l[i].offset)}}for(i=0,r=l.length;i<r;i++){var m=l[i];o.push(\"<stop \",'offset=\"',100*m.offset+\"%\",'\" style=\"stop-color:',m.color,void 0!==m.opacity?\";stop-opacity: \"+m.opacity:\";\",'\"/>\\n')}return o.push(\"linear\"===this.type?\"</linearGradient>\\n\":\"</radialGradient>\\n\"),o.join(\"\")},toLive:function(t){var e,n,i,r=C.util.object.clone(this.coords);if(this.type){for(\"linear\"===this.type?e=t.createLinearGradient(r.x1,r.y1,r.x2,r.y2):\"radial\"===this.type&&(e=t.createRadialGradient(r.x1,r.y1,r.r1,r.x2,r.y2,r.r2)),n=0,i=this.colorStops.length;n<i;n++){var o=this.colorStops[n].color,a=this.colorStops[n].opacity,s=this.colorStops[n].offset;void 0!==a&&(o=new C.Color(o).setAlpha(a).toRgba()),e.addColorStop(s,o)}return e}}}),C.util.object.extend(C.Gradient,{fromElement:function(e,i){var r,o,a,s,l=e.getElementsByTagName(\"stop\"),c=e.getAttribute(\"gradientUnits\")||\"objectBoundingBox\",u=e.getAttribute(\"gradientTransform\"),h=[];for(\"linear\"==(r=\"linearGradient\"===e.nodeName||\"LINEARGRADIENT\"===e.nodeName?\"linear\":\"radial\")?o=function(t){return{x1:t.getAttribute(\"x1\")||0,y1:t.getAttribute(\"y1\")||0,x2:t.getAttribute(\"x2\")||\"100%\",y2:t.getAttribute(\"y2\")||0}}(e):\"radial\"===r&&(o=function(t){return{x1:t.getAttribute(\"fx\")||t.getAttribute(\"cx\")||\"50%\",y1:t.getAttribute(\"fy\")||t.getAttribute(\"cy\")||\"50%\",r1:0,x2:t.getAttribute(\"cx\")||\"50%\",y2:t.getAttribute(\"cy\")||\"50%\",r2:t.getAttribute(\"r\")||\"50%\"}}(e)),s=l.length;s--;)h.push(t(l[s]));a=n(i,o,c);var d=new C.Gradient({type:r,coords:o,colorStops:h,offsetX:-i.left,offsetY:-i.top});return(u||\"\"!==a)&&(d.gradientTransform=C.parseTransformAttribute((u||\"\")+a)),d},forObject:function(t,e){return e||(e={}),n(t,e.coords,\"userSpaceOnUse\"),new C.Gradient(e)}})}(),function(){\"use strict\";var t=C.util.toFixed;C.Pattern=C.util.createClass({repeat:\"repeat\",offsetX:0,offsetY:0,crossOrigin:\"\",patternTransform:null,initialize:function(t,e){if(t||(t={}),this.id=C.Object.__uid++,this.setOptions(t),!t.source||t.source&&\"string\"!=typeof t.source)e&&e(this);else if(void 0!==C.util.getFunctionBody(t.source))this.source=new Function(C.util.getFunctionBody(t.source)),e&&e(this);else{var n=this;this.source=C.util.createImage(),C.util.loadImage(t.source,function(t){n.source=t,e&&e(n)},null,this.crossOrigin)}},toObject:function(e){var n,i,r=C.Object.NUM_FRACTION_DIGITS;return\"function\"==typeof this.source?n=String(this.source):\"string\"==typeof this.source.src?n=this.source.src:\"object\"==typeof this.source&&this.source.toDataURL&&(n=this.source.toDataURL()),i={type:\"pattern\",source:n,repeat:this.repeat,crossOrigin:this.crossOrigin,offsetX:t(this.offsetX,r),offsetY:t(this.offsetY,r),patternTransform:this.patternTransform?this.patternTransform.concat():null},C.util.populateWithProperties(this,i,e),i},toSVG:function(t){var e=\"function\"==typeof this.source?this.source():this.source,n=e.width/t.width,i=e.height/t.height,r=this.offsetX/t.width,o=this.offsetY/t.height,a=\"\";return\"repeat-x\"!==this.repeat&&\"no-repeat\"!==this.repeat||(i=1,o&&(i+=Math.abs(o))),\"repeat-y\"!==this.repeat&&\"no-repeat\"!==this.repeat||(n=1,r&&(n+=Math.abs(r))),e.src?a=e.src:e.toDataURL&&(a=e.toDataURL()),'<pattern id=\"SVGID_'+this.id+'\" x=\"'+r+'\" y=\"'+o+'\" width=\"'+n+'\" height=\"'+i+'\">\\n<image x=\"0\" y=\"0\" width=\"'+e.width+'\" height=\"'+e.height+'\" xlink:href=\"'+a+'\"></image>\\n</pattern>\\n'},setOptions:function(t){for(var e in t)this[e]=t[e]},toLive:function(t){var e=\"function\"==typeof this.source?this.source():this.source;if(!e)return\"\";if(void 0!==e.src){if(!e.complete)return\"\";if(0===e.naturalWidth||0===e.naturalHeight)return\"\"}return t.createPattern(e,this.repeat)}})}(),function(t){\"use strict\";var n=e.fabric||(e.fabric={}),i=n.util.toFixed;n.Shadow?n.warn(\"fabric.Shadow is already defined.\"):(n.Shadow=n.util.createClass({color:\"rgb(0,0,0)\",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1,initialize:function(t){for(var e in\"string\"==typeof t&&(t=this._parseShadow(t)),t)this[e]=t[e];this.id=n.Object.__uid++},_parseShadow:function(t){var e=t.trim(),i=n.Shadow.reOffsetsAndBlur.exec(e)||[];return{color:(e.replace(n.Shadow.reOffsetsAndBlur,\"\")||\"rgb(0,0,0)\").trim(),offsetX:parseInt(i[1],10)||0,offsetY:parseInt(i[2],10)||0,blur:parseInt(i[3],10)||0}},toString:function(){return[this.offsetX,this.offsetY,this.blur,this.color].join(\"px \")},toSVG:function(t){var e=40,r=40,o=n.Object.NUM_FRACTION_DIGITS,a=n.util.rotateVector({x:this.offsetX,y:this.offsetY},n.util.degreesToRadians(-t.angle)),s=new n.Color(this.color);return t.width&&t.height&&(e=100*i((Math.abs(a.x)+this.blur)/t.width,o)+20,r=100*i((Math.abs(a.y)+this.blur)/t.height,o)+20),t.flipX&&(a.x*=-1),t.flipY&&(a.y*=-1),'<filter id=\"SVGID_'+this.id+'\" y=\"-'+r+'%\" height=\"'+(100+2*r)+'%\" x=\"-'+e+'%\" width=\"'+(100+2*e)+'%\" >\\n\\t<feGaussianBlur in=\"SourceAlpha\" stdDeviation=\"'+i(this.blur?this.blur/2:0,o)+'\"></feGaussianBlur>\\n\\t<feOffset dx=\"'+i(a.x,o)+'\" dy=\"'+i(a.y,o)+'\" result=\"oBlur\" ></feOffset>\\n\\t<feFlood flood-color=\"'+s.toRgb()+'\" flood-opacity=\"'+s.getAlpha()+'\"/>\\n\\t<feComposite in2=\"oBlur\" operator=\"in\" />\\n\\t<feMerge>\\n\\t\\t<feMergeNode></feMergeNode>\\n\\t\\t<feMergeNode in=\"SourceGraphic\"></feMergeNode>\\n\\t</feMerge>\\n</filter>\\n'},toObject:function(){if(this.includeDefaultValues)return{color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling};var t={},e=n.Shadow.prototype;return[\"color\",\"blur\",\"offsetX\",\"offsetY\",\"affectStroke\",\"nonScaling\"].forEach(function(n){this[n]!==e[n]&&(t[n]=this[n])},this),t}}),n.Shadow.reOffsetsAndBlur=/(?:\\s|^)(-?\\d+(?:px)?(?:\\s?|$))?(-?\\d+(?:px)?(?:\\s?|$))?(\\d+(?:px)?)?(?:\\s?|$)(?:$|\\s)/)}(),function(){\"use strict\";if(C.StaticCanvas)C.warn(\"fabric.StaticCanvas is already defined.\");else{var t=C.util.object.extend,e=C.util.getElementOffset,n=C.util.removeFromArray,i=C.util.toFixed,r=C.util.transformPoint,o=C.util.invertTransform,a=C.util.getNodeCanvas,s=C.util.createCanvasElement,l=new Error(\"Could not initialize `canvas` element\");C.StaticCanvas=C.util.createClass(C.CommonMethods,{initialize:function(t,e){e||(e={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(t,e)},backgroundColor:\"\",backgroundImage:null,overlayColor:\"\",overlayImage:null,includeDefaultValues:!0,stateful:!1,renderOnAddRemove:!0,clipTo:null,controlsAboveOverlay:!1,allowTouchScrolling:!1,imageSmoothingEnabled:!0,viewportTransform:C.iMatrix.concat(),backgroundVpt:!0,overlayVpt:!0,onBeforeScaleRotate:function(){},enableRetinaScaling:!0,vptCoords:{},skipOffscreen:!0,clipPath:void 0,_initStatic:function(t,e){var n=this.requestRenderAllBound;this._objects=[],this._createLowerCanvas(t),this._initOptions(e),this._setImageSmoothing(),this.interactive||this._initRetinaScaling(),e.overlayImage&&this.setOverlayImage(e.overlayImage,n),e.backgroundImage&&this.setBackgroundImage(e.backgroundImage,n),e.backgroundColor&&this.setBackgroundColor(e.backgroundColor,n),e.overlayColor&&this.setOverlayColor(e.overlayColor,n),this.calcOffset()},_isRetinaScaling:function(){return 1!==C.devicePixelRatio&&this.enableRetinaScaling},getRetinaScaling:function(){return this._isRetinaScaling()?C.devicePixelRatio:1},_initRetinaScaling:function(){this._isRetinaScaling()&&(this.lowerCanvasEl.setAttribute(\"width\",this.width*C.devicePixelRatio),this.lowerCanvasEl.setAttribute(\"height\",this.height*C.devicePixelRatio),this.contextContainer.scale(C.devicePixelRatio,C.devicePixelRatio))},calcOffset:function(){return this._offset=e(this.lowerCanvasEl),this},setOverlayImage:function(t,e,n){return this.__setBgOverlayImage(\"overlayImage\",t,e,n)},setBackgroundImage:function(t,e,n){return this.__setBgOverlayImage(\"backgroundImage\",t,e,n)},setOverlayColor:function(t,e){return this.__setBgOverlayColor(\"overlayColor\",t,e)},setBackgroundColor:function(t,e){return this.__setBgOverlayColor(\"backgroundColor\",t,e)},_setImageSmoothing:function(){var t=this.getContext();t.imageSmoothingEnabled=t.imageSmoothingEnabled||t.webkitImageSmoothingEnabled||t.mozImageSmoothingEnabled||t.msImageSmoothingEnabled||t.oImageSmoothingEnabled,t.imageSmoothingEnabled=this.imageSmoothingEnabled},__setBgOverlayImage:function(t,e,n,i){return\"string\"==typeof e?C.util.loadImage(e,function(e){if(e){var r=new C.Image(e,i);this[t]=r,r.canvas=this}n&&n(e)},this,i&&i.crossOrigin):(i&&e.setOptions(i),this[t]=e,e&&(e.canvas=this),n&&n(e)),this},__setBgOverlayColor:function(t,e,n){return this[t]=e,this._initGradient(e,t),this._initPattern(e,t,n),this},_createCanvasElement:function(){var t=s();if(!t)throw l;if(t.style||(t.style={}),void 0===t.getContext)throw l;return t},_initOptions:function(t){var e=this.lowerCanvasEl;this._setOptions(t),this.width=this.width||parseInt(e.width,10)||0,this.height=this.height||parseInt(e.height,10)||0,this.lowerCanvasEl.style&&(e.width=this.width,e.height=this.height,e.style.width=this.width+\"px\",e.style.height=this.height+\"px\",this.viewportTransform=this.viewportTransform.slice())},_createLowerCanvas:function(t){this.lowerCanvasEl=t&&t.getContext?t:C.util.getById(t)||this._createCanvasElement(),C.util.addClass(this.lowerCanvasEl,\"lower-canvas\"),this.interactive&&this._applyCanvasStyle(this.lowerCanvasEl),this.contextContainer=this.lowerCanvasEl.getContext(\"2d\")},getWidth:function(){return this.width},getHeight:function(){return this.height},setWidth:function(t,e){return this.setDimensions({width:t},e)},setHeight:function(t,e){return this.setDimensions({height:t},e)},setDimensions:function(t,e){var n;for(var i in e=e||{},t)n=t[i],e.cssOnly||(this._setBackstoreDimension(i,t[i]),n+=\"px\",this.hasLostContext=!0),e.backstoreOnly||this._setCssDimension(i,n);return this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(),this._initRetinaScaling(),this._setImageSmoothing(),this.calcOffset(),e.cssOnly||this.requestRenderAll(),this},_setBackstoreDimension:function(t,e){return this.lowerCanvasEl[t]=e,this.upperCanvasEl&&(this.upperCanvasEl[t]=e),this.cacheCanvasEl&&(this.cacheCanvasEl[t]=e),this[t]=e,this},_setCssDimension:function(t,e){return this.lowerCanvasEl.style[t]=e,this.upperCanvasEl&&(this.upperCanvasEl.style[t]=e),this.wrapperEl&&(this.wrapperEl.style[t]=e),this},getZoom:function(){return this.viewportTransform[0]},setViewportTransform:function(t){var e,n,i,r=this._activeObject;for(this.viewportTransform=t,n=0,i=this._objects.length;n<i;n++)(e=this._objects[n]).group||e.setCoords(!1,!0);return r&&\"activeSelection\"===r.type&&r.setCoords(!1,!0),this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll(),this},zoomToPoint:function(t,e){var n=t,i=this.viewportTransform.slice(0);t=r(t,o(this.viewportTransform)),i[0]=e,i[3]=e;var a=r(t,i);return i[4]+=n.x-a.x,i[5]+=n.y-a.y,this.setViewportTransform(i)},setZoom:function(t){return this.zoomToPoint(new C.Point(0,0),t),this},absolutePan:function(t){var e=this.viewportTransform.slice(0);return e[4]=-t.x,e[5]=-t.y,this.setViewportTransform(e)},relativePan:function(t){return this.absolutePan(new C.Point(-t.x-this.viewportTransform[4],-t.y-this.viewportTransform[5]))},getElement:function(){return this.lowerCanvasEl},_onObjectAdded:function(t){this.stateful&&t.setupState(),t._set(\"canvas\",this),t.setCoords(),this.fire(\"object:added\",{target:t}),t.fire(\"added\")},_onObjectRemoved:function(t){this.fire(\"object:removed\",{target:t}),t.fire(\"removed\"),delete t.canvas},clearContext:function(t){return t.clearRect(0,0,this.width,this.height),this},getContext:function(){return this.contextContainer},clear:function(){return this._objects.length=0,this.backgroundImage=null,this.overlayImage=null,this.backgroundColor=\"\",this.overlayColor=\"\",this._hasITextHandlers&&(this.off(\"mouse:up\",this._mouseUpITextHandler),this._iTextInstances=null,this._hasITextHandlers=!1),this.clearContext(this.contextContainer),this.fire(\"canvas:cleared\"),this.renderOnAddRemove&&this.requestRenderAll(),this},renderAll:function(){return this.renderCanvas(this.contextContainer,this._objects),this},renderAndReset:function(){this.isRendering=0,this.renderAll()},requestRenderAll:function(){return this.isRendering||(this.isRendering=C.util.requestAnimFrame(this.renderAndResetBound)),this},calcViewportBoundaries:function(){var t={},e=this.width,n=this.height,i=o(this.viewportTransform);return t.tl=r({x:0,y:0},i),t.br=r({x:e,y:n},i),t.tr=new C.Point(t.br.x,t.tl.y),t.bl=new C.Point(t.tl.x,t.br.y),this.vptCoords=t,t},cancelRequestedRender:function(){this.isRendering&&(C.util.cancelAnimFrame(this.isRendering),this.isRendering=0)},renderCanvas:function(t,e){var n=this.viewportTransform,i=this.clipPath;this.cancelRequestedRender(),this.calcViewportBoundaries(),this.clearContext(t),this.fire(\"before:render\",{ctx:t}),this.clipTo&&C.util.clipContext(this,t),this._renderBackground(t),t.save(),t.transform(n[0],n[1],n[2],n[3],n[4],n[5]),this._renderObjects(t,e),t.restore(),!this.controlsAboveOverlay&&this.interactive&&this.drawControls(t),this.clipTo&&t.restore(),i&&(i.canvas=this,i.shouldCache(),i._transformDone=!0,i.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(t)),this._renderOverlay(t),this.controlsAboveOverlay&&this.interactive&&this.drawControls(t),this.fire(\"after:render\",{ctx:t})},drawClipPathOnCanvas:function(t){var e=this.viewportTransform,n=this.clipPath;t.save(),t.transform(e[0],e[1],e[2],e[3],e[4],e[5]),t.globalCompositeOperation=\"destination-in\",n.transform(t),t.scale(1/n.zoomX,1/n.zoomY),t.drawImage(n._cacheCanvas,-n.cacheTranslationX,-n.cacheTranslationY),t.restore()},_renderObjects:function(t,e){var n,i;for(n=0,i=e.length;n<i;++n)e[n]&&e[n].render(t)},_renderBackgroundOrOverlay:function(t,e){var n=this[e+\"Color\"],i=this[e+\"Image\"],r=this.viewportTransform,o=this[e+\"Vpt\"];if(n||i){if(n){t.save(),t.beginPath(),t.moveTo(0,0),t.lineTo(this.width,0),t.lineTo(this.width,this.height),t.lineTo(0,this.height),t.closePath(),t.fillStyle=n.toLive?n.toLive(t,this):n,o&&t.transform(r[0],r[1],r[2],r[3],r[4]+(n.offsetX||0),r[5]+(n.offsetY||0));var a=n.gradientTransform||n.patternTransform;a&&t.transform(a[0],a[1],a[2],a[3],a[4],a[5]),t.fill(),t.restore()}i&&(t.save(),o&&t.transform(r[0],r[1],r[2],r[3],r[4],r[5]),i.render(t),t.restore())}},_renderBackground:function(t){this._renderBackgroundOrOverlay(t,\"background\")},_renderOverlay:function(t){this._renderBackgroundOrOverlay(t,\"overlay\")},getCenter:function(){return{top:this.height/2,left:this.width/2}},centerObjectH:function(t){return this._centerObject(t,new C.Point(this.getCenter().left,t.getCenterPoint().y))},centerObjectV:function(t){return this._centerObject(t,new C.Point(t.getCenterPoint().x,this.getCenter().top))},centerObject:function(t){var e=this.getCenter();return this._centerObject(t,new C.Point(e.left,e.top))},viewportCenterObject:function(t){var e=this.getVpCenter();return this._centerObject(t,e)},viewportCenterObjectH:function(t){var e=this.getVpCenter();return this._centerObject(t,new C.Point(e.x,t.getCenterPoint().y)),this},viewportCenterObjectV:function(t){var e=this.getVpCenter();return this._centerObject(t,new C.Point(t.getCenterPoint().x,e.y))},getVpCenter:function(){var t=this.getCenter(),e=o(this.viewportTransform);return r({x:t.left,y:t.top},e)},_centerObject:function(t,e){return t.setPositionByOrigin(e,\"center\",\"center\"),t.setCoords(),this.renderOnAddRemove&&this.requestRenderAll(),this},toDatalessJSON:function(t){return this.toDatalessObject(t)},toObject:function(t){return this._toObjectMethod(\"toObject\",t)},toDatalessObject:function(t){return this._toObjectMethod(\"toDatalessObject\",t)},_toObjectMethod:function(e,n){var i=this.clipPath,r={version:C.version,objects:this._toObjects(e,n)};return i&&(r.clipPath=this._toObject(this.clipPath,e,n)),t(r,this.__serializeBgOverlay(e,n)),C.util.populateWithProperties(this,r,n),r},_toObjects:function(t,e){return this._objects.filter(function(t){return!t.excludeFromExport}).map(function(n){return this._toObject(n,t,e)},this)},_toObject:function(t,e,n){var i;this.includeDefaultValues||(i=t.includeDefaultValues,t.includeDefaultValues=!1);var r=t[e](n);return this.includeDefaultValues||(t.includeDefaultValues=i),r},__serializeBgOverlay:function(t,e){var n={},i=this.backgroundImage,r=this.overlayImage;return this.backgroundColor&&(n.background=this.backgroundColor.toObject?this.backgroundColor.toObject(e):this.backgroundColor),this.overlayColor&&(n.overlay=this.overlayColor.toObject?this.overlayColor.toObject(e):this.overlayColor),i&&!i.excludeFromExport&&(n.backgroundImage=this._toObject(i,t,e)),r&&!r.excludeFromExport&&(n.overlayImage=this._toObject(r,t,e)),n},svgViewportTransformation:!0,toSVG:function(t,e){t||(t={}),t.reviver=e;var n=[];return this._setSVGPreamble(n,t),this._setSVGHeader(n,t),this.clipPath&&n.push('<g clip-path=\"url(#'+this.clipPath.clipPathId+')\" >\\n'),this._setSVGBgOverlayColor(n,\"background\"),this._setSVGBgOverlayImage(n,\"backgroundImage\",e),this._setSVGObjects(n,e),this.clipPath&&n.push(\"</g>\\n\"),this._setSVGBgOverlayColor(n,\"overlay\"),this._setSVGBgOverlayImage(n,\"overlayImage\",e),n.push(\"</svg>\"),n.join(\"\")},_setSVGPreamble:function(t,e){e.suppressPreamble||t.push('<?xml version=\"1.0\" encoding=\"',e.encoding||\"UTF-8\",'\" standalone=\"no\" ?>\\n','<!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.1//EN\" ','\"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\">\\n')},_setSVGHeader:function(t,e){var n,r=e.width||this.width,o=e.height||this.height,a='viewBox=\"0 0 '+this.width+\" \"+this.height+'\" ',s=C.Object.NUM_FRACTION_DIGITS;e.viewBox?a='viewBox=\"'+e.viewBox.x+\" \"+e.viewBox.y+\" \"+e.viewBox.width+\" \"+e.viewBox.height+'\" ':this.svgViewportTransformation&&(a='viewBox=\"'+i(-(n=this.viewportTransform)[4]/n[0],s)+\" \"+i(-n[5]/n[3],s)+\" \"+i(this.width/n[0],s)+\" \"+i(this.height/n[3],s)+'\" '),t.push(\"<svg \",'xmlns=\"http://www.w3.org/2000/svg\" ','xmlns:xlink=\"http://www.w3.org/1999/xlink\" ','version=\"1.1\" ','width=\"',r,'\" ','height=\"',o,'\" ',a,'xml:space=\"preserve\">\\n',\"<desc>Created with Fabric.js \",C.version,\"</desc>\\n\",\"<defs>\\n\",this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(e),\"</defs>\\n\")},createSVGClipPathMarkup:function(t){var e=this.clipPath;return e?(e.clipPathId=\"CLIPPATH_\"+C.Object.__uid++,'<clipPath id=\"'+e.clipPathId+'\" >\\n'+this.clipPath.toClipPathSVG(t.reviver)+\"</clipPath>\\n\"):\"\"},createSVGRefElementsMarkup:function(){var t=this;return[\"background\",\"overlay\"].map(function(e){var n=t[e+\"Color\"];if(n&&n.toLive){var i=t[e+\"Vpt\"],r=t.viewportTransform;return n.toSVG({width:t.width/(i?r[0]:1),height:t.height/(i?r[3]:1)},{additionalTransform:i?C.util.matrixToSVG(r):\"\"})}}).join(\"\")},createSVGFontFacesMarkup:function(){var t,e,n,i,r,o,a,s,l=\"\",c={},u=C.fontPaths,h=this._objects;for(a=0,s=h.length;a<s;a++)if(e=(t=h[a]).fontFamily,-1!==t.type.indexOf(\"text\")&&!c[e]&&u[e]&&(c[e]=!0,t.styles))for(r in n=t.styles)for(o in i=n[r])!c[e=i[o].fontFamily]&&u[e]&&(c[e]=!0);for(var d in c)l+=[\"\\t\\t@font-face {\\n\",\"\\t\\t\\tfont-family: '\",d,\"';\\n\",\"\\t\\t\\tsrc: url('\",u[d],\"');\\n\",\"\\t\\t}\\n\"].join(\"\");return l&&(l=['\\t<style type=\"text/css\">',\"<![CDATA[\\n\",l,\"]]>\",\"</style>\\n\"].join(\"\")),l},_setSVGObjects:function(t,e){var n,i,r,o=this._objects;for(i=0,r=o.length;i<r;i++)(n=o[i]).excludeFromExport||this._setSVGObject(t,n,e)},_setSVGObject:function(t,e,n){t.push(e.toSVG(n))},_setSVGBgOverlayImage:function(t,e,n){this[e]&&!this[e].excludeFromExport&&this[e].toSVG&&t.push(this[e].toSVG(n))},_setSVGBgOverlayColor:function(t,e){var n=this[e+\"Color\"],i=this.width,r=this.height;if(n)if(n.toLive){var o=n.repeat,a=C.util.invertTransform(this.viewportTransform),s=this[e+\"Vpt\"]?C.util.matrixToSVG(a):\"\";t.push('<rect transform=\"'+s+\" translate(\",i/2,\",\",r/2,')\"',' x=\"',n.offsetX-i/2,'\" y=\"',n.offsetY-r/2,'\" ','width=\"',\"repeat-y\"===o||\"no-repeat\"===o?n.source.width:i,'\" height=\"',\"repeat-x\"===o||\"no-repeat\"===o?n.source.height:r,'\" fill=\"url(#SVGID_'+n.id+')\"',\"></rect>\\n\")}else t.push('<rect x=\"0\" y=\"0\" width=\"100%\" height=\"100%\" ','fill=\"',n,'\"',\"></rect>\\n\")},sendToBack:function(t){if(!t)return this;var e,i,r,o=this._activeObject;if(t===o&&\"activeSelection\"===t.type)for(e=(r=o._objects).length;e--;)n(this._objects,i=r[e]),this._objects.unshift(i);else n(this._objects,t),this._objects.unshift(t);return this.renderOnAddRemove&&this.requestRenderAll(),this},bringToFront:function(t){if(!t)return this;var e,i,r,o=this._activeObject;if(t===o&&\"activeSelection\"===t.type)for(r=o._objects,e=0;e<r.length;e++)n(this._objects,i=r[e]),this._objects.push(i);else n(this._objects,t),this._objects.push(t);return this.renderOnAddRemove&&this.requestRenderAll(),this},sendBackwards:function(t,e){if(!t)return this;var i,r,o,a,s,l=this._activeObject,c=0;if(t===l&&\"activeSelection\"===t.type)for(s=l._objects,i=0;i<s.length;i++)(o=this._objects.indexOf(r=s[i]))>0+c&&(a=o-1,n(this._objects,r),this._objects.splice(a,0,r)),c++;else 0!==(o=this._objects.indexOf(t))&&(a=this._findNewLowerIndex(t,o,e),n(this._objects,t),this._objects.splice(a,0,t));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewLowerIndex:function(t,e,n){var i,r;if(n){for(i=e,r=e-1;r>=0;--r)if(t.intersectsWithObject(this._objects[r])||t.isContainedWithinObject(this._objects[r])||this._objects[r].isContainedWithinObject(t)){i=r;break}}else i=e-1;return i},bringForward:function(t,e){if(!t)return this;var i,r,o,a,s,l=this._activeObject,c=0;if(t===l&&\"activeSelection\"===t.type)for(i=(s=l._objects).length;i--;)(o=this._objects.indexOf(r=s[i]))<this._objects.length-1-c&&(a=o+1,n(this._objects,r),this._objects.splice(a,0,r)),c++;else(o=this._objects.indexOf(t))!==this._objects.length-1&&(a=this._findNewUpperIndex(t,o,e),n(this._objects,t),this._objects.splice(a,0,t));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewUpperIndex:function(t,e,n){var i,r,o;if(n){for(i=e,r=e+1,o=this._objects.length;r<o;++r)if(t.intersectsWithObject(this._objects[r])||t.isContainedWithinObject(this._objects[r])||this._objects[r].isContainedWithinObject(t)){i=r;break}}else i=e+1;return i},moveTo:function(t,e){return n(this._objects,t),this._objects.splice(e,0,t),this.renderOnAddRemove&&this.requestRenderAll()},dispose:function(){return this.isRendering&&(C.util.cancelAnimFrame(this.isRendering),this.isRendering=0),this.forEachObject(function(t){t.dispose&&t.dispose()}),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose&&this.backgroundImage.dispose(),this.backgroundImage=null,this.overlayImage&&this.overlayImage.dispose&&this.overlayImage.dispose(),this.overlayImage=null,this._iTextInstances=null,this.contextContainer=null,C.util.cleanUpJsdomNode(this.lowerCanvasEl),this.lowerCanvasEl=void 0,this},toString:function(){return\"#<fabric.Canvas (\"+this.complexity()+\"): { objects: \"+this._objects.length+\" }>\"}}),t(C.StaticCanvas.prototype,C.Observable),t(C.StaticCanvas.prototype,C.Collection),t(C.StaticCanvas.prototype,C.DataURLExporter),t(C.StaticCanvas,{EMPTY_JSON:'{\"objects\": [], \"background\": \"white\"}',supports:function(t){var e=s();if(!e||!e.getContext)return null;var n=e.getContext(\"2d\");if(!n)return null;switch(t){case\"setLineDash\":return void 0!==n.setLineDash;default:return null}}}),C.StaticCanvas.prototype.toJSON=C.StaticCanvas.prototype.toObject,C.isLikelyNode&&(C.StaticCanvas.prototype.createPNGStream=function(){var t=a(this.lowerCanvasEl);return t&&t.createPNGStream()},C.StaticCanvas.prototype.createJPEGStream=function(t){var e=a(this.lowerCanvasEl);return e&&e.createJPEGStream(t)})}}(),C.BaseBrush=C.util.createClass({color:\"rgb(0, 0, 0)\",width:1,shadow:null,strokeLineCap:\"round\",strokeLineJoin:\"round\",strokeMiterLimit:10,strokeDashArray:null,setShadow:function(t){return this.shadow=new C.Shadow(t),this},_setBrushStyles:function(){var t=this.canvas.contextTop;t.strokeStyle=this.color,t.lineWidth=this.width,t.lineCap=this.strokeLineCap,t.miterLimit=this.strokeMiterLimit,t.lineJoin=this.strokeLineJoin,C.StaticCanvas.supports(\"setLineDash\")&&t.setLineDash(this.strokeDashArray||[])},_saveAndTransform:function(t){var e=this.canvas.viewportTransform;t.save(),t.transform(e[0],e[1],e[2],e[3],e[4],e[5])},_setShadow:function(){if(this.shadow){var t=this.canvas.contextTop,e=this.canvas.getZoom();t.shadowColor=this.shadow.color,t.shadowBlur=this.shadow.blur*e,t.shadowOffsetX=this.shadow.offsetX*e,t.shadowOffsetY=this.shadow.offsetY*e}},needsFullRender:function(){return new C.Color(this.color).getAlpha()<1||!!this.shadow},_resetShadow:function(){var t=this.canvas.contextTop;t.shadowColor=\"\",t.shadowBlur=t.shadowOffsetX=t.shadowOffsetY=0}}),C.PencilBrush=C.util.createClass(C.BaseBrush,{decimate:.4,initialize:function(t){this.canvas=t,this._points=[]},_drawSegment:function(t,e,n){var i=e.midPointFrom(n);return t.quadraticCurveTo(e.x,e.y,i.x,i.y),i},onMouseDown:function(t,e){this.canvas._isMainEvent(e.e)&&(this._prepareForDrawing(t),this._captureDrawingPath(t),this._render())},onMouseMove:function(t,e){if(this.canvas._isMainEvent(e.e)&&this._captureDrawingPath(t)&&this._points.length>1)if(this.needsFullRender())this.canvas.clearContext(this.canvas.contextTop),this._render();else{var n=this._points,i=n.length,r=this.canvas.contextTop;this._saveAndTransform(r),this.oldEnd&&(r.beginPath(),r.moveTo(this.oldEnd.x,this.oldEnd.y)),this.oldEnd=this._drawSegment(r,n[i-2],n[i-1],!0),r.stroke(),r.restore()}},onMouseUp:function(t){return!this.canvas._isMainEvent(t.e)||(this.oldEnd=void 0,this._finalizeAndAddPath(),!1)},_prepareForDrawing:function(t){var e=new C.Point(t.x,t.y);this._reset(),this._addPoint(e),this.canvas.contextTop.moveTo(e.x,e.y)},_addPoint:function(t){return!(this._points.length>1&&t.eq(this._points[this._points.length-1])||(this._points.push(t),0))},_reset:function(){this._points=[],this._setBrushStyles(),this._setShadow()},_captureDrawingPath:function(t){var e=new C.Point(t.x,t.y);return this._addPoint(e)},_render:function(){var t,e,n=this.canvas.contextTop,i=this._points[0],r=this._points[1];if(this._saveAndTransform(n),n.beginPath(),2===this._points.length&&i.x===r.x&&i.y===r.y){var o=this.width/1e3;i=new C.Point(i.x,i.y),r=new C.Point(r.x,r.y),i.x-=o,r.x+=o}for(n.moveTo(i.x,i.y),t=1,e=this._points.length;t<e;t++)this._drawSegment(n,i,r),i=this._points[t],r=this._points[t+1];n.lineTo(i.x,i.y),n.stroke(),n.restore()},convertPointsToSVGPath:function(t){var e,n=[],i=this.width/1e3,r=new C.Point(t[0].x,t[0].y),o=new C.Point(t[1].x,t[1].y),a=t.length,s=1,l=0,c=a>2;for(c&&(s=t[2].x<o.x?-1:t[2].x===o.x?0:1,l=t[2].y<o.y?-1:t[2].y===o.y?0:1),n.push(\"M \",r.x-s*i,\" \",r.y-l*i,\" \"),e=1;e<a;e++){if(!r.eq(o)){var u=r.midPointFrom(o);n.push(\"Q \",r.x,\" \",r.y,\" \",u.x,\" \",u.y,\" \")}r=t[e],e+1<t.length&&(o=t[e+1])}return c&&(s=r.x>t[e-2].x?1:r.x===t[e-2].x?0:-1,l=r.y>t[e-2].y?1:r.y===t[e-2].y?0:-1),n.push(\"L \",r.x+s*i,\" \",r.y+l*i),n},createPath:function(t){var e=new C.Path(t,{fill:null,stroke:this.color,strokeWidth:this.width,strokeLineCap:this.strokeLineCap,strokeMiterLimit:this.strokeMiterLimit,strokeLineJoin:this.strokeLineJoin,strokeDashArray:this.strokeDashArray});return this.shadow&&(this.shadow.affectStroke=!0,e.setShadow(this.shadow)),e},decimatePoints:function(t,e){if(t.length<=2)return t;var n,i=this.canvas.getZoom(),r=Math.pow(e/i,2),o=t.length-1,a=t[0],s=[a];for(n=1;n<o;n++)Math.pow(a.x-t[n].x,2)+Math.pow(a.y-t[n].y,2)>=r&&s.push(a=t[n]);return 1===s.length&&s.push(new C.Point(s[0].x,s[0].y)),s},_finalizeAndAddPath:function(){this.canvas.contextTop.closePath(),this.decimate&&(this._points=this.decimatePoints(this._points,this.decimate));var t=this.convertPointsToSVGPath(this._points).join(\"\");if(\"M 0 0 Q 0 0 0 0 L 0 0\"!==t){var e=this.createPath(t);this.canvas.clearContext(this.canvas.contextTop),this.canvas.add(e),this.canvas.renderAll(),e.setCoords(),this._resetShadow(),this.canvas.fire(\"path:created\",{path:e})}else this.canvas.requestRenderAll()}}),C.CircleBrush=C.util.createClass(C.BaseBrush,{width:10,initialize:function(t){this.canvas=t,this.points=[]},drawDot:function(t){var e=this.addPoint(t),n=this.canvas.contextTop;this._saveAndTransform(n),this.dot(n,e),n.restore()},dot:function(t,e){t.fillStyle=e.fill,t.beginPath(),t.arc(e.x,e.y,e.radius,0,2*Math.PI,!1),t.closePath(),t.fill()},onMouseDown:function(t){this.points.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.drawDot(t)},_render:function(){var t,e,n=this.canvas.contextTop,i=this.points;for(this._saveAndTransform(n),t=0,e=i.length;t<e;t++)this.dot(n,i[t]);n.restore()},onMouseMove:function(t){this.needsFullRender()?(this.canvas.clearContext(this.canvas.contextTop),this.addPoint(t),this._render()):this.drawDot(t)},onMouseUp:function(){var t,e,n=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;var i=[];for(t=0,e=this.points.length;t<e;t++){var r=this.points[t],o=new C.Circle({radius:r.radius,left:r.x,top:r.y,originX:\"center\",originY:\"center\",fill:r.fill});this.shadow&&o.setShadow(this.shadow),i.push(o)}var a=new C.Group(i);a.canvas=this.canvas,this.canvas.add(a),this.canvas.fire(\"path:created\",{path:a}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=n,this.canvas.requestRenderAll()},addPoint:function(t){var e=new C.Point(t.x,t.y),n=C.util.getRandomInt(Math.max(0,this.width-20),this.width+20)/2,i=new C.Color(this.color).setAlpha(C.util.getRandomInt(0,100)/100).toRgba();return e.radius=n,e.fill=i,this.points.push(e),e}}),C.SprayBrush=C.util.createClass(C.BaseBrush,{width:10,density:20,dotWidth:1,dotWidthVariance:1,randomOpacity:!1,optimizeOverlapping:!0,initialize:function(t){this.canvas=t,this.sprayChunks=[]},onMouseDown:function(t){this.sprayChunks.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.addSprayChunk(t),this.render(this.sprayChunkPoints)},onMouseMove:function(t){this.addSprayChunk(t),this.render(this.sprayChunkPoints)},onMouseUp:function(){var t=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;for(var e=[],n=0,i=this.sprayChunks.length;n<i;n++)for(var r=this.sprayChunks[n],o=0,a=r.length;o<a;o++){var s=new C.Rect({width:r[o].width,height:r[o].width,left:r[o].x+1,top:r[o].y+1,originX:\"center\",originY:\"center\",fill:this.color});e.push(s)}this.optimizeOverlapping&&(e=this._getOptimizedRects(e));var l=new C.Group(e);this.shadow&&l.setShadow(this.shadow),this.canvas.add(l),this.canvas.fire(\"path:created\",{path:l}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=t,this.canvas.requestRenderAll()},_getOptimizedRects:function(t){var e,n,i,r={};for(n=0,i=t.length;n<i;n++)r[e=t[n].left+\"\"+t[n].top]||(r[e]=t[n]);var o=[];for(e in r)o.push(r[e]);return o},render:function(t){var e,n,i=this.canvas.contextTop;for(i.fillStyle=this.color,this._saveAndTransform(i),e=0,n=t.length;e<n;e++){var r=t[e];void 0!==r.opacity&&(i.globalAlpha=r.opacity),i.fillRect(r.x,r.y,r.width,r.width)}i.restore()},_render:function(){var t,e,n=this.canvas.contextTop;for(n.fillStyle=this.color,this._saveAndTransform(n),t=0,e=this.sprayChunks.length;t<e;t++)this.render(this.sprayChunks[t]);n.restore()},addSprayChunk:function(t){this.sprayChunkPoints=[];var e,n,i,r,o=this.width/2;for(r=0;r<this.density;r++){e=C.util.getRandomInt(t.x-o,t.x+o),n=C.util.getRandomInt(t.y-o,t.y+o),i=this.dotWidthVariance?C.util.getRandomInt(Math.max(1,this.dotWidth-this.dotWidthVariance),this.dotWidth+this.dotWidthVariance):this.dotWidth;var a=new C.Point(e,n);a.width=i,this.randomOpacity&&(a.opacity=C.util.getRandomInt(0,100)/100),this.sprayChunkPoints.push(a)}this.sprayChunks.push(this.sprayChunkPoints)}}),C.PatternBrush=C.util.createClass(C.PencilBrush,{getPatternSrc:function(){var t=C.util.createCanvasElement(),e=t.getContext(\"2d\");return t.width=t.height=25,e.fillStyle=this.color,e.beginPath(),e.arc(10,10,10,0,2*Math.PI,!1),e.closePath(),e.fill(),t},getPatternSrcFunction:function(){return String(this.getPatternSrc).replace(\"this.color\",'\"'+this.color+'\"')},getPattern:function(){return this.canvas.contextTop.createPattern(this.source||this.getPatternSrc(),\"repeat\")},_setBrushStyles:function(){this.callSuper(\"_setBrushStyles\"),this.canvas.contextTop.strokeStyle=this.getPattern()},createPath:function(t){var e=this.callSuper(\"createPath\",t),n=e._getLeftTopCoords().scalarAdd(e.strokeWidth/2);return e.stroke=new C.Pattern({source:this.source||this.getPatternSrcFunction(),offsetX:-n.x,offsetY:-n.y}),e}}),function(){var t=C.util.getPointer,e=C.util.degreesToRadians,n=C.util.radiansToDegrees,i=Math.atan2,r=Math.abs,o=C.StaticCanvas.supports(\"setLineDash\");for(var a in C.Canvas=C.util.createClass(C.StaticCanvas,{initialize:function(t,e){e||(e={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(t,e),this._initInteractive(),this._createCacheCanvas()},uniScaleTransform:!1,uniScaleKey:\"shiftKey\",centeredScaling:!1,centeredRotation:!1,centeredKey:\"altKey\",altActionKey:\"shiftKey\",interactive:!0,selection:!0,selectionKey:\"shiftKey\",altSelectionKey:null,selectionColor:\"rgba(100, 100, 255, 0.3)\",selectionDashArray:[],selectionBorderColor:\"rgba(255, 255, 255, 0.3)\",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:\"move\",moveCursor:\"move\",defaultCursor:\"default\",freeDrawingCursor:\"crosshair\",rotationCursor:\"crosshair\",notAllowedCursor:\"not-allowed\",containerClass:\"canvas-container\",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,isDrawingMode:!1,preserveObjectStacking:!1,snapAngle:0,snapThreshold:null,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,_initInteractive:function(){this._currentTransform=null,this._groupSelector=null,this._initWrapperElement(),this._createUpperCanvas(),this._initEventListeners(),this._initRetinaScaling(),this.freeDrawingBrush=C.PencilBrush&&new C.PencilBrush(this),this.calcOffset()},_chooseObjectsToRender:function(){var t,e,n,i=this.getActiveObjects();if(i.length>0&&!this.preserveObjectStacking){e=[],n=[];for(var r=0,o=this._objects.length;r<o;r++)-1===i.indexOf(t=this._objects[r])?e.push(t):n.push(t);i.length>1&&(this._activeObject._objects=n),e.push.apply(e,n)}else e=this._objects;return e},renderAll:function(){return!this.contextTopDirty||this._groupSelector||this.isDrawingMode||(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&this.renderTopLayer(this.contextTop),this.renderCanvas(this.contextContainer,this._chooseObjectsToRender()),this},renderTopLayer:function(t){t.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(t),this.contextTopDirty=!0),t.restore()},renderTop:function(){var t=this.contextTop;return this.clearContext(t),this.renderTopLayer(t),this.fire(\"after:render\"),this},_resetCurrentTransform:function(){var t=this._currentTransform;t.target.set({scaleX:t.original.scaleX,scaleY:t.original.scaleY,skewX:t.original.skewX,skewY:t.original.skewY,left:t.original.left,top:t.original.top}),this._shouldCenterTransform(t.target)?(\"center\"!==t.originX&&(t.mouseXSign=\"right\"===t.originX?-1:1),\"center\"!==t.originY&&(t.mouseYSign=\"bottom\"===t.originY?-1:1),t.originX=\"center\",t.originY=\"center\"):(t.originX=t.original.originX,t.originY=t.original.originY)},containsPoint:function(t,e,n){var i,r=n||this.getPointer(t,!0);return i=e.group&&e.group===this._activeObject&&\"activeSelection\"===e.group.type?this._normalizePointer(e.group,r):{x:r.x,y:r.y},e.containsPoint(i)||e._findTargetCorner(r)},_normalizePointer:function(t,e){var n=t.calcTransformMatrix(),i=C.util.invertTransform(n),r=this.restorePointerVpt(e);return C.util.transformPoint(r,i)},isTargetTransparent:function(t,e,n){if(t.shouldCache()&&t._cacheCanvas&&t!==this._activeObject){var i=this._normalizePointer(t,{x:e,y:n}),r=Math.max(t.cacheTranslationX+i.x*t.zoomX,0),o=Math.max(t.cacheTranslationY+i.y*t.zoomY,0);return C.util.isTransparent(t._cacheContext,Math.round(r),Math.round(o),this.targetFindTolerance)}var a=this.contextCache,s=t.selectionBackgroundColor,l=this.viewportTransform;return t.selectionBackgroundColor=\"\",this.clearContext(a),a.save(),a.transform(l[0],l[1],l[2],l[3],l[4],l[5]),t.render(a),a.restore(),t===this._activeObject&&t._renderControls(a,{hasBorders:!1,transparentCorners:!1},{hasBorders:!1}),t.selectionBackgroundColor=s,C.util.isTransparent(a,e,n,this.targetFindTolerance)},_isSelectionKeyPressed:function(t){return\"[object Array]\"===Object.prototype.toString.call(this.selectionKey)?!!this.selectionKey.find(function(e){return!0===t[e]}):t[this.selectionKey]},_shouldClearSelection:function(t,e){var n=this.getActiveObjects(),i=this._activeObject;return!e||e&&i&&n.length>1&&-1===n.indexOf(e)&&i!==e&&!this._isSelectionKeyPressed(t)||e&&!e.evented||e&&!e.selectable&&i&&i!==e},_shouldCenterTransform:function(t){if(t){var e,n=this._currentTransform;return\"scale\"===n.action||\"scaleX\"===n.action||\"scaleY\"===n.action?e=this.centeredScaling||t.centeredScaling:\"rotate\"===n.action&&(e=this.centeredRotation||t.centeredRotation),e?!n.altKey:n.altKey}},_getOriginFromCorner:function(t,e){var n={x:t.originX,y:t.originY};return\"ml\"===e||\"tl\"===e||\"bl\"===e?n.x=\"right\":\"mr\"!==e&&\"tr\"!==e&&\"br\"!==e||(n.x=\"left\"),\"tl\"===e||\"mt\"===e||\"tr\"===e?n.y=\"bottom\":\"bl\"!==e&&\"mb\"!==e&&\"br\"!==e||(n.y=\"top\"),n},_getActionFromCorner:function(t,e,n){if(!e||!t)return\"drag\";switch(e){case\"mtr\":return\"rotate\";case\"ml\":case\"mr\":return n[this.altActionKey]?\"skewY\":\"scaleX\";case\"mt\":case\"mb\":return n[this.altActionKey]?\"skewX\":\"scaleY\";default:return\"scale\"}},_setupCurrentTransform:function(t,n,i){if(n){var r=this.getPointer(t),o=n._findTargetCorner(this.getPointer(t,!0)),a=this._getActionFromCorner(i,o,t,n),s=this._getOriginFromCorner(n,o);this._currentTransform={target:n,action:a,corner:o,scaleX:n.scaleX,scaleY:n.scaleY,skewX:n.skewX,skewY:n.skewY,offsetX:r.x-n.left,offsetY:r.y-n.top,originX:s.x,originY:s.y,ex:r.x,ey:r.y,lastX:r.x,lastY:r.y,theta:e(n.angle),width:n.width*n.scaleX,mouseXSign:1,mouseYSign:1,shiftKey:t.shiftKey,altKey:t[this.centeredKey],original:C.util.saveObjectTransform(n)},this._currentTransform.original.originX=s.x,this._currentTransform.original.originY=s.y,this._resetCurrentTransform(),this._beforeTransform(t)}},_translateObject:function(t,e){var n=this._currentTransform,i=n.target,r=t-n.offsetX,o=e-n.offsetY,a=!i.get(\"lockMovementX\")&&i.left!==r,s=!i.get(\"lockMovementY\")&&i.top!==o;return a&&i.set(\"left\",r),s&&i.set(\"top\",o),a||s},_changeSkewTransformOrigin:function(t,e,n){var i=\"originX\",r={0:\"center\"},o=e.target.skewX,a=\"left\",s=\"right\",l=\"mt\"===e.corner||\"ml\"===e.corner?1:-1,c=1;t=t>0?1:-1,\"y\"===n&&(o=e.target.skewY,a=\"top\",s=\"bottom\",i=\"originY\"),r[-1]=a,r[1]=s,e.target.flipX&&(c*=-1),e.target.flipY&&(c*=-1),0===o?(e.skewSign=-l*t*c,e[i]=r[-t]):(e.skewSign=o=o>0?1:-1,e[i]=r[o*l*c])},_skewObject:function(t,e,n){var i,r=this._currentTransform,o=r.target,a=o.get(\"lockSkewingX\"),s=o.get(\"lockSkewingY\");if(a&&\"x\"===n||s&&\"y\"===n)return!1;var l,c,u=o.getCenterPoint(),h=o.toLocalPoint(new C.Point(t,e),\"center\",\"center\")[n],d=o.toLocalPoint(new C.Point(r.lastX,r.lastY),\"center\",\"center\")[n],f=o._getTransformedDimensions();return this._changeSkewTransformOrigin(h-d,r,n),l=o.toLocalPoint(new C.Point(t,e),r.originX,r.originY)[n],c=o.translateToOriginPoint(u,r.originX,r.originY),i=this._setObjectSkew(l,r,n,f),r.lastX=t,r.lastY=e,o.setPositionByOrigin(c,r.originX,r.originY),i},_setObjectSkew:function(t,e,n,i){var r,o,a,s,l,c,u,h,d,f,p=e.target,g=e.skewSign;return\"x\"===n?(l=\"y\",c=\"Y\",u=\"X\",d=0,f=p.skewY):(l=\"x\",c=\"X\",u=\"Y\",d=p.skewX,f=0),s=p._getTransformedDimensions(d,f),(h=2*Math.abs(t)-s[n])<=2?r=0:(r=g*Math.atan(h/p[\"scale\"+u]/(s[l]/p[\"scale\"+c])),r=C.util.radiansToDegrees(r)),o=p[\"skew\"+u]!==r,p.set(\"skew\"+u,r),0!==p[\"skew\"+c]&&(a=p._getTransformedDimensions(),p.set(\"scale\"+c,r=i[l]/a[l]*p[\"scale\"+c])),o},_scaleObject:function(t,e,n){var i=this._currentTransform,r=i.target,o=r.lockScalingX,a=r.lockScalingY,s=r.lockScalingFlip;if(o&&a)return!1;var l,c=r.translateToOriginPoint(r.getCenterPoint(),i.originX,i.originY),u=r.toLocalPoint(new C.Point(t,e),i.originX,i.originY),h=r._getTransformedDimensions();return this._setLocalMouse(u,i),l=this._setObjectScale(u,i,o,a,n,s,h),r.setPositionByOrigin(c,i.originX,i.originY),l},_setObjectScale:function(t,e,n,i,r,o,a){var s=e.target,l=!1,c=!1,u=!1,h=t.x*s.scaleX/a.x,d=t.y*s.scaleY/a.y,f=s.scaleX!==h,p=s.scaleY!==d;if(e.newScaleX=h,e.newScaleY=d,\"x\"===r&&s instanceof C.Textbox){var g=s.width*(t.x/a.x);return g>=s.getMinWidth()&&(u=g!==s.width,s.set(\"width\",g),u)}return o&&h<=0&&h<s.scaleX&&(l=!0,t.x=0),o&&d<=0&&d<s.scaleY&&(c=!0,t.y=0),\"equally\"!==r||n||i?r?\"x\"!==r||s.get(\"lockUniScaling\")?\"y\"!==r||s.get(\"lockUniScaling\")||c||i||s.set(\"scaleY\",d)&&(u=p):l||n||s.set(\"scaleX\",h)&&(u=f):(l||n||s.set(\"scaleX\",h)&&(u=u||f),c||i||s.set(\"scaleY\",d)&&(u=u||p)):u=this._scaleObjectEqually(t,s,e,a),l||c||this._flipObject(e,r),u},_scaleObjectEqually:function(t,e,n,i){var r,o,a,s=t.y+t.x,l=i.y*n.original.scaleY/e.scaleY+i.x*n.original.scaleX/e.scaleX,c=t.y<0?-1:1;return o=(t.x<0?-1:1)*Math.abs(n.original.scaleX*s/l),a=c*Math.abs(n.original.scaleY*s/l),r=o!==e.scaleX||a!==e.scaleY,e.set(\"scaleX\",o),e.set(\"scaleY\",a),r},_flipObject:function(t,e){t.newScaleX<0&&\"y\"!==e&&(\"left\"===t.originX?t.originX=\"right\":\"right\"===t.originX&&(t.originX=\"left\")),t.newScaleY<0&&\"x\"!==e&&(\"top\"===t.originY?t.originY=\"bottom\":\"bottom\"===t.originY&&(t.originY=\"top\"))},_setLocalMouse:function(t,e){var n=e.target,i=this.getZoom(),o=n.padding/i;\"right\"===e.originX?t.x*=-1:\"center\"===e.originX&&(t.x*=2*e.mouseXSign,t.x<0&&(e.mouseXSign=-e.mouseXSign)),\"bottom\"===e.originY?t.y*=-1:\"center\"===e.originY&&(t.y*=2*e.mouseYSign,t.y<0&&(e.mouseYSign=-e.mouseYSign)),r(t.x)>o?t.x<0?t.x+=o:t.x-=o:t.x=0,r(t.y)>o?t.y<0?t.y+=o:t.y-=o:t.y=0},_rotateObject:function(t,e){var r=this._currentTransform,o=r.target,a=o.translateToOriginPoint(o.getCenterPoint(),r.originX,r.originY);if(o.lockRotation)return!1;var s=i(r.ey-a.y,r.ex-a.x),l=i(e-a.y,t-a.x),c=n(l-s+r.theta),u=!0;if(o.snapAngle>0){var h=o.snapAngle,d=o.snapThreshold||h,f=Math.ceil(c/h)*h,p=Math.floor(c/h)*h;Math.abs(c-p)<d?c=p:Math.abs(c-f)<d&&(c=f)}return c<0&&(c=360+c),o.angle===(c%=360)?u=!1:(o.angle=c,o.setPositionByOrigin(a,r.originX,r.originY)),u},setCursor:function(t){this.upperCanvasEl.style.cursor=t},_drawSelection:function(t){var e=this._groupSelector,n=e.left,i=e.top,a=r(n),s=r(i);if(this.selectionColor&&(t.fillStyle=this.selectionColor,t.fillRect(e.ex-(n>0?0:-n),e.ey-(i>0?0:-i),a,s)),this.selectionLineWidth&&this.selectionBorderColor)if(t.lineWidth=this.selectionLineWidth,t.strokeStyle=this.selectionBorderColor,this.selectionDashArray.length>1&&!o){var l=e.ex+.5-(n>0?0:a),c=e.ey+.5-(i>0?0:s);t.beginPath(),C.util.drawDashedLine(t,l,c,l+a,c,this.selectionDashArray),C.util.drawDashedLine(t,l,c+s-1,l+a,c+s-1,this.selectionDashArray),C.util.drawDashedLine(t,l,c,l,c+s,this.selectionDashArray),C.util.drawDashedLine(t,l+a-1,c,l+a-1,c+s,this.selectionDashArray),t.closePath(),t.stroke()}else C.Object.prototype._setLineDash.call(this,t,this.selectionDashArray),t.strokeRect(e.ex+.5-(n>0?0:a),e.ey+.5-(i>0?0:s),a,s)},findTarget:function(t,e){if(!this.skipTargetFind){var n,i,r=this.getPointer(t,!0),o=this._activeObject,a=this.getActiveObjects();if(this.targets=[],a.length>1&&!e&&o===this._searchPossibleTargets([o],r))return o;if(1===a.length&&o._findTargetCorner(r))return o;if(1===a.length&&o===this._searchPossibleTargets([o],r)){if(!this.preserveObjectStacking)return o;n=o,i=this.targets,this.targets=[]}var s=this._searchPossibleTargets(this._objects,r);return t[this.altSelectionKey]&&s&&n&&s!==n&&(s=n,this.targets=i),s}},_checkTarget:function(t,e,n){if(e&&e.visible&&e.evented&&this.containsPoint(null,e,t)){if(!this.perPixelTargetFind&&!e.perPixelTargetFind||e.isEditing)return!0;if(!this.isTargetTransparent(e,n.x,n.y))return!0}},_searchPossibleTargets:function(t,e){for(var n,i,r=t.length;r--;){var o=t[r],a=o.group&&\"activeSelection\"!==o.group.type?this._normalizePointer(o.group,e):e;if(this._checkTarget(a,o,e)){(n=t[r]).subTargetCheck&&n instanceof C.Group&&(i=this._searchPossibleTargets(n._objects,e))&&this.targets.push(i);break}}return n},restorePointerVpt:function(t){return C.util.transformPoint(t,C.util.invertTransform(this.viewportTransform))},getPointer:function(e,n){if(this._absolutePointer&&!n)return this._absolutePointer;if(this._pointer&&n)return this._pointer;var i,r=t(e),o=this.upperCanvasEl,a=o.getBoundingClientRect(),s=a.width||0,l=a.height||0;return s&&l||(\"top\"in a&&\"bottom\"in a&&(l=Math.abs(a.top-a.bottom)),\"right\"in a&&\"left\"in a&&(s=Math.abs(a.right-a.left))),this.calcOffset(),r.x=r.x-this._offset.left,r.y=r.y-this._offset.top,n||(r=this.restorePointerVpt(r)),{x:r.x*(i=0===s||0===l?{width:1,height:1}:{width:o.width/s,height:o.height/l}).width,y:r.y*i.height}},_createUpperCanvas:function(){var t=this.lowerCanvasEl.className.replace(/\\s*lower-canvas\\s*/,\"\");this.upperCanvasEl?this.upperCanvasEl.className=\"\":this.upperCanvasEl=this._createCanvasElement(),C.util.addClass(this.upperCanvasEl,\"upper-canvas \"+t),this.wrapperEl.appendChild(this.upperCanvasEl),this._copyCanvasStyle(this.lowerCanvasEl,this.upperCanvasEl),this._applyCanvasStyle(this.upperCanvasEl),this.contextTop=this.upperCanvasEl.getContext(\"2d\")},_createCacheCanvas:function(){this.cacheCanvasEl=this._createCanvasElement(),this.cacheCanvasEl.setAttribute(\"width\",this.width),this.cacheCanvasEl.setAttribute(\"height\",this.height),this.contextCache=this.cacheCanvasEl.getContext(\"2d\")},_initWrapperElement:function(){this.wrapperEl=C.util.wrapElement(this.lowerCanvasEl,\"div\",{class:this.containerClass}),C.util.setStyle(this.wrapperEl,{width:this.width+\"px\",height:this.height+\"px\",position:\"relative\"}),C.util.makeElementUnselectable(this.wrapperEl)},_applyCanvasStyle:function(t){var e=this.width||t.width,n=this.height||t.height;C.util.setStyle(t,{position:\"absolute\",width:e+\"px\",height:n+\"px\",left:0,top:0,\"touch-action\":this.allowTouchScrolling?\"manipulation\":\"none\",\"-ms-touch-action\":this.allowTouchScrolling?\"manipulation\":\"none\"}),t.width=e,t.height=n,C.util.makeElementUnselectable(t)},_copyCanvasStyle:function(t,e){e.style.cssText=t.style.cssText},getSelectionContext:function(){return this.contextTop},getSelectionElement:function(){return this.upperCanvasEl},getActiveObject:function(){return this._activeObject},getActiveObjects:function(){var t=this._activeObject;return t?\"activeSelection\"===t.type&&t._objects?t._objects.slice(0):[t]:[]},_onObjectRemoved:function(t){t===this._activeObject&&(this.fire(\"before:selection:cleared\",{target:t}),this._discardActiveObject(),this.fire(\"selection:cleared\",{target:t}),t.fire(\"deselected\")),this._hoveredTarget===t&&(this._hoveredTarget=null),this.callSuper(\"_onObjectRemoved\",t)},_fireSelectionEvents:function(t,e){var n=!1,i=this.getActiveObjects(),r=[],o=[],a={e:e};t.forEach(function(t){-1===i.indexOf(t)&&(n=!0,t.fire(\"deselected\",a),o.push(t))}),i.forEach(function(e){-1===t.indexOf(e)&&(n=!0,e.fire(\"selected\",a),r.push(e))}),t.length>0&&i.length>0?(a.selected=r,a.deselected=o,a.updated=r[0]||o[0],a.target=this._activeObject,n&&this.fire(\"selection:updated\",a)):i.length>0?(1===i.length&&(a.target=r[0],this.fire(\"object:selected\",a)),a.selected=r,a.target=this._activeObject,this.fire(\"selection:created\",a)):t.length>0&&(a.deselected=o,this.fire(\"selection:cleared\",a))},setActiveObject:function(t,e){var n=this.getActiveObjects();return this._setActiveObject(t,e),this._fireSelectionEvents(n,e),this},_setActiveObject:function(t,e){return this._activeObject!==t&&!!this._discardActiveObject(e,t)&&!t.onSelect({e:e})&&(this._activeObject=t,!0)},_discardActiveObject:function(t,e){var n=this._activeObject;if(n){if(n.onDeselect({e:t,object:e}))return!1;this._activeObject=null}return!0},discardActiveObject:function(t){var e=this.getActiveObjects(),n=this.getActiveObject();return e.length&&this.fire(\"before:selection:cleared\",{target:n,e:t}),this._discardActiveObject(t),this._fireSelectionEvents(e,t),this},dispose:function(){var t=this.wrapperEl;return this.removeListeners(),t.removeChild(this.upperCanvasEl),t.removeChild(this.lowerCanvasEl),this.contextCache=null,this.contextTop=null,[\"upperCanvasEl\",\"cacheCanvasEl\"].forEach((function(t){C.util.cleanUpJsdomNode(this[t]),this[t]=void 0}).bind(this)),t.parentNode&&t.parentNode.replaceChild(this.lowerCanvasEl,this.wrapperEl),delete this.wrapperEl,C.StaticCanvas.prototype.dispose.call(this),this},clear:function(){return this.discardActiveObject(),this.clearContext(this.contextTop),this.callSuper(\"clear\")},drawControls:function(t){var e=this._activeObject;e&&e._renderControls(t)},_toObject:function(t,e,n){var i=this._realizeGroupTransformOnObject(t),r=this.callSuper(\"_toObject\",t,e,n);return this._unwindGroupTransformOnObject(t,i),r},_realizeGroupTransformOnObject:function(t){if(t.group&&\"activeSelection\"===t.group.type&&this._activeObject===t.group){var e={};return[\"angle\",\"flipX\",\"flipY\",\"left\",\"scaleX\",\"scaleY\",\"skewX\",\"skewY\",\"top\"].forEach(function(n){e[n]=t[n]}),this._activeObject.realizeTransform(t),e}return null},_unwindGroupTransformOnObject:function(t,e){e&&t.set(e)},_setSVGObject:function(t,e,n){var i=this._realizeGroupTransformOnObject(e);this.callSuper(\"_setSVGObject\",t,e,n),this._unwindGroupTransformOnObject(e,i)},setViewportTransform:function(t){this.renderOnAddRemove&&this._activeObject&&this._activeObject.isEditing&&this._activeObject.clearContextTop(),C.StaticCanvas.prototype.setViewportTransform.call(this,t)}}),C.StaticCanvas)\"prototype\"!==a&&(C.Canvas[a]=C.StaticCanvas[a])}(),function(){var t={mt:0,tr:1,mr:2,br:3,mb:4,bl:5,ml:6,tl:7},e=C.util.addListener,n=C.util.removeListener,i={passive:!1};function r(t,e){return t.button&&t.button===e-1}C.util.object.extend(C.Canvas.prototype,{cursorMap:[\"n-resize\",\"ne-resize\",\"e-resize\",\"se-resize\",\"s-resize\",\"sw-resize\",\"w-resize\",\"nw-resize\"],mainTouchId:null,_initEventListeners:function(){this.removeListeners(),this._bindEvents(),this.addOrRemove(e,\"add\")},_getEventPrefix:function(){return this.enablePointerEvents?\"pointer\":\"mouse\"},addOrRemove:function(t,e){var n=this.upperCanvasEl,r=this._getEventPrefix();t(C.window,\"resize\",this._onResize),t(n,r+\"down\",this._onMouseDown),t(n,r+\"move\",this._onMouseMove,i),t(n,r+\"out\",this._onMouseOut),t(n,r+\"enter\",this._onMouseEnter),t(n,\"wheel\",this._onMouseWheel),t(n,\"contextmenu\",this._onContextMenu),t(n,\"dblclick\",this._onDoubleClick),t(n,\"dragover\",this._onDragOver),t(n,\"dragenter\",this._onDragEnter),t(n,\"dragleave\",this._onDragLeave),t(n,\"drop\",this._onDrop),this.enablePointerEvents||t(n,\"touchstart\",this._onTouchStart,i),\"undefined\"!=typeof eventjs&&e in eventjs&&(eventjs[e](n,\"gesture\",this._onGesture),eventjs[e](n,\"drag\",this._onDrag),eventjs[e](n,\"orientation\",this._onOrientationChange),eventjs[e](n,\"shake\",this._onShake),eventjs[e](n,\"longpress\",this._onLongPress))},removeListeners:function(){this.addOrRemove(n,\"remove\");var t=this._getEventPrefix();n(C.document,t+\"up\",this._onMouseUp),n(C.document,\"touchend\",this._onTouchEnd,i),n(C.document,t+\"move\",this._onMouseMove,i),n(C.document,\"touchmove\",this._onMouseMove,i)},_bindEvents:function(){this.eventsBound||(this._onMouseDown=this._onMouseDown.bind(this),this._onTouchStart=this._onTouchStart.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onTouchEnd=this._onTouchEnd.bind(this),this._onResize=this._onResize.bind(this),this._onGesture=this._onGesture.bind(this),this._onDrag=this._onDrag.bind(this),this._onShake=this._onShake.bind(this),this._onLongPress=this._onLongPress.bind(this),this._onOrientationChange=this._onOrientationChange.bind(this),this._onMouseWheel=this._onMouseWheel.bind(this),this._onMouseOut=this._onMouseOut.bind(this),this._onMouseEnter=this._onMouseEnter.bind(this),this._onContextMenu=this._onContextMenu.bind(this),this._onDoubleClick=this._onDoubleClick.bind(this),this._onDragOver=this._onDragOver.bind(this),this._onDragEnter=this._simpleEventHandler.bind(this,\"dragenter\"),this._onDragLeave=this._simpleEventHandler.bind(this,\"dragleave\"),this._onDrop=this._simpleEventHandler.bind(this,\"drop\"),this.eventsBound=!0)},_onGesture:function(t,e){this.__onTransformGesture&&this.__onTransformGesture(t,e)},_onDrag:function(t,e){this.__onDrag&&this.__onDrag(t,e)},_onMouseWheel:function(t){this.__onMouseWheel(t)},_onMouseOut:function(t){var e=this._hoveredTarget;this.fire(\"mouse:out\",{target:e,e:t}),this._hoveredTarget=null,e&&e.fire(\"mouseout\",{e:t}),this._iTextInstances&&this._iTextInstances.forEach(function(t){t.isEditing&&t.hiddenTextarea.focus()})},_onMouseEnter:function(t){this.currentTransform||this.findTarget(t)||(this.fire(\"mouse:over\",{target:null,e:t}),this._hoveredTarget=null)},_onOrientationChange:function(t,e){this.__onOrientationChange&&this.__onOrientationChange(t,e)},_onShake:function(t,e){this.__onShake&&this.__onShake(t,e)},_onLongPress:function(t,e){this.__onLongPress&&this.__onLongPress(t,e)},_onDragOver:function(t){t.preventDefault();var e=this._simpleEventHandler(\"dragover\",t);this._fireEnterLeaveEvents(e,t)},_onContextMenu:function(t){return this.stopContextMenu&&(t.stopPropagation(),t.preventDefault()),!1},_onDoubleClick:function(t){this._cacheTransformEventData(t),this._handleEvent(t,\"dblclick\"),this._resetTransformEventData(t)},getPointerId:function(t){var e=t.changedTouches;return e?e[0]&&e[0].identifier:this.enablePointerEvents?t.pointerId:-1},_isMainEvent:function(t){return!0===t.isPrimary||!1!==t.isPrimary&&(\"touchend\"===t.type&&0===t.touches.length||!t.changedTouches||t.changedTouches[0].identifier===this.mainTouchId)},_onTouchStart:function(t){t.preventDefault(),null===this.mainTouchId&&(this.mainTouchId=this.getPointerId(t)),this.__onMouseDown(t),this._resetTransformEventData();var r=this.upperCanvasEl,o=this._getEventPrefix();e(C.document,\"touchend\",this._onTouchEnd,i),e(C.document,\"touchmove\",this._onMouseMove,i),n(r,o+\"down\",this._onMouseDown)},_onMouseDown:function(t){this.__onMouseDown(t),this._resetTransformEventData();var r=this.upperCanvasEl,o=this._getEventPrefix();n(r,o+\"move\",this._onMouseMove,i),e(C.document,o+\"up\",this._onMouseUp),e(C.document,o+\"move\",this._onMouseMove,i)},_onTouchEnd:function(t){if(!(t.touches.length>0)){this.__onMouseUp(t),this._resetTransformEventData(),this.mainTouchId=null;var r=this._getEventPrefix();n(C.document,\"touchend\",this._onTouchEnd,i),n(C.document,\"touchmove\",this._onMouseMove,i);var o=this;this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout(function(){e(o.upperCanvasEl,r+\"down\",o._onMouseDown),o._willAddMouseDown=0},400)}},_onMouseUp:function(t){this.__onMouseUp(t),this._resetTransformEventData();var r=this.upperCanvasEl,o=this._getEventPrefix();this._isMainEvent(t)&&(n(C.document,o+\"up\",this._onMouseUp),n(C.document,o+\"move\",this._onMouseMove,i),e(r,o+\"move\",this._onMouseMove,i))},_onMouseMove:function(t){!this.allowTouchScrolling&&t.preventDefault&&t.preventDefault(),this.__onMouseMove(t)},_onResize:function(){this.calcOffset()},_shouldRender:function(t){var e=this._activeObject;return!!(!!e!=!!t||e&&t&&e!==t)},__onMouseUp:function(t){var e,n=this._currentTransform,i=this._groupSelector,o=!1,a=!i||0===i.left&&0===i.top;if(this._cacheTransformEventData(t),e=this._target,this._handleEvent(t,\"up:before\"),!r(t,3))return r(t,2)?(this.fireMiddleClick&&this._handleEvent(t,\"up\",2,a),void this._resetTransformEventData()):void(this.isDrawingMode&&this._isCurrentlyDrawing?this._onMouseUpInDrawingMode(t):this._isMainEvent(t)&&(n&&(this._finalizeCurrentTransform(t),o=n.actionPerformed),a||(this._maybeGroupObjects(t),o||(o=this._shouldRender(e))),e&&(e.isMoving=!1),this._setCursorFromEvent(t,e),this._handleEvent(t,\"up\",1,a),this._groupSelector=null,this._currentTransform=null,e&&(e.__corner=0),o?this.requestRenderAll():a||this.renderTop()));this.fireRightClick&&this._handleEvent(t,\"up\",3,a)},_simpleEventHandler:function(t,e){var n=this.findTarget(e),i=this.targets,r={e:e,target:n,subTargets:i};if(this.fire(t,r),n&&n.fire(t,r),!i)return n;for(var o=0;o<i.length;o++)i[o].fire(t,r);return n},_handleEvent:function(t,e,n,i){var r=this._target,o=this.targets||[],a={e:t,target:r,subTargets:o,button:n||1,isClick:i||!1,pointer:this._pointer,absolutePointer:this._absolutePointer,transform:this._currentTransform};this.fire(\"mouse:\"+e,a),r&&r.fire(\"mouse\"+e,a);for(var s=0;s<o.length;s++)o[s].fire(\"mouse\"+e,a)},_finalizeCurrentTransform:function(t){var e,n=this._currentTransform,i=n.target,r={e:t,target:i,transform:n};i._scaling&&(i._scaling=!1),i.setCoords(),(n.actionPerformed||this.stateful&&i.hasStateChanged())&&(n.actionPerformed&&(e=this._addEventOptions(r,n),this._fire(e,r)),this._fire(\"modified\",r))},_addEventOptions:function(t,e){var n,i;switch(e.action){case\"scaleX\":n=\"scaled\",i=\"x\";break;case\"scaleY\":n=\"scaled\",i=\"y\";break;case\"skewX\":n=\"skewed\",i=\"x\";break;case\"skewY\":n=\"skewed\",i=\"y\";break;case\"scale\":n=\"scaled\",i=\"equally\";break;case\"rotate\":n=\"rotated\";break;case\"drag\":n=\"moved\"}return t.by=i,n},_onMouseDownInDrawingMode:function(t){this._isCurrentlyDrawing=!0,this.getActiveObject()&&this.discardActiveObject(t).requestRenderAll(),this.clipTo&&C.util.clipContext(this,this.contextTop);var e=this.getPointer(t);this.freeDrawingBrush.onMouseDown(e,{e:t,pointer:e}),this._handleEvent(t,\"down\")},_onMouseMoveInDrawingMode:function(t){if(this._isCurrentlyDrawing){var e=this.getPointer(t);this.freeDrawingBrush.onMouseMove(e,{e:t,pointer:e})}this.setCursor(this.freeDrawingCursor),this._handleEvent(t,\"move\")},_onMouseUpInDrawingMode:function(t){this.clipTo&&this.contextTop.restore();var e=this.getPointer(t);this._isCurrentlyDrawing=this.freeDrawingBrush.onMouseUp({e:t,pointer:e}),this._handleEvent(t,\"up\")},__onMouseDown:function(t){this._cacheTransformEventData(t),this._handleEvent(t,\"down:before\");var e=this._target;if(r(t,3))this.fireRightClick&&this._handleEvent(t,\"down\",3);else if(r(t,2))this.fireMiddleClick&&this._handleEvent(t,\"down\",2);else if(this.isDrawingMode)this._onMouseDownInDrawingMode(t);else if(this._isMainEvent(t)&&!this._currentTransform){var n=this._pointer;this._previousPointer=n;var i=this._shouldRender(e),o=this._shouldGroup(t,e);if(this._shouldClearSelection(t,e)?this.discardActiveObject(t):o&&(this._handleGrouping(t,e),e=this._activeObject),!this.selection||e&&(e.selectable||e.isEditing||e===this._activeObject)||(this._groupSelector={ex:n.x,ey:n.y,top:0,left:0}),e){var a=e===this._activeObject;e.selectable&&this.setActiveObject(e,t),e!==this._activeObject||!e.__corner&&o||this._setupCurrentTransform(t,e,a)}this._handleEvent(t,\"down\"),(i||o)&&this.requestRenderAll()}},_resetTransformEventData:function(){this._target=null,this._pointer=null,this._absolutePointer=null},_cacheTransformEventData:function(t){this._resetTransformEventData(),this._pointer=this.getPointer(t,!0),this._absolutePointer=this.restorePointerVpt(this._pointer),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(t)||null},_beforeTransform:function(t){var e=this._currentTransform;this.stateful&&e.target.saveState(),this.fire(\"before:transform\",{e:t,transform:e}),e.corner&&this.onBeforeScaleRotate(e.target)},__onMouseMove:function(t){var e,n;if(this._handleEvent(t,\"move:before\"),this._cacheTransformEventData(t),this.isDrawingMode)this._onMouseMoveInDrawingMode(t);else if(this._isMainEvent(t)){var i=this._groupSelector;i?(i.left=(n=this._pointer).x-i.ex,i.top=n.y-i.ey,this.renderTop()):this._currentTransform?this._transformObject(t):(e=this.findTarget(t)||null,this._setCursorFromEvent(t,e),this._fireOverOutEvents(e,t)),this._handleEvent(t,\"move\"),this._resetTransformEventData()}},_fireOverOutEvents:function(t,e){this.fireSyntheticInOutEvents(t,e,{targetName:\"_hoveredTarget\",canvasEvtOut:\"mouse:out\",evtOut:\"mouseout\",canvasEvtIn:\"mouse:over\",evtIn:\"mouseover\"})},_fireEnterLeaveEvents:function(t,e){this.fireSyntheticInOutEvents(t,e,{targetName:\"_draggedoverTarget\",evtOut:\"dragleave\",evtIn:\"dragenter\"})},fireSyntheticInOutEvents:function(t,e,n){var i,r,o,a=this[n.targetName],s=a!==t,l=n.canvasEvtIn,c=n.canvasEvtOut;s&&(i={e:e,target:t,previousTarget:a},r={e:e,target:a,nextTarget:t},this[n.targetName]=t),o=t&&s,a&&s&&(c&&this.fire(c,r),a.fire(n.evtOut,r)),o&&(l&&this.fire(l,i),t.fire(n.evtIn,i))},__onMouseWheel:function(t){this._cacheTransformEventData(t),this._handleEvent(t,\"wheel\"),this._resetTransformEventData()},_transformObject:function(t){var e=this.getPointer(t),n=this._currentTransform;n.reset=!1,n.target.isMoving=!0,n.shiftKey=t.shiftKey,n.altKey=t[this.centeredKey],this._beforeScaleTransform(t,n),this._performTransformAction(t,n,e),n.actionPerformed&&this.requestRenderAll()},_performTransformAction:function(t,e,n){var i=n.x,r=n.y,o=e.action,a=!1,s={target:e.target,e:t,transform:e,pointer:n};\"rotate\"===o?(a=this._rotateObject(i,r))&&this._fire(\"rotating\",s):\"scale\"===o?(a=this._onScale(t,e,i,r))&&this._fire(\"scaling\",s):\"scaleX\"===o?(a=this._scaleObject(i,r,\"x\"))&&this._fire(\"scaling\",s):\"scaleY\"===o?(a=this._scaleObject(i,r,\"y\"))&&this._fire(\"scaling\",s):\"skewX\"===o?(a=this._skewObject(i,r,\"x\"))&&this._fire(\"skewing\",s):\"skewY\"===o?(a=this._skewObject(i,r,\"y\"))&&this._fire(\"skewing\",s):(a=this._translateObject(i,r))&&(this._fire(\"moving\",s),this.setCursor(s.target.moveCursor||this.moveCursor)),e.actionPerformed=e.actionPerformed||a},_fire:function(t,e){this.fire(\"object:\"+t,e),e.target.fire(t,e)},_beforeScaleTransform:function(t,e){if(\"scale\"===e.action||\"scaleX\"===e.action||\"scaleY\"===e.action){var n=this._shouldCenterTransform(e.target);(n&&(\"center\"!==e.originX||\"center\"!==e.originY)||!n&&\"center\"===e.originX&&\"center\"===e.originY)&&(this._resetCurrentTransform(),e.reset=!0)}},_onScale:function(t,e,n,i){return this._isUniscalePossible(t,e.target)?(e.currentAction=\"scale\",this._scaleObject(n,i)):(e.reset||\"scale\"!==e.currentAction||this._resetCurrentTransform(),e.currentAction=\"scaleEqually\",this._scaleObject(n,i,\"equally\"))},_isUniscalePossible:function(t,e){return(t[this.uniScaleKey]||this.uniScaleTransform)&&!e.get(\"lockUniScaling\")},_setCursorFromEvent:function(t,e){if(!e)return this.setCursor(this.defaultCursor),!1;var n=e.hoverCursor||this.hoverCursor,i=this._activeObject&&\"activeSelection\"===this._activeObject.type?this._activeObject:null,r=(!i||!i.contains(e))&&e._findTargetCorner(this.getPointer(t,!0));this.setCursor(r?this.getCornerCursor(r,e,t):n)},getCornerCursor:function(e,n,i){return this.actionIsDisabled(e,n,i)?this.notAllowedCursor:e in t?this._getRotatedCornerCursor(e,n,i):\"mtr\"===e&&n.hasRotatingPoint?this.rotationCursor:this.defaultCursor},actionIsDisabled:function(t,e,n){return\"mt\"===t||\"mb\"===t?n[this.altActionKey]?e.lockSkewingX:e.lockScalingY:\"ml\"===t||\"mr\"===t?n[this.altActionKey]?e.lockSkewingY:e.lockScalingX:\"mtr\"===t?e.lockRotation:this._isUniscalePossible(n,e)?e.lockScalingX&&e.lockScalingY:e.lockScalingX||e.lockScalingY},_getRotatedCornerCursor:function(e,n,i){var r=Math.round(n.angle%360/45);return r<0&&(r+=8),r+=t[e],i[this.altActionKey]&&t[e]%2==0&&(r+=2),this.cursorMap[r%=8]}})}(),h=Math.min,d=Math.max,C.util.object.extend(C.Canvas.prototype,{_shouldGroup:function(t,e){var n=this._activeObject;return n&&this._isSelectionKeyPressed(t)&&e&&e.selectable&&this.selection&&(n!==e||\"activeSelection\"===n.type)&&!e.onSelect({e:t})},_handleGrouping:function(t,e){var n=this._activeObject;n.__corner||(e!==n||(e=this.findTarget(t,!0))&&e.selectable)&&(n&&\"activeSelection\"===n.type?this._updateActiveSelection(e,t):this._createActiveSelection(e,t))},_updateActiveSelection:function(t,e){var n=this._activeObject,i=n._objects.slice(0);n.contains(t)?(n.removeWithUpdate(t),this._hoveredTarget=t,1===n.size()&&this._setActiveObject(n.item(0),e)):(n.addWithUpdate(t),this._hoveredTarget=n),this._fireSelectionEvents(i,e)},_createActiveSelection:function(t,e){var n=this.getActiveObjects(),i=this._createGroup(t);this._hoveredTarget=i,this._setActiveObject(i,e),this._fireSelectionEvents(n,e)},_createGroup:function(t){var e=this._objects,n=e.indexOf(this._activeObject)<e.indexOf(t)?[this._activeObject,t]:[t,this._activeObject];return this._activeObject.isEditing&&this._activeObject.exitEditing(),new C.ActiveSelection(n,{canvas:this})},_groupSelectedObjects:function(t){var e,n=this._collectObjects(t);1===n.length?this.setActiveObject(n[0],t):n.length>1&&(e=new C.ActiveSelection(n.reverse(),{canvas:this}),this.setActiveObject(e,t))},_collectObjects:function(t){for(var e,n=[],i=this._groupSelector.ex,r=this._groupSelector.ey,o=i+this._groupSelector.left,a=r+this._groupSelector.top,s=new C.Point(h(i,o),h(r,a)),l=new C.Point(d(i,o),d(r,a)),c=!this.selectionFullyContained,u=i===o&&r===a,f=this._objects.length;f--&&!((e=this._objects[f])&&e.selectable&&e.visible&&(c&&e.intersectsWithRect(s,l)||e.isContainedWithinRect(s,l)||c&&e.containsPoint(s)||c&&e.containsPoint(l))&&(n.push(e),u)););return n.length>1&&(n=n.filter(function(e){return!e.onSelect({e:t})})),n},_maybeGroupObjects:function(t){this.selection&&this._groupSelector&&this._groupSelectedObjects(t),this.setCursor(this.defaultCursor),this._groupSelector=null}}),C.util.object.extend(C.StaticCanvas.prototype,{toDataURL:function(t){t||(t={});var e=t.format||\"png\",n=t.quality||1,i=(t.multiplier||1)*(t.enableRetinaScaling?this.getRetinaScaling():1),r=this.toCanvasElement(i,t);return C.util.toDataURL(r,e,n)},toCanvasElement:function(t,e){var n=((e=e||{}).width||this.width)*(t=t||1),i=(e.height||this.height)*t,r=this.getZoom(),o=this.width,a=this.height,s=r*t,l=this.viewportTransform,c=this.interactive,u=[s,0,0,s,(l[4]-(e.left||0))*t,(l[5]-(e.top||0))*t],h=this.enableRetinaScaling,d=C.util.createCanvasElement(),f=this.contextTop;return d.width=n,d.height=i,this.contextTop=null,this.enableRetinaScaling=!1,this.interactive=!1,this.viewportTransform=u,this.width=n,this.height=i,this.calcViewportBoundaries(),this.renderCanvas(d.getContext(\"2d\"),this._objects),this.viewportTransform=l,this.width=o,this.height=a,this.calcViewportBoundaries(),this.interactive=c,this.enableRetinaScaling=h,this.contextTop=f,d}}),C.util.object.extend(C.StaticCanvas.prototype,{loadFromDatalessJSON:function(t,e,n){return this.loadFromJSON(t,e,n)},loadFromJSON:function(t,e,n){if(t){var i=\"string\"==typeof t?JSON.parse(t):C.util.object.clone(t),r=this,o=i.clipPath,a=this.renderOnAddRemove;return this.renderOnAddRemove=!1,delete i.clipPath,this._enlivenObjects(i.objects,function(t){r.clear(),r._setBgOverlay(i,function(){o?r._enlivenObjects([o],function(n){r.clipPath=n[0],r.__setupCanvas.call(r,i,t,a,e)}):r.__setupCanvas.call(r,i,t,a,e)})},n),this}},__setupCanvas:function(t,e,n,i){var r=this;e.forEach(function(t,e){r.insertAt(t,e)}),this.renderOnAddRemove=n,delete t.objects,delete t.backgroundImage,delete t.overlayImage,delete t.background,delete t.overlay,this._setOptions(t),this.renderAll(),i&&i()},_setBgOverlay:function(t,e){var n={backgroundColor:!1,overlayColor:!1,backgroundImage:!1,overlayImage:!1};if(t.backgroundImage||t.overlayImage||t.background||t.overlay){var i=function(){n.backgroundImage&&n.overlayImage&&n.backgroundColor&&n.overlayColor&&e&&e()};this.__setBgOverlay(\"backgroundImage\",t.backgroundImage,n,i),this.__setBgOverlay(\"overlayImage\",t.overlayImage,n,i),this.__setBgOverlay(\"backgroundColor\",t.background,n,i),this.__setBgOverlay(\"overlayColor\",t.overlay,n,i)}else e&&e()},__setBgOverlay:function(t,e,n,i){var r=this;if(!e)return n[t]=!0,void(i&&i());\"backgroundImage\"===t||\"overlayImage\"===t?C.util.enlivenObjects([e],function(e){r[t]=e[0],n[t]=!0,i&&i()}):this[\"set\"+C.util.string.capitalize(t,!0)](e,function(){n[t]=!0,i&&i()})},_enlivenObjects:function(t,e,n){t&&0!==t.length?C.util.enlivenObjects(t,function(t){e&&e(t)},null,n):e&&e([])},_toDataURL:function(t,e){this.clone(function(n){e(n.toDataURL(t))})},_toDataURLWithMultiplier:function(t,e,n){this.clone(function(i){n(i.toDataURLWithMultiplier(t,e))})},clone:function(t,e){var n=JSON.stringify(this.toJSON(e));this.cloneWithoutData(function(e){e.loadFromJSON(n,function(){t&&t(e)})})},cloneWithoutData:function(t){var e=C.util.createCanvasElement();e.width=this.width,e.height=this.height;var n=new C.Canvas(e);n.clipTo=this.clipTo,this.backgroundImage?(n.setBackgroundImage(this.backgroundImage.src,function(){n.renderAll(),t&&t(n)}),n.backgroundImageOpacity=this.backgroundImageOpacity,n.backgroundImageStretch=this.backgroundImageStretch):t&&t(n)}}),function(t){\"use strict\";var n=e.fabric||(e.fabric={}),i=n.util.object.extend,r=n.util.object.clone,o=n.util.toFixed,a=n.util.string.capitalize,s=n.util.degreesToRadians,l=n.StaticCanvas.supports(\"setLineDash\");n.Object||(n.Object=n.util.createClass(n.CommonMethods,{type:\"object\",originX:\"left\",originY:\"top\",top:0,left:0,width:0,height:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,opacity:1,angle:0,skewX:0,skewY:0,cornerSize:13,transparentCorners:!0,hoverCursor:null,moveCursor:null,padding:0,borderColor:\"rgba(102,153,255,0.75)\",borderDashArray:null,cornerColor:\"rgba(102,153,255,0.5)\",cornerStrokeColor:null,cornerStyle:\"rect\",cornerDashArray:null,centeredScaling:!1,centeredRotation:!0,fill:\"rgb(0,0,0)\",fillRule:\"nonzero\",globalCompositeOperation:\"source-over\",backgroundColor:\"\",selectionBackgroundColor:\"\",stroke:null,strokeWidth:1,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:\"butt\",strokeLineJoin:\"miter\",strokeMiterLimit:4,shadow:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,transformMatrix:null,minScaleLimit:0,selectable:!0,evented:!0,visible:!0,hasControls:!0,hasBorders:!0,hasRotatingPoint:!0,rotatingPointOffset:40,perPixelTargetFind:!1,includeDefaultValues:!0,clipTo:null,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockUniScaling:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,excludeFromExport:!1,objectCaching:!n.isLikelyNode,statefullCache:!1,noScaleCache:!0,strokeUniform:!1,dirty:!0,__corner:0,paintFirst:\"fill\",stateProperties:\"top left width height scaleX scaleY flipX flipY originX originY transformMatrix stroke strokeWidth strokeDashArray strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit angle opacity fill globalCompositeOperation shadow clipTo visible backgroundColor skewX skewY fillRule paintFirst clipPath strokeUniform\".split(\" \"),cacheProperties:\"fill stroke strokeWidth strokeDashArray width height paintFirst strokeUniform strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit backgroundColor clipPath\".split(\" \"),clipPath:void 0,inverted:!1,absolutePositioned:!1,initialize:function(t){t&&this.setOptions(t)},_createCacheCanvas:function(){this._cacheProperties={},this._cacheCanvas=n.util.createCanvasElement(),this._cacheContext=this._cacheCanvas.getContext(\"2d\"),this._updateCacheCanvas(),this.dirty=!0},_limitCacheSize:function(t){var e=n.perfLimitSizeTotal,i=t.width,r=t.height,o=n.maxCacheSideLimit,a=n.minCacheSideLimit;if(i<=o&&r<=o&&i*r<=e)return i<a&&(t.width=a),r<a&&(t.height=a),t;var s=n.util.limitDimsByArea(i/r,e),l=n.util.capValue,c=l(a,s.x,o),u=l(a,s.y,o);return i>c&&(t.zoomX/=i/c,t.width=c,t.capped=!0),r>u&&(t.zoomY/=r/u,t.height=u,t.capped=!0),t},_getCacheCanvasDimensions:function(){var t=this.getTotalObjectScaling(),e=this._getTransformedDimensions(0,0),n=e.x*t.scaleX/this.scaleX,i=e.y*t.scaleY/this.scaleY;return{width:n+2,height:i+2,zoomX:t.scaleX,zoomY:t.scaleY,x:n,y:i}},_updateCacheCanvas:function(){var t=this.canvas;if(this.noScaleCache&&t&&t._currentTransform){var e=t._currentTransform.action;if(this===t._currentTransform.target&&e.slice&&\"scale\"===e.slice(0,5))return!1}var i,r,o=this._cacheCanvas,a=this._limitCacheSize(this._getCacheCanvasDimensions()),s=n.minCacheSideLimit,l=a.width,c=a.height,u=a.zoomX,h=a.zoomY,d=l!==this.cacheWidth||c!==this.cacheHeight,f=0,p=0,g=!1;if(d){var m=this._cacheCanvas.width,v=this._cacheCanvas.height,y=l>m||c>v;g=y||(l<.9*m||c<.9*v)&&m>s&&v>s,y&&!a.capped&&(l>s||c>s)&&(f=.1*l,p=.1*c)}return!(!d&&this.zoomX===u&&this.zoomY===h||(g?(o.width=Math.ceil(l+f),o.height=Math.ceil(c+p)):(this._cacheContext.setTransform(1,0,0,1,0,0),this._cacheContext.clearRect(0,0,o.width,o.height)),i=a.x/2,r=a.y/2,this.cacheTranslationX=Math.round(o.width/2-i)+i,this.cacheTranslationY=Math.round(o.height/2-r)+r,this.cacheWidth=l,this.cacheHeight=c,this._cacheContext.translate(this.cacheTranslationX,this.cacheTranslationY),this._cacheContext.scale(u,h),this.zoomX=u,this.zoomY=h,0))},setOptions:function(t){this._setOptions(t),this._initGradient(t.fill,\"fill\"),this._initGradient(t.stroke,\"stroke\"),this._initClipping(t),this._initPattern(t.fill,\"fill\"),this._initPattern(t.stroke,\"stroke\")},transform:function(t){var e;e=this.group&&!this.group._transformDone?this.calcTransformMatrix():this.calcOwnMatrix(),t.transform(e[0],e[1],e[2],e[3],e[4],e[5])},toObject:function(t){var e=n.Object.NUM_FRACTION_DIGITS,i={type:this.type,version:n.version,originX:this.originX,originY:this.originY,left:o(this.left,e),top:o(this.top,e),width:o(this.width,e),height:o(this.height,e),fill:this.fill&&this.fill.toObject?this.fill.toObject():this.fill,stroke:this.stroke&&this.stroke.toObject?this.stroke.toObject():this.stroke,strokeWidth:o(this.strokeWidth,e),strokeDashArray:this.strokeDashArray?this.strokeDashArray.concat():this.strokeDashArray,strokeLineCap:this.strokeLineCap,strokeDashOffset:this.strokeDashOffset,strokeLineJoin:this.strokeLineJoin,strokeMiterLimit:o(this.strokeMiterLimit,e),scaleX:o(this.scaleX,e),scaleY:o(this.scaleY,e),angle:o(this.angle,e),flipX:this.flipX,flipY:this.flipY,opacity:o(this.opacity,e),shadow:this.shadow&&this.shadow.toObject?this.shadow.toObject():this.shadow,visible:this.visible,clipTo:this.clipTo&&String(this.clipTo),backgroundColor:this.backgroundColor,fillRule:this.fillRule,paintFirst:this.paintFirst,globalCompositeOperation:this.globalCompositeOperation,transformMatrix:this.transformMatrix?this.transformMatrix.concat():null,skewX:o(this.skewX,e),skewY:o(this.skewY,e)};return this.clipPath&&(i.clipPath=this.clipPath.toObject(t),i.clipPath.inverted=this.clipPath.inverted,i.clipPath.absolutePositioned=this.clipPath.absolutePositioned),n.util.populateWithProperties(this,i,t),this.includeDefaultValues||(i=this._removeDefaultValues(i)),i},toDatalessObject:function(t){return this.toObject(t)},_removeDefaultValues:function(t){var e=n.util.getKlass(t.type).prototype;return e.stateProperties.forEach(function(n){\"left\"!==n&&\"top\"!==n&&(t[n]===e[n]&&delete t[n],\"[object Array]\"===Object.prototype.toString.call(t[n])&&\"[object Array]\"===Object.prototype.toString.call(e[n])&&0===t[n].length&&0===e[n].length&&delete t[n])}),t},toString:function(){return\"#<fabric.\"+a(this.type)+\">\"},getObjectScaling:function(){var t=this.scaleX,e=this.scaleY;if(this.group){var n=this.group.getObjectScaling();t*=n.scaleX,e*=n.scaleY}return{scaleX:t,scaleY:e}},getTotalObjectScaling:function(){var t=this.getObjectScaling(),e=t.scaleX,n=t.scaleY;if(this.canvas){var i=this.canvas.getZoom(),r=this.canvas.getRetinaScaling();e*=i*r,n*=i*r}return{scaleX:e,scaleY:n}},getObjectOpacity:function(){var t=this.opacity;return this.group&&(t*=this.group.getObjectOpacity()),t},_set:function(t,e){var i=this[t]!==e,r=!1;return(\"scaleX\"===t||\"scaleY\"===t)&&(e=this._constrainScale(e)),\"scaleX\"===t&&e<0?(this.flipX=!this.flipX,e*=-1):\"scaleY\"===t&&e<0?(this.flipY=!this.flipY,e*=-1):\"shadow\"!==t||!e||e instanceof n.Shadow?\"dirty\"===t&&this.group&&this.group.set(\"dirty\",e):e=new n.Shadow(e),this[t]=e,i&&(r=this.group&&this.group.isOnACache(),this.cacheProperties.indexOf(t)>-1?(this.dirty=!0,r&&this.group.set(\"dirty\",!0)):r&&this.stateProperties.indexOf(t)>-1&&this.group.set(\"dirty\",!0)),this},setOnGroup:function(){},getViewportTransform:function(){return this.canvas&&this.canvas.viewportTransform?this.canvas.viewportTransform:n.iMatrix.concat()},isNotVisible:function(){return 0===this.opacity||0===this.width&&0===this.height&&0===this.strokeWidth||!this.visible},render:function(t){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(t.save(),this._setupCompositeOperation(t),this.drawSelectionBackground(t),this.transform(t),this._setOpacity(t),this._setShadow(t,this),this.transformMatrix&&t.transform.apply(t,this.transformMatrix),this.clipTo&&n.util.clipContext(this,t),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(t)):(this._removeCacheCanvas(),this.dirty=!1,this.drawObject(t),this.objectCaching&&this.statefullCache&&this.saveState({propertySet:\"cacheProperties\"})),this.clipTo&&t.restore(),t.restore())},renderCache:function(t){t=t||{},this._cacheCanvas||this._createCacheCanvas(),this.isCacheDirty()&&(this.statefullCache&&this.saveState({propertySet:\"cacheProperties\"}),this.drawObject(this._cacheContext,t.forClipping),this.dirty=!1)},_removeCacheCanvas:function(){this._cacheCanvas=null,this.cacheWidth=0,this.cacheHeight=0},hasStroke:function(){return this.stroke&&\"transparent\"!==this.stroke&&0!==this.strokeWidth},hasFill:function(){return this.fill&&\"transparent\"!==this.fill},needsItsOwnCache:function(){return!(\"stroke\"!==this.paintFirst||!this.hasFill()||!this.hasStroke()||\"object\"!=typeof this.shadow)||!!this.clipPath},shouldCache:function(){return this.ownCaching=this.needsItsOwnCache()||this.objectCaching&&(!this.group||!this.group.isOnACache()),this.ownCaching},willDrawShadow:function(){return!!this.shadow&&(0!==this.shadow.offsetX||0!==this.shadow.offsetY)},drawClipPathOnCache:function(t){var e=this.clipPath;if(t.save(),t.globalCompositeOperation=e.inverted?\"destination-out\":\"destination-in\",e.absolutePositioned){var i=n.util.invertTransform(this.calcTransformMatrix());t.transform(i[0],i[1],i[2],i[3],i[4],i[5])}e.transform(t),t.scale(1/e.zoomX,1/e.zoomY),t.drawImage(e._cacheCanvas,-e.cacheTranslationX,-e.cacheTranslationY),t.restore()},drawObject:function(t,e){var n=this.fill,i=this.stroke;e?(this.fill=\"black\",this.stroke=\"\",this._setClippingProperties(t)):(this._renderBackground(t),this._setStrokeStyles(t,this),this._setFillStyles(t,this)),this._render(t),this._drawClipPath(t),this.fill=n,this.stroke=i},_drawClipPath:function(t){var e=this.clipPath;e&&(e.canvas=this.canvas,e.shouldCache(),e._transformDone=!0,e.renderCache({forClipping:!0}),this.drawClipPathOnCache(t))},drawCacheOnCanvas:function(t){t.scale(1/this.zoomX,1/this.zoomY),t.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)},isCacheDirty:function(t){if(this.isNotVisible())return!1;if(this._cacheCanvas&&!t&&this._updateCacheCanvas())return!0;if(this.dirty||this.clipPath&&this.clipPath.absolutePositioned||this.statefullCache&&this.hasStateChanged(\"cacheProperties\")){if(this._cacheCanvas&&!t){var e=this.cacheWidth/this.zoomX,n=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-e/2,-n/2,e,n)}return!0}return!1},_renderBackground:function(t){if(this.backgroundColor){var e=this._getNonTransformedDimensions();t.fillStyle=this.backgroundColor,t.fillRect(-e.x/2,-e.y/2,e.x,e.y),this._removeShadow(t)}},_setOpacity:function(t){this.group&&!this.group._transformDone?t.globalAlpha=this.getObjectOpacity():t.globalAlpha*=this.opacity},_setStrokeStyles:function(t,e){e.stroke&&(t.lineWidth=e.strokeWidth,t.lineCap=e.strokeLineCap,t.lineDashOffset=e.strokeDashOffset,t.lineJoin=e.strokeLineJoin,t.miterLimit=e.strokeMiterLimit,t.strokeStyle=e.stroke.toLive?e.stroke.toLive(t,this):e.stroke)},_setFillStyles:function(t,e){e.fill&&(t.fillStyle=e.fill.toLive?e.fill.toLive(t,this):e.fill)},_setClippingProperties:function(t){t.globalAlpha=1,t.strokeStyle=\"transparent\",t.fillStyle=\"#000000\"},_setLineDash:function(t,e,n){e&&(1&e.length&&e.push.apply(e,e),l?t.setLineDash(e):n&&n(t),this.strokeUniform&&t.setLineDash(t.getLineDash().map(function(e){return e*t.lineWidth})))},_renderControls:function(t,e){var i,r,o,a=this.getViewportTransform(),l=this.calcTransformMatrix();r=void 0!==(e=e||{}).hasBorders?e.hasBorders:this.hasBorders,o=void 0!==e.hasControls?e.hasControls:this.hasControls,l=n.util.multiplyTransformMatrices(a,l),i=n.util.qrDecompose(l),t.save(),t.translate(i.translateX,i.translateY),t.lineWidth=1*this.borderScaleFactor,this.group||(t.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),e.forActiveSelection?(t.rotate(s(i.angle)),r&&this.drawBordersInGroup(t,i,e)):(t.rotate(s(this.angle)),r&&this.drawBorders(t,e)),o&&this.drawControls(t,e),t.restore()},_setShadow:function(t){if(this.shadow){var e,i=this.shadow,r=this.canvas,o=r&&r.viewportTransform[0]||1,a=r&&r.viewportTransform[3]||1;e=i.nonScaling?{scaleX:1,scaleY:1}:this.getObjectScaling(),r&&r._isRetinaScaling()&&(o*=n.devicePixelRatio,a*=n.devicePixelRatio),t.shadowColor=i.color,t.shadowBlur=i.blur*n.browserShadowBlurConstant*(o+a)*(e.scaleX+e.scaleY)/4,t.shadowOffsetX=i.offsetX*o*e.scaleX,t.shadowOffsetY=i.offsetY*a*e.scaleY}},_removeShadow:function(t){this.shadow&&(t.shadowColor=\"\",t.shadowBlur=t.shadowOffsetX=t.shadowOffsetY=0)},_applyPatternGradientTransform:function(t,e){if(!e||!e.toLive)return{offsetX:0,offsetY:0};var n=e.gradientTransform||e.patternTransform,i=-this.width/2+e.offsetX||0,r=-this.height/2+e.offsetY||0;return t.translate(i,r),n&&t.transform(n[0],n[1],n[2],n[3],n[4],n[5]),{offsetX:i,offsetY:r}},_renderPaintInOrder:function(t){\"stroke\"===this.paintFirst?(this._renderStroke(t),this._renderFill(t)):(this._renderFill(t),this._renderStroke(t))},_render:function(){},_renderFill:function(t){this.fill&&(t.save(),this._applyPatternGradientTransform(t,this.fill),\"evenodd\"===this.fillRule?t.fill(\"evenodd\"):t.fill(),t.restore())},_renderStroke:function(t){this.stroke&&0!==this.strokeWidth&&(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(t),t.save(),this.strokeUniform&&t.scale(1/this.scaleX,1/this.scaleY),this._setLineDash(t,this.strokeDashArray,this._renderDashedStroke),this._applyPatternGradientTransform(t,this.stroke),t.stroke(),t.restore())},_findCenterFromElement:function(){return{x:this.left+this.width/2,y:this.top+this.height/2}},_assignTransformMatrixProps:function(){if(this.transformMatrix){var t=n.util.qrDecompose(this.transformMatrix);this.flipX=!1,this.flipY=!1,this.set(\"scaleX\",t.scaleX),this.set(\"scaleY\",t.scaleY),this.angle=t.angle,this.skewX=t.skewX,this.skewY=0}},_removeTransformMatrix:function(t){var e=this._findCenterFromElement();this.transformMatrix&&(this._assignTransformMatrixProps(),e=n.util.transformPoint(e,this.transformMatrix)),this.transformMatrix=null,t&&(this.scaleX*=t.scaleX,this.scaleY*=t.scaleY,this.cropX=t.cropX,this.cropY=t.cropY,e.x+=t.offsetLeft,e.y+=t.offsetTop,this.width=t.width,this.height=t.height),this.setPositionByOrigin(e,\"center\",\"center\")},clone:function(t,e){var i=this.toObject(e);this.constructor.fromObject?this.constructor.fromObject(i,t):n.Object._fromObject(\"Object\",i,t)},cloneAsImage:function(t,e){var i=this.toCanvasElement(e);return t&&t(new n.Image(i)),this},toCanvasElement:function(t){t||(t={});var e=n.util,i=e.saveObjectTransform(this),r=this.shadow,o=Math.abs,a=(t.multiplier||1)*(t.enableRetinaScaling?n.devicePixelRatio:1);t.withoutTransform&&e.resetObjectTransform(this),t.withoutShadow&&(this.shadow=null);var s,l,c=n.util.createCanvasElement(),u=this.getBoundingRect(!0,!0),h=this.shadow,d={x:0,y:0};h&&(l=h.blur,s=h.nonScaling?{scaleX:1,scaleY:1}:this.getObjectScaling(),d.x=2*Math.round(o(h.offsetX)+l)*o(s.scaleX),d.y=2*Math.round(o(h.offsetY)+l)*o(s.scaleY)),c.width=u.width+d.x,c.height=u.height+d.y,c.width+=c.width%2?2-c.width%2:0,c.height+=c.height%2?2-c.height%2:0;var f=new n.StaticCanvas(c,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1});\"jpeg\"===t.format&&(f.backgroundColor=\"#fff\"),this.setPositionByOrigin(new n.Point(f.width/2,f.height/2),\"center\",\"center\");var p=this.canvas;f.add(this);var g=f.toCanvasElement(a||1,t);return this.shadow=r,this.canvas=p,this.set(i).setCoords(),f._objects=[],f.dispose(),f=null,g},toDataURL:function(t){return t||(t={}),n.util.toDataURL(this.toCanvasElement(t),t.format||\"png\",t.quality||1)},isType:function(t){return this.type===t},complexity:function(){return 1},toJSON:function(t){return this.toObject(t)},setGradient:function(t,e){e||(e={});var i={colorStops:[]};return i.type=e.type||(e.r1||e.r2?\"radial\":\"linear\"),i.coords={x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2},(e.r1||e.r2)&&(i.coords.r1=e.r1,i.coords.r2=e.r2),i.gradientTransform=e.gradientTransform,n.Gradient.prototype.addColorStop.call(i,e.colorStops),this.set(t,n.Gradient.forObject(this,i))},setPatternFill:function(t,e){return this.set(\"fill\",new n.Pattern(t,e))},setShadow:function(t){return this.set(\"shadow\",t?new n.Shadow(t):null)},setColor:function(t){return this.set(\"fill\",t),this},rotate:function(t){var e=(\"center\"!==this.originX||\"center\"!==this.originY)&&this.centeredRotation;return e&&this._setOriginToCenter(),this.set(\"angle\",t),e&&this._resetOrigin(),this},centerH:function(){return this.canvas&&this.canvas.centerObjectH(this),this},viewportCenterH:function(){return this.canvas&&this.canvas.viewportCenterObjectH(this),this},centerV:function(){return this.canvas&&this.canvas.centerObjectV(this),this},viewportCenterV:function(){return this.canvas&&this.canvas.viewportCenterObjectV(this),this},center:function(){return this.canvas&&this.canvas.centerObject(this),this},viewportCenter:function(){return this.canvas&&this.canvas.viewportCenterObject(this),this},getLocalPointer:function(t,e){e=e||this.canvas.getPointer(t);var i=new n.Point(e.x,e.y),r=this._getLeftTopCoords();return this.angle&&(i=n.util.rotatePoint(i,r,s(-this.angle))),{x:i.x-r.x,y:i.y-r.y}},_setupCompositeOperation:function(t){this.globalCompositeOperation&&(t.globalCompositeOperation=this.globalCompositeOperation)}}),n.util.createAccessors&&n.util.createAccessors(n.Object),i(n.Object.prototype,n.Observable),n.Object.NUM_FRACTION_DIGITS=2,n.Object._fromObject=function(t,e,i,o){var a=n[t];e=r(e,!0),n.util.enlivenPatterns([e.fill,e.stroke],function(t){void 0!==t[0]&&(e.fill=t[0]),void 0!==t[1]&&(e.stroke=t[1]),n.util.enlivenObjects([e.clipPath],function(t){e.clipPath=t[0];var n=o?new a(e[o],e):new a(e);i&&i(n)})})},n.Object.__uid=0)}(),f=C.util.degreesToRadians,p={left:-.5,center:0,right:.5},g={top:-.5,center:0,bottom:.5},C.util.object.extend(C.Object.prototype,{translateToGivenOrigin:function(t,e,n,i,r){var o,a,s,l=t.x,c=t.y;return\"string\"==typeof e?e=p[e]:e-=.5,\"string\"==typeof i?i=p[i]:i-=.5,\"string\"==typeof n?n=g[n]:n-=.5,\"string\"==typeof r?r=g[r]:r-=.5,a=r-n,((o=i-e)||a)&&(s=this._getTransformedDimensions(),l=t.x+o*s.x,c=t.y+a*s.y),new C.Point(l,c)},translateToCenterPoint:function(t,e,n){var i=this.translateToGivenOrigin(t,e,n,\"center\",\"center\");return this.angle?C.util.rotatePoint(i,t,f(this.angle)):i},translateToOriginPoint:function(t,e,n){var i=this.translateToGivenOrigin(t,\"center\",\"center\",e,n);return this.angle?C.util.rotatePoint(i,t,f(this.angle)):i},getCenterPoint:function(){var t=new C.Point(this.left,this.top);return this.translateToCenterPoint(t,this.originX,this.originY)},getPointByOrigin:function(t,e){var n=this.getCenterPoint();return this.translateToOriginPoint(n,t,e)},toLocalPoint:function(t,e,n){var i,r,o=this.getCenterPoint();return i=void 0!==e&&void 0!==n?this.translateToGivenOrigin(o,\"center\",\"center\",e,n):new C.Point(this.left,this.top),r=new C.Point(t.x,t.y),this.angle&&(r=C.util.rotatePoint(r,o,-f(this.angle))),r.subtractEquals(i)},setPositionByOrigin:function(t,e,n){var i=this.translateToCenterPoint(t,e,n),r=this.translateToOriginPoint(i,this.originX,this.originY);this.set(\"left\",r.x),this.set(\"top\",r.y)},adjustPosition:function(t){var e,n,i=f(this.angle),r=this.getScaledWidth(),o=C.util.cos(i)*r,a=C.util.sin(i)*r;this.left+=o*((n=\"string\"==typeof t?p[t]:t-.5)-(e=\"string\"==typeof this.originX?p[this.originX]:this.originX-.5)),this.top+=a*(n-e),this.setCoords(),this.originX=t},_setOriginToCenter:function(){this._originalOriginX=this.originX,this._originalOriginY=this.originY;var t=this.getCenterPoint();this.originX=\"center\",this.originY=\"center\",this.left=t.x,this.top=t.y},_resetOrigin:function(){var t=this.translateToOriginPoint(this.getCenterPoint(),this._originalOriginX,this._originalOriginY);this.originX=this._originalOriginX,this.originY=this._originalOriginY,this.left=t.x,this.top=t.y,this._originalOriginX=null,this._originalOriginY=null},_getLeftTopCoords:function(){return this.translateToOriginPoint(this.getCenterPoint(),\"left\",\"top\")}}),function(){var t=C.util.degreesToRadians,e=C.util.multiplyTransformMatrices,n=C.util.transformPoint;C.util.object.extend(C.Object.prototype,{oCoords:null,aCoords:null,ownMatrixCache:null,matrixCache:null,getCoords:function(t,e){this.oCoords||this.setCoords();var n=t?this.aCoords:this.oCoords;return function(t){return[new C.Point(t.tl.x,t.tl.y),new C.Point(t.tr.x,t.tr.y),new C.Point(t.br.x,t.br.y),new C.Point(t.bl.x,t.bl.y)]}(e?this.calcCoords(t):n)},intersectsWithRect:function(t,e,n,i){var r=this.getCoords(n,i);return\"Intersection\"===C.Intersection.intersectPolygonRectangle(r,t,e).status},intersectsWithObject:function(t,e,n){return\"Intersection\"===C.Intersection.intersectPolygonPolygon(this.getCoords(e,n),t.getCoords(e,n)).status||t.isContainedWithinObject(this,e,n)||this.isContainedWithinObject(t,e,n)},isContainedWithinObject:function(t,e,n){for(var i=this.getCoords(e,n),r=0,o=t._getImageLines(n?t.calcCoords(e):e?t.aCoords:t.oCoords);r<4;r++)if(!t.containsPoint(i[r],o))return!1;return!0},isContainedWithinRect:function(t,e,n,i){var r=this.getBoundingRect(n,i);return r.left>=t.x&&r.left+r.width<=e.x&&r.top>=t.y&&r.top+r.height<=e.y},containsPoint:function(t,e,n,i){e=e||this._getImageLines(i?this.calcCoords(n):n?this.aCoords:this.oCoords);var r=this._findCrossPoints(t,e);return 0!==r&&r%2==1},isOnScreen:function(t){if(!this.canvas)return!1;for(var e,n=this.canvas.vptCoords.tl,i=this.canvas.vptCoords.br,r=this.getCoords(!0,t),o=0;o<4;o++)if((e=r[o]).x<=i.x&&e.x>=n.x&&e.y<=i.y&&e.y>=n.y)return!0;return!!this.intersectsWithRect(n,i,!0,t)||this._containsCenterOfCanvas(n,i,t)},_containsCenterOfCanvas:function(t,e,n){return!!this.containsPoint({x:(t.x+e.x)/2,y:(t.y+e.y)/2},null,!0,n)},isPartiallyOnScreen:function(t){if(!this.canvas)return!1;var e=this.canvas.vptCoords.tl,n=this.canvas.vptCoords.br;return!!this.intersectsWithRect(e,n,!0,t)||this._containsCenterOfCanvas(e,n,t)},_getImageLines:function(t){return{topline:{o:t.tl,d:t.tr},rightline:{o:t.tr,d:t.br},bottomline:{o:t.br,d:t.bl},leftline:{o:t.bl,d:t.tl}}},_findCrossPoints:function(t,e){var n,i,r,o=0;for(var a in e)if(!((r=e[a]).o.y<t.y&&r.d.y<t.y||r.o.y>=t.y&&r.d.y>=t.y||(i=r.o.x===r.d.x&&r.o.x>=t.x?r.o.x:-(t.y-0*t.x-(r.o.y-(n=(r.d.y-r.o.y)/(r.d.x-r.o.x))*r.o.x))/(0-n),i>=t.x&&(o+=1),2!==o)))break;return o},getBoundingRect:function(t,e){var n=this.getCoords(t,e);return C.util.makeBoundingBoxFromPoints(n)},getScaledWidth:function(){return this._getTransformedDimensions().x},getScaledHeight:function(){return this._getTransformedDimensions().y},_constrainScale:function(t){return Math.abs(t)<this.minScaleLimit?t<0?-this.minScaleLimit:this.minScaleLimit:0===t?1e-4:t},scale:function(t){return this._set(\"scaleX\",t),this._set(\"scaleY\",t),this.setCoords()},scaleToWidth:function(t,e){var n=this.getBoundingRect(e).width/this.getScaledWidth();return this.scale(t/this.width/n)},scaleToHeight:function(t,e){var n=this.getBoundingRect(e).height/this.getScaledHeight();return this.scale(t/this.height/n)},calcCoords:function(i){var r=this._calcRotateMatrix(),o=this._calcTranslateMatrix(),a=e(o,r),s=this.getViewportTransform(),l=i?a:e(s,a),c=this._getTransformedDimensions(),u=c.x/2,h=c.y/2,d=n({x:-u,y:-h},l),f=n({x:u,y:-h},l),p=n({x:-u,y:h},l),g=n({x:u,y:h},l);if(!i){var m=this.padding,v=t(this.angle),y=C.util.cos(v),b=C.util.sin(v),_=y*m,w=b*m,x=_+w,S=_-w;m&&(d.x-=S,d.y-=x,f.x+=x,f.y-=S,p.x-=x,p.y+=S,g.x+=S,g.y+=x);var k=new C.Point((d.x+p.x)/2,(d.y+p.y)/2),E=new C.Point((f.x+d.x)/2,(f.y+d.y)/2),T=new C.Point((g.x+f.x)/2,(g.y+f.y)/2),O=new C.Point((g.x+p.x)/2,(g.y+p.y)/2),P=new C.Point(E.x+b*this.rotatingPointOffset,E.y-y*this.rotatingPointOffset)}var j={tl:d,tr:f,br:g,bl:p};return i||(j.ml=k,j.mt=E,j.mr=T,j.mb=O,j.mtr=P),j},setCoords:function(t,e){return this.oCoords=this.calcCoords(t),e||(this.aCoords=this.calcCoords(!0)),t||this._setCornerCoords&&this._setCornerCoords(),this},_calcRotateMatrix:function(){if(this.angle){var e=t(this.angle),n=C.util.cos(e),i=C.util.sin(e);return[n,i,-i,n,0,0]}return C.iMatrix.concat()},_calcTranslateMatrix:function(){var t=this.getCenterPoint();return[1,0,0,1,t.x,t.y]},transformMatrixKey:function(t){var e=\"\";return!t&&this.group&&(e=this.group.transformMatrixKey(t)+\"_\"),e+this.top+\"_\"+this.left+\"_\"+this.scaleX+\"_\"+this.scaleY+\"_\"+this.skewX+\"_\"+this.skewY+\"_\"+this.angle+\"_\"+this.originX+\"_\"+this.originY+\"_\"+this.width+\"_\"+this.height+\"_\"+this.strokeWidth+this.flipX+this.flipY},calcTransformMatrix:function(t){if(t)return this.calcOwnMatrix();var n=this.transformMatrixKey(),i=this.matrixCache||(this.matrixCache={});if(i.key===n)return i.value;var r=this.calcOwnMatrix();return this.group&&(r=e(this.group.calcTransformMatrix(),r)),i.key=n,i.value=r,r},calcOwnMatrix:function(){var t=this.transformMatrixKey(!0),n=this.ownMatrixCache||(this.ownMatrixCache={});if(n.key===t)return n.value;var i,r=this._calcTranslateMatrix(),o=this._calcDimensionsTransformMatrix(this.skewX,this.skewY,!0);return this.angle&&(i=this._calcRotateMatrix(),r=e(r,i)),r=e(r,o),n.key=t,n.value=r,r},_calcDimensionsTransformMatrix:function(n,i,r){var o,a=[this.scaleX*(r&&this.flipX?-1:1),0,0,this.scaleY*(r&&this.flipY?-1:1),0,0];return n&&(o=[1,0,Math.tan(t(n)),1],a=e(a,o,!0)),i&&(o=[1,Math.tan(t(i)),0,1],a=e(a,o,!0)),a},_getNonTransformedDimensions:function(){var t=this.strokeWidth;return{x:this.width+t,y:this.height+t}},_getTransformedDimensions:function(t,e){void 0===t&&(t=this.skewX),void 0===e&&(e=this.skewY);var n,i,r=this._getNonTransformedDimensions();if(this.strokeUniform?(n=this.width,i=this.height):(n=r.x,i=r.y),0===t&&0===e)return this._finalizeDimensions(n*this.scaleX,i*this.scaleY);var o,a,s=[{x:-(n/=2),y:-(i/=2)},{x:n,y:-i},{x:-n,y:i},{x:n,y:i}],l=this._calcDimensionsTransformMatrix(t,e,!1);for(o=0;o<s.length;o++)s[o]=C.util.transformPoint(s[o],l);return a=C.util.makeBoundingBoxFromPoints(s),this._finalizeDimensions(a.width,a.height)},_finalizeDimensions:function(t,e){return this.strokeUniform?{x:t+this.strokeWidth,y:e+this.strokeWidth}:{x:t,y:e}},_calculateCurrentDimensions:function(){var t=this.getViewportTransform(),e=this._getTransformedDimensions();return C.util.transformPoint(e,t,!0).scalarAdd(2*this.padding)}})}(),C.util.object.extend(C.Object.prototype,{sendToBack:function(){return this.group?C.StaticCanvas.prototype.sendToBack.call(this.group,this):this.canvas.sendToBack(this),this},bringToFront:function(){return this.group?C.StaticCanvas.prototype.bringToFront.call(this.group,this):this.canvas.bringToFront(this),this},sendBackwards:function(t){return this.group?C.StaticCanvas.prototype.sendBackwards.call(this.group,this,t):this.canvas.sendBackwards(this,t),this},bringForward:function(t){return this.group?C.StaticCanvas.prototype.bringForward.call(this.group,this,t):this.canvas.bringForward(this,t),this},moveTo:function(t){return this.group&&\"activeSelection\"!==this.group.type?C.StaticCanvas.prototype.moveTo.call(this.group,this,t):this.canvas.moveTo(this,t),this}}),function(){function t(t,e){if(e){if(e.toLive)return t+\": url(#SVGID_\"+e.id+\"); \";var n=new C.Color(e),i=t+\": \"+n.toRgb()+\"; \",r=n.getAlpha();return 1!==r&&(i+=t+\"-opacity: \"+r.toString()+\"; \"),i}return t+\": none; \"}var e=C.util.toFixed;C.util.object.extend(C.Object.prototype,{getSvgStyles:function(e){var n=this.fillRule?this.fillRule:\"nonzero\",i=this.strokeWidth?this.strokeWidth:\"0\",r=this.strokeDashArray?this.strokeDashArray.join(\" \"):\"none\",o=this.strokeDashOffset?this.strokeDashOffset:\"0\",a=this.strokeLineCap?this.strokeLineCap:\"butt\",s=this.strokeLineJoin?this.strokeLineJoin:\"miter\",l=this.strokeMiterLimit?this.strokeMiterLimit:\"4\",c=void 0!==this.opacity?this.opacity:\"1\",u=this.visible?\"\":\" visibility: hidden;\",h=e?\"\":this.getSvgFilter(),d=t(\"fill\",this.fill);return[t(\"stroke\",this.stroke),\"stroke-width: \",i,\"; \",\"stroke-dasharray: \",r,\"; \",\"stroke-linecap: \",a,\"; \",\"stroke-dashoffset: \",o,\"; \",\"stroke-linejoin: \",s,\"; \",\"stroke-miterlimit: \",l,\"; \",d,\"fill-rule: \",n,\"; \",\"opacity: \",c,\";\",h,u].join(\"\")},getSvgSpanStyles:function(e,n){var i=e.fontFamily?\"font-family: \"+(-1===e.fontFamily.indexOf(\"'\")&&-1===e.fontFamily.indexOf('\"')?\"'\"+e.fontFamily+\"'\":e.fontFamily)+\"; \":\"\",r=e.strokeWidth?\"stroke-width: \"+e.strokeWidth+\"; \":\"\",o=(i=i,e.fontSize?\"font-size: \"+e.fontSize+\"px; \":\"\"),a=e.fontStyle?\"font-style: \"+e.fontStyle+\"; \":\"\",s=e.fontWeight?\"font-weight: \"+e.fontWeight+\"; \":\"\",l=e.fill?t(\"fill\",e.fill):\"\",c=e.stroke?t(\"stroke\",e.stroke):\"\",u=this.getSvgTextDecoration(e);return u&&(u=\"text-decoration: \"+u+\"; \"),[c,r,i,o,a,s,u,l,e.deltaY?\"baseline-shift: \"+-e.deltaY+\"; \":\"\",n?\"white-space: pre; \":\"\"].join(\"\")},getSvgTextDecoration:function(t){return\"overline\"in t||\"underline\"in t||\"linethrough\"in t?(t.overline?\"overline \":\"\")+(t.underline?\"underline \":\"\")+(t.linethrough?\"line-through \":\"\"):\"\"},getSvgFilter:function(){return this.shadow?\"filter: url(#SVGID_\"+this.shadow.id+\");\":\"\"},getSvgCommons:function(){return[this.id?'id=\"'+this.id+'\" ':\"\",this.clipPath?'clip-path=\"url(#'+this.clipPath.clipPathId+')\" ':\"\"].join(\"\")},getSvgTransform:function(t,e){var n=t?this.calcTransformMatrix():this.calcOwnMatrix();return'transform=\"'+C.util.matrixToSVG(n)+(e||\"\")+this.getSvgTransformMatrix()+'\" '},getSvgTransformMatrix:function(){return this.transformMatrix?\" \"+C.util.matrixToSVG(this.transformMatrix):\"\"},_setSVGBg:function(t){if(this.backgroundColor){var n=C.Object.NUM_FRACTION_DIGITS;t.push(\"\\t\\t<rect \",this._getFillAttributes(this.backgroundColor),' x=\"',e(-this.width/2,n),'\" y=\"',e(-this.height/2,n),'\" width=\"',e(this.width,n),'\" height=\"',e(this.height,n),'\"></rect>\\n')}},toSVG:function(t){return this._createBaseSVGMarkup(this._toSVG(t),{reviver:t})},toClipPathSVG:function(t){return\"\\t\"+this._createBaseClipPathSVGMarkup(this._toSVG(t),{reviver:t})},_createBaseClipPathSVGMarkup:function(t,e){var n=(e=e||{}).reviver,i=[this.getSvgTransform(!0,e.additionalTransform||\"\"),this.getSvgCommons()].join(\"\"),r=t.indexOf(\"COMMON_PARTS\");return t[r]=i,n?n(t.join(\"\")):t.join(\"\")},_createBaseSVGMarkup:function(t,e){var n,i,r=(e=e||{}).noStyle,o=e.reviver,a=r?\"\":'style=\"'+this.getSvgStyles()+'\" ',s=e.withShadow?'style=\"'+this.getSvgFilter()+'\" ':\"\",l=this.clipPath,c=this.strokeUniform?'vector-effect=\"non-scaling-stroke\" ':\"\",u=l&&l.absolutePositioned,h=this.stroke,d=this.fill,f=this.shadow,p=[],g=t.indexOf(\"COMMON_PARTS\"),m=e.additionalTransform;return l&&(l.clipPathId=\"CLIPPATH_\"+C.Object.__uid++,i='<clipPath id=\"'+l.clipPathId+'\" >\\n'+l.toClipPathSVG(o)+\"</clipPath>\\n\"),u&&p.push(\"<g \",s,this.getSvgCommons(),\" >\\n\"),p.push(\"<g \",this.getSvgTransform(!1),u?\"\":s+this.getSvgCommons(),\" >\\n\"),n=[a,c,r?\"\":this.addPaintOrder(),\" \",m?'transform=\"'+m+'\" ':\"\"].join(\"\"),t[g]=n,d&&d.toLive&&p.push(d.toSVG(this)),h&&h.toLive&&p.push(h.toSVG(this)),f&&p.push(f.toSVG(this)),l&&p.push(i),p.push(t.join(\"\")),p.push(\"</g>\\n\"),u&&p.push(\"</g>\\n\"),o?o(p.join(\"\")):p.join(\"\")},addPaintOrder:function(){return\"fill\"!==this.paintFirst?' paint-order=\"'+this.paintFirst+'\" ':\"\"}})}(),function(){var t=C.util.object.extend;function e(e,n,i){var r={};i.forEach(function(t){r[t]=e[t]}),t(e[n],r,!0)}C.util.object.extend(C.Object.prototype,{hasStateChanged:function(t){var e=\"_\"+(t=t||\"stateProperties\");return Object.keys(this[e]).length<this[t].length||!function t(e,n,i){if(e===n)return!0;if(Array.isArray(e)){if(!Array.isArray(n)||e.length!==n.length)return!1;for(var r=0,o=e.length;r<o;r++)if(!t(e[r],n[r]))return!1;return!0}if(e&&\"object\"==typeof e){var a,s=Object.keys(e);if(!n||\"object\"!=typeof n||!i&&s.length!==Object.keys(n).length)return!1;for(r=0,o=s.length;r<o;r++)if(\"canvas\"!==(a=s[r])&&!t(e[a],n[a]))return!1;return!0}}(this[e],this,!0)},saveState:function(t){var n=t&&t.propertySet||\"stateProperties\",i=\"_\"+n;return this[i]?(e(this,i,this[n]),t&&t.stateProperties&&e(this,i,t.stateProperties),this):this.setupState(t)},setupState:function(t){var e=(t=t||{}).propertySet||\"stateProperties\";return t.propertySet=e,this[\"_\"+e]={},this.saveState(t),this}})}(),function(){var t=C.util.degreesToRadians;C.util.object.extend(C.Object.prototype,{_controlsVisibility:null,_findTargetCorner:function(t){if(!this.hasControls||this.group||!this.canvas||this.canvas._activeObject!==this)return!1;var e,n,i=t.x,r=t.y;for(var o in this.__corner=0,this.oCoords)if(this.isControlVisible(o)&&(\"mtr\"!==o||this.hasRotatingPoint)&&(!this.get(\"lockUniScaling\")||\"mt\"!==o&&\"mr\"!==o&&\"mb\"!==o&&\"ml\"!==o)&&(n=this._getImageLines(this.oCoords[o].corner),0!==(e=this._findCrossPoints({x:i,y:r},n))&&e%2==1))return this.__corner=o,o;return!1},_setCornerCoords:function(){var e,n,i=this.oCoords,r=t(45-this.angle),o=.707106*this.cornerSize,a=o*C.util.cos(r),s=o*C.util.sin(r);for(var l in i)i[l].corner={tl:{x:(e=i[l].x)-s,y:(n=i[l].y)-a},tr:{x:e+a,y:n-s},bl:{x:e-a,y:n+s},br:{x:e+s,y:n+a}}},drawSelectionBackground:function(e){if(!this.selectionBackgroundColor||this.canvas&&!this.canvas.interactive||this.canvas&&this.canvas._activeObject!==this)return this;e.save();var n=this.getCenterPoint(),i=this._calculateCurrentDimensions(),r=this.canvas.viewportTransform;return e.translate(n.x,n.y),e.scale(1/r[0],1/r[3]),e.rotate(t(this.angle)),e.fillStyle=this.selectionBackgroundColor,e.fillRect(-i.x/2,-i.y/2,i.x,i.y),e.restore(),this},drawBorders:function(t,e){e=e||{};var n=this._calculateCurrentDimensions(),i=1/this.borderScaleFactor,r=n.x+i,o=n.y+i,a=void 0!==e.hasRotatingPoint?e.hasRotatingPoint:this.hasRotatingPoint,s=void 0!==e.hasControls?e.hasControls:this.hasControls,l=void 0!==e.rotatingPointOffset?e.rotatingPointOffset:this.rotatingPointOffset;if(t.save(),t.strokeStyle=e.borderColor||this.borderColor,this._setLineDash(t,e.borderDashArray||this.borderDashArray,null),t.strokeRect(-r/2,-o/2,r,o),a&&this.isControlVisible(\"mtr\")&&s){var c=-o/2;t.beginPath(),t.moveTo(0,c),t.lineTo(0,c-l),t.stroke()}return t.restore(),this},drawBordersInGroup:function(t,e,n){n=n||{};var i=this._getNonTransformedDimensions(),r=C.util.customTransformMatrix(e.scaleX,e.scaleY,e.skewX),o=C.util.transformPoint(i,r),a=1/this.borderScaleFactor,s=o.x+a,l=o.y+a;return t.save(),this._setLineDash(t,n.borderDashArray||this.borderDashArray,null),t.strokeStyle=n.borderColor||this.borderColor,t.strokeRect(-s/2,-l/2,s,l),t.restore(),this},drawControls:function(t,e){e=e||{};var n=this._calculateCurrentDimensions(),i=n.x,r=n.y,o=e.cornerSize||this.cornerSize,a=-(i+o)/2,s=-(r+o)/2,l=void 0!==e.hasRotatingPoint?e.hasRotatingPoint:this.hasRotatingPoint,c=(void 0!==e.transparentCorners?e.transparentCorners:this.transparentCorners)?\"stroke\":\"fill\";return t.save(),t.strokeStyle=t.fillStyle=e.cornerColor||this.cornerColor,this.transparentCorners||(t.strokeStyle=e.cornerStrokeColor||this.cornerStrokeColor),this._setLineDash(t,e.cornerDashArray||this.cornerDashArray,null),this._drawControl(\"tl\",t,c,a,s,e),this._drawControl(\"tr\",t,c,a+i,s,e),this._drawControl(\"bl\",t,c,a,s+r,e),this._drawControl(\"br\",t,c,a+i,s+r,e),this.get(\"lockUniScaling\")||(this._drawControl(\"mt\",t,c,a+i/2,s,e),this._drawControl(\"mb\",t,c,a+i/2,s+r,e),this._drawControl(\"mr\",t,c,a+i,s+r/2,e),this._drawControl(\"ml\",t,c,a,s+r/2,e)),l&&this._drawControl(\"mtr\",t,c,a+i/2,s-this.rotatingPointOffset,e),t.restore(),this},_drawControl:function(t,e,n,i,r,o){if(o=o||{},this.isControlVisible(t)){var a=this.cornerSize,s=!this.transparentCorners&&this.cornerStrokeColor;switch(o.cornerStyle||this.cornerStyle){case\"circle\":e.beginPath(),e.arc(i+a/2,r+a/2,a/2,0,2*Math.PI,!1),e[n](),s&&e.stroke();break;default:this.transparentCorners||e.clearRect(i,r,a,a),e[n+\"Rect\"](i,r,a,a),s&&e.strokeRect(i,r,a,a)}}},isControlVisible:function(t){return this._getControlsVisibility()[t]},setControlVisible:function(t,e){return this._getControlsVisibility()[t]=e,this},setControlsVisibility:function(t){for(var e in t||(t={}),t)this.setControlVisible(e,t[e]);return this},_getControlsVisibility:function(){return this._controlsVisibility||(this._controlsVisibility={tl:!0,tr:!0,br:!0,bl:!0,ml:!0,mt:!0,mr:!0,mb:!0,mtr:!0}),this._controlsVisibility},onDeselect:function(){},onSelect:function(){}})}(),C.util.object.extend(C.StaticCanvas.prototype,{FX_DURATION:500,fxCenterObjectH:function(t,e){var n=function(){},i=(e=e||{}).onComplete||n,r=e.onChange||n,o=this;return C.util.animate({startValue:t.left,endValue:this.getCenter().left,duration:this.FX_DURATION,onChange:function(e){t.set(\"left\",e),o.requestRenderAll(),r()},onComplete:function(){t.setCoords(),i()}}),this},fxCenterObjectV:function(t,e){var n=function(){},i=(e=e||{}).onComplete||n,r=e.onChange||n,o=this;return C.util.animate({startValue:t.top,endValue:this.getCenter().top,duration:this.FX_DURATION,onChange:function(e){t.set(\"top\",e),o.requestRenderAll(),r()},onComplete:function(){t.setCoords(),i()}}),this},fxRemove:function(t,e){var n=function(){},i=(e=e||{}).onComplete||n,r=e.onChange||n,o=this;return C.util.animate({startValue:t.opacity,endValue:0,duration:this.FX_DURATION,onChange:function(e){t.set(\"opacity\",e),o.requestRenderAll(),r()},onComplete:function(){o.remove(t),i()}}),this}}),C.util.object.extend(C.Object.prototype,{animate:function(){if(arguments[0]&&\"object\"==typeof arguments[0]){var t,e=[];for(t in arguments[0])e.push(t);for(var n=0,i=e.length;n<i;n++)this._animate(t=e[n],arguments[0][t],arguments[1],n!==i-1)}else this._animate.apply(this,arguments);return this},_animate:function(t,e,n,i){var r,o=this;e=e.toString(),n=n?C.util.object.clone(n):{},~t.indexOf(\".\")&&(r=t.split(\".\"));var a=r?this.get(r[0])[r[1]]:this.get(t);\"from\"in n||(n.from=a),e=~e.indexOf(\"=\")?a+parseFloat(e.replace(\"=\",\"\")):parseFloat(e),C.util.animate({startValue:n.from,endValue:e,byValue:n.by,easing:n.easing,duration:n.duration,abort:n.abort&&function(){return n.abort.call(o)},onChange:function(e,a,s){r?o[r[0]][r[1]]=e:o.set(t,e),i||n.onChange&&n.onChange(e,a,s)},onComplete:function(t,e,r){i||(o.setCoords(),n.onComplete&&n.onComplete(t,e,r))}})}}),function(t){\"use strict\";var n=e.fabric||(e.fabric={}),i=n.util.object.extend,r=n.util.object.clone,o={x1:1,x2:1,y1:1,y2:1},a=n.StaticCanvas.supports(\"setLineDash\");function s(t,e){var n=t.origin,i=t.axis1,r=t.axis2,o=t.dimension,a=e.nearest,s=e.center,l=e.farthest;return function(){switch(this.get(n)){case a:return Math.min(this.get(i),this.get(r));case s:return Math.min(this.get(i),this.get(r))+.5*this.get(o);case l:return Math.max(this.get(i),this.get(r))}}}n.Line?n.warn(\"fabric.Line is already defined\"):(n.Line=n.util.createClass(n.Object,{type:\"line\",x1:0,y1:0,x2:0,y2:0,cacheProperties:n.Object.prototype.cacheProperties.concat(\"x1\",\"x2\",\"y1\",\"y2\"),initialize:function(t,e){t||(t=[0,0,0,0]),this.callSuper(\"initialize\",e),this.set(\"x1\",t[0]),this.set(\"y1\",t[1]),this.set(\"x2\",t[2]),this.set(\"y2\",t[3]),this._setWidthHeight(e)},_setWidthHeight:function(t){t||(t={}),this.width=Math.abs(this.x2-this.x1),this.height=Math.abs(this.y2-this.y1),this.left=\"left\"in t?t.left:this._getLeftToOriginX(),this.top=\"top\"in t?t.top:this._getTopToOriginY()},_set:function(t,e){return this.callSuper(\"_set\",t,e),void 0!==o[t]&&this._setWidthHeight(),this},_getLeftToOriginX:s({origin:\"originX\",axis1:\"x1\",axis2:\"x2\",dimension:\"width\"},{nearest:\"left\",center:\"center\",farthest:\"right\"}),_getTopToOriginY:s({origin:\"originY\",axis1:\"y1\",axis2:\"y2\",dimension:\"height\"},{nearest:\"top\",center:\"center\",farthest:\"bottom\"}),_render:function(t){if(t.beginPath(),!this.strokeDashArray||this.strokeDashArray&&a){var e=this.calcLinePoints();t.moveTo(e.x1,e.y1),t.lineTo(e.x2,e.y2)}t.lineWidth=this.strokeWidth;var n=t.strokeStyle;t.strokeStyle=this.stroke||t.fillStyle,this.stroke&&this._renderStroke(t),t.strokeStyle=n},_renderDashedStroke:function(t){var e=this.calcLinePoints();t.beginPath(),n.util.drawDashedLine(t,e.x1,e.y1,e.x2,e.y2,this.strokeDashArray),t.closePath()},_findCenterFromElement:function(){return{x:(this.x1+this.x2)/2,y:(this.y1+this.y2)/2}},toObject:function(t){return i(this.callSuper(\"toObject\",t),this.calcLinePoints())},_getNonTransformedDimensions:function(){var t=this.callSuper(\"_getNonTransformedDimensions\");return\"butt\"===this.strokeLineCap&&(0===this.width&&(t.y-=this.strokeWidth),0===this.height&&(t.x-=this.strokeWidth)),t},calcLinePoints:function(){var t=this.x1<=this.x2?-1:1,e=this.y1<=this.y2?-1:1;return{x1:t*this.width*.5,x2:t*this.width*-.5,y1:e*this.height*.5,y2:e*this.height*-.5}},_toSVG:function(){var t=this.calcLinePoints();return[\"<line \",\"COMMON_PARTS\",'x1=\"',t.x1,'\" y1=\"',t.y1,'\" x2=\"',t.x2,'\" y2=\"',t.y2,'\" />\\n']}}),n.Line.ATTRIBUTE_NAMES=n.SHARED_ATTRIBUTES.concat(\"x1 y1 x2 y2\".split(\" \")),n.Line.fromElement=function(t,e,r){r=r||{};var o=n.parseAttributes(t,n.Line.ATTRIBUTE_NAMES);e(new n.Line([o.x1||0,o.y1||0,o.x2||0,o.y2||0],i(o,r)))},n.Line.fromObject=function(t,e){var i=r(t,!0);i.points=[t.x1,t.y1,t.x2,t.y2],n.Object._fromObject(\"Line\",i,function(t){delete t.points,e&&e(t)},\"points\")})}(),function(t){\"use strict\";var n=e.fabric||(e.fabric={}),i=Math.PI;n.Circle?n.warn(\"fabric.Circle is already defined.\"):(n.Circle=n.util.createClass(n.Object,{type:\"circle\",radius:0,startAngle:0,endAngle:2*i,cacheProperties:n.Object.prototype.cacheProperties.concat(\"radius\",\"startAngle\",\"endAngle\"),_set:function(t,e){return this.callSuper(\"_set\",t,e),\"radius\"===t&&this.setRadius(e),this},toObject:function(t){return this.callSuper(\"toObject\",[\"radius\",\"startAngle\",\"endAngle\"].concat(t))},_toSVG:function(){var t,e=(this.endAngle-this.startAngle)%(2*i);if(0===e)t=[\"<circle \",\"COMMON_PARTS\",'cx=\"0\" cy=\"0\" ','r=\"',this.radius,'\" />\\n'];else{var r=n.util.cos(this.startAngle)*this.radius,o=n.util.sin(this.startAngle)*this.radius,a=n.util.cos(this.endAngle)*this.radius,s=n.util.sin(this.endAngle)*this.radius;t=['<path d=\"M '+r+\" \"+o,\" A \"+this.radius+\" \"+this.radius,\" 0 \",+(e>i?\"1\":\"0\")+\" 1\",\" \"+a+\" \"+s,'\" ',\"COMMON_PARTS\",\" />\\n\"]}return t},_render:function(t){t.beginPath(),t.arc(0,0,this.radius,this.startAngle,this.endAngle,!1),this._renderPaintInOrder(t)},getRadiusX:function(){return this.get(\"radius\")*this.get(\"scaleX\")},getRadiusY:function(){return this.get(\"radius\")*this.get(\"scaleY\")},setRadius:function(t){return this.radius=t,this.set(\"width\",2*t).set(\"height\",2*t)}}),n.Circle.ATTRIBUTE_NAMES=n.SHARED_ATTRIBUTES.concat(\"cx cy r\".split(\" \")),n.Circle.fromElement=function(t,e){var i,r=n.parseAttributes(t,n.Circle.ATTRIBUTE_NAMES);if(!(\"radius\"in(i=r)&&i.radius>=0))throw new Error(\"value of `r` attribute is required and can not be negative\");r.left=(r.left||0)-r.radius,r.top=(r.top||0)-r.radius,e(new n.Circle(r))},n.Circle.fromObject=function(t,e){return n.Object._fromObject(\"Circle\",t,e)})}(),function(t){\"use strict\";var n=e.fabric||(e.fabric={});n.Triangle?n.warn(\"fabric.Triangle is already defined\"):(n.Triangle=n.util.createClass(n.Object,{type:\"triangle\",width:100,height:100,_render:function(t){var e=this.width/2,n=this.height/2;t.beginPath(),t.moveTo(-e,n),t.lineTo(0,-n),t.lineTo(e,n),t.closePath(),this._renderPaintInOrder(t)},_renderDashedStroke:function(t){var e=this.width/2,i=this.height/2;t.beginPath(),n.util.drawDashedLine(t,-e,i,0,-i,this.strokeDashArray),n.util.drawDashedLine(t,0,-i,e,i,this.strokeDashArray),n.util.drawDashedLine(t,e,i,-e,i,this.strokeDashArray),t.closePath()},_toSVG:function(){var t=this.width/2,e=this.height/2;return[\"<polygon \",\"COMMON_PARTS\",'points=\"',[-t+\" \"+e,\"0 \"+-e,t+\" \"+e].join(\",\"),'\" />']}}),n.Triangle.fromObject=function(t,e){return n.Object._fromObject(\"Triangle\",t,e)})}(),function(t){\"use strict\";var n=e.fabric||(e.fabric={}),i=2*Math.PI;n.Ellipse?n.warn(\"fabric.Ellipse is already defined.\"):(n.Ellipse=n.util.createClass(n.Object,{type:\"ellipse\",rx:0,ry:0,cacheProperties:n.Object.prototype.cacheProperties.concat(\"rx\",\"ry\"),initialize:function(t){this.callSuper(\"initialize\",t),this.set(\"rx\",t&&t.rx||0),this.set(\"ry\",t&&t.ry||0)},_set:function(t,e){switch(this.callSuper(\"_set\",t,e),t){case\"rx\":this.rx=e,this.set(\"width\",2*e);break;case\"ry\":this.ry=e,this.set(\"height\",2*e)}return this},getRx:function(){return this.get(\"rx\")*this.get(\"scaleX\")},getRy:function(){return this.get(\"ry\")*this.get(\"scaleY\")},toObject:function(t){return this.callSuper(\"toObject\",[\"rx\",\"ry\"].concat(t))},_toSVG:function(){return[\"<ellipse \",\"COMMON_PARTS\",'cx=\"0\" cy=\"0\" ','rx=\"',this.rx,'\" ry=\"',this.ry,'\" />\\n']},_render:function(t){t.beginPath(),t.save(),t.transform(1,0,0,this.ry/this.rx,0,0),t.arc(0,0,this.rx,0,i,!1),t.restore(),this._renderPaintInOrder(t)}}),n.Ellipse.ATTRIBUTE_NAMES=n.SHARED_ATTRIBUTES.concat(\"cx cy rx ry\".split(\" \")),n.Ellipse.fromElement=function(t,e){var i=n.parseAttributes(t,n.Ellipse.ATTRIBUTE_NAMES);i.left=(i.left||0)-i.rx,i.top=(i.top||0)-i.ry,e(new n.Ellipse(i))},n.Ellipse.fromObject=function(t,e){return n.Object._fromObject(\"Ellipse\",t,e)})}(),function(t){\"use strict\";var n=e.fabric||(e.fabric={}),i=n.util.object.extend;n.Rect?n.warn(\"fabric.Rect is already defined\"):(n.Rect=n.util.createClass(n.Object,{stateProperties:n.Object.prototype.stateProperties.concat(\"rx\",\"ry\"),type:\"rect\",rx:0,ry:0,cacheProperties:n.Object.prototype.cacheProperties.concat(\"rx\",\"ry\"),initialize:function(t){this.callSuper(\"initialize\",t),this._initRxRy()},_initRxRy:function(){this.rx&&!this.ry?this.ry=this.rx:this.ry&&!this.rx&&(this.rx=this.ry)},_render:function(t){var e=this.rx?Math.min(this.rx,this.width/2):0,n=this.ry?Math.min(this.ry,this.height/2):0,i=this.width,r=this.height,o=-this.width/2,a=-this.height/2,s=0!==e||0!==n,l=.4477152502;t.beginPath(),t.moveTo(o+e,a),t.lineTo(o+i-e,a),s&&t.bezierCurveTo(o+i-l*e,a,o+i,a+l*n,o+i,a+n),t.lineTo(o+i,a+r-n),s&&t.bezierCurveTo(o+i,a+r-l*n,o+i-l*e,a+r,o+i-e,a+r),t.lineTo(o+e,a+r),s&&t.bezierCurveTo(o+l*e,a+r,o,a+r-l*n,o,a+r-n),t.lineTo(o,a+n),s&&t.bezierCurveTo(o,a+l*n,o+l*e,a,o+e,a),t.closePath(),this._renderPaintInOrder(t)},_renderDashedStroke:function(t){var e=-this.width/2,i=-this.height/2,r=this.width,o=this.height;t.beginPath(),n.util.drawDashedLine(t,e,i,e+r,i,this.strokeDashArray),n.util.drawDashedLine(t,e+r,i,e+r,i+o,this.strokeDashArray),n.util.drawDashedLine(t,e+r,i+o,e,i+o,this.strokeDashArray),n.util.drawDashedLine(t,e,i+o,e,i,this.strokeDashArray),t.closePath()},toObject:function(t){return this.callSuper(\"toObject\",[\"rx\",\"ry\"].concat(t))},_toSVG:function(){return[\"<rect \",\"COMMON_PARTS\",'x=\"',-this.width/2,'\" y=\"',-this.height/2,'\" rx=\"',this.rx,'\" ry=\"',this.ry,'\" width=\"',this.width,'\" height=\"',this.height,'\" />\\n']}}),n.Rect.ATTRIBUTE_NAMES=n.SHARED_ATTRIBUTES.concat(\"x y rx ry width height\".split(\" \")),n.Rect.fromElement=function(t,e,r){if(!t)return e(null);r=r||{};var o=n.parseAttributes(t,n.Rect.ATTRIBUTE_NAMES);o.left=o.left||0,o.top=o.top||0,o.height=o.height||0,o.width=o.width||0;var a=new n.Rect(i(r?n.util.object.clone(r):{},o));a.visible=a.visible&&a.width>0&&a.height>0,e(a)},n.Rect.fromObject=function(t,e){return n.Object._fromObject(\"Rect\",t,e)})}(),function(t){\"use strict\";var n=e.fabric||(e.fabric={}),i=n.util.object.extend,r=n.util.array.min,o=n.util.array.max,a=n.util.toFixed;n.Polyline?n.warn(\"fabric.Polyline is already defined\"):(n.Polyline=n.util.createClass(n.Object,{type:\"polyline\",points:null,cacheProperties:n.Object.prototype.cacheProperties.concat(\"points\"),initialize:function(t,e){e=e||{},this.points=t||[],this.callSuper(\"initialize\",e),this._setPositionDimensions(e)},_setPositionDimensions:function(t){var e,n=this._calcDimensions(t);this.width=n.width,this.height=n.height,t.fromSVG||(e=this.translateToGivenOrigin({x:n.left-this.strokeWidth/2,y:n.top-this.strokeWidth/2},\"left\",\"top\",this.originX,this.originY)),void 0===t.left&&(this.left=t.fromSVG?n.left:e.x),void 0===t.top&&(this.top=t.fromSVG?n.top:e.y),this.pathOffset={x:n.left+this.width/2,y:n.top+this.height/2}},_calcDimensions:function(){var t=this.points,e=r(t,\"x\")||0,n=r(t,\"y\")||0;return{left:e,top:n,width:(o(t,\"x\")||0)-e,height:(o(t,\"y\")||0)-n}},toObject:function(t){return i(this.callSuper(\"toObject\",t),{points:this.points.concat()})},_toSVG:function(){for(var t=[],e=this.pathOffset.x,i=this.pathOffset.y,r=n.Object.NUM_FRACTION_DIGITS,o=0,s=this.points.length;o<s;o++)t.push(a(this.points[o].x-e,r),\",\",a(this.points[o].y-i,r),\" \");return[\"<\"+this.type+\" \",\"COMMON_PARTS\",'points=\"',t.join(\"\"),'\" />\\n']},commonRender:function(t){var e,n=this.points.length,i=this.pathOffset.x,r=this.pathOffset.y;if(!n||isNaN(this.points[n-1].y))return!1;t.beginPath(),t.moveTo(this.points[0].x-i,this.points[0].y-r);for(var o=0;o<n;o++)t.lineTo((e=this.points[o]).x-i,e.y-r);return!0},_render:function(t){this.commonRender(t)&&this._renderPaintInOrder(t)},_renderDashedStroke:function(t){var e,i;t.beginPath();for(var r=0,o=this.points.length;r<o;r++)n.util.drawDashedLine(t,(e=this.points[r]).x,e.y,(i=this.points[r+1]||e).x,i.y,this.strokeDashArray)},complexity:function(){return this.get(\"points\").length}}),n.Polyline.ATTRIBUTE_NAMES=n.SHARED_ATTRIBUTES.concat(),n.Polyline.fromElementGenerator=function(t){return function(e,r,o){if(!e)return r(null);o||(o={});var a=n.parsePointsAttribute(e.getAttribute(\"points\")),s=n.parseAttributes(e,n[t].ATTRIBUTE_NAMES);s.fromSVG=!0,r(new n[t](a,i(s,o)))}},n.Polyline.fromElement=n.Polyline.fromElementGenerator(\"Polyline\"),n.Polyline.fromObject=function(t,e){return n.Object._fromObject(\"Polyline\",t,e,\"points\")})}(),function(t){\"use strict\";var n=e.fabric||(e.fabric={});n.Polygon?n.warn(\"fabric.Polygon is already defined\"):(n.Polygon=n.util.createClass(n.Polyline,{type:\"polygon\",_render:function(t){this.commonRender(t)&&(t.closePath(),this._renderPaintInOrder(t))},_renderDashedStroke:function(t){this.callSuper(\"_renderDashedStroke\",t),t.closePath()}}),n.Polygon.ATTRIBUTE_NAMES=n.SHARED_ATTRIBUTES.concat(),n.Polygon.fromElement=n.Polyline.fromElementGenerator(\"Polygon\"),n.Polygon.fromObject=function(t,e){return n.Object._fromObject(\"Polygon\",t,e,\"points\")})}(),function(t){\"use strict\";var n=e.fabric||(e.fabric={}),i=n.util.array.min,r=n.util.array.max,o=n.util.object.extend,a=Object.prototype.toString,s=n.util.drawArc,l=n.util.toFixed,c={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},u={m:\"l\",M:\"L\"};n.Path?n.warn(\"fabric.Path is already defined\"):(n.Path=n.util.createClass(n.Object,{type:\"path\",path:null,cacheProperties:n.Object.prototype.cacheProperties.concat(\"path\",\"fillRule\"),stateProperties:n.Object.prototype.stateProperties.concat(\"path\"),initialize:function(t,e){this.callSuper(\"initialize\",e=e||{}),t||(t=[]);var i=\"[object Array]\"===a.call(t);this.path=i?t:t.match&&t.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi),this.path&&(i||(this.path=this._parsePath()),n.Polyline.prototype._setPositionDimensions.call(this,e))},_renderPathCommands:function(t){var e,n,i,r=null,o=0,a=0,l=0,c=0,u=0,h=0,d=-this.pathOffset.x,f=-this.pathOffset.y;t.beginPath();for(var p=0,g=this.path.length;p<g;++p){switch((e=this.path[p])[0]){case\"l\":t.lineTo((l+=e[1])+d,(c+=e[2])+f);break;case\"L\":t.lineTo((l=e[1])+d,(c=e[2])+f);break;case\"h\":t.lineTo((l+=e[1])+d,c+f);break;case\"H\":t.lineTo((l=e[1])+d,c+f);break;case\"v\":t.lineTo(l+d,(c+=e[1])+f);break;case\"V\":t.lineTo(l+d,(c=e[1])+f);break;case\"m\":o=l+=e[1],a=c+=e[2],t.moveTo(l+d,c+f);break;case\"M\":o=l=e[1],a=c=e[2],t.moveTo(l+d,c+f);break;case\"c\":t.bezierCurveTo(l+e[1]+d,c+e[2]+f,(u=l+e[3])+d,(h=c+e[4])+f,(n=l+e[5])+d,(i=c+e[6])+f),l=n,c=i;break;case\"C\":t.bezierCurveTo(e[1]+d,e[2]+f,(u=e[3])+d,(h=e[4])+f,(l=e[5])+d,(c=e[6])+f);break;case\"s\":n=l+e[3],i=c+e[4],null===r[0].match(/[CcSs]/)?(u=l,h=c):(u=2*l-u,h=2*c-h),t.bezierCurveTo(u+d,h+f,l+e[1]+d,c+e[2]+f,n+d,i+f),u=l+e[1],h=c+e[2],l=n,c=i;break;case\"S\":n=e[3],i=e[4],null===r[0].match(/[CcSs]/)?(u=l,h=c):(u=2*l-u,h=2*c-h),t.bezierCurveTo(u+d,h+f,e[1]+d,e[2]+f,n+d,i+f),l=n,c=i,u=e[1],h=e[2];break;case\"q\":t.quadraticCurveTo((u=l+e[1])+d,(h=c+e[2])+f,(n=l+e[3])+d,(i=c+e[4])+f),l=n,c=i;break;case\"Q\":t.quadraticCurveTo(e[1]+d,e[2]+f,(n=e[3])+d,(i=e[4])+f),l=n,c=i,u=e[1],h=e[2];break;case\"t\":n=l+e[1],i=c+e[2],null===r[0].match(/[QqTt]/)?(u=l,h=c):(u=2*l-u,h=2*c-h),t.quadraticCurveTo(u+d,h+f,n+d,i+f),l=n,c=i;break;case\"T\":n=e[1],i=e[2],null===r[0].match(/[QqTt]/)?(u=l,h=c):(u=2*l-u,h=2*c-h),t.quadraticCurveTo(u+d,h+f,n+d,i+f),l=n,c=i;break;case\"a\":s(t,l+d,c+f,[e[1],e[2],e[3],e[4],e[5],e[6]+l+d,e[7]+c+f]),l+=e[6],c+=e[7];break;case\"A\":s(t,l+d,c+f,[e[1],e[2],e[3],e[4],e[5],e[6]+d,e[7]+f]),l=e[6],c=e[7];break;case\"z\":case\"Z\":l=o,c=a,t.closePath()}r=e}},_render:function(t){this._renderPathCommands(t),this._renderPaintInOrder(t)},toString:function(){return\"#<fabric.Path (\"+this.complexity()+'): { \"top\": '+this.top+', \"left\": '+this.left+\" }>\"},toObject:function(t){return o(this.callSuper(\"toObject\",t),{path:this.path.map(function(t){return t.slice()})})},toDatalessObject:function(t){var e=this.toObject([\"sourcePath\"].concat(t));return e.sourcePath&&delete e.path,e},_toSVG:function(){return[\"<path \",\"COMMON_PARTS\",'d=\"',this.path.map(function(t){return t.join(\" \")}).join(\" \"),'\" stroke-linecap=\"round\" ',\"/>\\n\"]},_getOffsetTransform:function(){var t=n.Object.NUM_FRACTION_DIGITS;return\" translate(\"+l(-this.pathOffset.x,t)+\", \"+l(-this.pathOffset.y,t)+\")\"},toClipPathSVG:function(t){var e=this._getOffsetTransform();return\"\\t\"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:t,additionalTransform:e})},toSVG:function(t){var e=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:t,additionalTransform:e})},complexity:function(){return this.path.length},_parsePath:function(){for(var t,e,n,i,r,o=[],a=[],s=/([-+]?((\\d+\\.\\d+)|((\\d+)|(\\.\\d+)))(?:e[-+]?\\d+)?)/gi,l=0,h=this.path.length;l<h;l++){for(i=(t=this.path[l]).slice(1).trim(),a.length=0;n=s.exec(i);)a.push(n[0]);r=[t.charAt(0)];for(var d=0,f=a.length;d<f;d++)e=parseFloat(a[d]),isNaN(e)||r.push(e);var p=r[0],g=c[p.toLowerCase()],m=u[p]||p;if(r.length-1>g)for(var v=1,y=r.length;v<y;v+=g)o.push([p].concat(r.slice(v,v+g))),p=m;else o.push(r)}return o},_calcDimensions:function(){for(var t,e,o,a,s=[],l=[],c=null,u=0,h=0,d=0,f=0,p=0,g=0,m=0,v=this.path.length;m<v;++m){switch((t=this.path[m])[0]){case\"l\":d+=t[1],f+=t[2],a=[];break;case\"L\":d=t[1],f=t[2],a=[];break;case\"h\":d+=t[1],a=[];break;case\"H\":d=t[1],a=[];break;case\"v\":f+=t[1],a=[];break;case\"V\":f=t[1],a=[];break;case\"m\":u=d+=t[1],h=f+=t[2],a=[];break;case\"M\":u=d=t[1],h=f=t[2],a=[];break;case\"c\":a=n.util.getBoundsOfCurve(d,f,d+t[1],f+t[2],p=d+t[3],g=f+t[4],e=d+t[5],o=f+t[6]),d=e,f=o;break;case\"C\":a=n.util.getBoundsOfCurve(d,f,t[1],t[2],p=t[3],g=t[4],t[5],t[6]),d=t[5],f=t[6];break;case\"s\":e=d+t[3],o=f+t[4],null===c[0].match(/[CcSs]/)?(p=d,g=f):(p=2*d-p,g=2*f-g),a=n.util.getBoundsOfCurve(d,f,p,g,d+t[1],f+t[2],e,o),p=d+t[1],g=f+t[2],d=e,f=o;break;case\"S\":e=t[3],o=t[4],null===c[0].match(/[CcSs]/)?(p=d,g=f):(p=2*d-p,g=2*f-g),a=n.util.getBoundsOfCurve(d,f,p,g,t[1],t[2],e,o),d=e,f=o,p=t[1],g=t[2];break;case\"q\":a=n.util.getBoundsOfCurve(d,f,p=d+t[1],g=f+t[2],p,g,e=d+t[3],o=f+t[4]),d=e,f=o;break;case\"Q\":a=n.util.getBoundsOfCurve(d,f,p=t[1],g=t[2],p,g,t[3],t[4]),d=t[3],f=t[4];break;case\"t\":e=d+t[1],o=f+t[2],null===c[0].match(/[QqTt]/)?(p=d,g=f):(p=2*d-p,g=2*f-g),a=n.util.getBoundsOfCurve(d,f,p,g,p,g,e,o),d=e,f=o;break;case\"T\":e=t[1],o=t[2],null===c[0].match(/[QqTt]/)?(p=d,g=f):(p=2*d-p,g=2*f-g),a=n.util.getBoundsOfCurve(d,f,p,g,p,g,e,o),d=e,f=o;break;case\"a\":a=n.util.getBoundsOfArc(d,f,t[1],t[2],t[3],t[4],t[5],t[6]+d,t[7]+f),d+=t[6],f+=t[7];break;case\"A\":a=n.util.getBoundsOfArc(d,f,t[1],t[2],t[3],t[4],t[5],t[6],t[7]),d=t[6],f=t[7];break;case\"z\":case\"Z\":d=u,f=h}c=t,a.forEach(function(t){s.push(t.x),l.push(t.y)}),s.push(d),l.push(f)}var y=i(s)||0,b=i(l)||0;return{left:y,top:b,width:(r(s)||0)-y,height:(r(l)||0)-b}}}),n.Path.fromObject=function(t,e){\"string\"==typeof t.sourcePath?n.loadSVGFromURL(t.sourcePath,function(n){var i=n[0];i.setOptions(t),e&&e(i)}):n.Object._fromObject(\"Path\",t,e,\"path\")},n.Path.ATTRIBUTE_NAMES=n.SHARED_ATTRIBUTES.concat([\"d\"]),n.Path.fromElement=function(t,e,i){var r=n.parseAttributes(t,n.Path.ATTRIBUTE_NAMES);r.fromSVG=!0,e(new n.Path(r.d,o(r,i)))})}(),function(t){\"use strict\";var n=e.fabric||(e.fabric={}),i=n.util.array.min,r=n.util.array.max;n.Group||(n.Group=n.util.createClass(n.Object,n.Collection,{type:\"group\",strokeWidth:0,subTargetCheck:!1,cacheProperties:[],useSetOnGroup:!1,initialize:function(t,e,n){e=e||{},this._objects=[],n&&this.callSuper(\"initialize\",e),this._objects=t||[];for(var i=this._objects.length;i--;)this._objects[i].group=this;if(n)this._updateObjectsACoords();else{var r=e&&e.centerPoint;void 0!==e.originX&&(this.originX=e.originX),void 0!==e.originY&&(this.originY=e.originY),r||this._calcBounds(),this._updateObjectsCoords(r),delete e.centerPoint,this.callSuper(\"initialize\",e)}this.setCoords()},_updateObjectsACoords:function(){for(var t=this._objects.length;t--;)this._objects[t].setCoords(!0,!0)},_updateObjectsCoords:function(t){t=t||this.getCenterPoint();for(var e=this._objects.length;e--;)this._updateObjectCoords(this._objects[e],t)},_updateObjectCoords:function(t,e){t.set({left:t.left-e.x,top:t.top-e.y}),t.group=this,t.setCoords(!0,!0)},toString:function(){return\"#<fabric.Group: (\"+this.complexity()+\")>\"},addWithUpdate:function(t){return this._restoreObjectsState(),n.util.resetObjectTransform(this),t&&(this._objects.push(t),t.group=this,t._set(\"canvas\",this.canvas)),this._calcBounds(),this._updateObjectsCoords(),this.setCoords(),this.dirty=!0,this},removeWithUpdate:function(t){return this._restoreObjectsState(),n.util.resetObjectTransform(this),this.remove(t),this._calcBounds(),this._updateObjectsCoords(),this.setCoords(),this.dirty=!0,this},_onObjectAdded:function(t){this.dirty=!0,t.group=this,t._set(\"canvas\",this.canvas)},_onObjectRemoved:function(t){this.dirty=!0,delete t.group},_set:function(t,e){var i=this._objects.length;if(this.useSetOnGroup)for(;i--;)this._objects[i].setOnGroup(t,e);if(\"canvas\"===t)for(;i--;)this._objects[i]._set(t,e);n.Object.prototype._set.call(this,t,e)},toObject:function(t){var e=this.includeDefaultValues,i=this._objects.map(function(n){var i=n.includeDefaultValues;n.includeDefaultValues=e;var r=n.toObject(t);return n.includeDefaultValues=i,r}),r=n.Object.prototype.toObject.call(this,t);return r.objects=i,r},toDatalessObject:function(t){var e,i=this.sourcePath;if(i)e=i;else{var r=this.includeDefaultValues;e=this._objects.map(function(e){var n=e.includeDefaultValues;e.includeDefaultValues=r;var i=e.toDatalessObject(t);return e.includeDefaultValues=n,i})}var o=n.Object.prototype.toDatalessObject.call(this,t);return o.objects=e,o},render:function(t){this._transformDone=!0,this.callSuper(\"render\",t),this._transformDone=!1},shouldCache:function(){var t=n.Object.prototype.shouldCache.call(this);if(t)for(var e=0,i=this._objects.length;e<i;e++)if(this._objects[e].willDrawShadow())return this.ownCaching=!1,!1;return t},willDrawShadow:function(){if(this.shadow)return n.Object.prototype.willDrawShadow.call(this);for(var t=0,e=this._objects.length;t<e;t++)if(this._objects[t].willDrawShadow())return!0;return!1},isOnACache:function(){return this.ownCaching||this.group&&this.group.isOnACache()},drawObject:function(t){for(var e=0,n=this._objects.length;e<n;e++)this._objects[e].render(t);this._drawClipPath(t)},isCacheDirty:function(t){if(this.callSuper(\"isCacheDirty\",t))return!0;if(!this.statefullCache)return!1;for(var e=0,n=this._objects.length;e<n;e++)if(this._objects[e].isCacheDirty(!0)){if(this._cacheCanvas){var i=this.cacheWidth/this.zoomX,r=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-i/2,-r/2,i,r)}return!0}return!1},_restoreObjectsState:function(){return this._objects.forEach(this._restoreObjectState,this),this},realizeTransform:function(t){var e=t.calcTransformMatrix(),i=n.util.qrDecompose(e),r=new n.Point(i.translateX,i.translateY);return t.flipX=!1,t.flipY=!1,t.set(\"scaleX\",i.scaleX),t.set(\"scaleY\",i.scaleY),t.skewX=i.skewX,t.skewY=i.skewY,t.angle=i.angle,t.setPositionByOrigin(r,\"center\",\"center\"),t},_restoreObjectState:function(t){return this.realizeTransform(t),t.setCoords(),delete t.group,this},destroy:function(){return this._objects.forEach(function(t){t.set(\"dirty\",!0)}),this._restoreObjectsState()},toActiveSelection:function(){if(this.canvas){var t=this._objects,e=this.canvas;this._objects=[];var i=this.toObject();delete i.objects;var r=new n.ActiveSelection([]);return r.set(i),r.type=\"activeSelection\",e.remove(this),t.forEach(function(t){t.group=r,t.dirty=!0,e.add(t)}),r.canvas=e,r._objects=t,e._activeObject=r,r.setCoords(),r}},ungroupOnCanvas:function(){return this._restoreObjectsState()},setObjectsCoords:function(){return this.forEachObject(function(t){t.setCoords(!0,!0)}),this},_calcBounds:function(t){for(var e,n,i,r=[],o=[],a=[\"tr\",\"br\",\"bl\",\"tl\"],s=0,l=this._objects.length,c=a.length;s<l;++s)for((e=this._objects[s]).setCoords(!0),i=0;i<c;i++)r.push(e.oCoords[n=a[i]].x),o.push(e.oCoords[n].y);this._getBounds(r,o,t)},_getBounds:function(t,e,o){var a=new n.Point(i(t),i(e)),s=new n.Point(r(t),r(e)),l=a.y||0,c=a.x||0,u=s.y-a.y||0;this.width=s.x-a.x||0,this.height=u,o||this.setPositionByOrigin({x:c,y:l},\"left\",\"top\")},_toSVG:function(t){for(var e=[\"<g \",\"COMMON_PARTS\",\" >\\n\"],n=0,i=this._objects.length;n<i;n++)e.push(\"\\t\\t\",this._objects[n].toSVG(t));return e.push(\"</g>\\n\"),e},getSvgStyles:function(){var t=this.visible?\"\":\" visibility: hidden;\";return[void 0!==this.opacity&&1!==this.opacity?\"opacity: \"+this.opacity+\";\":\"\",this.getSvgFilter(),t].join(\"\")},toClipPathSVG:function(t){for(var e=[],n=0,i=this._objects.length;n<i;n++)e.push(\"\\t\",this._objects[n].toClipPathSVG(t));return this._createBaseClipPathSVGMarkup(e,{reviver:t})}}),n.Group.fromObject=function(t,e){n.util.enlivenObjects(t.objects,function(i){n.util.enlivenObjects([t.clipPath],function(r){var o=n.util.object.clone(t,!0);o.clipPath=r[0],delete o.objects,e&&e(new n.Group(i,o,!0))})})})}(),function(t){\"use strict\";var n=e.fabric||(e.fabric={});n.ActiveSelection||(n.ActiveSelection=n.util.createClass(n.Group,{type:\"activeSelection\",initialize:function(t,e){e=e||{},this._objects=t||[];for(var i=this._objects.length;i--;)this._objects[i].group=this;e.originX&&(this.originX=e.originX),e.originY&&(this.originY=e.originY),this._calcBounds(),this._updateObjectsCoords(),n.Object.prototype.initialize.call(this,e),this.setCoords()},toGroup:function(){var t=this._objects.concat();this._objects=[];var e=n.Object.prototype.toObject.call(this),i=new n.Group([]);if(delete e.type,i.set(e),t.forEach(function(t){t.canvas.remove(t),t.group=i}),i._objects=t,!this.canvas)return i;var r=this.canvas;return r.add(i),r._activeObject=i,i.setCoords(),i},onDeselect:function(){return this.destroy(),!1},toString:function(){return\"#<fabric.ActiveSelection: (\"+this.complexity()+\")>\"},shouldCache:function(){return!1},isOnACache:function(){return!1},_renderControls:function(t,e,n){t.save(),t.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1,this.callSuper(\"_renderControls\",t,e),void 0===(n=n||{}).hasControls&&(n.hasControls=!1),void 0===n.hasRotatingPoint&&(n.hasRotatingPoint=!1),n.forActiveSelection=!0;for(var i=0,r=this._objects.length;i<r;i++)this._objects[i]._renderControls(t,n);t.restore()}}),n.ActiveSelection.fromObject=function(t,e){n.util.enlivenObjects(t.objects,function(i){delete t.objects,e&&e(new n.ActiveSelection(i,t,!0))})})}(),function(t){\"use strict\";var e=C.util.object.extend;t.fabric||(t.fabric={}),t.fabric.Image?C.warn(\"fabric.Image is already defined.\"):(C.Image=C.util.createClass(C.Object,{type:\"image\",crossOrigin:\"\",strokeWidth:0,srcFromAttribute:!1,_lastScaleX:1,_lastScaleY:1,_filterScalingX:1,_filterScalingY:1,minimumScaleTrigger:.5,stateProperties:C.Object.prototype.stateProperties.concat(\"cropX\",\"cropY\"),cacheKey:\"\",cropX:0,cropY:0,initialize:function(t,e){e||(e={}),this.filters=[],this.cacheKey=\"texture\"+C.Object.__uid++,this.callSuper(\"initialize\",e),this._initElement(t,e)},getElement:function(){return this._element||{}},setElement:function(t,e){return this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+\"_filtered\"),this._element=t,this._originalElement=t,this._initConfig(e),0!==this.filters.length&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters(),this},removeTexture:function(t){var e=C.filterBackend;e&&e.evictCachesForKey&&e.evictCachesForKey(t)},dispose:function(){this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+\"_filtered\"),this._cacheContext=void 0,[\"_originalElement\",\"_element\",\"_filteredEl\",\"_cacheCanvas\"].forEach((function(t){C.util.cleanUpJsdomNode(this[t]),this[t]=void 0}).bind(this))},setCrossOrigin:function(t){return this.crossOrigin=t,this._element.crossOrigin=t,this},getOriginalSize:function(){var t=this.getElement();return{width:t.naturalWidth||t.width,height:t.naturalHeight||t.height}},_stroke:function(t){if(this.stroke&&0!==this.strokeWidth){var e=this.width/2,n=this.height/2;t.beginPath(),t.moveTo(-e,-n),t.lineTo(e,-n),t.lineTo(e,n),t.lineTo(-e,n),t.lineTo(-e,-n),t.closePath()}},_renderDashedStroke:function(t){var e=-this.width/2,n=-this.height/2,i=this.width,r=this.height;t.save(),this._setStrokeStyles(t,this),t.beginPath(),C.util.drawDashedLine(t,e,n,e+i,n,this.strokeDashArray),C.util.drawDashedLine(t,e+i,n,e+i,n+r,this.strokeDashArray),C.util.drawDashedLine(t,e+i,n+r,e,n+r,this.strokeDashArray),C.util.drawDashedLine(t,e,n+r,e,n,this.strokeDashArray),t.closePath(),t.restore()},toObject:function(t){var n=[];this.filters.forEach(function(t){t&&n.push(t.toObject())});var i=e(this.callSuper(\"toObject\",[\"crossOrigin\",\"cropX\",\"cropY\"].concat(t)),{src:this.getSrc(),filters:n});return this.resizeFilter&&(i.resizeFilter=this.resizeFilter.toObject()),i},hasCrop:function(){return this.cropX||this.cropY||this.width<this._element.width||this.height<this._element.height},_toSVG:function(){var t,e=[],n=[],i=-this.width/2,r=-this.height/2,o=\"\";if(this.hasCrop()){var a=C.Object.__uid++;e.push('<clipPath id=\"imageCrop_'+a+'\">\\n','\\t<rect x=\"'+i+'\" y=\"'+r+'\" width=\"'+this.width+'\" height=\"'+this.height+'\" />\\n',\"</clipPath>\\n\"),o=' clip-path=\"url(#imageCrop_'+a+')\" '}if(n.push(\"\\t<image \",\"COMMON_PARTS\",'xlink:href=\"',this.getSvgSrc(!0),'\" x=\"',i-this.cropX,'\" y=\"',r-this.cropY,'\" width=\"',this._element.width||this._element.naturalWidth,'\" height=\"',this._element.height||this._element.height,'\"',o,\"></image>\\n\"),this.stroke||this.strokeDashArray){var s=this.fill;this.fill=null,t=[\"\\t<rect \",'x=\"',i,'\" y=\"',r,'\" width=\"',this.width,'\" height=\"',this.height,'\" style=\"',this.getSvgStyles(),'\"/>\\n'],this.fill=s}return\"fill\"!==this.paintFirst?e.concat(t,n):e.concat(n,t)},getSrc:function(t){var e=t?this._element:this._originalElement;return e?e.toDataURL?e.toDataURL():this.srcFromAttribute?e.getAttribute(\"src\"):e.src:this.src||\"\"},setSrc:function(t,e,n){return C.util.loadImage(t,function(t){this.setElement(t,n),this._setWidthHeight(),e&&e(this)},this,n&&n.crossOrigin),this},toString:function(){return'#<fabric.Image: { src: \"'+this.getSrc()+'\" }>'},applyResizeFilters:function(){var t=this.resizeFilter,e=this.minimumScaleTrigger,n=this.getTotalObjectScaling(),i=n.scaleX,r=n.scaleY,o=this._filteredEl||this._originalElement;if(this.group&&this.set(\"dirty\",!0),!t||i>e&&r>e)return this._element=o,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=i,void(this._lastScaleY=r);C.filterBackend||(C.filterBackend=C.initFilterBackend());var a=C.util.createCanvasElement(),s=this._filteredEl?this.cacheKey+\"_filtered\":this.cacheKey,l=o.width,c=o.height;a.width=l,a.height=c,this._element=a,this._lastScaleX=t.scaleX=i,this._lastScaleY=t.scaleY=r,C.filterBackend.applyFilters([t],o,l,c,this._element,s),this._filterScalingX=a.width/this._originalElement.width,this._filterScalingY=a.height/this._originalElement.height},applyFilters:function(t){if(t=(t=t||this.filters||[]).filter(function(t){return t&&!t.isNeutralState()}),this.set(\"dirty\",!0),this.removeTexture(this.cacheKey+\"_filtered\"),0===t.length)return this._element=this._originalElement,this._filteredEl=null,this._filterScalingX=1,this._filterScalingY=1,this;var e=this._originalElement,n=e.naturalWidth||e.width,i=e.naturalHeight||e.height;if(this._element===this._originalElement){var r=C.util.createCanvasElement();r.width=n,r.height=i,this._element=r,this._filteredEl=r}else this._element=this._filteredEl,this._filteredEl.getContext(\"2d\").clearRect(0,0,n,i),this._lastScaleX=1,this._lastScaleY=1;return C.filterBackend||(C.filterBackend=C.initFilterBackend()),C.filterBackend.applyFilters(t,this._originalElement,n,i,this._element,this.cacheKey),this._originalElement.width===this._element.width&&this._originalElement.height===this._element.height||(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height),this},_render:function(t){!0!==this.isMoving&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(t),this._renderPaintInOrder(t)},shouldCache:function(){return this.needsItsOwnCache()},_renderFill:function(t){var e=this._element,n=this.width,i=this.height,r=Math.min(e.naturalWidth||e.width,n*this._filterScalingX),o=Math.min(e.naturalHeight||e.height,i*this._filterScalingY),a=-n/2,s=-i/2,l=Math.max(0,this.cropX*this._filterScalingX),c=Math.max(0,this.cropY*this._filterScalingY);e&&t.drawImage(e,l,c,r,o,a,s,n,i)},_needsResize:function(){var t=this.getTotalObjectScaling();return t.scaleX!==this._lastScaleX||t.scaleY!==this._lastScaleY},_resetWidthHeight:function(){this.set(this.getOriginalSize())},_initElement:function(t,e){this.setElement(C.util.getById(t),e),C.util.addClass(this.getElement(),C.Image.CSS_CANVAS)},_initConfig:function(t){t||(t={}),this.setOptions(t),this._setWidthHeight(t),this._element&&this.crossOrigin&&(this._element.crossOrigin=this.crossOrigin)},_initFilters:function(t,e){t&&t.length?C.util.enlivenObjects(t,function(t){e&&e(t)},\"fabric.Image.filters\"):e&&e()},_setWidthHeight:function(t){t||(t={});var e=this.getElement();this.width=t.width||e.naturalWidth||e.width||0,this.height=t.height||e.naturalHeight||e.height||0},parsePreserveAspectRatioAttribute:function(){var t,e=C.util.parsePreserveAspectRatioAttribute(this.preserveAspectRatio||\"\"),n=this._element.width,i=this._element.height,r=1,o=1,a=0,s=0,l=0,c=0,u=this.width,h=this.height,d={width:u,height:h};return!e||\"none\"===e.alignX&&\"none\"===e.alignY?(r=u/n,o=h/i):(\"meet\"===e.meetOrSlice&&(t=(u-n*(r=o=C.util.findScaleToFit(this._element,d)))/2,\"Min\"===e.alignX&&(a=-t),\"Max\"===e.alignX&&(a=t),t=(h-i*o)/2,\"Min\"===e.alignY&&(s=-t),\"Max\"===e.alignY&&(s=t)),\"slice\"===e.meetOrSlice&&(t=n-u/(r=o=C.util.findScaleToCover(this._element,d)),\"Mid\"===e.alignX&&(l=t/2),\"Max\"===e.alignX&&(l=t),t=i-h/o,\"Mid\"===e.alignY&&(c=t/2),\"Max\"===e.alignY&&(c=t),n=u/r,i=h/o)),{width:n,height:i,scaleX:r,scaleY:o,offsetLeft:a,offsetTop:s,cropX:l,cropY:c}}}),C.Image.CSS_CANVAS=\"canvas-img\",C.Image.prototype.getSvgSrc=C.Image.prototype.getSrc,C.Image.fromObject=function(t,e){var n=C.util.object.clone(t);C.util.loadImage(n.src,function(t,i){i?e&&e(null,i):C.Image.prototype._initFilters.call(n,n.filters,function(i){n.filters=i||[],C.Image.prototype._initFilters.call(n,[n.resizeFilter],function(i){n.resizeFilter=i[0],C.util.enlivenObjects([n.clipPath],function(i){n.clipPath=i[0];var r=new C.Image(t,n);e(r)})})})},null,n.crossOrigin)},C.Image.fromURL=function(t,e,n){C.util.loadImage(t,function(t){e&&e(new C.Image(t,n))},null,n&&n.crossOrigin)},C.Image.ATTRIBUTE_NAMES=C.SHARED_ATTRIBUTES.concat(\"x y width height preserveAspectRatio xlink:href crossOrigin\".split(\" \")),C.Image.fromElement=function(t,n,i){var r=C.parseAttributes(t,C.Image.ATTRIBUTE_NAMES);C.Image.fromURL(r[\"xlink:href\"],n,e(i?C.util.object.clone(i):{},r))})}(e),C.util.object.extend(C.Object.prototype,{_getAngleValueForStraighten:function(){var t=this.angle%360;return t>0?90*Math.round((t-1)/90):90*Math.round(t/90)},straighten:function(){return this.rotate(this._getAngleValueForStraighten()),this},fxStraighten:function(t){var e=function(){},n=(t=t||{}).onComplete||e,i=t.onChange||e,r=this;return C.util.animate({startValue:this.get(\"angle\"),endValue:this._getAngleValueForStraighten(),duration:this.FX_DURATION,onChange:function(t){r.rotate(t),i()},onComplete:function(){r.setCoords(),n()}}),this}}),C.util.object.extend(C.StaticCanvas.prototype,{straightenObject:function(t){return t.straighten(),this.requestRenderAll(),this},fxStraightenObject:function(t){return t.fxStraighten({onChange:this.requestRenderAllBound}),this}}),function(){\"use strict\";function t(t,e){var n=\"precision \"+e+\" float;\\nvoid main(){}\",i=t.createShader(t.FRAGMENT_SHADER);return t.shaderSource(i,n),t.compileShader(i),!!t.getShaderParameter(i,t.COMPILE_STATUS)}function e(t){t&&t.tileSize&&(this.tileSize=t.tileSize),this.setupGLContext(this.tileSize,this.tileSize),this.captureGPUInfo()}C.isWebglSupported=function(e){if(C.isLikelyNode)return!1;e=e||C.WebglFilterBackend.prototype.tileSize;var n=document.createElement(\"canvas\"),i=n.getContext(\"webgl\")||n.getContext(\"experimental-webgl\"),r=!1;if(i){C.maxTextureSize=i.getParameter(i.MAX_TEXTURE_SIZE),r=C.maxTextureSize>=e;for(var o=[\"highp\",\"mediump\",\"lowp\"],a=0;a<3;a++)if(t(i,o[a])){C.webGlPrecision=o[a];break}}return this.isSupported=r,r},C.WebglFilterBackend=e,e.prototype={tileSize:2048,resources:{},setupGLContext:function(t,e){this.dispose(),this.createWebGLCanvas(t,e),this.aPosition=new Float32Array([0,0,0,1,1,0,1,1]),this.chooseFastestCopyGLTo2DMethod(t,e)},chooseFastestCopyGLTo2DMethod:function(t,e){var n,i=void 0!==window.performance;try{new ImageData(1,1),n=!0}catch(h){n=!1}var r=\"undefined\"!=typeof ArrayBuffer,o=\"undefined\"!=typeof Uint8ClampedArray;if(i&&n&&r&&o){var a=C.util.createCanvasElement(),s=new ArrayBuffer(t*e*4);if(C.forceGLPutImageData)return this.imageBuffer=s,void(this.copyGLTo2D=E);var l,c,u={imageBuffer:s,destinationWidth:t,destinationHeight:e,targetCanvas:a};a.width=t,a.height=e,l=window.performance.now(),k.call(u,this.gl,u),c=window.performance.now()-l,l=window.performance.now(),E.call(u,this.gl,u),c>window.performance.now()-l?(this.imageBuffer=s,this.copyGLTo2D=E):this.copyGLTo2D=k}},createWebGLCanvas:function(t,e){var n=C.util.createCanvasElement();n.width=t,n.height=e;var i={alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1},r=n.getContext(\"webgl\",i);r||(r=n.getContext(\"experimental-webgl\",i)),r&&(r.clearColor(0,0,0,0),this.canvas=n,this.gl=r)},applyFilters:function(t,e,n,i,r,o){var a,s=this.gl;o&&(a=this.getCachedTexture(o,e));var l={originalWidth:e.width||e.originalWidth,originalHeight:e.height||e.originalHeight,sourceWidth:n,sourceHeight:i,destinationWidth:n,destinationHeight:i,context:s,sourceTexture:this.createTexture(s,n,i,!a&&e),targetTexture:this.createTexture(s,n,i),originalTexture:a||this.createTexture(s,n,i,!a&&e),passes:t.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:r},c=s.createFramebuffer();return s.bindFramebuffer(s.FRAMEBUFFER,c),t.forEach(function(t){t&&t.applyTo(l)}),function(t){var e=t.targetCanvas,n=t.destinationWidth,i=t.destinationHeight;e.width===n&&e.height===i||(e.width=n,e.height=i)}(l),this.copyGLTo2D(s,l),s.bindTexture(s.TEXTURE_2D,null),s.deleteTexture(l.sourceTexture),s.deleteTexture(l.targetTexture),s.deleteFramebuffer(c),r.getContext(\"2d\").setTransform(1,0,0,1,0,0),l},dispose:function(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()},clearWebGLCaches:function(){this.programCache={},this.textureCache={}},createTexture:function(t,e,n,i){var r=t.createTexture();return t.bindTexture(t.TEXTURE_2D,r),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),i?t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,i):t.texImage2D(t.TEXTURE_2D,0,t.RGBA,e,n,0,t.RGBA,t.UNSIGNED_BYTE,null),r},getCachedTexture:function(t,e){if(this.textureCache[t])return this.textureCache[t];var n=this.createTexture(this.gl,e.width,e.height,e);return this.textureCache[t]=n,n},evictCachesForKey:function(t){this.textureCache[t]&&(this.gl.deleteTexture(this.textureCache[t]),delete this.textureCache[t])},copyGLTo2D:k,captureGPUInfo:function(){if(this.gpuInfo)return this.gpuInfo;var t=this.gl,e={renderer:\"\",vendor:\"\"};if(!t)return e;var n=t.getExtension(\"WEBGL_debug_renderer_info\");if(n){var i=t.getParameter(n.UNMASKED_RENDERER_WEBGL),r=t.getParameter(n.UNMASKED_VENDOR_WEBGL);i&&(e.renderer=i.toLowerCase()),r&&(e.vendor=r.toLowerCase())}return this.gpuInfo=e,e}}}(),function(){\"use strict\";var t=function(){};function e(){}C.Canvas2dFilterBackend=e,e.prototype={evictCachesForKey:t,dispose:t,clearWebGLCaches:t,resources:{},applyFilters:function(t,e,n,i,r){var o=r.getContext(\"2d\");o.drawImage(e,0,0,n,i);var a={sourceWidth:n,sourceHeight:i,imageData:o.getImageData(0,0,n,i),originalEl:e,originalImageData:o.getImageData(0,0,n,i),canvasEl:r,ctx:o,filterBackend:this};return t.forEach(function(t){t.applyTo(a)}),a.imageData.width===n&&a.imageData.height===i||(r.width=a.imageData.width,r.height=a.imageData.height),o.putImageData(a.imageData,0,0),a}}}(),C.Image=C.Image||{},C.Image.filters=C.Image.filters||{},C.Image.filters.BaseFilter=C.util.createClass({type:\"BaseFilter\",vertexSource:\"attribute vec2 aPosition;\\nvarying vec2 vTexCoord;\\nvoid main() {\\nvTexCoord = aPosition;\\ngl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);\\n}\",fragmentSource:\"precision highp float;\\nvarying vec2 vTexCoord;\\nuniform sampler2D uTexture;\\nvoid main() {\\ngl_FragColor = texture2D(uTexture, vTexCoord);\\n}\",initialize:function(t){t&&this.setOptions(t)},setOptions:function(t){for(var e in t)this[e]=t[e]},createProgram:function(t,e,n){e=e||this.fragmentSource,n=n||this.vertexSource,\"highp\"!==C.webGlPrecision&&(e=e.replace(/precision highp float/g,\"precision \"+C.webGlPrecision+\" float\"));var i=t.createShader(t.VERTEX_SHADER);if(t.shaderSource(i,n),t.compileShader(i),!t.getShaderParameter(i,t.COMPILE_STATUS))throw new Error(\"Vertex shader compile error for \"+this.type+\": \"+t.getShaderInfoLog(i));var r=t.createShader(t.FRAGMENT_SHADER);if(t.shaderSource(r,e),t.compileShader(r),!t.getShaderParameter(r,t.COMPILE_STATUS))throw new Error(\"Fragment shader compile error for \"+this.type+\": \"+t.getShaderInfoLog(r));var o=t.createProgram();if(t.attachShader(o,i),t.attachShader(o,r),t.linkProgram(o),!t.getProgramParameter(o,t.LINK_STATUS))throw new Error('Shader link error for \"${this.type}\" '+t.getProgramInfoLog(o));var a=this.getAttributeLocations(t,o),s=this.getUniformLocations(t,o)||{};return s.uStepW=t.getUniformLocation(o,\"uStepW\"),s.uStepH=t.getUniformLocation(o,\"uStepH\"),{program:o,attributeLocations:a,uniformLocations:s}},getAttributeLocations:function(t,e){return{aPosition:t.getAttribLocation(e,\"aPosition\")}},getUniformLocations:function(){return{}},sendAttributeData:function(t,e,n){var i=e.aPosition,r=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,r),t.enableVertexAttribArray(i),t.vertexAttribPointer(i,2,t.FLOAT,!1,0,0),t.bufferData(t.ARRAY_BUFFER,n,t.STATIC_DRAW)},_setupFrameBuffer:function(t){var e,n,i=t.context;t.passes>1?(n=t.destinationHeight,t.sourceWidth===(e=t.destinationWidth)&&t.sourceHeight===n||(i.deleteTexture(t.targetTexture),t.targetTexture=t.filterBackend.createTexture(i,e,n)),i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,t.targetTexture,0)):(i.bindFramebuffer(i.FRAMEBUFFER,null),i.finish())},_swapTextures:function(t){t.passes--,t.pass++;var e=t.targetTexture;t.targetTexture=t.sourceTexture,t.sourceTexture=e},isNeutralState:function(){var t=this.mainParameter,e=C.Image.filters[this.type].prototype;if(t){if(Array.isArray(e[t])){for(var n=e[t].length;n--;)if(this[t][n]!==e[t][n])return!1;return!0}return e[t]===this[t]}return!1},applyTo:function(t){t.webgl?(this._setupFrameBuffer(t),this.applyToWebGL(t),this._swapTextures(t)):this.applyTo2d(t)},retrieveShader:function(t){return t.programCache.hasOwnProperty(this.type)||(t.programCache[this.type]=this.createProgram(t.context)),t.programCache[this.type]},applyToWebGL:function(t){var e=t.context,n=this.retrieveShader(t);e.bindTexture(e.TEXTURE_2D,0===t.pass&&t.originalTexture?t.originalTexture:t.sourceTexture),e.useProgram(n.program),this.sendAttributeData(e,n.attributeLocations,t.aPosition),e.uniform1f(n.uniformLocations.uStepW,1/t.sourceWidth),e.uniform1f(n.uniformLocations.uStepH,1/t.sourceHeight),this.sendUniformData(e,n.uniformLocations),e.viewport(0,0,t.destinationWidth,t.destinationHeight),e.drawArrays(e.TRIANGLE_STRIP,0,4)},bindAdditionalTexture:function(t,e,n){t.activeTexture(n),t.bindTexture(t.TEXTURE_2D,e),t.activeTexture(t.TEXTURE0)},unbindAdditionalTexture:function(t,e){t.activeTexture(e),t.bindTexture(t.TEXTURE_2D,null),t.activeTexture(t.TEXTURE0)},getMainParameter:function(){return this[this.mainParameter]},setMainParameter:function(t){this[this.mainParameter]=t},sendUniformData:function(){},createHelpLayer:function(t){if(!t.helpLayer){var e=document.createElement(\"canvas\");e.width=t.sourceWidth,e.height=t.sourceHeight,t.helpLayer=e}},toObject:function(){var t={type:this.type},e=this.mainParameter;return e&&(t[e]=this[e]),t},toJSON:function(){return this.toObject()}}),C.Image.filters.BaseFilter.fromObject=function(t,e){var n=new C.Image.filters[t.type](t);return e&&e(n),n},function(t){\"use strict\";var n=e.fabric||(e.fabric={}),i=n.Image.filters;i.ColorMatrix=(0,n.util.createClass)(i.BaseFilter,{type:\"ColorMatrix\",fragmentSource:\"precision highp float;\\nuniform sampler2D uTexture;\\nvarying vec2 vTexCoord;\\nuniform mat4 uColorMatrix;\\nuniform vec4 uConstants;\\nvoid main() {\\nvec4 color = texture2D(uTexture, vTexCoord);\\ncolor *= uColorMatrix;\\ncolor += uConstants;\\ngl_FragColor = color;\\n}\",matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],mainParameter:\"matrix\",colorsOnly:!0,initialize:function(t){this.callSuper(\"initialize\",t),this.matrix=this.matrix.slice(0)},applyTo2d:function(t){var e,n,i,r,o,a=t.imageData.data,s=a.length,l=this.matrix,c=this.colorsOnly;for(o=0;o<s;o+=4)e=a[o],n=a[o+1],i=a[o+2],c?(a[o]=e*l[0]+n*l[1]+i*l[2]+255*l[4],a[o+1]=e*l[5]+n*l[6]+i*l[7]+255*l[9],a[o+2]=e*l[10]+n*l[11]+i*l[12]+255*l[14]):(a[o]=e*l[0]+n*l[1]+i*l[2]+(r=a[o+3])*l[3]+255*l[4],a[o+1]=e*l[5]+n*l[6]+i*l[7]+r*l[8]+255*l[9],a[o+2]=e*l[10]+n*l[11]+i*l[12]+r*l[13]+255*l[14],a[o+3]=e*l[15]+n*l[16]+i*l[17]+r*l[18]+255*l[19])},getUniformLocations:function(t,e){return{uColorMatrix:t.getUniformLocation(e,\"uColorMatrix\"),uConstants:t.getUniformLocation(e,\"uConstants\")}},sendUniformData:function(t,e){var n=this.matrix,i=[n[4],n[9],n[14],n[19]];t.uniformMatrix4fv(e.uColorMatrix,!1,[n[0],n[1],n[2],n[3],n[5],n[6],n[7],n[8],n[10],n[11],n[12],n[13],n[15],n[16],n[17],n[18]]),t.uniform4fv(e.uConstants,i)}}),n.Image.filters.ColorMatrix.fromObject=n.Image.filters.BaseFilter.fromObject}(),function(t){\"use strict\";var n=e.fabric||(e.fabric={}),i=n.Image.filters;i.Brightness=(0,n.util.createClass)(i.BaseFilter,{type:\"Brightness\",fragmentSource:\"precision highp float;\\nuniform sampler2D uTexture;\\nuniform float uBrightness;\\nvarying vec2 vTexCoord;\\nvoid main() {\\nvec4 color = texture2D(uTexture, vTexCoord);\\ncolor.rgb += uBrightness;\\ngl_FragColor = color;\\n}\",brightness:0,mainParameter:\"brightness\",applyTo2d:function(t){if(0!==this.brightness){var e,n=t.imageData.data,i=n.length,r=Math.round(255*this.brightness);for(e=0;e<i;e+=4)n[e]=n[e]+r,n[e+1]=n[e+1]+r,n[e+2]=n[e+2]+r}},getUniformLocations:function(t,e){return{uBrightness:t.getUniformLocation(e,\"uBrightness\")}},sendUniformData:function(t,e){t.uniform1f(e.uBrightness,this.brightness)}}),n.Image.filters.Brightness.fromObject=n.Image.filters.BaseFilter.fromObject}(),function(t){\"use strict\";var n=e.fabric||(e.fabric={}),i=n.util.object.extend,r=n.Image.filters;r.Convolute=(0,n.util.createClass)(r.BaseFilter,{type:\"Convolute\",opaque:!1,matrix:[0,0,0,0,1,0,0,0,0],fragmentSource:{Convolute_3_1:\"precision highp float;\\nuniform sampler2D uTexture;\\nuniform float uMatrix[9];\\nuniform float uStepW;\\nuniform float uStepH;\\nvarying vec2 vTexCoord;\\nvoid main() {\\nvec4 color = vec4(0, 0, 0, 0);\\nfor (float h = 0.0; h < 3.0; h+=1.0) {\\nfor (float w = 0.0; w < 3.0; w+=1.0) {\\nvec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));\\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];\\n}\\n}\\ngl_FragColor = color;\\n}\",Convolute_3_0:\"precision highp float;\\nuniform sampler2D uTexture;\\nuniform float uMatrix[9];\\nuniform float uStepW;\\nuniform float uStepH;\\nvarying vec2 vTexCoord;\\nvoid main() {\\nvec4 color = vec4(0, 0, 0, 1);\\nfor (float h = 0.0; h < 3.0; h+=1.0) {\\nfor (float w = 0.0; w < 3.0; w+=1.0) {\\nvec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));\\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];\\n}\\n}\\nfloat alpha = texture2D(uTexture, vTexCoord).a;\\ngl_FragColor = color;\\ngl_FragColor.a = alpha;\\n}\",Convolute_5_1:\"precision highp float;\\nuniform sampler2D uTexture;\\nuniform float uMatrix[25];\\nuniform float uStepW;\\nuniform float uStepH;\\nvarying vec2 vTexCoord;\\nvoid main() {\\nvec4 color = vec4(0, 0, 0, 0);\\nfor (float h = 0.0; h < 5.0; h+=1.0) {\\nfor (float w = 0.0; w < 5.0; w+=1.0) {\\nvec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));\\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];\\n}\\n}\\ngl_FragColor = color;\\n}\",Convolute_5_0:\"precision highp float;\\nuniform sampler2D uTexture;\\nuniform float uMatrix[25];\\nuniform float uStepW;\\nuniform float uStepH;\\nvarying vec2 vTexCoord;\\nvoid main() {\\nvec4 color = vec4(0, 0, 0, 1);\\nfor (float h = 0.0; h < 5.0; h+=1.0) {\\nfor (float w = 0.0; w < 5.0; w+=1.0) {\\nvec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));\\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];\\n}\\n}\\nfloat alpha = texture2D(uTexture, vTexCoord).a;\\ngl_FragColor = color;\\ngl_FragColor.a = alpha;\\n}\",Convolute_7_1:\"precision highp float;\\nuniform sampler2D uTexture;\\nuniform float uMatrix[49];\\nuniform float uStepW;\\nuniform float uStepH;\\nvarying vec2 vTexCoord;\\nvoid main() {\\nvec4 color = vec4(0, 0, 0, 0);\\nfor (float h = 0.0; h < 7.0; h+=1.0) {\\nfor (float w = 0.0; w < 7.0; w+=1.0) {\\nvec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));\\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];\\n}\\n}\\ngl_FragColor = color;\\n}\",Convolute_7_0:\"precision highp float;\\nuniform sampler2D uTexture;\\nuniform float uMatrix[49];\\nuniform float uStepW;\\nuniform float uStepH;\\nvarying vec2 vTexCoord;\\nvoid main() {\\nvec4 color = vec4(0, 0, 0, 1);\\nfor (float h = 0.0; h < 7.0; h+=1.0) {\\nfor (float w = 0.0; w < 7.0; w+=1.0) {\\nvec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));\\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];\\n}\\n}\\nfloat alpha = texture2D(uTexture, vTexCoord).a;\\ngl_FragColor = color;\\ngl_FragColor.a = alpha;\\n}\",Convolute_9_1:\"precision highp float;\\nuniform sampler2D uTexture;\\nuniform float uMatrix[81];\\nuniform float uStepW;\\nuniform float uStepH;\\nvarying vec2 vTexCoord;\\nvoid main() {\\nvec4 color = vec4(0, 0, 0, 0);\\nfor (float h = 0.0; h < 9.0; h+=1.0) {\\nfor (float w = 0.0; w < 9.0; w+=1.0) {\\nvec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));\\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];\\n}\\n}\\ngl_FragColor = color;\\n}\",Convolute_9_0:\"precision highp float;\\nuniform sampler2D uTexture;\\nuniform float uMatrix[81];\\nuniform float uStepW;\\nuniform float uStepH;\\nvarying vec2 vTexCoord;\\nvoid main() {\\nvec4 color = vec4(0, 0, 0, 1);\\nfor (float h = 0.0; h < 9.0; h+=1.0) {\\nfor (float w = 0.0; w < 9.0; w+=1.0) {\\nvec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));\\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];\\n}\\n}\\nfloat alpha = texture2D(uTexture, vTexCoord).a;\\ngl_FragColor = color;\\ngl_FragColor.a = alpha;\\n}\"},retrieveShader:function(t){var e=Math.sqrt(this.matrix.length),n=this.type+\"_\"+e+\"_\"+(this.opaque?1:0),i=this.fragmentSource[n];return t.programCache.hasOwnProperty(n)||(t.programCache[n]=this.createProgram(t.context,i)),t.programCache[n]},applyTo2d:function(t){var e,n,i,r,o,a,s,l,c,u,h,d,f,p=t.imageData,g=p.data,m=this.matrix,v=Math.round(Math.sqrt(m.length)),y=Math.floor(v/2),b=p.width,_=p.height,w=t.ctx.createImageData(b,_),x=w.data,C=this.opaque?1:0;for(h=0;h<_;h++)for(u=0;u<b;u++){for(o=4*(h*b+u),e=0,n=0,i=0,r=0,f=0;f<v;f++)for(d=0;d<v;d++)a=u+d-y,(s=h+f-y)<0||s>_||a<0||a>b||(e+=g[l=4*(s*b+a)]*(c=m[f*v+d]),n+=g[l+1]*c,i+=g[l+2]*c,C||(r+=g[l+3]*c));x[o]=e,x[o+1]=n,x[o+2]=i,x[o+3]=C?g[o+3]:r}t.imageData=w},getUniformLocations:function(t,e){return{uMatrix:t.getUniformLocation(e,\"uMatrix\"),uOpaque:t.getUniformLocation(e,\"uOpaque\"),uHalfSize:t.getUniformLocation(e,\"uHalfSize\"),uSize:t.getUniformLocation(e,\"uSize\")}},sendUniformData:function(t,e){t.uniform1fv(e.uMatrix,this.matrix)},toObject:function(){return i(this.callSuper(\"toObject\"),{opaque:this.opaque,matrix:this.matrix})}}),n.Image.filters.Convolute.fromObject=n.Image.filters.BaseFilter.fromObject}(),function(t){\"use strict\";var n=e.fabric||(e.fabric={}),i=n.Image.filters;i.Grayscale=(0,n.util.createClass)(i.BaseFilter,{type:\"Grayscale\",fragmentSource:{average:\"precision highp float;\\nuniform sampler2D uTexture;\\nvarying vec2 vTexCoord;\\nvoid main() {\\nvec4 color = texture2D(uTexture, vTexCoord);\\nfloat average = (color.r + color.b + color.g) / 3.0;\\ngl_FragColor = vec4(average, average, average, color.a);\\n}\",lightness:\"precision highp float;\\nuniform sampler2D uTexture;\\nuniform int uMode;\\nvarying vec2 vTexCoord;\\nvoid main() {\\nvec4 col = texture2D(uTexture, vTexCoord);\\nfloat average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;\\ngl_FragColor = vec4(average, average, average, col.a);\\n}\",luminosity:\"precision highp float;\\nuniform sampler2D uTexture;\\nuniform int uMode;\\nvarying vec2 vTexCoord;\\nvoid main() {\\nvec4 col = texture2D(uTexture, vTexCoord);\\nfloat average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;\\ngl_FragColor = vec4(average, average, average, col.a);\\n}\"},mode:\"average\",mainParameter:\"mode\",applyTo2d:function(t){var e,n,i=t.imageData.data,r=i.length,o=this.mode;for(e=0;e<r;e+=4)\"average\"===o?n=(i[e]+i[e+1]+i[e+2])/3:\"lightness\"===o?n=(Math.min(i[e],i[e+1],i[e+2])+Math.max(i[e],i[e+1],i[e+2]))/2:\"luminosity\"===o&&(n=.21*i[e]+.72*i[e+1]+.07*i[e+2]),i[e]=n,i[e+1]=n,i[e+2]=n},retrieveShader:function(t){var e=this.type+\"_\"+this.mode;return t.programCache.hasOwnProperty(e)||(t.programCache[e]=this.createProgram(t.context,this.fragmentSource[this.mode])),t.programCache[e]},getUniformLocations:function(t,e){return{uMode:t.getUniformLocation(e,\"uMode\")}},sendUniformData:function(t,e){t.uniform1i(e.uMode,1)},isNeutralState:function(){return!1}}),n.Image.filters.Grayscale.fromObject=n.Image.filters.BaseFilter.fromObject}(),function(t){\"use strict\";var n=e.fabric||(e.fabric={}),i=n.Image.filters;i.Invert=(0,n.util.createClass)(i.BaseFilter,{type:\"Invert\",fragmentSource:\"precision highp float;\\nuniform sampler2D uTexture;\\nuniform int uInvert;\\nvarying vec2 vTexCoord;\\nvoid main() {\\nvec4 color = texture2D(uTexture, vTexCoord);\\nif (uInvert == 1) {\\ngl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);\\n} else {\\ngl_FragColor = color;\\n}\\n}\",invert:!0,mainParameter:\"invert\",applyTo2d:function(t){var e,n=t.imageData.data,i=n.length;for(e=0;e<i;e+=4)n[e]=255-n[e],n[e+1]=255-n[e+1],n[e+2]=255-n[e+2]},isNeutralState:function(){return!this.invert},getUniformLocations:function(t,e){return{uInvert:t.getUniformLocation(e,\"uInvert\")}},sendUniformData:function(t,e){t.uniform1i(e.uInvert,this.invert)}}),n.Image.filters.Invert.fromObject=n.Image.filters.BaseFilter.fromObject}(),function(t){\"use strict\";var n=e.fabric||(e.fabric={}),i=n.util.object.extend,r=n.Image.filters;r.Noise=(0,n.util.createClass)(r.BaseFilter,{type:\"Noise\",fragmentSource:\"precision highp float;\\nuniform sampler2D uTexture;\\nuniform float uStepH;\\nuniform float uNoise;\\nuniform float uSeed;\\nvarying vec2 vTexCoord;\\nfloat rand(vec2 co, float seed, float vScale) {\\nreturn fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);\\n}\\nvoid main() {\\nvec4 color = texture2D(uTexture, vTexCoord);\\ncolor.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;\\ngl_FragColor = color;\\n}\",mainParameter:\"noise\",noise:0,applyTo2d:function(t){if(0!==this.noise){var e,n,i,r=t.imageData.data,o=this.noise;for(e=0,n=r.length;e<n;e+=4)i=(.5-Math.random())*o,r[e]+=i,r[e+1]+=i,r[e+2]+=i}},getUniformLocations:function(t,e){return{uNoise:t.getUniformLocation(e,\"uNoise\"),uSeed:t.getUniformLocation(e,\"uSeed\")}},sendUniformData:function(t,e){t.uniform1f(e.uNoise,this.noise/255),t.uniform1f(e.uSeed,Math.random())},toObject:function(){return i(this.callSuper(\"toObject\"),{noise:this.noise})}}),n.Image.filters.Noise.fromObject=n.Image.filters.BaseFilter.fromObject}(),function(t){\"use strict\";var n=e.fabric||(e.fabric={}),i=n.Image.filters;i.Pixelate=(0,n.util.createClass)(i.BaseFilter,{type:\"Pixelate\",blocksize:4,mainParameter:\"blocksize\",fragmentSource:\"precision highp float;\\nuniform sampler2D uTexture;\\nuniform float uBlocksize;\\nuniform float uStepW;\\nuniform float uStepH;\\nvarying vec2 vTexCoord;\\nvoid main() {\\nfloat blockW = uBlocksize * uStepW;\\nfloat blockH = uBlocksize * uStepW;\\nint posX = int(vTexCoord.x / blockW);\\nint posY = int(vTexCoord.y / blockH);\\nfloat fposX = float(posX);\\nfloat fposY = float(posY);\\nvec2 squareCoords = vec2(fposX * blockW, fposY * blockH);\\nvec4 color = texture2D(uTexture, squareCoords);\\ngl_FragColor = color;\\n}\",applyTo2d:function(t){var e,n,i,r,o,a,s,l,c,u,h,d=t.imageData,f=d.data,p=d.height,g=d.width;for(n=0;n<p;n+=this.blocksize)for(i=0;i<g;i+=this.blocksize)for(r=f[e=4*n*g+4*i],o=f[e+1],a=f[e+2],s=f[e+3],u=Math.min(n+this.blocksize,p),h=Math.min(i+this.blocksize,g),l=n;l<u;l++)for(c=i;c<h;c++)f[e=4*l*g+4*c]=r,f[e+1]=o,f[e+2]=a,f[e+3]=s},isNeutralState:function(){return 1===this.blocksize},getUniformLocations:function(t,e){return{uBlocksize:t.getUniformLocation(e,\"uBlocksize\"),uStepW:t.getUniformLocation(e,\"uStepW\"),uStepH:t.getUniformLocation(e,\"uStepH\")}},sendUniformData:function(t,e){t.uniform1f(e.uBlocksize,this.blocksize)}}),n.Image.filters.Pixelate.fromObject=n.Image.filters.BaseFilter.fromObject}(),function(t){\"use strict\";var n=e.fabric||(e.fabric={}),i=n.util.object.extend,r=n.Image.filters;r.RemoveColor=(0,n.util.createClass)(r.BaseFilter,{type:\"RemoveColor\",color:\"#FFFFFF\",fragmentSource:\"precision highp float;\\nuniform sampler2D uTexture;\\nuniform vec4 uLow;\\nuniform vec4 uHigh;\\nvarying vec2 vTexCoord;\\nvoid main() {\\ngl_FragColor = texture2D(uTexture, vTexCoord);\\nif(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {\\ngl_FragColor.a = 0.0;\\n}\\n}\",distance:.02,useAlpha:!1,applyTo2d:function(t){var e,i,r,o,a=t.imageData.data,s=255*this.distance,l=new n.Color(this.color).getSource(),c=[l[0]-s,l[1]-s,l[2]-s],u=[l[0]+s,l[1]+s,l[2]+s];for(e=0;e<a.length;e+=4)r=a[e+1],o=a[e+2],(i=a[e])>c[0]&&r>c[1]&&o>c[2]&&i<u[0]&&r<u[1]&&o<u[2]&&(a[e+3]=0)},getUniformLocations:function(t,e){return{uLow:t.getUniformLocation(e,\"uLow\"),uHigh:t.getUniformLocation(e,\"uHigh\")}},sendUniformData:function(t,e){var i=new n.Color(this.color).getSource(),r=parseFloat(this.distance),o=[i[0]/255+r,i[1]/255+r,i[2]/255+r,1];t.uniform4fv(e.uLow,[0+i[0]/255-r,0+i[1]/255-r,0+i[2]/255-r,1]),t.uniform4fv(e.uHigh,o)},toObject:function(){return i(this.callSuper(\"toObject\"),{color:this.color,distance:this.distance})}}),n.Image.filters.RemoveColor.fromObject=n.Image.filters.BaseFilter.fromObject}(),function(t){\"use strict\";var n=e.fabric||(e.fabric={}),i=n.Image.filters,r=n.util.createClass,o={Brownie:[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0],Vintage:[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0],Kodachrome:[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0],Technicolor:[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0],Polaroid:[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],Sepia:[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0],BlackWhite:[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]};for(var a in o)i[a]=r(i.ColorMatrix,{type:a,matrix:o[a],mainParameter:!1,colorsOnly:!0}),n.Image.filters[a].fromObject=n.Image.filters.BaseFilter.fromObject}(),function(t){\"use strict\";var n=e.fabric,i=n.Image.filters;i.BlendColor=(0,n.util.createClass)(i.BaseFilter,{type:\"BlendColor\",color:\"#F95C63\",mode:\"multiply\",alpha:1,fragmentSource:{multiply:\"gl_FragColor.rgb *= uColor.rgb;\\n\",screen:\"gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);\\n\",add:\"gl_FragColor.rgb += uColor.rgb;\\n\",diff:\"gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);\\n\",subtract:\"gl_FragColor.rgb -= uColor.rgb;\\n\",lighten:\"gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);\\n\",darken:\"gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);\\n\",exclusion:\"gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);\\n\",overlay:\"if (uColor.r < 0.5) {\\ngl_FragColor.r *= 2.0 * uColor.r;\\n} else {\\ngl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);\\n}\\nif (uColor.g < 0.5) {\\ngl_FragColor.g *= 2.0 * uColor.g;\\n} else {\\ngl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);\\n}\\nif (uColor.b < 0.5) {\\ngl_FragColor.b *= 2.0 * uColor.b;\\n} else {\\ngl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);\\n}\\n\",tint:\"gl_FragColor.rgb *= (1.0 - uColor.a);\\ngl_FragColor.rgb += uColor.rgb;\\n\"},buildSource:function(t){return\"precision highp float;\\nuniform sampler2D uTexture;\\nuniform vec4 uColor;\\nvarying vec2 vTexCoord;\\nvoid main() {\\nvec4 color = texture2D(uTexture, vTexCoord);\\ngl_FragColor = color;\\nif (color.a > 0.0) {\\n\"+this.fragmentSource[t]+\"}\\n}\"},retrieveShader:function(t){var e,n=this.type+\"_\"+this.mode;return t.programCache.hasOwnProperty(n)||(e=this.buildSource(this.mode),t.programCache[n]=this.createProgram(t.context,e)),t.programCache[n]},applyTo2d:function(t){var e,i,r,o,a,s,l,c=t.imageData.data,u=c.length,h=1-this.alpha;e=(l=new n.Color(this.color).getSource())[0]*this.alpha,i=l[1]*this.alpha,r=l[2]*this.alpha;for(var d=0;d<u;d+=4)switch(o=c[d],a=c[d+1],s=c[d+2],this.mode){case\"multiply\":c[d]=o*e/255,c[d+1]=a*i/255,c[d+2]=s*r/255;break;case\"screen\":c[d]=255-(255-o)*(255-e)/255,c[d+1]=255-(255-a)*(255-i)/255,c[d+2]=255-(255-s)*(255-r)/255;break;case\"add\":c[d]=o+e,c[d+1]=a+i,c[d+2]=s+r;break;case\"diff\":case\"difference\":c[d]=Math.abs(o-e),c[d+1]=Math.abs(a-i),c[d+2]=Math.abs(s-r);break;case\"subtract\":c[d]=o-e,c[d+1]=a-i,c[d+2]=s-r;break;case\"darken\":c[d]=Math.min(o,e),c[d+1]=Math.min(a,i),c[d+2]=Math.min(s,r);break;case\"lighten\":c[d]=Math.max(o,e),c[d+1]=Math.max(a,i),c[d+2]=Math.max(s,r);break;case\"overlay\":c[d]=e<128?2*o*e/255:255-2*(255-o)*(255-e)/255,c[d+1]=i<128?2*a*i/255:255-2*(255-a)*(255-i)/255,c[d+2]=r<128?2*s*r/255:255-2*(255-s)*(255-r)/255;break;case\"exclusion\":c[d]=e+o-2*e*o/255,c[d+1]=i+a-2*i*a/255,c[d+2]=r+s-2*r*s/255;break;case\"tint\":c[d]=e+o*h,c[d+1]=i+a*h,c[d+2]=r+s*h}},getUniformLocations:function(t,e){return{uColor:t.getUniformLocation(e,\"uColor\")}},sendUniformData:function(t,e){var i=new n.Color(this.color).getSource();i[0]=this.alpha*i[0]/255,i[1]=this.alpha*i[1]/255,i[2]=this.alpha*i[2]/255,i[3]=this.alpha,t.uniform4fv(e.uColor,i)},toObject:function(){return{type:this.type,color:this.color,mode:this.mode,alpha:this.alpha}}}),n.Image.filters.BlendColor.fromObject=n.Image.filters.BaseFilter.fromObject}(),function(t){\"use strict\";var n=e.fabric,i=n.Image.filters;i.BlendImage=(0,n.util.createClass)(i.BaseFilter,{type:\"BlendImage\",image:null,mode:\"multiply\",alpha:1,vertexSource:\"attribute vec2 aPosition;\\nvarying vec2 vTexCoord;\\nvarying vec2 vTexCoord2;\\nuniform mat3 uTransformMatrix;\\nvoid main() {\\nvTexCoord = aPosition;\\nvTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;\\ngl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);\\n}\",fragmentSource:{multiply:\"precision highp float;\\nuniform sampler2D uTexture;\\nuniform sampler2D uImage;\\nuniform vec4 uColor;\\nvarying vec2 vTexCoord;\\nvarying vec2 vTexCoord2;\\nvoid main() {\\nvec4 color = texture2D(uTexture, vTexCoord);\\nvec4 color2 = texture2D(uImage, vTexCoord2);\\ncolor.rgba *= color2.rgba;\\ngl_FragColor = color;\\n}\",mask:\"precision highp float;\\nuniform sampler2D uTexture;\\nuniform sampler2D uImage;\\nuniform vec4 uColor;\\nvarying vec2 vTexCoord;\\nvarying vec2 vTexCoord2;\\nvoid main() {\\nvec4 color = texture2D(uTexture, vTexCoord);\\nvec4 color2 = texture2D(uImage, vTexCoord2);\\ncolor.a = color2.a;\\ngl_FragColor = color;\\n}\"},retrieveShader:function(t){var e=this.type+\"_\"+this.mode,n=this.fragmentSource[this.mode];return t.programCache.hasOwnProperty(e)||(t.programCache[e]=this.createProgram(t.context,n)),t.programCache[e]},applyToWebGL:function(t){var e=t.context,n=this.createTexture(t.filterBackend,this.image);this.bindAdditionalTexture(e,n,e.TEXTURE1),this.callSuper(\"applyToWebGL\",t),this.unbindAdditionalTexture(e,e.TEXTURE1)},createTexture:function(t,e){return t.getCachedTexture(e.cacheKey,e._element)},calculateMatrix:function(){var t=this.image;return[1/t.scaleX,0,0,0,1/t.scaleY,0,-t.left/t._element.width,-t.top/t._element.height,1]},applyTo2d:function(t){var e,i,r,o,a,s,l,c,u,h,d,f=t.imageData,p=t.filterBackend.resources,g=f.data,m=g.length,v=f.width,y=f.height,b=this.image;p.blendImage||(p.blendImage=n.util.createCanvasElement()),h=(u=p.blendImage).getContext(\"2d\"),u.width!==v||u.height!==y?(u.width=v,u.height=y):h.clearRect(0,0,v,y),h.setTransform(b.scaleX,0,0,b.scaleY,b.left,b.top),h.drawImage(b._element,0,0,v,y),d=h.getImageData(0,0,v,y).data;for(var _=0;_<m;_+=4)switch(a=g[_],s=g[_+1],l=g[_+2],c=g[_+3],e=d[_],i=d[_+1],r=d[_+2],o=d[_+3],this.mode){case\"multiply\":g[_]=a*e/255,g[_+1]=s*i/255,g[_+2]=l*r/255,g[_+3]=c*o/255;break;case\"mask\":g[_+3]=o}},getUniformLocations:function(t,e){return{uTransformMatrix:t.getUniformLocation(e,\"uTransformMatrix\"),uImage:t.getUniformLocation(e,\"uImage\")}},sendUniformData:function(t,e){var n=this.calculateMatrix();t.uniform1i(e.uImage,1),t.uniformMatrix3fv(e.uTransformMatrix,!1,n)},toObject:function(){return{type:this.type,image:this.image&&this.image.toObject(),mode:this.mode,alpha:this.alpha}}}),n.Image.filters.BlendImage.fromObject=function(t,e){n.Image.fromObject(t.image,function(i){var r=n.util.object.clone(t);r.image=i,e(new n.Image.filters.BlendImage(r))})}}(),function(t){\"use strict\";var n=e.fabric||(e.fabric={}),i=Math.pow,r=Math.floor,o=Math.sqrt,a=Math.abs,s=Math.round,l=Math.sin,c=Math.ceil,u=n.Image.filters;u.Resize=(0,n.util.createClass)(u.BaseFilter,{type:\"Resize\",resizeType:\"hermite\",scaleX:1,scaleY:1,lanczosLobes:3,getUniformLocations:function(t,e){return{uDelta:t.getUniformLocation(e,\"uDelta\"),uTaps:t.getUniformLocation(e,\"uTaps\")}},sendUniformData:function(t,e){t.uniform2fv(e.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),t.uniform1fv(e.uTaps,this.taps)},retrieveShader:function(t){var e=this.getFilterWindow(),n=this.type+\"_\"+e;if(!t.programCache.hasOwnProperty(n)){var i=this.generateShader(e);t.programCache[n]=this.createProgram(t.context,i)}return t.programCache[n]},getFilterWindow:function(){return Math.ceil(this.lanczosLobes/this.tempScale)},getTaps:function(){for(var t=this.lanczosCreate(this.lanczosLobes),e=this.tempScale,n=this.getFilterWindow(),i=new Array(n),r=1;r<=n;r++)i[r-1]=t(r*e);return i},generateShader:function(t){for(var e=new Array(t),n=this.fragmentSourceTOP,i=1;i<=t;i++)e[i-1]=i+\".0 * uDelta\";return n+=\"uniform float uTaps[\"+t+\"];\\n\",n+=\"void main() {\\n\",n+=\"  vec4 color = texture2D(uTexture, vTexCoord);\\n\",n+=\"  float sum = 1.0;\\n\",e.forEach(function(t,e){n+=\"  color += texture2D(uTexture, vTexCoord + \"+t+\") * uTaps[\"+e+\"];\\n\",n+=\"  color += texture2D(uTexture, vTexCoord - \"+t+\") * uTaps[\"+e+\"];\\n\",n+=\"  sum += 2.0 * uTaps[\"+e+\"];\\n\"}),n+=\"  gl_FragColor = color / sum;\\n\",n+=\"}\"},fragmentSourceTOP:\"precision highp float;\\nuniform sampler2D uTexture;\\nuniform vec2 uDelta;\\nvarying vec2 vTexCoord;\\n\",applyTo:function(t){t.webgl?(t.passes++,this.width=t.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=t.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),t.destinationWidth=this.dW,this._setupFrameBuffer(t),this.applyToWebGL(t),this._swapTextures(t),t.sourceWidth=t.destinationWidth,this.height=t.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),t.destinationHeight=this.dH,this._setupFrameBuffer(t),this.applyToWebGL(t),this._swapTextures(t),t.sourceHeight=t.destinationHeight):this.applyTo2d(t)},isNeutralState:function(){return 1===this.scaleX&&1===this.scaleY},lanczosCreate:function(t){return function(e){if(e>=t||e<=-t)return 0;if(e<1.1920929e-7&&e>-1.1920929e-7)return 1;var n=(e*=Math.PI)/t;return l(e)/e*l(n)/n}},applyTo2d:function(t){var e=t.imageData,n=this.scaleX,i=this.scaleY;this.rcpScaleX=1/n,this.rcpScaleY=1/i;var r,o=e.width,a=e.height,l=s(o*n),c=s(a*i);\"sliceHack\"===this.resizeType?r=this.sliceByTwo(t,o,a,l,c):\"hermite\"===this.resizeType?r=this.hermiteFastResize(t,o,a,l,c):\"bilinear\"===this.resizeType?r=this.bilinearFiltering(t,o,a,l,c):\"lanczos\"===this.resizeType&&(r=this.lanczosResize(t,o,a,l,c)),t.imageData=r},sliceByTwo:function(t,e,i,o,a){var s,l,c=t.imageData,u=!1,h=!1,d=.5*e,f=.5*i,p=n.filterBackend.resources,g=0,m=0,v=e,y=0;for(p.sliceByTwo||(p.sliceByTwo=document.createElement(\"canvas\")),((s=p.sliceByTwo).width<1.5*e||s.height<i)&&(s.width=1.5*e,s.height=i),(l=s.getContext(\"2d\")).clearRect(0,0,1.5*e,i),l.putImageData(c,0,0),o=r(o),a=r(a);!u||!h;)e=d,i=f,o<r(.5*d)?d=r(.5*d):(d=o,u=!0),a<r(.5*f)?f=r(.5*f):(f=a,h=!0),l.drawImage(s,g,m,e,i,v,y,d,f),g=v,m=y,y+=f;return l.getImageData(g,m,o,a)},lanczosResize:function(t,e,n,s,l){var u=t.imageData.data,h=t.ctx.createImageData(s,l),d=h.data,f=this.lanczosCreate(this.lanczosLobes),p=this.rcpScaleX,g=this.rcpScaleY,m=2/this.rcpScaleX,v=2/this.rcpScaleY,y=c(p*this.lanczosLobes/2),b=c(g*this.lanczosLobes/2),_={},w={},x={};return function t(c){var C,S,k,E,T,O,P,j,A,M,D;for(w.x=(c+.5)*p,x.x=r(w.x),C=0;C<l;C++){for(w.y=(C+.5)*g,x.y=r(w.y),T=0,O=0,P=0,j=0,A=0,S=x.x-y;S<=x.x+y;S++)if(!(S<0||S>=e)){M=r(1e3*a(S-w.x)),_[M]||(_[M]={});for(var I=x.y-b;I<=x.y+b;I++)I<0||I>=n||(D=r(1e3*a(I-w.y)),_[M][D]||(_[M][D]=f(o(i(M*m,2)+i(D*v,2))/1e3)),(k=_[M][D])>0&&(T+=k,O+=k*u[E=4*(I*e+S)],P+=k*u[E+1],j+=k*u[E+2],A+=k*u[E+3]))}d[E=4*(C*s+c)]=O/T,d[E+1]=P/T,d[E+2]=j/T,d[E+3]=A/T}return++c<s?t(c):h}(0)},bilinearFiltering:function(t,e,n,i,o){var a,s,l,c,u,h,d,f,p=0,g=this.rcpScaleX,m=this.rcpScaleY,v=4*(e-1),y=t.imageData.data,b=t.ctx.createImageData(i,o),_=b.data;for(l=0;l<o;l++)for(c=0;c<i;c++)for(u=g*c-(a=r(g*c)),h=m*l-(s=r(m*l)),f=4*(s*e+a),d=0;d<4;d++)_[p++]=y[f+d]*(1-u)*(1-h)+y[f+4+d]*u*(1-h)+y[f+v+d]*h*(1-u)+y[f+v+4+d]*u*h;return b},hermiteFastResize:function(t,e,n,i,s){for(var l=this.rcpScaleX,u=this.rcpScaleY,h=c(l/2),d=c(u/2),f=t.imageData.data,p=t.ctx.createImageData(i,s),g=p.data,m=0;m<s;m++)for(var v=0;v<i;v++){for(var y=4*(v+m*i),b=0,_=0,w=0,x=0,C=0,S=0,k=0,E=(m+.5)*u,T=r(m*u);T<(m+1)*u;T++)for(var O=a(E-(T+.5))/d,P=(v+.5)*l,j=O*O,A=r(v*l);A<(v+1)*l;A++){var M=a(P-(A+.5))/h,D=o(j+M*M);D>1&&D<-1||(b=2*D*D*D-3*D*D+1)>0&&(k+=b*f[3+(M=4*(A+T*e))],w+=b,f[M+3]<255&&(b=b*f[M+3]/250),x+=b*f[M],C+=b*f[M+1],S+=b*f[M+2],_+=b)}g[y]=x/_,g[y+1]=C/_,g[y+2]=S/_,g[y+3]=k/w}return p},toObject:function(){return{type:this.type,scaleX:this.scaleX,scaleY:this.scaleY,resizeType:this.resizeType,lanczosLobes:this.lanczosLobes}}}),n.Image.filters.Resize.fromObject=n.Image.filters.BaseFilter.fromObject}(),function(t){\"use strict\";var n=e.fabric||(e.fabric={}),i=n.Image.filters;i.Contrast=(0,n.util.createClass)(i.BaseFilter,{type:\"Contrast\",fragmentSource:\"precision highp float;\\nuniform sampler2D uTexture;\\nuniform float uContrast;\\nvarying vec2 vTexCoord;\\nvoid main() {\\nvec4 color = texture2D(uTexture, vTexCoord);\\nfloat contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));\\ncolor.rgb = contrastF * (color.rgb - 0.5) + 0.5;\\ngl_FragColor = color;\\n}\",contrast:0,mainParameter:\"contrast\",applyTo2d:function(t){if(0!==this.contrast){var e,n=t.imageData.data,i=n.length,r=Math.floor(255*this.contrast),o=259*(r+255)/(255*(259-r));for(e=0;e<i;e+=4)n[e]=o*(n[e]-128)+128,n[e+1]=o*(n[e+1]-128)+128,n[e+2]=o*(n[e+2]-128)+128}},getUniformLocations:function(t,e){return{uContrast:t.getUniformLocation(e,\"uContrast\")}},sendUniformData:function(t,e){t.uniform1f(e.uContrast,this.contrast)}}),n.Image.filters.Contrast.fromObject=n.Image.filters.BaseFilter.fromObject}(),function(t){\"use strict\";var n=e.fabric||(e.fabric={}),i=n.Image.filters;i.Saturation=(0,n.util.createClass)(i.BaseFilter,{type:\"Saturation\",fragmentSource:\"precision highp float;\\nuniform sampler2D uTexture;\\nuniform float uSaturation;\\nvarying vec2 vTexCoord;\\nvoid main() {\\nvec4 color = texture2D(uTexture, vTexCoord);\\nfloat rgMax = max(color.r, color.g);\\nfloat rgbMax = max(rgMax, color.b);\\ncolor.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;\\ncolor.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;\\ncolor.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;\\ngl_FragColor = color;\\n}\",saturation:0,mainParameter:\"saturation\",applyTo2d:function(t){if(0!==this.saturation){var e,n,i=t.imageData.data,r=i.length,o=-this.saturation;for(e=0;e<r;e+=4)n=Math.max(i[e],i[e+1],i[e+2]),i[e]+=n!==i[e]?(n-i[e])*o:0,i[e+1]+=n!==i[e+1]?(n-i[e+1])*o:0,i[e+2]+=n!==i[e+2]?(n-i[e+2])*o:0}},getUniformLocations:function(t,e){return{uSaturation:t.getUniformLocation(e,\"uSaturation\")}},sendUniformData:function(t,e){t.uniform1f(e.uSaturation,-this.saturation)}}),n.Image.filters.Saturation.fromObject=n.Image.filters.BaseFilter.fromObject}(),function(t){\"use strict\";var n=e.fabric||(e.fabric={}),i=n.Image.filters;i.Blur=(0,n.util.createClass)(i.BaseFilter,{type:\"Blur\",fragmentSource:\"precision highp float;\\nuniform sampler2D uTexture;\\nuniform vec2 uDelta;\\nvarying vec2 vTexCoord;\\nconst float nSamples = 15.0;\\nvec3 v3offset = vec3(12.9898, 78.233, 151.7182);\\nfloat random(vec3 scale) {\\nreturn fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);\\n}\\nvoid main() {\\nvec4 color = vec4(0.0);\\nfloat total = 0.0;\\nfloat offset = random(v3offset);\\nfor (float t = -nSamples; t <= nSamples; t++) {\\nfloat percent = (t + offset - 0.5) / nSamples;\\nfloat weight = 1.0 - abs(percent);\\ncolor += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;\\ntotal += weight;\\n}\\ngl_FragColor = color / total;\\n}\",blur:0,mainParameter:\"blur\",applyTo:function(t){t.webgl?(this.aspectRatio=t.sourceWidth/t.sourceHeight,t.passes++,this._setupFrameBuffer(t),this.horizontal=!0,this.applyToWebGL(t),this._swapTextures(t),this._setupFrameBuffer(t),this.horizontal=!1,this.applyToWebGL(t),this._swapTextures(t)):this.applyTo2d(t)},applyTo2d:function(t){t.imageData=this.simpleBlur(t)},simpleBlur:function(t){var e,i,r=t.filterBackend.resources,o=t.imageData.width,a=t.imageData.height;r.blurLayer1||(r.blurLayer1=n.util.createCanvasElement(),r.blurLayer2=n.util.createCanvasElement()),i=r.blurLayer2,(e=r.blurLayer1).width===o&&e.height===a||(i.width=e.width=o,i.height=e.height=a);var s,l,c,u,h=e.getContext(\"2d\"),d=i.getContext(\"2d\"),f=.06*this.blur*.5;for(h.putImageData(t.imageData,0,0),d.clearRect(0,0,o,a),u=-15;u<=15;u++)c=f*(l=u/15)*o+(s=(Math.random()-.5)/4),d.globalAlpha=1-Math.abs(l),d.drawImage(e,c,s),h.drawImage(i,0,0),d.globalAlpha=1,d.clearRect(0,0,i.width,i.height);for(u=-15;u<=15;u++)c=f*(l=u/15)*a+(s=(Math.random()-.5)/4),d.globalAlpha=1-Math.abs(l),d.drawImage(e,s,c),h.drawImage(i,0,0),d.globalAlpha=1,d.clearRect(0,0,i.width,i.height);t.ctx.drawImage(e,0,0);var p=t.ctx.getImageData(0,0,e.width,e.height);return h.globalAlpha=1,h.clearRect(0,0,e.width,e.height),p},getUniformLocations:function(t,e){return{delta:t.getUniformLocation(e,\"uDelta\")}},sendUniformData:function(t,e){var n=this.chooseRightDelta();t.uniform2fv(e.delta,n)},chooseRightDelta:function(){var t,e=1,n=[0,0];return this.horizontal?this.aspectRatio>1&&(e=1/this.aspectRatio):this.aspectRatio<1&&(e=this.aspectRatio),t=e*this.blur*.12,this.horizontal?n[0]=t:n[1]=t,n}}),i.Blur.fromObject=n.Image.filters.BaseFilter.fromObject}(),function(t){\"use strict\";var n=e.fabric||(e.fabric={}),i=n.Image.filters;i.Gamma=(0,n.util.createClass)(i.BaseFilter,{type:\"Gamma\",fragmentSource:\"precision highp float;\\nuniform sampler2D uTexture;\\nuniform vec3 uGamma;\\nvarying vec2 vTexCoord;\\nvoid main() {\\nvec4 color = texture2D(uTexture, vTexCoord);\\nvec3 correction = (1.0 / uGamma);\\ncolor.r = pow(color.r, correction.r);\\ncolor.g = pow(color.g, correction.g);\\ncolor.b = pow(color.b, correction.b);\\ngl_FragColor = color;\\ngl_FragColor.rgb *= color.a;\\n}\",gamma:[1,1,1],mainParameter:\"gamma\",initialize:function(t){this.gamma=[1,1,1],i.BaseFilter.prototype.initialize.call(this,t)},applyTo2d:function(t){var e,n=t.imageData.data,i=this.gamma,r=n.length,o=1/i[0],a=1/i[1],s=1/i[2];for(this.rVals||(this.rVals=new Uint8Array(256),this.gVals=new Uint8Array(256),this.bVals=new Uint8Array(256)),e=0,r=256;e<r;e++)this.rVals[e]=255*Math.pow(e/255,o),this.gVals[e]=255*Math.pow(e/255,a),this.bVals[e]=255*Math.pow(e/255,s);for(e=0,r=n.length;e<r;e+=4)n[e]=this.rVals[n[e]],n[e+1]=this.gVals[n[e+1]],n[e+2]=this.bVals[n[e+2]]},getUniformLocations:function(t,e){return{uGamma:t.getUniformLocation(e,\"uGamma\")}},sendUniformData:function(t,e){t.uniform3fv(e.uGamma,this.gamma)}}),n.Image.filters.Gamma.fromObject=n.Image.filters.BaseFilter.fromObject}(),function(t){\"use strict\";var n=e.fabric||(e.fabric={}),i=n.Image.filters;i.Composed=(0,n.util.createClass)(i.BaseFilter,{type:\"Composed\",subFilters:[],initialize:function(t){this.callSuper(\"initialize\",t),this.subFilters=this.subFilters.slice(0)},applyTo:function(t){t.passes+=this.subFilters.length-1,this.subFilters.forEach(function(e){e.applyTo(t)})},toObject:function(){return n.util.object.extend(this.callSuper(\"toObject\"),{subFilters:this.subFilters.map(function(t){return t.toObject()})})},isNeutralState:function(){return!this.subFilters.some(function(t){return!t.isNeutralState()})}}),n.Image.filters.Composed.fromObject=function(t,e){var i=(t.subFilters||[]).map(function(t){return new n.Image.filters[t.type](t)}),r=new n.Image.filters.Composed({subFilters:i});return e&&e(r),r}}(),function(t){\"use strict\";var n=e.fabric||(e.fabric={}),i=n.Image.filters;i.HueRotation=(0,n.util.createClass)(i.ColorMatrix,{type:\"HueRotation\",rotation:0,mainParameter:\"rotation\",calculateMatrix:function(){var t=this.rotation*Math.PI,e=n.util.cos(t),i=n.util.sin(t),r=Math.sqrt(1/3)*i,o=1-e;this.matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.matrix[0]=e+o/3,this.matrix[1]=1/3*o-r,this.matrix[2]=1/3*o+r,this.matrix[5]=1/3*o+r,this.matrix[6]=e+1/3*o,this.matrix[7]=1/3*o-r,this.matrix[10]=1/3*o-r,this.matrix[11]=1/3*o+r,this.matrix[12]=e+1/3*o},isNeutralState:function(t){return this.calculateMatrix(),i.BaseFilter.prototype.isNeutralState.call(this,t)},applyTo:function(t){this.calculateMatrix(),i.BaseFilter.prototype.applyTo.call(this,t)}}),n.Image.filters.HueRotation.fromObject=n.Image.filters.BaseFilter.fromObject}(),function(t){\"use strict\";var n=e.fabric||(e.fabric={}),i=n.util.object.clone;n.Text?n.warn(\"fabric.Text is already defined\"):(n.Text=n.util.createClass(n.Object,{_dimensionAffectingProps:[\"fontSize\",\"fontWeight\",\"fontFamily\",\"fontStyle\",\"lineHeight\",\"text\",\"charSpacing\",\"textAlign\",\"styles\"],_reNewline:/\\r?\\n/,_reSpacesAndTabs:/[ \\t\\r]/g,_reSpaceAndTab:/[ \\t\\r]/,_reWords:/\\S+/g,type:\"text\",fontSize:40,fontWeight:\"normal\",fontFamily:\"Times New Roman\",underline:!1,overline:!1,linethrough:!1,textAlign:\"left\",fontStyle:\"normal\",lineHeight:1.16,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},textBackgroundColor:\"\",stateProperties:n.Object.prototype.stateProperties.concat(\"fontFamily\",\"fontWeight\",\"fontSize\",\"text\",\"underline\",\"overline\",\"linethrough\",\"textAlign\",\"fontStyle\",\"lineHeight\",\"textBackgroundColor\",\"charSpacing\",\"styles\"),cacheProperties:n.Object.prototype.cacheProperties.concat(\"fontFamily\",\"fontWeight\",\"fontSize\",\"text\",\"underline\",\"overline\",\"linethrough\",\"textAlign\",\"fontStyle\",\"lineHeight\",\"textBackgroundColor\",\"charSpacing\",\"styles\"),stroke:null,shadow:null,_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.315,overline:-.88},_fontSizeMult:1.13,charSpacing:0,styles:null,_measuringContext:null,deltaY:0,_styleProperties:[\"stroke\",\"strokeWidth\",\"fill\",\"fontFamily\",\"fontSize\",\"fontWeight\",\"fontStyle\",\"underline\",\"overline\",\"linethrough\",\"deltaY\",\"textBackgroundColor\"],__charBounds:[],CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2,initialize:function(t,e){this.styles=e&&e.styles||{},this.text=t,this.__skipDimension=!0,this.callSuper(\"initialize\",e),this.__skipDimension=!1,this.initDimensions(),this.setCoords(),this.setupState({propertySet:\"_dimensionAffectingProps\"})},getMeasuringContext:function(){return n._measuringContext||(n._measuringContext=this.canvas&&this.canvas.contextCache||n.util.createCanvasElement().getContext(\"2d\")),n._measuringContext},_splitText:function(){var t=this._splitTextIntoLines(this.text);return this.textLines=t.lines,this._textLines=t.graphemeLines,this._unwrappedTextLines=t._unwrappedLines,this._text=t.graphemeText,t},initDimensions:function(){this.__skipDimension||(this._splitText(),this._clearCache(),this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,-1!==this.textAlign.indexOf(\"justify\")&&this.enlargeSpaces(),this.height=this.calcTextHeight(),this.saveState({propertySet:\"_dimensionAffectingProps\"}))},enlargeSpaces:function(){for(var t,e,n,i,r,o,a=0,s=this._textLines.length;a<s;a++)if((\"justify\"===this.textAlign||a!==s-1&&!this.isEndOfWrapping(a))&&(n=0,i=this._textLines[a],(e=this.getLineWidth(a))<this.width&&(o=this.textLines[a].match(this._reSpacesAndTabs)))){t=(this.width-e)/o.length;for(var l=0,c=i.length;l<=c;l++)r=this.__charBounds[a][l],this._reSpaceAndTab.test(i[l])?(r.width+=t,r.kernedWidth+=t,r.left+=n,n+=t):r.left+=n}},isEndOfWrapping:function(t){return t===this._textLines.length-1},missingNewlineOffset:function(){return 1},toString:function(){return\"#<fabric.Text (\"+this.complexity()+'): { \"text\": \"'+this.text+'\", \"fontFamily\": \"'+this.fontFamily+'\" }>'},_getCacheCanvasDimensions:function(){var t=this.callSuper(\"_getCacheCanvasDimensions\"),e=this.fontSize;return t.width+=e*t.zoomX,t.height+=e*t.zoomY,t},_render:function(t){this._setTextStyles(t),this._renderTextLinesBackground(t),this._renderTextDecoration(t,\"underline\"),this._renderText(t),this._renderTextDecoration(t,\"overline\"),this._renderTextDecoration(t,\"linethrough\")},_renderText:function(t){\"stroke\"===this.paintFirst?(this._renderTextStroke(t),this._renderTextFill(t)):(this._renderTextFill(t),this._renderTextStroke(t))},_setTextStyles:function(t,e,n){t.textBaseline=\"alphabetic\",t.font=this._getFontDeclaration(e,n)},calcTextWidth:function(){for(var t=this.getLineWidth(0),e=1,n=this._textLines.length;e<n;e++){var i=this.getLineWidth(e);i>t&&(t=i)}return t},_renderTextLine:function(t,e,n,i,r,o){this._renderChars(t,e,n,i,r,o)},_renderTextLinesBackground:function(t){if(this.textBackgroundColor||this.styleHas(\"textBackgroundColor\")){for(var e,n,i,r,o,a,s=0,l=t.fillStyle,c=this._getLeftOffset(),u=this._getTopOffset(),h=0,d=0,f=0,p=this._textLines.length;f<p;f++)if(e=this.getHeightOfLine(f),this.textBackgroundColor||this.styleHas(\"textBackgroundColor\",f)){i=this._textLines[f],n=this._getLineLeftOffset(f),d=0,h=0,r=this.getValueOfPropertyAt(f,0,\"textBackgroundColor\");for(var g=0,m=i.length;g<m;g++)o=this.__charBounds[f][g],(a=this.getValueOfPropertyAt(f,g,\"textBackgroundColor\"))!==r?(t.fillStyle=r,r&&t.fillRect(c+n+h,u+s,d,e/this.lineHeight),h=o.left,d=o.width,r=a):d+=o.kernedWidth;a&&(t.fillStyle=a,t.fillRect(c+n+h,u+s,d,e/this.lineHeight)),s+=e}else s+=e;t.fillStyle=l,this._removeShadow(t)}},getFontCache:function(t){var e=t.fontFamily.toLowerCase();n.charWidthsCache[e]||(n.charWidthsCache[e]={});var i=n.charWidthsCache[e],r=t.fontStyle.toLowerCase()+\"_\"+(t.fontWeight+\"\").toLowerCase();return i[r]||(i[r]={}),i[r]},_applyCharStyles:function(t,e,n,i,r){this._setFillStyles(e,r),this._setStrokeStyles(e,r),e.font=this._getFontDeclaration(r)},_measureChar:function(t,e,n,i){var r,o,a,s,l=this.getFontCache(e),c=n+t,u=this._getFontDeclaration(e)===this._getFontDeclaration(i),h=e.fontSize/this.CACHE_FONT_SIZE;if(n&&void 0!==l[n]&&(a=l[n]),void 0!==l[t]&&(s=r=l[t]),u&&void 0!==l[c]&&(s=(o=l[c])-a),void 0===r||void 0===a||void 0===o){var d=this.getMeasuringContext();this._setTextStyles(d,e,!0)}return void 0===r&&(s=r=d.measureText(t).width,l[t]=r),void 0===a&&u&&n&&(a=d.measureText(n).width,l[n]=a),u&&void 0===o&&(o=d.measureText(c).width,l[c]=o,s=o-a),{width:r*h,kernedWidth:s*h}},getHeightOfChar:function(t,e){return this.getValueOfPropertyAt(t,e,\"fontSize\")},measureLine:function(t){var e=this._measureLine(t);return 0!==this.charSpacing&&(e.width-=this._getWidthOfCharSpacing()),e.width<0&&(e.width=0),e},_measureLine:function(t){var e,n,i,r,o=0,a=this._textLines[t],s=new Array(a.length);for(this.__charBounds[t]=s,e=0;e<a.length;e++)r=this._getGraphemeBox(n=a[e],t,e,i),s[e]=r,o+=r.kernedWidth,i=n;return s[e]={left:r?r.left+r.width:0,width:0,kernedWidth:0,height:this.fontSize},{width:o,numOfSpaces:0}},_getGraphemeBox:function(t,e,n,i,r){var o,a=this.getCompleteStyleDeclaration(e,n),s=i?this.getCompleteStyleDeclaration(e,n-1):{},l=this._measureChar(t,a,i,s),c=l.kernedWidth,u=l.width;0!==this.charSpacing&&(u+=o=this._getWidthOfCharSpacing(),c+=o);var h={width:u,left:0,height:a.fontSize,kernedWidth:c,deltaY:a.deltaY};if(n>0&&!r){var d=this.__charBounds[e][n-1];h.left=d.left+d.width+l.kernedWidth-l.width}return h},getHeightOfLine:function(t){if(this.__lineHeights[t])return this.__lineHeights[t];for(var e=this._textLines[t],n=this.getHeightOfChar(t,0),i=1,r=e.length;i<r;i++)n=Math.max(this.getHeightOfChar(t,i),n);return this.__lineHeights[t]=n*this.lineHeight*this._fontSizeMult},calcTextHeight:function(){for(var t,e=0,n=0,i=this._textLines.length;n<i;n++)t=this.getHeightOfLine(n),e+=n===i-1?t/this.lineHeight:t;return e},_getLeftOffset:function(){return-this.width/2},_getTopOffset:function(){return-this.height/2},_renderTextCommon:function(t,e){t.save();for(var n=0,i=this._getLeftOffset(),r=this._getTopOffset(),o=this._applyPatternGradientTransform(t,\"fillText\"===e?this.fill:this.stroke),a=0,s=this._textLines.length;a<s;a++){var l=this.getHeightOfLine(a),c=l/this.lineHeight,u=this._getLineLeftOffset(a);this._renderTextLine(e,t,this._textLines[a],i+u-o.offsetX,r+n+c-o.offsetY,a),n+=l}t.restore()},_renderTextFill:function(t){(this.fill||this.styleHas(\"fill\"))&&this._renderTextCommon(t,\"fillText\")},_renderTextStroke:function(t){(this.stroke&&0!==this.strokeWidth||!this.isEmptyStyles())&&(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(t),t.save(),this._setLineDash(t,this.strokeDashArray),t.beginPath(),this._renderTextCommon(t,\"strokeText\"),t.closePath(),t.restore())},_renderChars:function(t,e,n,i,r,o){var a,s,l,c,u=this.getHeightOfLine(o),h=-1!==this.textAlign.indexOf(\"justify\"),d=\"\",f=0,p=!h&&0===this.charSpacing&&this.isEmptyStyles(o);if(e.save(),r-=u*this._fontSizeFraction/this.lineHeight,p)return this._renderChar(t,e,o,0,this.textLines[o],i,r,u),void e.restore();for(var g=0,m=n.length-1;g<=m;g++)c=g===m||this.charSpacing,d+=n[g],l=this.__charBounds[o][g],0===f?(i+=l.kernedWidth-l.width,f+=l.width):f+=l.kernedWidth,h&&!c&&this._reSpaceAndTab.test(n[g])&&(c=!0),c||(a=a||this.getCompleteStyleDeclaration(o,g),s=this.getCompleteStyleDeclaration(o,g+1),c=this._hasStyleChanged(a,s)),c&&(this._renderChar(t,e,o,g,d,i,r,u),d=\"\",a=s,i+=f,f=0);e.restore()},_renderChar:function(t,e,n,i,r,o,a){var s=this._getStyleDeclaration(n,i),l=this.getCompleteStyleDeclaration(n,i),c=\"fillText\"===t&&l.fill,u=\"strokeText\"===t&&l.stroke&&l.strokeWidth;(u||c)&&(s&&e.save(),this._applyCharStyles(t,e,n,i,l),s&&s.textBackgroundColor&&this._removeShadow(e),s&&s.deltaY&&(a+=s.deltaY),c&&e.fillText(r,o,a),u&&e.strokeText(r,o,a),s&&e.restore())},setSuperscript:function(t,e){return this._setScript(t,e,this.superscript)},setSubscript:function(t,e){return this._setScript(t,e,this.subscript)},_setScript:function(t,e,n){var i=this.get2DCursorLocation(t,!0),r=this.getValueOfPropertyAt(i.lineIndex,i.charIndex,\"fontSize\"),o=this.getValueOfPropertyAt(i.lineIndex,i.charIndex,\"deltaY\");return this.setSelectionStyles({fontSize:r*n.size,deltaY:o+r*n.baseline},t,e),this},_hasStyleChanged:function(t,e){return t.fill!==e.fill||t.stroke!==e.stroke||t.strokeWidth!==e.strokeWidth||t.fontSize!==e.fontSize||t.fontFamily!==e.fontFamily||t.fontWeight!==e.fontWeight||t.fontStyle!==e.fontStyle||t.deltaY!==e.deltaY},_hasStyleChangedForSvg:function(t,e){return this._hasStyleChanged(t,e)||t.overline!==e.overline||t.underline!==e.underline||t.linethrough!==e.linethrough},_getLineLeftOffset:function(t){var e=this.getLineWidth(t);return\"center\"===this.textAlign?(this.width-e)/2:\"right\"===this.textAlign?this.width-e:\"justify-center\"===this.textAlign&&this.isEndOfWrapping(t)?(this.width-e)/2:\"justify-right\"===this.textAlign&&this.isEndOfWrapping(t)?this.width-e:0},_clearCache:function(){this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]},_shouldClearDimensionCache:function(){var t=this._forceClearCache;return t||(t=this.hasStateChanged(\"_dimensionAffectingProps\")),t&&(this.dirty=!0,this._forceClearCache=!1),t},getLineWidth:function(t){return this.__lineWidths[t]?this.__lineWidths[t]:(e=\"\"===this._textLines[t]?0:this.measureLine(t).width,this.__lineWidths[t]=e,e);var e},_getWidthOfCharSpacing:function(){return 0!==this.charSpacing?this.fontSize*this.charSpacing/1e3:0},getValueOfPropertyAt:function(t,e,n){var i=this._getStyleDeclaration(t,e);return i&&void 0!==i[n]?i[n]:this[n]},_renderTextDecoration:function(t,e){if(this[e]||this.styleHas(e)){for(var n,i,r,o,a,s,l,c,u,h,d,f,p,g,m,v,y=this._getLeftOffset(),b=this._getTopOffset(),_=this._getWidthOfCharSpacing(),w=0,x=this._textLines.length;w<x;w++)if(n=this.getHeightOfLine(w),this[e]||this.styleHas(e,w)){l=this._textLines[w],g=n/this.lineHeight,o=this._getLineLeftOffset(w),h=0,d=0,c=this.getValueOfPropertyAt(w,0,e),v=this.getValueOfPropertyAt(w,0,\"fill\"),u=b+g*(1-this._fontSizeFraction),i=this.getHeightOfChar(w,0),a=this.getValueOfPropertyAt(w,0,\"deltaY\");for(var C=0,S=l.length;C<S;C++)f=this.__charBounds[w][C],p=this.getValueOfPropertyAt(w,C,e),m=this.getValueOfPropertyAt(w,C,\"fill\"),r=this.getHeightOfChar(w,C),s=this.getValueOfPropertyAt(w,C,\"deltaY\"),(p!==c||m!==v||r!==i||s!==a)&&d>0?(t.fillStyle=v,c&&v&&t.fillRect(y+o+h,u+this.offsets[e]*i+a,d,this.fontSize/15),h=f.left,d=f.width,c=p,v=m,i=r,a=s):d+=f.kernedWidth;t.fillStyle=m,p&&m&&t.fillRect(y+o+h,u+this.offsets[e]*i+a,d-_,this.fontSize/15),b+=n}else b+=n;this._removeShadow(t)}},_getFontDeclaration:function(t,e){var i=t||this,r=this.fontFamily,o=n.Text.genericFonts.indexOf(r.toLowerCase())>-1,a=void 0===r||r.indexOf(\"'\")>-1||r.indexOf(\",\")>-1||r.indexOf('\"')>-1||o?i.fontFamily:'\"'+i.fontFamily+'\"';return[n.isLikelyNode?i.fontWeight:i.fontStyle,n.isLikelyNode?i.fontStyle:i.fontWeight,e?this.CACHE_FONT_SIZE+\"px\":i.fontSize+\"px\",a].join(\" \")},render:function(t){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._shouldClearDimensionCache()&&this.initDimensions(),this.callSuper(\"render\",t)))},_splitTextIntoLines:function(t){for(var e=t.split(this._reNewline),i=new Array(e.length),r=[\"\\n\"],o=[],a=0;a<e.length;a++)i[a]=n.util.string.graphemeSplit(e[a]),o=o.concat(i[a],r);return o.pop(),{_unwrappedLines:i,lines:e,graphemeText:o,graphemeLines:i}},toObject:function(t){var e=[\"text\",\"fontSize\",\"fontWeight\",\"fontFamily\",\"fontStyle\",\"lineHeight\",\"underline\",\"overline\",\"linethrough\",\"textAlign\",\"textBackgroundColor\",\"charSpacing\"].concat(t),n=this.callSuper(\"toObject\",e);return n.styles=i(this.styles,!0),n},set:function(t,e){this.callSuper(\"set\",t,e);var n=!1;if(\"object\"==typeof t)for(var i in t)n=n||-1!==this._dimensionAffectingProps.indexOf(i);else n=-1!==this._dimensionAffectingProps.indexOf(t);return n&&(this.initDimensions(),this.setCoords()),this},complexity:function(){return 1}}),n.Text.ATTRIBUTE_NAMES=n.SHARED_ATTRIBUTES.concat(\"x y dx dy font-family font-style font-weight font-size letter-spacing text-decoration text-anchor\".split(\" \")),n.Text.DEFAULT_SVG_FONT_SIZE=16,n.Text.fromElement=function(t,e,r){if(!t)return e(null);var o=n.parseAttributes(t,n.Text.ATTRIBUTE_NAMES),a=o.textAnchor||\"left\";if((r=n.util.object.extend(r?i(r):{},o)).top=r.top||0,r.left=r.left||0,o.textDecoration){var s=o.textDecoration;-1!==s.indexOf(\"underline\")&&(r.underline=!0),-1!==s.indexOf(\"overline\")&&(r.overline=!0),-1!==s.indexOf(\"line-through\")&&(r.linethrough=!0),delete r.textDecoration}\"dx\"in o&&(r.left+=o.dx),\"dy\"in o&&(r.top+=o.dy),\"fontSize\"in r||(r.fontSize=n.Text.DEFAULT_SVG_FONT_SIZE);var l=\"\";\"textContent\"in t?l=t.textContent:\"firstChild\"in t&&null!==t.firstChild&&\"data\"in t.firstChild&&null!==t.firstChild.data&&(l=t.firstChild.data),l=l.replace(/^\\s+|\\s+$|\\n+/g,\"\").replace(/\\s+/g,\" \");var c=r.strokeWidth;r.strokeWidth=0;var u=new n.Text(l,r),h=u.getScaledHeight()/u.height,d=((u.height+u.strokeWidth)*u.lineHeight-u.height)*h,f=u.getScaledHeight()+d,p=0;\"center\"===a&&(p=u.getScaledWidth()/2),\"right\"===a&&(p=u.getScaledWidth()),u.set({left:u.left-p,top:u.top-(f-u.fontSize*(.07+u._fontSizeFraction))/u.lineHeight,strokeWidth:void 0!==c?c:1}),e(u)},n.Text.fromObject=function(t,e){return n.Object._fromObject(\"Text\",t,e,\"text\")},n.Text.genericFonts=[\"sans-serif\",\"serif\",\"cursive\",\"fantasy\",\"monospace\"],n.util.createAccessors&&n.util.createAccessors(n.Text))}(),C.util.object.extend(C.Text.prototype,{isEmptyStyles:function(t){if(!this.styles)return!0;if(void 0!==t&&!this.styles[t])return!0;var e=void 0===t?this.styles:{line:this.styles[t]};for(var n in e)for(var i in e[n])for(var r in e[n][i])return!1;return!0},styleHas:function(t,e){if(!this.styles||!t||\"\"===t)return!1;if(void 0!==e&&!this.styles[e])return!1;var n=void 0===e?this.styles:{0:this.styles[e]};for(var i in n)for(var r in n[i])if(void 0!==n[i][r][t])return!0;return!1},cleanStyle:function(t){if(!this.styles||!t||\"\"===t)return!1;var e,n,i=this.styles,r=0,o=!0,a=0;for(var s in i){for(var l in e=0,i[s]){var c;r++,(c=i[s][l]).hasOwnProperty(t)?(n?c[t]!==n&&(o=!1):n=c[t],c[t]===this[t]&&delete c[t]):o=!1,0!==Object.keys(c).length?e++:delete i[s][l]}0===e&&delete i[s]}for(var u=0;u<this._textLines.length;u++)a+=this._textLines[u].length;o&&r===a&&(this[t]=n,this.removeStyle(t))},removeStyle:function(t){if(this.styles&&t&&\"\"!==t){var e,n,i,r=this.styles;for(n in r){for(i in e=r[n])delete e[i][t],0===Object.keys(e[i]).length&&delete e[i];0===Object.keys(e).length&&delete r[n]}}},_extendStyles:function(t,e){var n=this.get2DCursorLocation(t);this._getLineStyle(n.lineIndex)||this._setLineStyle(n.lineIndex),this._getStyleDeclaration(n.lineIndex,n.charIndex)||this._setStyleDeclaration(n.lineIndex,n.charIndex,{}),C.util.object.extend(this._getStyleDeclaration(n.lineIndex,n.charIndex),e)},get2DCursorLocation:function(t,e){void 0===t&&(t=this.selectionStart);for(var n=e?this._unwrappedTextLines:this._textLines,i=n.length,r=0;r<i;r++){if(t<=n[r].length)return{lineIndex:r,charIndex:t};t-=n[r].length+this.missingNewlineOffset(r)}return{lineIndex:r-1,charIndex:n[r-1].length<t?n[r-1].length:t}},getSelectionStyles:function(t,e,n){void 0===t&&(t=this.selectionStart||0),void 0===e&&(e=this.selectionEnd||t);for(var i=[],r=t;r<e;r++)i.push(this.getStyleAtPosition(r,n));return i},getStyleAtPosition:function(t,e){var n=this.get2DCursorLocation(t);return(e?this.getCompleteStyleDeclaration(n.lineIndex,n.charIndex):this._getStyleDeclaration(n.lineIndex,n.charIndex))||{}},setSelectionStyles:function(t,e,n){void 0===e&&(e=this.selectionStart||0),void 0===n&&(n=this.selectionEnd||e);for(var i=e;i<n;i++)this._extendStyles(i,t);return this._forceClearCache=!0,this},_getStyleDeclaration:function(t,e){var n=this.styles&&this.styles[t];return n?n[e]:null},getCompleteStyleDeclaration:function(t,e){for(var n,i=this._getStyleDeclaration(t,e)||{},r={},o=0;o<this._styleProperties.length;o++)r[n=this._styleProperties[o]]=void 0===i[n]?this[n]:i[n];return r},_setStyleDeclaration:function(t,e,n){this.styles[t][e]=n},_deleteStyleDeclaration:function(t,e){delete this.styles[t][e]},_getLineStyle:function(t){return!!this.styles[t]},_setLineStyle:function(t){this.styles[t]={}},_deleteLineStyle:function(t){delete this.styles[t]}}),function(){function t(t){t.textDecoration&&(t.textDecoration.indexOf(\"underline\")>-1&&(t.underline=!0),t.textDecoration.indexOf(\"line-through\")>-1&&(t.linethrough=!0),t.textDecoration.indexOf(\"overline\")>-1&&(t.overline=!0),delete t.textDecoration)}C.IText=C.util.createClass(C.Text,C.Observable,{type:\"i-text\",selectionStart:0,selectionEnd:0,selectionColor:\"rgba(17,119,255,0.3)\",isEditing:!1,editable:!0,editingBorderColor:\"rgba(102,153,255,0.25)\",cursorWidth:2,cursorColor:\"#333\",cursorDelay:1e3,cursorDuration:600,caching:!0,_reSpace:/\\s|\\n/,_currentCursorOpacity:0,_selectionDirection:null,_abortCursorAnimation:!1,__widthOfSpace:[],inCompositionMode:!1,initialize:function(t,e){this.callSuper(\"initialize\",t,e),this.initBehavior()},setSelectionStart:function(t){t=Math.max(t,0),this._updateAndFire(\"selectionStart\",t)},setSelectionEnd:function(t){t=Math.min(t,this.text.length),this._updateAndFire(\"selectionEnd\",t)},_updateAndFire:function(t,e){this[t]!==e&&(this._fireSelectionChanged(),this[t]=e),this._updateTextarea()},_fireSelectionChanged:function(){this.fire(\"selection:changed\"),this.canvas&&this.canvas.fire(\"text:selection:changed\",{target:this})},initDimensions:function(){this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this.callSuper(\"initDimensions\")},render:function(t){this.clearContextTop(),this.callSuper(\"render\",t),this.cursorOffsetCache={},this.renderCursorOrSelection()},_render:function(t){this.callSuper(\"_render\",t)},clearContextTop:function(t){if(this.isEditing&&this.canvas&&this.canvas.contextTop){var e=this.canvas.contextTop,n=this.canvas.viewportTransform;e.save(),e.transform(n[0],n[1],n[2],n[3],n[4],n[5]),this.transform(e),this.transformMatrix&&e.transform.apply(e,this.transformMatrix),this._clearTextArea(e),t||e.restore()}},renderCursorOrSelection:function(){if(this.isEditing&&this.canvas&&this.canvas.contextTop){var t=this._getCursorBoundaries(),e=this.canvas.contextTop;this.clearContextTop(!0),this.selectionStart===this.selectionEnd?this.renderCursor(t,e):this.renderSelection(t,e),e.restore()}},_clearTextArea:function(t){var e=this.width+4,n=this.height+4;t.clearRect(-e/2,-n/2,e,n)},_getCursorBoundaries:function(t){void 0===t&&(t=this.selectionStart);var e=this._getLeftOffset(),n=this._getTopOffset(),i=this._getCursorBoundariesOffsets(t);return{left:e,top:n,leftOffset:i.left,topOffset:i.top}},_getCursorBoundariesOffsets:function(t){if(this.cursorOffsetCache&&\"top\"in this.cursorOffsetCache)return this.cursorOffsetCache;var e,n,i,r=0,o=0,a=this.get2DCursorLocation(t);i=a.charIndex,n=a.lineIndex;for(var s=0;s<n;s++)r+=this.getHeightOfLine(s);e=this._getLineLeftOffset(n);var l=this.__charBounds[n][i];return l&&(o=l.left),0!==this.charSpacing&&i===this._textLines[n].length&&(o-=this._getWidthOfCharSpacing()),this.cursorOffsetCache={top:r,left:e+(o>0?o:0)},this.cursorOffsetCache},renderCursor:function(t,e){var n=this.get2DCursorLocation(),i=n.lineIndex,r=n.charIndex>0?n.charIndex-1:0,o=this.getValueOfPropertyAt(i,r,\"fontSize\"),a=this.scaleX*this.canvas.getZoom(),s=this.cursorWidth/a,l=t.topOffset,c=this.getValueOfPropertyAt(i,r,\"deltaY\");l+=(1-this._fontSizeFraction)*this.getHeightOfLine(i)/this.lineHeight-o*(1-this._fontSizeFraction),this.inCompositionMode&&this.renderSelection(t,e),e.fillStyle=this.getValueOfPropertyAt(i,r,\"fill\"),e.globalAlpha=this.__isMousedown?1:this._currentCursorOpacity,e.fillRect(t.left+t.leftOffset-s/2,l+t.top+c,s,o)},renderSelection:function(t,e){for(var n=this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,i=this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd,r=-1!==this.textAlign.indexOf(\"justify\"),o=this.get2DCursorLocation(n),a=this.get2DCursorLocation(i),s=o.lineIndex,l=a.lineIndex,c=o.charIndex<0?0:o.charIndex,u=a.charIndex<0?0:a.charIndex,h=s;h<=l;h++){var d,f=this._getLineLeftOffset(h)||0,p=this.getHeightOfLine(h),g=0,m=0;if(h===s&&(g=this.__charBounds[s][c].left),h>=s&&h<l)m=r&&!this.isEndOfWrapping(h)?this.width:this.getLineWidth(h)||5;else if(h===l)if(0===u)m=this.__charBounds[l][u].left;else{var v=this._getWidthOfCharSpacing();m=this.__charBounds[l][u-1].left+this.__charBounds[l][u-1].width-v}d=p,(this.lineHeight<1||h===l&&this.lineHeight>1)&&(p/=this.lineHeight),this.inCompositionMode?(e.fillStyle=this.compositionColor||\"black\",e.fillRect(t.left+f+g,t.top+t.topOffset+p,m-g,1)):(e.fillStyle=this.selectionColor,e.fillRect(t.left+f+g,t.top+t.topOffset,m-g,p)),t.topOffset+=d}},getCurrentCharFontSize:function(){var t=this._getCurrentCharIndex();return this.getValueOfPropertyAt(t.l,t.c,\"fontSize\")},getCurrentCharColor:function(){var t=this._getCurrentCharIndex();return this.getValueOfPropertyAt(t.l,t.c,\"fill\")},_getCurrentCharIndex:function(){var t=this.get2DCursorLocation(this.selectionStart,!0);return{l:t.lineIndex,c:t.charIndex>0?t.charIndex-1:0}}}),C.IText.fromObject=function(e,n){if(t(e),e.styles)for(var i in e.styles)for(var r in e.styles[i])t(e.styles[i][r]);C.Object._fromObject(\"IText\",e,n,\"text\")}}(),m=C.util.object.clone,C.util.object.extend(C.IText.prototype,{initBehavior:function(){this.initAddedHandler(),this.initRemovedHandler(),this.initCursorSelectionHandlers(),this.initDoubleClickSimulation(),this.mouseMoveHandler=this.mouseMoveHandler.bind(this)},onDeselect:function(){this.isEditing&&this.exitEditing(),this.selected=!1},initAddedHandler:function(){var t=this;this.on(\"added\",function(){var e=t.canvas;e&&(e._hasITextHandlers||(e._hasITextHandlers=!0,t._initCanvasHandlers(e)),e._iTextInstances=e._iTextInstances||[],e._iTextInstances.push(t))})},initRemovedHandler:function(){var t=this;this.on(\"removed\",function(){var e=t.canvas;e&&(e._iTextInstances=e._iTextInstances||[],C.util.removeFromArray(e._iTextInstances,t),0===e._iTextInstances.length&&(e._hasITextHandlers=!1,t._removeCanvasHandlers(e)))})},_initCanvasHandlers:function(t){t._mouseUpITextHandler=function(){t._iTextInstances&&t._iTextInstances.forEach(function(t){t.__isMousedown=!1})},t.on(\"mouse:up\",t._mouseUpITextHandler)},_removeCanvasHandlers:function(t){t.off(\"mouse:up\",t._mouseUpITextHandler)},_tick:function(){this._currentTickState=this._animateCursor(this,1,this.cursorDuration,\"_onTickComplete\")},_animateCursor:function(t,e,n,i){var r;return r={isAborted:!1,abort:function(){this.isAborted=!0}},t.animate(\"_currentCursorOpacity\",e,{duration:n,onComplete:function(){r.isAborted||t[i]()},onChange:function(){t.canvas&&t.selectionStart===t.selectionEnd&&t.renderCursorOrSelection()},abort:function(){return r.isAborted}}),r},_onTickComplete:function(){var t=this;this._cursorTimeout1&&clearTimeout(this._cursorTimeout1),this._cursorTimeout1=setTimeout(function(){t._currentTickCompleteState=t._animateCursor(t,0,this.cursorDuration/2,\"_tick\")},100)},initDelayedCursor:function(t){var e=this,n=t?0:this.cursorDelay;this.abortCursorAnimation(),this._currentCursorOpacity=1,this._cursorTimeout2=setTimeout(function(){e._tick()},n)},abortCursorAnimation:function(){var t=this._currentTickState||this._currentTickCompleteState,e=this.canvas;this._currentTickState&&this._currentTickState.abort(),this._currentTickCompleteState&&this._currentTickCompleteState.abort(),clearTimeout(this._cursorTimeout1),clearTimeout(this._cursorTimeout2),this._currentCursorOpacity=0,t&&e&&e.clearContext(e.contextTop||e.contextContainer)},selectAll:function(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this},getSelectedText:function(){return this._text.slice(this.selectionStart,this.selectionEnd).join(\"\")},findWordBoundaryLeft:function(t){var e=0,n=t-1;if(this._reSpace.test(this._text[n]))for(;this._reSpace.test(this._text[n]);)e++,n--;for(;/\\S/.test(this._text[n])&&n>-1;)e++,n--;return t-e},findWordBoundaryRight:function(t){var e=0,n=t;if(this._reSpace.test(this._text[n]))for(;this._reSpace.test(this._text[n]);)e++,n++;for(;/\\S/.test(this._text[n])&&n<this._text.length;)e++,n++;return t+e},findLineBoundaryLeft:function(t){for(var e=0,n=t-1;!/\\n/.test(this._text[n])&&n>-1;)e++,n--;return t-e},findLineBoundaryRight:function(t){for(var e=0,n=t;!/\\n/.test(this._text[n])&&n<this._text.length;)e++,n++;return t+e},searchWordBoundary:function(t,e){for(var n=this._reSpace.test(this._text[t])?t-1:t,i=this._text[n],r=/[ \\n\\.,;!\\?\\-]/;!r.test(i)&&n>0&&n<this._text.length;)i=this._text[n+=e];return r.test(i)&&\"\\n\"!==i&&(n+=1===e?0:1),n},selectWord:function(t){var e=this.searchWordBoundary(t=t||this.selectionStart,-1),n=this.searchWordBoundary(t,1);this.selectionStart=e,this.selectionEnd=n,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()},selectLine:function(t){var e=this.findLineBoundaryLeft(t=t||this.selectionStart),n=this.findLineBoundaryRight(t);return this.selectionStart=e,this.selectionEnd=n,this._fireSelectionChanged(),this._updateTextarea(),this},enterEditing:function(t){if(!this.isEditing&&this.editable)return this.canvas&&(this.canvas.calcOffset(),this.exitEditingOnOthers(this.canvas)),this.isEditing=!0,this.initHiddenTextarea(t),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick(),this.fire(\"editing:entered\"),this._fireSelectionChanged(),this.canvas?(this.canvas.fire(\"text:editing:entered\",{target:this}),this.initMouseMoveHandler(),this.canvas.requestRenderAll(),this):this},exitEditingOnOthers:function(t){t._iTextInstances&&t._iTextInstances.forEach(function(t){t.selected=!1,t.isEditing&&t.exitEditing()})},initMouseMoveHandler:function(){this.canvas.on(\"mouse:move\",this.mouseMoveHandler)},mouseMoveHandler:function(t){if(this.__isMousedown&&this.isEditing){var e=this.getSelectionStartFromPointer(t.e),n=this.selectionStart,i=this.selectionEnd;(e===this.__selectionStartOnMouseDown&&n!==i||n!==e&&i!==e)&&(e>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=e):(this.selectionStart=e,this.selectionEnd=this.__selectionStartOnMouseDown),this.selectionStart===n&&this.selectionEnd===i||(this.restartCursorIfNeeded(),this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}},_setEditingProps:function(){this.hoverCursor=\"text\",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor=\"text\"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0},fromStringToGraphemeSelection:function(t,e,n){var i=n.slice(0,t),r=C.util.string.graphemeSplit(i).length;if(t===e)return{selectionStart:r,selectionEnd:r};var o=n.slice(t,e);return{selectionStart:r,selectionEnd:r+C.util.string.graphemeSplit(o).length}},fromGraphemeToStringSelection:function(t,e,n){var i=n.slice(0,t).join(\"\").length;return t===e?{selectionStart:i,selectionEnd:i}:{selectionStart:i,selectionEnd:i+n.slice(t,e).join(\"\").length}},_updateTextarea:function(){if(this.cursorOffsetCache={},this.hiddenTextarea){if(!this.inCompositionMode){var t=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=t.selectionStart,this.hiddenTextarea.selectionEnd=t.selectionEnd}this.updateTextareaPosition()}},updateFromTextArea:function(){if(this.hiddenTextarea){this.cursorOffsetCache={},this.text=this.hiddenTextarea.value,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords());var t=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value);this.selectionEnd=this.selectionStart=t.selectionEnd,this.inCompositionMode||(this.selectionStart=t.selectionStart),this.updateTextareaPosition()}},updateTextareaPosition:function(){if(this.selectionStart===this.selectionEnd){var t=this._calcTextareaPosition();this.hiddenTextarea.style.left=t.left,this.hiddenTextarea.style.top=t.top}},_calcTextareaPosition:function(){if(!this.canvas)return{x:1,y:1};var t=this.inCompositionMode?this.compositionStart:this.selectionStart,e=this._getCursorBoundaries(t),n=this.get2DCursorLocation(t),i=this.getValueOfPropertyAt(n.lineIndex,n.charIndex,\"fontSize\")*this.lineHeight,r=e.leftOffset,o=this.calcTransformMatrix(),a={x:e.left+r,y:e.top+e.topOffset+i},s=this.canvas.upperCanvasEl,l=s.width,c=s.height,u=l-i,h=c-i,d=s.clientWidth/l,f=s.clientHeight/c;return a=C.util.transformPoint(a,o),(a=C.util.transformPoint(a,this.canvas.viewportTransform)).x*=d,a.y*=f,a.x<0&&(a.x=0),a.x>u&&(a.x=u),a.y<0&&(a.y=0),a.y>h&&(a.y=h),a.x+=this.canvas._offset.left,a.y+=this.canvas._offset.top,{left:a.x+\"px\",top:a.y+\"px\",fontSize:i+\"px\",charHeight:i}},_saveEditingProps:function(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}},_restoreEditingProps:function(){this._savedProps&&(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor))},exitEditing:function(){var t=this._textBeforeEdit!==this.text;return this.selected=!1,this.isEditing=!1,this.selectionEnd=this.selectionStart,this.hiddenTextarea&&(this.hiddenTextarea.blur&&this.hiddenTextarea.blur(),this.canvas&&this.hiddenTextarea.parentNode.removeChild(this.hiddenTextarea),this.hiddenTextarea=null),this.abortCursorAnimation(),this._restoreEditingProps(),this._currentCursorOpacity=0,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this.fire(\"editing:exited\"),t&&this.fire(\"modified\"),this.canvas&&(this.canvas.off(\"mouse:move\",this.mouseMoveHandler),this.canvas.fire(\"text:editing:exited\",{target:this}),t&&this.canvas.fire(\"object:modified\",{target:this})),this},_removeExtraneousStyles:function(){for(var t in this.styles)this._textLines[t]||delete this.styles[t]},removeStyleFromTo:function(t,e){var n,i,r=this.get2DCursorLocation(t,!0),o=this.get2DCursorLocation(e,!0),a=r.lineIndex,s=r.charIndex,l=o.lineIndex,c=o.charIndex;if(a!==l){if(this.styles[a])for(n=s;n<this._unwrappedTextLines[a].length;n++)delete this.styles[a][n];if(this.styles[l])for(n=c;n<this._unwrappedTextLines[l].length;n++)(i=this.styles[l][n])&&(this.styles[a]||(this.styles[a]={}),this.styles[a][s+n-c]=i);for(n=a+1;n<=l;n++)delete this.styles[n];this.shiftLineStyles(l,a-l)}else if(this.styles[a]){i=this.styles[a];var u,h,d=c-s;for(n=s;n<c;n++)delete i[n];for(h in this.styles[a])(u=parseInt(h,10))>=c&&(i[u-d]=i[h],delete i[h])}},shiftLineStyles:function(t,e){var n=m(this.styles);for(var i in this.styles){var r=parseInt(i,10);r>t&&(this.styles[r+e]=n[r],n[r-e]||delete this.styles[r])}},restartCursorIfNeeded:function(){this._currentTickState&&!this._currentTickState.isAborted&&this._currentTickCompleteState&&!this._currentTickCompleteState.isAborted||this.initDelayedCursor()},insertNewlineStyleObject:function(t,e,n,i){var r,o={},a=!1;for(var s in n||(n=1),this.shiftLineStyles(t,n),this.styles[t]&&(r=this.styles[t][0===e?e:e-1]),this.styles[t]){var l=parseInt(s,10);l>=e&&(a=!0,o[l-e]=this.styles[t][s],delete this.styles[t][s])}for(a?this.styles[t+n]=o:delete this.styles[t+n];n>1;)n--,i&&i[n]?this.styles[t+n]={0:m(i[n])}:r?this.styles[t+n]={0:m(r)}:delete this.styles[t+n];this._forceClearCache=!0},insertCharStyleObject:function(t,e,n,i){this.styles||(this.styles={});var r=this.styles[t],o=r?m(r):{};for(var a in n||(n=1),o){var s=parseInt(a,10);s>=e&&(r[s+n]=o[s],o[s-n]||delete r[s])}if(this._forceClearCache=!0,i)for(;n--;)Object.keys(i[n]).length&&(this.styles[t]||(this.styles[t]={}),this.styles[t][e+n]=m(i[n]));else if(r)for(var l=r[e?e-1:1];l&&n--;)this.styles[t][e+n]=m(l)},insertNewStyleBlock:function(t,e,n){for(var i=this.get2DCursorLocation(e,!0),r=[0],o=0,a=0;a<t.length;a++)\"\\n\"===t[a]?r[++o]=0:r[o]++;for(r[0]>0&&(this.insertCharStyleObject(i.lineIndex,i.charIndex,r[0],n),n=n&&n.slice(r[0]+1)),o&&this.insertNewlineStyleObject(i.lineIndex,i.charIndex+r[0],o),a=1;a<o;a++)r[a]>0?this.insertCharStyleObject(i.lineIndex+a,0,r[a],n):n&&(this.styles[i.lineIndex+a][0]=n[0]),n=n&&n.slice(r[a]+1);r[a]>0&&this.insertCharStyleObject(i.lineIndex+a,0,r[a],n)},setSelectionStartEndWithShift:function(t,e,n){n<=t?(e===t?this._selectionDirection=\"left\":\"right\"===this._selectionDirection&&(this._selectionDirection=\"left\",this.selectionEnd=t),this.selectionStart=n):n>t&&n<e?\"right\"===this._selectionDirection?this.selectionEnd=n:this.selectionStart=n:(e===t?this._selectionDirection=\"right\":\"left\"===this._selectionDirection&&(this._selectionDirection=\"right\",this.selectionStart=e),this.selectionEnd=n)},setSelectionInBoundaries:function(){var t=this.text.length;this.selectionStart>t?this.selectionStart=t:this.selectionStart<0&&(this.selectionStart=0),this.selectionEnd>t?this.selectionEnd=t:this.selectionEnd<0&&(this.selectionEnd=0)}}),C.util.object.extend(C.IText.prototype,{initDoubleClickSimulation:function(){this.__lastClickTime=+new Date,this.__lastLastClickTime=+new Date,this.__lastPointer={},this.on(\"mousedown\",this.onMouseDown)},onMouseDown:function(t){if(this.canvas){this.__newClickTime=+new Date;var e=t.pointer;this.isTripleClick(e)&&(this.fire(\"tripleclick\",t),this._stopEvent(t.e)),this.__lastLastClickTime=this.__lastClickTime,this.__lastClickTime=this.__newClickTime,this.__lastPointer=e,this.__lastIsEditing=this.isEditing,this.__lastSelected=this.selected}},isTripleClick:function(t){return this.__newClickTime-this.__lastClickTime<500&&this.__lastClickTime-this.__lastLastClickTime<500&&this.__lastPointer.x===t.x&&this.__lastPointer.y===t.y},_stopEvent:function(t){t.preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation()},initCursorSelectionHandlers:function(){this.initMousedownHandler(),this.initMouseupHandler(),this.initClicks()},initClicks:function(){this.on(\"mousedblclick\",function(t){this.selectWord(this.getSelectionStartFromPointer(t.e))}),this.on(\"tripleclick\",function(t){this.selectLine(this.getSelectionStartFromPointer(t.e))})},_mouseDownHandler:function(t){!this.canvas||!this.editable||t.e.button&&1!==t.e.button||(this.__isMousedown=!0,this.selected&&this.setCursorByClick(t.e),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection()))},_mouseDownHandlerBefore:function(t){!this.canvas||!this.editable||t.e.button&&1!==t.e.button||this===this.canvas._activeObject&&(this.selected=!0)},initMousedownHandler:function(){this.on(\"mousedown\",this._mouseDownHandler),this.on(\"mousedown:before\",this._mouseDownHandlerBefore)},initMouseupHandler:function(){this.on(\"mouseup\",this.mouseUpHandler)},mouseUpHandler:function(t){if(this.__isMousedown=!1,!(!this.editable||this.group||t.transform&&t.transform.actionPerformed||t.e.button&&1!==t.e.button)){if(this.canvas){var e=this.canvas._activeObject;if(e&&e!==this)return}this.__lastSelected&&!this.__corner?(this.selected=!1,this.__lastSelected=!1,this.enterEditing(t.e),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection()):this.selected=!0}},setCursorByClick:function(t){var e=this.getSelectionStartFromPointer(t);t.shiftKey?this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,e):(this.selectionStart=e,this.selectionEnd=e),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())},getSelectionStartFromPointer:function(t){for(var e=this.getLocalPointer(t),n=0,i=0,r=0,o=0,a=0,s=0,l=this._textLines.length;s<l&&r<=e.y;s++)r+=this.getHeightOfLine(s)*this.scaleY,a=s,s>0&&(o+=this._textLines[s-1].length+this.missingNewlineOffset(s-1));i=this._getLineLeftOffset(a)*this.scaleX;for(var c=0,u=this._textLines[a].length;c<u&&(n=i,(i+=this.__charBounds[a][c].kernedWidth*this.scaleX)<=e.x);c++)o++;return this._getNewSelectionStartFromOffset(e,n,i,o,u)},_getNewSelectionStartFromOffset:function(t,e,n,i,r){var o=n-t.x,a=i+(o>t.x-e||o<0?0:1);return this.flipX&&(a=r-a),a>this._text.length&&(a=this._text.length),a}}),C.util.object.extend(C.IText.prototype,{initHiddenTextarea:function(){this.hiddenTextarea=C.document.createElement(\"textarea\"),this.hiddenTextarea.setAttribute(\"autocapitalize\",\"off\"),this.hiddenTextarea.setAttribute(\"autocorrect\",\"off\"),this.hiddenTextarea.setAttribute(\"autocomplete\",\"off\"),this.hiddenTextarea.setAttribute(\"spellcheck\",\"false\"),this.hiddenTextarea.setAttribute(\"data-fabric-hiddentextarea\",\"\"),this.hiddenTextarea.setAttribute(\"wrap\",\"off\");var t=this._calcTextareaPosition();this.hiddenTextarea.style.cssText=\"position: absolute; top: \"+t.top+\"; left: \"+t.left+\"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; padding\\uff70top: \"+t.fontSize+\";\",C.document.body.appendChild(this.hiddenTextarea),C.util.addListener(this.hiddenTextarea,\"keydown\",this.onKeyDown.bind(this)),C.util.addListener(this.hiddenTextarea,\"keyup\",this.onKeyUp.bind(this)),C.util.addListener(this.hiddenTextarea,\"input\",this.onInput.bind(this)),C.util.addListener(this.hiddenTextarea,\"copy\",this.copy.bind(this)),C.util.addListener(this.hiddenTextarea,\"cut\",this.copy.bind(this)),C.util.addListener(this.hiddenTextarea,\"paste\",this.paste.bind(this)),C.util.addListener(this.hiddenTextarea,\"compositionstart\",this.onCompositionStart.bind(this)),C.util.addListener(this.hiddenTextarea,\"compositionupdate\",this.onCompositionUpdate.bind(this)),C.util.addListener(this.hiddenTextarea,\"compositionend\",this.onCompositionEnd.bind(this)),!this._clickHandlerInitialized&&this.canvas&&(C.util.addListener(this.canvas.upperCanvasEl,\"click\",this.onClick.bind(this)),this._clickHandlerInitialized=!0)},keysMap:{9:\"exitEditing\",27:\"exitEditing\",33:\"moveCursorUp\",34:\"moveCursorDown\",35:\"moveCursorRight\",36:\"moveCursorLeft\",37:\"moveCursorLeft\",38:\"moveCursorUp\",39:\"moveCursorRight\",40:\"moveCursorDown\"},ctrlKeysMapUp:{67:\"copy\",88:\"cut\"},ctrlKeysMapDown:{65:\"selectAll\"},onClick:function(){this.hiddenTextarea&&this.hiddenTextarea.focus()},onKeyDown:function(t){if(this.isEditing&&!this.inCompositionMode){if(t.keyCode in this.keysMap)this[this.keysMap[t.keyCode]](t);else{if(!(t.keyCode in this.ctrlKeysMapDown&&(t.ctrlKey||t.metaKey)))return;this[this.ctrlKeysMapDown[t.keyCode]](t)}t.stopImmediatePropagation(),t.preventDefault(),t.keyCode>=33&&t.keyCode<=40?(this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}},onKeyUp:function(t){!this.isEditing||this._copyDone||this.inCompositionMode?this._copyDone=!1:t.keyCode in this.ctrlKeysMapUp&&(t.ctrlKey||t.metaKey)&&(this[this.ctrlKeysMapUp[t.keyCode]](t),t.stopImmediatePropagation(),t.preventDefault(),this.canvas&&this.canvas.requestRenderAll())},onInput:function(t){var e=this.fromPaste;if(this.fromPaste=!1,t&&t.stopPropagation(),this.isEditing){var n,i,r=this._splitTextIntoLines(this.hiddenTextarea.value).graphemeText,o=this._text.length,a=r.length,s=a-o;if(\"\"===this.hiddenTextarea.value)return this.styles={},this.updateFromTextArea(),this.fire(\"changed\"),void(this.canvas&&(this.canvas.fire(\"text:changed\",{target:this}),this.canvas.requestRenderAll()));var l=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value),c=this.selectionStart>l.selectionStart;this.selectionStart!==this.selectionEnd?(n=this._text.slice(this.selectionStart,this.selectionEnd),s+=this.selectionEnd-this.selectionStart):a<o&&(n=c?this._text.slice(this.selectionEnd+s,this.selectionEnd):this._text.slice(this.selectionStart,this.selectionStart-s)),i=r.slice(l.selectionEnd-s,l.selectionEnd),n&&n.length&&(this.selectionStart!==this.selectionEnd?this.removeStyleFromTo(this.selectionStart,this.selectionEnd):c?this.removeStyleFromTo(this.selectionEnd-n.length,this.selectionEnd):this.removeStyleFromTo(this.selectionEnd,this.selectionEnd+n.length)),i.length&&(e&&i.join(\"\")===C.copiedText&&!C.disableStyleCopyPaste?this.insertNewStyleBlock(i,this.selectionStart,C.copiedTextStyle):this.insertNewStyleBlock(i,this.selectionStart)),this.updateFromTextArea(),this.fire(\"changed\"),this.canvas&&(this.canvas.fire(\"text:changed\",{target:this}),this.canvas.requestRenderAll())}},onCompositionStart:function(){this.inCompositionMode=!0},onCompositionEnd:function(){this.inCompositionMode=!1},onCompositionUpdate:function(t){this.compositionStart=t.target.selectionStart,this.compositionEnd=t.target.selectionEnd,this.updateTextareaPosition()},copy:function(){this.selectionStart!==this.selectionEnd&&(C.copiedText=this.getSelectedText(),C.copiedTextStyle=C.disableStyleCopyPaste?null:this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0)},paste:function(){this.fromPaste=!0},_getClipboardData:function(t){return t&&t.clipboardData||C.window.clipboardData},_getWidthBeforeCursor:function(t,e){var n,i=this._getLineLeftOffset(t);return e>0&&(i+=(n=this.__charBounds[t][e-1]).left+n.width),i},getDownCursorOffset:function(t,e){var n=this._getSelectionForOffset(t,e),i=this.get2DCursorLocation(n),r=i.lineIndex;if(r===this._textLines.length-1||t.metaKey||34===t.keyCode)return this._text.length-n;var o=i.charIndex,a=this._getWidthBeforeCursor(r,o),s=this._getIndexOnLine(r+1,a);return this._textLines[r].slice(o).length+s+1+this.missingNewlineOffset(r)},_getSelectionForOffset:function(t,e){return t.shiftKey&&this.selectionStart!==this.selectionEnd&&e?this.selectionEnd:this.selectionStart},getUpCursorOffset:function(t,e){var n=this._getSelectionForOffset(t,e),i=this.get2DCursorLocation(n),r=i.lineIndex;if(0===r||t.metaKey||33===t.keyCode)return-n;var o=i.charIndex,a=this._getWidthBeforeCursor(r,o),s=this._getIndexOnLine(r-1,a),l=this._textLines[r].slice(0,o),c=this.missingNewlineOffset(r-1);return-this._textLines[r-1].length+s-l.length+(1-c)},_getIndexOnLine:function(t,e){for(var n,i,r=this._textLines[t],o=this._getLineLeftOffset(t),a=0,s=0,l=r.length;s<l;s++)if((o+=n=this.__charBounds[t][s].width)>e){i=!0;var c=o,u=Math.abs(o-n-e);a=Math.abs(c-e)<u?s:s-1;break}return i||(a=r.length-1),a},moveCursorDown:function(t){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown(\"Down\",t)},moveCursorUp:function(t){0===this.selectionStart&&0===this.selectionEnd||this._moveCursorUpOrDown(\"Up\",t)},_moveCursorUpOrDown:function(t,e){var n=this[\"get\"+t+\"CursorOffset\"](e,\"right\"===this._selectionDirection);e.shiftKey?this.moveCursorWithShift(n):this.moveCursorWithoutShift(n),0!==n&&(this.setSelectionInBoundaries(),this.abortCursorAnimation(),this._currentCursorOpacity=1,this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorWithShift:function(t){return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,\"left\"===this._selectionDirection?this.selectionStart+t:this.selectionEnd+t),0!==t},moveCursorWithoutShift:function(t){return t<0?(this.selectionStart+=t,this.selectionEnd=this.selectionStart):(this.selectionEnd+=t,this.selectionStart=this.selectionEnd),0!==t},moveCursorLeft:function(t){0===this.selectionStart&&0===this.selectionEnd||this._moveCursorLeftOrRight(\"Left\",t)},_move:function(t,e,n){var i;if(t.altKey)i=this[\"findWordBoundary\"+n](this[e]);else{if(!t.metaKey&&35!==t.keyCode&&36!==t.keyCode)return this[e]+=\"Left\"===n?-1:1,!0;i=this[\"findLineBoundary\"+n](this[e])}if(void 0!==typeof i&&this[e]!==i)return this[e]=i,!0},_moveLeft:function(t,e){return this._move(t,e,\"Left\")},_moveRight:function(t,e){return this._move(t,e,\"Right\")},moveCursorLeftWithoutShift:function(t){var e=!0;return this._selectionDirection=\"left\",this.selectionEnd===this.selectionStart&&0!==this.selectionStart&&(e=this._moveLeft(t,\"selectionStart\")),this.selectionEnd=this.selectionStart,e},moveCursorLeftWithShift:function(t){return\"right\"===this._selectionDirection&&this.selectionStart!==this.selectionEnd?this._moveLeft(t,\"selectionEnd\"):0!==this.selectionStart?(this._selectionDirection=\"left\",this._moveLeft(t,\"selectionStart\")):void 0},moveCursorRight:function(t){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight(\"Right\",t)},_moveCursorLeftOrRight:function(t,e){var n=\"moveCursor\"+t+\"With\";this._currentCursorOpacity=1,this[n+=e.shiftKey?\"Shift\":\"outShift\"](e)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorRightWithShift:function(t){return\"left\"===this._selectionDirection&&this.selectionStart!==this.selectionEnd?this._moveRight(t,\"selectionStart\"):this.selectionEnd!==this._text.length?(this._selectionDirection=\"right\",this._moveRight(t,\"selectionEnd\")):void 0},moveCursorRightWithoutShift:function(t){var e=!0;return this._selectionDirection=\"right\",this.selectionStart===this.selectionEnd?(e=this._moveRight(t,\"selectionStart\"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,e},removeChars:function(t,e){void 0===e&&(e=t+1),this.removeStyleFromTo(t,e),this._text.splice(t,e-t),this.text=this._text.join(\"\"),this.set(\"dirty\",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()},insertChars:function(t,e,n,i){void 0===i&&(i=n),i>n&&this.removeStyleFromTo(n,i);var r=C.util.string.graphemeSplit(t);this.insertNewStyleBlock(r,n,e),this._text=[].concat(this._text.slice(0,n),r,this._text.slice(i)),this.text=this._text.join(\"\"),this.set(\"dirty\",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()}}),v=C.util.toFixed,y=/  +/g,C.util.object.extend(C.Text.prototype,{_toSVG:function(){var t=this._getSVGLeftTopOffsets(),e=this._getSVGTextAndBg(t.textTop,t.textLeft);return this._wrapSVGTextAndBg(e)},toSVG:function(t){return this._createBaseSVGMarkup(this._toSVG(),{reviver:t,noStyle:!0,withShadow:!0})},_getSVGLeftTopOffsets:function(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}},_wrapSVGTextAndBg:function(t){var e=this.getSvgTextDecoration(this);return[t.textBgRects.join(\"\"),'\\t\\t<text xml:space=\"preserve\" ',this.fontFamily?'font-family=\"'+this.fontFamily.replace(/\"/g,\"'\")+'\" ':\"\",this.fontSize?'font-size=\"'+this.fontSize+'\" ':\"\",this.fontStyle?'font-style=\"'+this.fontStyle+'\" ':\"\",this.fontWeight?'font-weight=\"'+this.fontWeight+'\" ':\"\",e?'text-decoration=\"'+e+'\" ':\"\",'style=\"',this.getSvgStyles(!0),'\"',this.addPaintOrder(),\" >\",t.textSpans.join(\"\"),\"</text>\\n\"]},_getSVGTextAndBg:function(t,e){var n,i=[],r=[],o=t;this._setSVGBg(r);for(var a=0,s=this._textLines.length;a<s;a++)n=this._getLineLeftOffset(a),(this.textBackgroundColor||this.styleHas(\"textBackgroundColor\",a))&&this._setSVGTextLineBg(r,a,e+n,o),this._setSVGTextLineText(i,a,e+n,o),o+=this.getHeightOfLine(a);return{textSpans:i,textBgRects:r}},_createTextCharSpan:function(t,e,n,i){var r=t!==t.trim()||t.match(y),o=this.getSvgSpanStyles(e,r),a=o?'style=\"'+o+'\"':\"\",s=e.deltaY,l=\"\",c=C.Object.NUM_FRACTION_DIGITS;return s&&(l=' dy=\"'+v(s,c)+'\" '),['<tspan x=\"',v(n,c),'\" y=\"',v(i,c),'\" ',l,a,\">\",C.util.string.escapeXml(t),\"</tspan>\"].join(\"\")},_setSVGTextLineText:function(t,e,n,i){var r,o,a,s,l,c=this.getHeightOfLine(e),u=-1!==this.textAlign.indexOf(\"justify\"),h=\"\",d=0,f=this._textLines[e];i+=c*(1-this._fontSizeFraction)/this.lineHeight;for(var p=0,g=f.length-1;p<=g;p++)l=p===g||this.charSpacing,h+=f[p],a=this.__charBounds[e][p],0===d?(n+=a.kernedWidth-a.width,d+=a.width):d+=a.kernedWidth,u&&!l&&this._reSpaceAndTab.test(f[p])&&(l=!0),l||(r=r||this.getCompleteStyleDeclaration(e,p),o=this.getCompleteStyleDeclaration(e,p+1),l=this._hasStyleChangedForSvg(r,o)),l&&(s=this._getStyleDeclaration(e,p)||{},t.push(this._createTextCharSpan(h,s,n,i)),h=\"\",r=o,n+=d,d=0)},_pushTextBgRect:function(t,e,n,i,r,o){var a=C.Object.NUM_FRACTION_DIGITS;t.push(\"\\t\\t<rect \",this._getFillAttributes(e),' x=\"',v(n,a),'\" y=\"',v(i,a),'\" width=\"',v(r,a),'\" height=\"',v(o,a),'\"></rect>\\n')},_setSVGTextLineBg:function(t,e,n,i){for(var r,o,a=this._textLines[e],s=this.getHeightOfLine(e)/this.lineHeight,l=0,c=0,u=this.getValueOfPropertyAt(e,0,\"textBackgroundColor\"),h=0,d=a.length;h<d;h++)r=this.__charBounds[e][h],(o=this.getValueOfPropertyAt(e,h,\"textBackgroundColor\"))!==u?(u&&this._pushTextBgRect(t,u,n+c,i,l,s),c=r.left,l=r.width,u=o):l+=r.kernedWidth;o&&this._pushTextBgRect(t,o,n+c,i,l,s)},_getFillAttributes:function(t){var e=t&&\"string\"==typeof t?new C.Color(t):\"\";return e&&e.getSource()&&1!==e.getAlpha()?'opacity=\"'+e.getAlpha()+'\" fill=\"'+e.setAlpha(1).toRgb()+'\"':'fill=\"'+t+'\"'},_getSVGLineTopOffset:function(t){for(var e,n=0,i=0;i<t;i++)n+=this.getHeightOfLine(i);return e=this.getHeightOfLine(i),{lineTop:n,offset:(this._fontSizeMult-this._fontSizeFraction)*e/(this.lineHeight*this._fontSizeMult)}},getSvgStyles:function(t){return C.Object.prototype.getSvgStyles.call(this,t)+\" white-space: pre;\"}}),function(t){\"use strict\";var n=e.fabric||(e.fabric={});n.Textbox=n.util.createClass(n.IText,n.Observable,{type:\"textbox\",minWidth:20,dynamicMinWidth:2,__cachedLines:null,lockScalingFlip:!0,noScaleCache:!1,_dimensionAffectingProps:n.Text.prototype._dimensionAffectingProps.concat(\"width\"),_wordJoiners:/[ \\t\\r]/,splitByGrapheme:!1,initDimensions:function(){this.__skipDimension||(this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set(\"width\",this.dynamicMinWidth),-1!==this.textAlign.indexOf(\"justify\")&&this.enlargeSpaces(),this.height=this.calcTextHeight(),this.saveState({propertySet:\"_dimensionAffectingProps\"}))},_generateStyleMap:function(t){for(var e=0,n=0,i=0,r={},o=0;o<t.graphemeLines.length;o++)\"\\n\"===t.graphemeText[i]&&o>0?(n=0,i++,e++):!this.splitByGrapheme&&this._reSpaceAndTab.test(t.graphemeText[i])&&o>0&&(n++,i++),r[o]={line:e,offset:n},i+=t.graphemeLines[o].length,n+=t.graphemeLines[o].length;return r},styleHas:function(t,e){if(this._styleMap&&!this.isWrapping){var i=this._styleMap[e];i&&(e=i.line)}return n.Text.prototype.styleHas.call(this,t,e)},isEmptyStyles:function(t){var e,n,i=0,r=!1,o=this._styleMap[t],a=this._styleMap[t+1];for(var s in o&&(t=o.line,i=o.offset),a&&(r=a.line===t,e=a.offset),n=void 0===t?this.styles:{line:this.styles[t]})for(var l in n[s])if(l>=i&&(!r||l<e))for(var c in n[s][l])return!1;return!0},_getStyleDeclaration:function(t,e){if(this._styleMap&&!this.isWrapping){var n=this._styleMap[t];if(!n)return null;t=n.line,e=n.offset+e}return this.callSuper(\"_getStyleDeclaration\",t,e)},_setStyleDeclaration:function(t,e,n){var i=this._styleMap[t];this.styles[t=i.line][e=i.offset+e]=n},_deleteStyleDeclaration:function(t,e){var n=this._styleMap[t];delete this.styles[t=n.line][e=n.offset+e]},_getLineStyle:function(t){return!!this.styles[this._styleMap[t].line]},_setLineStyle:function(t){this.styles[this._styleMap[t].line]={}},_wrapText:function(t,e){var n,i=[];for(this.isWrapping=!0,n=0;n<t.length;n++)i=i.concat(this._wrapLine(t[n],n,e));return this.isWrapping=!1,i},_measureWord:function(t,e,n){var i,r=0;n=n||0;for(var o=0,a=t.length;o<a;o++)r+=this._getGraphemeBox(t[o],e,o+n,i,!0).kernedWidth,i=t[o];return r},_wrapLine:function(t,e,i,r){var o=0,a=this.splitByGrapheme,s=[],l=[],c=a?n.util.string.graphemeSplit(t):t.split(this._wordJoiners),u=\"\",h=0,d=a?\"\":\" \",f=0,p=0,g=0,m=!0,v=a?0:this._getWidthOfCharSpacing();r=r||0,0===c.length&&c.push([]),i-=r;for(var y=0;y<c.length;y++)u=a?c[y]:n.util.string.graphemeSplit(c[y]),f=this._measureWord(u,e,h),h+=u.length,(o+=p+f-v)>=i&&!m?(s.push(l),l=[],o=f,m=!0):o+=v,m||a||l.push(d),l=l.concat(u),p=this._measureWord([d],e,h),h++,m=!1,f>g&&(g=f);return y&&s.push(l),g+r>this.dynamicMinWidth&&(this.dynamicMinWidth=g-v+r),s},isEndOfWrapping:function(t){return!this._styleMap[t+1]||this._styleMap[t+1].line!==this._styleMap[t].line},missingNewlineOffset:function(t){return this.splitByGrapheme?this.isEndOfWrapping(t)?1:0:1},_splitTextIntoLines:function(t){for(var e=n.Text.prototype._splitTextIntoLines.call(this,t),i=this._wrapText(e.lines,this.width),r=new Array(i.length),o=0;o<i.length;o++)r[o]=i[o].join(\"\");return e.lines=r,e.graphemeLines=i,e},getMinWidth:function(){return Math.max(this.minWidth,this.dynamicMinWidth)},_removeExtraneousStyles:function(){var t={};for(var e in this._styleMap)this._textLines[e]&&(t[this._styleMap[e].line]=1);for(var e in this.styles)t[e]||delete this.styles[e]},toObject:function(t){return this.callSuper(\"toObject\",[\"minWidth\",\"splitByGrapheme\"].concat(t))}}),n.Textbox.fromObject=function(t,e){return n.Object._fromObject(\"Textbox\",t,e,\"text\")}}()},SuO2:function(t,e,n){var i;i=function(){return function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={exports:{},id:i,loaded:!1};return t[i].call(r.exports,r,r.exports,n),r.loaded=!0,r.exports}return n.m=t,n.c=e,n.p=\"dist\",n(0)}([function(t,e,n){\"use strict\";var i={},r=n(1),o=r.extend;o(i,r),o(i,n(3)),o(i,n(2)),o(i,n(4)),o(i,n(5)),o(i,n(6)),o(i,n(7)),o(i,n(8)),o(i,n(9)),i.browser=n(10),i.popup=n(11),i.formatDate=n(12),i.defineClass=n(13),i.defineModule=n(14),i.defineNamespace=n(15),i.CustomEvents=n(16),i.Enum=n(17),i.ExMap=n(18),i.HashMap=n(20),i.Map=n(19),t.exports=i},function(t,e,n){\"use strict\";var i=n(2),r=n(3),o=0;function a(t,e){var n,o=[],s=[];if(isNaN(t)&&isNaN(e)&&i.isNumber(t)&&i.isNumber(e))return!0;if(t===e)return!0;if(i.isFunction(t)&&i.isFunction(e)||t instanceof Date&&e instanceof Date||t instanceof RegExp&&e instanceof RegExp||t instanceof String&&e instanceof String||t instanceof Number&&e instanceof Number)return t.toString()===e.toString();if(!(t instanceof Object&&e instanceof Object))return!1;if(t.isPrototypeOf(e)||e.isPrototypeOf(t)||t.constructor!==e.constructor||t.prototype!==e.prototype)return!1;if(r.inArray(t,o)>-1||r.inArray(e,s)>-1)return!1;for(n in e){if(e.hasOwnProperty(n)!==t.hasOwnProperty(n))return!1;if(typeof e[n]!=typeof t[n])return!1}for(n in t){if(e.hasOwnProperty(n)!==t.hasOwnProperty(n))return!1;if(typeof e[n]!=typeof t[n])return!1;if(\"object\"==typeof t[n]||\"function\"==typeof t[n]){if(o.push(t),s.push(e),!a(t[n],e[n]))return!1;o.pop(),s.pop()}else if(t[n]!==e[n])return!1}return!0}function s(t,e){for(var n=arguments,r=n[0],o=1,a=n.length;o<a;o+=1){if(i.isUndefined(r)||i.isNull(r))return;r=r[n[o]]}return r}t.exports={extend:function(t,e){var n,i,r,o,a=Object.prototype.hasOwnProperty;for(r=1,o=arguments.length;r<o;r+=1)for(i in n=arguments[r])a.call(n,i)&&(t[i]=n[i]);return t},stamp:function(t){return t.__fe_id||(t.__fe_id=o+=1),t.__fe_id},hasStamp:function(t){return i.isExisty(s(t,\"__fe_id\"))},resetLastId:function(){o=0},keys:Object.prototype.keys||function(t){var e,n=[];for(e in t)t.hasOwnProperty(e)&&n.push(e);return n},compareJSON:function(t){var e=arguments.length,n=1;if(e<1)return!0;for(;n<e;n+=1)if(!a(t,arguments[n]))return!1;return!0},pick:s}},function(t,e){\"use strict\";var n=Object.prototype.toString;function i(t){return!r(t)&&!o(t)}function r(t){return void 0===t}function o(t){return null===t}function a(t){return i(t)&&!1!==t}function s(t){return i(t)&&(\"[object Arguments]\"===n.call(t)||!!t.callee)}function l(t){return t instanceof Array}function c(t){return t===Object(t)}function u(t){return t instanceof Function}function h(t){return\"string\"==typeof t||t instanceof String}function d(t){return!(i(t)&&!function(t){return h(t)&&\"\"===t}(t)&&(l(t)||s(t)?0!==t.length:c(t)&&!u(t)&&function(t){var e;for(e in t)if(t.hasOwnProperty(e))return!0;return!1}(t)))}t.exports={isExisty:i,isUndefined:r,isNull:o,isTruthy:a,isFalsy:function(t){return!a(t)},isArguments:s,isArray:l,isArraySafe:function(t){return\"[object Array]\"===n.call(t)},isObject:c,isFunction:u,isFunctionSafe:function(t){return\"[object Function]\"===n.call(t)},isNumber:function(t){return\"number\"==typeof t||t instanceof Number},isNumberSafe:function(t){return\"[object Number]\"===n.call(t)},isDate:function(t){return t instanceof Date},isDateSafe:function(t){return\"[object Date]\"===n.call(t)},isString:h,isStringSafe:function(t){return\"[object String]\"===n.call(t)},isBoolean:function(t){return\"boolean\"==typeof t||t instanceof Boolean},isBooleanSafe:function(t){return\"[object Boolean]\"===n.call(t)},isHTMLNode:function(t){return\"object\"==typeof HTMLElement?t&&(t instanceof HTMLElement||!!t.nodeType):!(!t||!t.nodeType)},isHTMLTag:function(t){return\"object\"==typeof HTMLElement?t&&t instanceof HTMLElement:!(!t||!t.nodeType||1!==t.nodeType)},isEmpty:d,isNotEmpty:function(t){return!d(t)}}},function(t,e,n){\"use strict\";var i=n(4),r=n(2),o=Array.prototype.slice;t.exports={inArray:function(t,e,n){var i,o;if(n=n||0,!r.isArray(e))return-1;if(Array.prototype.indexOf)return Array.prototype.indexOf.call(e,t,n);for(o=e.length,i=n;n>=0&&i<o;i+=1)if(e[i]===t)return i;return-1},range:function(t,e,n){var i,o=[];for(r.isUndefined(e)&&(e=t||0,t=0),e*=i=(n=n||1)<0?-1:1;t*i<e;t+=n)o.push(t);return o},zip:function(){var t=o.call(arguments),e=[];return i.forEach(t,function(t){i.forEach(t,function(t,n){e[n]||(e[n]=[]),e[n].push(t)})}),e}}},function(t,e,n){\"use strict\";var i=n(2),r=n(1);function o(t,e,n){var i=0,r=t.length;for(n=n||null;i<r&&!1!==e.call(n,t[i],i,t);i+=1);}function a(t,e,n){var i;for(i in n=n||null,t)if(t.hasOwnProperty(i)&&!1===e.call(n,t[i],i,t))break}function s(t,e,n){i.isArray(t)?o(t,e,n):a(t,e,n)}function l(t,e,n){var i=[];return n=n||null,s(t,function(){i.push(e.apply(n,arguments))}),i}t.exports={forEachOwnProperties:a,forEachArray:o,forEach:s,toArray:function(t){var e;try{e=Array.prototype.slice.call(t)}catch(n){e=[],o(t,function(t){e.push(t)})}return e},map:l,reduce:function(t,e,n){var o,a,s,l=0;for(n=n||null,i.isArray(t)?(a=t.length,s=t[l]):(a=(o=r.keys(t)).length,s=t[o[l+=1]]),l+=1;l<a;l+=1)s=e.call(n,s,t[o?o[l]:l]);return s},filter:function(t,e,n){var r,o;if(n=n||null,!i.isObject(t)||!i.isFunction(e))throw new Error(\"wrong parameter\");return i.isArray(t)?(r=[],o=function(t,e){t.push(e[0])}):(r={},o=function(t,e){t[e[1]]=e[0]}),s(t,function(){e.apply(n,arguments)&&o(r,arguments)},n),r},pluck:function(t,e){return l(t,function(t){return t[e]})}}},function(t,e){\"use strict\";t.exports={bind:function(t,e){var n,i=Array.prototype.slice;return t.bind?t.bind.apply(t,i.call(arguments,1)):(n=i.call(arguments,2),function(){return t.apply(e,n.length?n.concat(i.call(arguments)):arguments)})}}},function(t,e){\"use strict\";function n(t){function e(){}return e.prototype=t,new e}t.exports={createObject:n,inherit:function(t,e){var i=n(e.prototype);i.constructor=t,t.prototype=i}}},function(t,e,n){\"use strict\";var i=n(4),r=n(1);t.exports={decodeHTMLEntity:function(t){var e={\"&quot;\":'\"',\"&amp;\":\"&\",\"&lt;\":\"<\",\"&gt;\":\">\",\"&#39;\":\"'\",\"&nbsp;\":\" \"};return t.replace(/&amp;|&lt;|&gt;|&quot;|&#39;|&nbsp;/g,function(t){return e[t]?e[t]:t})},encodeHTMLEntity:function(t){var e={'\"':\"quot\",\"&\":\"amp\",\"<\":\"lt\",\">\":\"gt\",\"'\":\"#39\"};return t.replace(/[<>&\"']/g,function(t){return e[t]?\"&\"+e[t]+\";\":t})},hasEncodableString:function(t){return/[<>&\"']/.test(t)},getDuplicatedChar:function(t,e){for(var n,o=0,a=t.length,s={};o<a;o+=1)s[n=t.charAt(o)]=1;for(o=0,a=e.length;o<a;o+=1)s[n=e.charAt(o)]&&(s[n]+=1);return s=i.filter(s,function(t){return t>1}),(s=r.keys(s).sort()).join(\"\")}}},function(t,e){\"use strict\";var n={},i=Array.prototype.slice;n.timestamp=function(){return Number(new Date)},n.debounce=function(t,e){var n,r;return e=e||0,function(){r=i.call(arguments),window.clearTimeout(n),n=window.setTimeout(function(){t.apply(null,r)},e)}},n.throttle=function(t,e){var r,o,a,s,l=!0,c=function(e){t.apply(null,e),r=null};function u(){if(s=i.call(arguments),l)return c(s),void(l=!1);a=n.timestamp(),r=r||a,o(s),a-r>=e&&c(s)}return o=n.debounce(c,e=e||0),u.reset=function(){l=!0,r=null},u},t.exports=n},function(t,e,n){\"use strict\";var i=n(1),r=n(4),o=n(2);function a(t,e){var n=r.map(i.keys(e),function(t,n){return(0===n?\"\":\"&\")+t+\"=\"+e[t]}).join(\"\"),o=document.createElement(\"img\");return o.src=t+\"?\"+n,o.style.display=\"none\",document.body.appendChild(o),document.body.removeChild(o),o}t.exports={imagePing:a,sendHostname:function(t,e){var n=location.hostname,i=\"TOAST UI \"+t+\" for \"+n+\": Statistics\",r=window.localStorage.getItem(i);(o.isUndefined(window.tui)||!1!==window.tui.usageStatistics)&&(r&&!function(t){return(new Date).getTime()-t>6048e5}(r)||(window.localStorage.setItem(i,(new Date).getTime()),setTimeout(function(){\"interactive\"!==document.readyState&&\"complete\"!==document.readyState||a(\"https://www.google-analytics.com/collect\",{v:1,t:\"event\",tid:e,cid:n,dp:n,dh:t,el:t,ec:\"use\"})},1e3)))}}},function(t,e){\"use strict\";var n,i,r,o,a,s,l,c,u,h,d={chrome:!1,firefox:!1,safari:!1,msie:!1,edge:!1,others:!1,version:0};window&&window.navigator&&(o=(r=window.navigator).appName.replace(/\\s/g,\"_\"),a=r.userAgent,s=/MSIE\\s([0-9]+[.0-9]*)/,l=/Trident.*rv:11\\./,c=/Edge\\/(\\d+)\\./,u={firefox:/Firefox\\/(\\d+)\\./,chrome:/Chrome\\/(\\d+)\\./,safari:/Version\\/([\\d.]+).*Safari\\/(\\d+)/},(h={Microsoft_Internet_Explorer:function(){var t=a.match(s);t?(d.msie=!0,d.version=parseFloat(t[1])):d.others=!0},Netscape:function(){var t=!1;if(l.exec(a))d.msie=!0,d.version=11,t=!0;else if(c.exec(a))d.edge=!0,d.version=a.match(c)[1],t=!0;else for(n in u)if(u.hasOwnProperty(n)&&(i=a.match(u[n]))&&i.length>1){d[n]=t=!0,d.version=parseFloat(i[1]||0);break}t||(d.others=!0)}})[o]&&h[o]()),t.exports=d},function(t,e,n){\"use strict\";var i=n(4),r=n(2),o=n(5),a=n(10),s=n(1),l=0;function c(){this.openedPopup={},this.closeWithParentPopup={},this.postBridgeUrl=\"\"}c.prototype.getPopupList=function(t){return r.isExisty(t)?this.openedPopup[t]:this.openedPopup},c.prototype.openPopup=function(t,e){var n,i,c;if((e=s.extend({popupName:\"popup_\"+l+\"_\"+Number(new Date),popupOptionStr:\"\",useReload:!0,closeWithParent:!0,method:\"get\",param:{}},e||{})).method=e.method.toUpperCase(),this.postBridgeUrl=e.postBridgeUrl||this.postBridgeUrl,c=\"POST\"===e.method&&e.param&&a.msie&&11===a.version,!r.isExisty(t))throw new Error(\"Popup#open() need popup url.\");l+=1,e.param&&(\"GET\"===e.method?t=t+(/\\?/.test(t)?\"&\":\"?\")+this._parameterize(e.param):\"POST\"===e.method&&(c||(i=this.createForm(t,e.param,e.method,e.popupName),t=\"about:blank\"))),r.isExisty(n=this.openedPopup[e.popupName])?n.closed?this.openedPopup[e.popupName]=n=this._open(c,e.param,t,e.popupName,e.popupOptionStr):(e.useReload&&n.location.replace(t),n.focus()):this.openedPopup[e.popupName]=n=this._open(c,e.param,t,e.popupName,e.popupOptionStr),this.closeWithParentPopup[e.popupName]=e.closeWithParent,(!n||n.closed||r.isUndefined(n.closed))&&alert(\"please enable popup windows for this website\"),e.param&&\"POST\"===e.method&&!c&&(n&&i.submit(),i.parentNode&&i.parentNode.removeChild(i)),window.onunload=o.bind(this.closeAllPopup,this)},c.prototype.close=function(t,e){var n=e||window;(t=!!r.isExisty(t)&&t)&&(window.onunload=null),n.closed||(n.opener=window.location.href,n.close())},c.prototype.closeAllPopup=function(t){var e=r.isExisty(t);i.forEachOwnProperties(this.openedPopup,function(t,n){(e&&this.closeWithParentPopup[n]||!e)&&this.close(!1,t)},this)},c.prototype.focus=function(t){this.getPopupList(t).focus()},c.prototype.parseQuery=function(){var t,e,n={};return t=window.location.search.substr(1),i.forEachArray(t.split(\"&\"),function(t){e=t.split(\"=\"),n[decodeURIComponent(e[0])]=decodeURIComponent(e[1])}),n},c.prototype.createForm=function(t,e,n,r,o){var a,s=document.createElement(\"form\");return o=o||document.body,s.method=n||\"POST\",s.action=t||\"\",s.target=r||\"\",s.style.display=\"none\",i.forEachOwnProperties(e,function(t,e){(a=document.createElement(\"input\")).name=e,a.type=\"hidden\",a.value=t,s.appendChild(a)}),o.appendChild(s),s},c.prototype._parameterize=function(t){var e=[];return i.forEachOwnProperties(t,function(t,n){e.push(encodeURIComponent(n)+\"=\"+encodeURIComponent(t))}),e.join(\"&\")},c.prototype._open=function(t,e,n,i,r){var o;return t?(o=window.open(this.postBridgeUrl,i,r),setTimeout(function(){o.redirect(n,e)},100)):o=window.open(n,i,r),o},t.exports=new c},function(t,e,n){\"use strict\";var i=n(2),r=n(1),o=/[\\\\]*YYYY|[\\\\]*YY|[\\\\]*MMMM|[\\\\]*MMM|[\\\\]*MM|[\\\\]*M|[\\\\]*DD|[\\\\]*D|[\\\\]*HH|[\\\\]*H|[\\\\]*A/gi,a=[\"Invalid month\",\"January\",\"February\",\"March\",\"April\",\"May\",\"June\",\"July\",\"August\",\"September\",\"October\",\"November\",\"December\"],s=[0,31,28,31,30,31,30,31,31,30,31,30,31],l={M:function(t){return Number(t.month)},MM:function(t){var e=t.month;return Number(e)<10?\"0\"+e:e},MMM:function(t){return a[Number(t.month)].substr(0,3)},MMMM:function(t){return a[Number(t.month)]},D:function(t){return Number(t.date)},d:function(t){return l.D(t)},DD:function(t){var e=t.date;return Number(e)<10?\"0\"+e:e},dd:function(t){return l.DD(t)},YY:function(t){return Number(t.year)%100},yy:function(t){return l.YY(t)},YYYY:function(t){var e=\"20\",n=t.year;return n>69&&n<100&&(e=\"19\"),Number(n)<100?e+String(n):n},yyyy:function(t){return l.YYYY(t)},A:function(t){return t.meridiem},a:function(t){return t.meridiem},hh:function(t){var e=t.hour;return Number(e)<10?\"0\"+e:e},HH:function(t){return l.hh(t)},h:function(t){return String(Number(t.hour))},H:function(t){return l.h(t)},m:function(t){return String(Number(t.minute))},mm:function(t){var e=t.minute;return Number(e)<10?\"0\"+e:e}};t.exports=function(t,e,n){var a,c,u=r.pick(n,\"meridiemSet\",\"AM\")||\"AM\",h=r.pick(n,\"meridiemSet\",\"PM\")||\"PM\";return!!function(t,e,n){var i;return t=Number(t),e=Number(e),n=Number(n),(t>-1&&t<100||t>1969&&t<2070)&&e>0&&e<13&&(i=s[e],2===e&&t%4==0&&(t%100==0&&t%400!=0||(i=29)),n>0&&n<=i)}((c=i.isDate(e)?{year:e.getFullYear(),month:e.getMonth()+1,date:e.getDate(),hour:e.getHours(),minute:e.getMinutes()}:{year:e.year,month:e.month,date:e.date,hour:e.hour,minute:e.minute}).year,c.month,c.date)&&(c.meridiem=\"\",/([^\\\\]|^)[aA]\\b/.test(t)&&(a=c.hour>11?h:u,c.hour>12&&(c.hour%=12),0===c.hour&&(c.hour=12),c.meridiem=a),t.replace(o,function(t){return t.indexOf(\"\\\\\")>-1?t.replace(/\\\\/,\"\"):l[t](c)||\"\"}))}},function(t,e,n){\"use strict\";var i=n(6).inherit,r=n(1).extend;t.exports=function(t,e){var n;return e||(e=t,t=null),n=e.init||function(){},t&&i(n,t),e.hasOwnProperty(\"static\")&&(r(n,e.static),delete e.static),r(n.prototype,e),n}},function(t,e,n){\"use strict\";var i=n(15),r=n(2);t.exports=function(t,e){var n=e||{};return r.isFunction(n.initialize)&&n.initialize(),i(t,n)}},function(t,e,n){\"use strict\";var i=n(4),r=n(1);t.exports=function(t,e,n){var o,a,s;return(o=t.split(\".\")).unshift(window),a=i.reduce(o,function(t,e){return t[e]=t[e]||{},t[e]}),n?(s=o.pop(),a=r.pick.apply(null,o)[s]=e):r.extend(a,e),a}},function(t,e,n){\"use strict\";var i=n(4),r=n(2),o=n(1),a=/\\s+/g;function s(){this.events=null,this.contexts=null}s.mixin=function(t){o.extend(t.prototype,s.prototype)},s.prototype._getHandlerItem=function(t,e){var n={handler:t};return e&&(n.context=e),n},s.prototype._safeEvent=function(t){var e,n=this.events;return n||(n=this.events={}),t&&((e=n[t])||(n[t]=e=[]),n=e),n},s.prototype._safeContext=function(){var t=this.contexts;return t||(t=this.contexts=[]),t},s.prototype._indexOfContext=function(t){for(var e=this._safeContext(),n=0;e[n];){if(t===e[n][0])return n;n+=1}return-1},s.prototype._memorizeContext=function(t){var e,n;r.isExisty(t)&&(e=this._safeContext(),(n=this._indexOfContext(t))>-1?e[n][1]+=1:e.push([t,1]))},s.prototype._forgetContext=function(t){var e,n;r.isExisty(t)&&(e=this._safeContext(),(n=this._indexOfContext(t))>-1&&(e[n][1]-=1,e[n][1]<=0&&e.splice(n,1)))},s.prototype._bindEvent=function(t,e,n){var i=this._safeEvent(t);this._memorizeContext(n),i.push(this._getHandlerItem(e,n))},s.prototype.on=function(t,e,n){var o=this;r.isString(t)?(t=t.split(a),i.forEach(t,function(t){o._bindEvent(t,e,n)})):r.isObject(t)&&(n=e,i.forEach(t,function(t,e){o.on(e,t,n)}))},s.prototype.once=function(t,e,n){var o=this;if(r.isObject(t))return n=e,void i.forEach(t,function(t,e){o.once(e,t,n)});this.on(t,function i(){e.apply(n,arguments),o.off(t,i,n)},n)},s.prototype._spliceMatches=function(t,e){var n,i=0;if(r.isArray(t))for(n=t.length;i<n;i+=1)!0===e(t[i])&&(t.splice(i,1),n-=1,i-=1)},s.prototype._matchHandler=function(t){var e=this;return function(n){var i=t===n.handler;return i&&e._forgetContext(n.context),i}},s.prototype._matchContext=function(t){var e=this;return function(n){var i=t===n.context;return i&&e._forgetContext(n.context),i}},s.prototype._matchHandlerAndContext=function(t,e){var n=this;return function(i){var r=t===i.handler&&e===i.context;return r&&n._forgetContext(i.context),r}},s.prototype._offByEventName=function(t,e){var n=this,o=i.forEachArray,s=r.isFunction(e),l=n._matchHandler(e);t=t.split(a),o(t,function(t){var e=n._safeEvent(t);s?n._spliceMatches(e,l):(o(e,function(t){n._forgetContext(t.context)}),n.events[t]=[])})},s.prototype._offByHandler=function(t){var e=this,n=this._matchHandler(t);i.forEach(this._safeEvent(),function(t){e._spliceMatches(t,n)})},s.prototype._offByObject=function(t,e){var n,o=this;this._indexOfContext(t)<0?i.forEach(t,function(t,e){o.off(e,t)}):r.isString(e)?(n=this._matchContext(t),o._spliceMatches(this._safeEvent(e),n)):r.isFunction(e)?(n=this._matchHandlerAndContext(e,t),i.forEach(this._safeEvent(),function(t){o._spliceMatches(t,n)})):(n=this._matchContext(t),i.forEach(this._safeEvent(),function(t){o._spliceMatches(t,n)}))},s.prototype.off=function(t,e){r.isString(t)?this._offByEventName(t,e):arguments.length?r.isFunction(t)?this._offByHandler(t):r.isObject(t)&&this._offByObject(t,e):(this.events={},this.contexts=[])},s.prototype.fire=function(t){this.invoke.apply(this,arguments)},s.prototype.invoke=function(t){var e,n,i,r;if(!this.hasListener(t))return!0;for(e=this._safeEvent(t),n=Array.prototype.slice.call(arguments,1),i=0;e[i];){if(!1===(r=e[i]).handler.apply(r.context,n))return!1;i+=1}return!0},s.prototype.hasListener=function(t){return this.getListenerLength(t)>0},s.prototype.getListenerLength=function(t){return this._safeEvent(t).length},t.exports=s},function(t,e,n){\"use strict\";var i=n(4),r=n(2),o=function(){try{return Object.defineProperty({},\"x\",{}),!0}catch(t){return!1}}(),a=0;function s(t){t&&this.set.apply(this,arguments)}s.prototype.set=function(t){var e=this;r.isArray(t)||(t=i.toArray(arguments)),i.forEach(t,function(t){e._addItem(t)})},s.prototype.getName=function(t){var e,n=this;return i.forEach(this,function(i,r){if(n._isEnumItem(r)&&t===i)return e=r,!1}),e},s.prototype._addItem=function(t){var e;this.hasOwnProperty(t)||(e=this._makeEnumValue(),o?Object.defineProperty(this,t,{enumerable:!0,configurable:!1,writable:!1,value:e}):this[t]=e)},s.prototype._makeEnumValue=function(){var t;return t=a,a+=1,t},s.prototype._isEnumItem=function(t){return r.isNumber(this[t])},t.exports=s},function(t,e,n){\"use strict\";var i=n(4),r=n(19);function o(t){this._map=new r(t),this.size=this._map.size}i.forEachArray([\"get\",\"has\",\"forEach\",\"keys\",\"values\",\"entries\"],function(t){o.prototype[t]=function(){return this._map[t].apply(this._map,arguments)}}),i.forEachArray([\"delete\",\"clear\"],function(t){o.prototype[t]=function(){var e=this._map[t].apply(this._map,arguments);return this.size=this._map.size,e}}),o.prototype.set=function(){return this._map.set.apply(this._map,arguments),this.size=this._map.size,this},o.prototype.setObject=function(t){i.forEachOwnProperties(t,function(t,e){this.set(e,t)},this)},o.prototype.deleteByKeys=function(t){i.forEachArray(t,function(t){this.delete(t)},this)},o.prototype.merge=function(t){t.forEach(function(t,e){this.set(e,t)},this)},o.prototype.filter=function(t){var e=new o;return this.forEach(function(n,i){t(n,i)&&e.set(i,n)}),e},t.exports=o},function(t,e,n){\"use strict\";var i=n(4),r=n(2),o=n(3),a=n(10),s=n(5),l={},c={};function u(t,e){this._keys=t,this._valueGetter=e,this._length=this._keys.length,this._index=-1,this._done=!1}function h(t){this._valuesForString={},this._valuesForIndex={},this._keys=[],t&&this._setInitData(t),this.size=0}u.prototype.next=function(){var t={};do{this._index+=1}while(r.isUndefined(this._keys[this._index])&&this._index<this._length);return this._index>=this._length?t.done=!0:(t.done=!1,t.value=this._valueGetter(this._keys[this._index],this._index)),t},h.prototype._setInitData=function(t){if(!r.isArray(t))throw new Error(\"Only Array is supported.\");i.forEachArray(t,function(t){this.set(t[0],t[1])},this)},h.prototype._isNaN=function(t){return\"number\"==typeof t&&t!=t},h.prototype._getKeyIndex=function(t){var e,n=-1;return r.isString(t)?(e=this._valuesForString[t])&&(n=e.keyIndex):n=o.inArray(t,this._keys),n},h.prototype._getOriginKey=function(t){var e=t;return t===l?e=void 0:t===c&&(e=NaN),e},h.prototype._getUniqueKey=function(t){var e=t;return r.isUndefined(t)?e=l:this._isNaN(t)&&(e=c),e},h.prototype._getValueObject=function(t,e){return r.isString(t)?this._valuesForString[t]:(r.isUndefined(e)&&(e=this._getKeyIndex(t)),e>=0?this._valuesForIndex[e]:void 0)},h.prototype._getOriginValue=function(t,e){return this._getValueObject(t,e).origin},h.prototype._getKeyValuePair=function(t,e){return[this._getOriginKey(t),this._getOriginValue(t,e)]},h.prototype._createValueObject=function(t,e){return{keyIndex:e,origin:t}},h.prototype.set=function(t,e){var n,i=this._getUniqueKey(t),o=this._getKeyIndex(i);return o<0&&(o=this._keys.push(i)-1,this.size+=1),n=this._createValueObject(e,o),r.isString(t)?this._valuesForString[t]=n:this._valuesForIndex[o]=n,this},h.prototype.get=function(t){var e=this._getUniqueKey(t),n=this._getValueObject(e);return n&&n.origin},h.prototype.keys=function(){return new u(this._keys,s.bind(this._getOriginKey,this))},h.prototype.values=function(){return new u(this._keys,s.bind(this._getOriginValue,this))},h.prototype.entries=function(){return new u(this._keys,s.bind(this._getKeyValuePair,this))},h.prototype.has=function(t){return!!this._getValueObject(t)},h.prototype.delete=function(t){var e;r.isString(t)?this._valuesForString[t]&&(e=this._valuesForString[t].keyIndex,delete this._valuesForString[t]):(e=this._getKeyIndex(t))>=0&&delete this._valuesForIndex[e],e>=0&&(delete this._keys[e],this.size-=1)},h.prototype.forEach=function(t,e){e=e||this,i.forEachArray(this._keys,function(n){r.isUndefined(n)||t.call(e,this._getValueObject(n).origin,n,this)},this)},h.prototype.clear=function(){h.call(this)},window.Map&&(a.firefox&&a.version>=37||a.chrome&&a.version>=42)&&(h=window.Map),t.exports=h},function(t,e,n){\"use strict\";var i=n(4),r=n(2);function o(t){this.length=0,t&&this.setObject(t)}o.prototype.set=function(t,e){2===arguments.length?this.setKeyValue(t,e):this.setObject(t)},o.prototype.setKeyValue=function(t,e){this.has(t)||(this.length+=1),this[this.encodeKey(t)]=e},o.prototype.setObject=function(t){var e=this;i.forEachOwnProperties(t,function(t,n){e.setKeyValue(n,t)})},o.prototype.merge=function(t){var e=this;t.each(function(t,n){e.setKeyValue(n,t)})},o.prototype.encodeKey=function(t){return\"\\xe5\"+t},o.prototype.decodeKey=function(t){var e=t.split(\"\\xe5\");return e[e.length-1]},o.prototype.get=function(t){return this[this.encodeKey(t)]},o.prototype.has=function(t){return this.hasOwnProperty(this.encodeKey(t))},o.prototype.remove=function(t){return arguments.length>1&&(t=i.toArray(arguments)),r.isArray(t)?this.removeByKeyArray(t):this.removeByKey(t)},o.prototype.removeByKey=function(t){var e=this.has(t)?this.get(t):null;return null!==e&&(delete this[this.encodeKey(t)],this.length-=1),e},o.prototype.removeByKeyArray=function(t){var e=[],n=this;return i.forEach(t,function(t){e.push(n.removeByKey(t))}),e},o.prototype.removeAll=function(){var t=this;this.each(function(e,n){t.remove(n)})},o.prototype.each=function(t){var e,n=this;i.forEachOwnProperties(this,function(i,r){if(\"\\xe5\"===r.charAt(0)&&(e=t(i,n.decodeKey(r))),!1===e)return e})},o.prototype.keys=function(){var t=[],e=this;return this.each(function(n,i){t.push(e.decodeKey(i))}),t},o.prototype.find=function(t){var e=[];return this.each(function(n,i){t(n,i)&&e.push(n)}),e},o.prototype.toArray=function(){var t=[];return this.each(function(e){t.push(e)}),t},t.exports=o}])},t.exports=i()},Zn6t:function(t,e,n){t.exports=n.p+\"icon-a.843c03ed6edd3f2a4dc3.svg\"},crnd:function(t,e){function n(t){return Promise.resolve().then(function(){var e=new Error(\"Cannot find module '\"+t+\"'\");throw e.code=\"MODULE_NOT_FOUND\",e})}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id=\"crnd\"},\"q+JS\":function(t,e,n){var i;i=function(t,e,n){return function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={exports:{},id:i,loaded:!1};return t[i].call(r.exports,r,r.exports,n),r.loaded=!0,r.exports}return n.m=t,n.c=e,n.p=\"dist\",n(0)}([function(t,e,n){\"use strict\";n(1);var i,r=(i=n(2))&&i.__esModule?i:{default:i};n(131),n(133),n(134),n(135),n(136),n(137),n(138),n(139),n(140),n(141),n(142),n(143),n(144),n(145),n(146),n(147),n(148),n(149),n(150),n(151),t.exports=r.default},function(t,e){\"use strict\";Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,Element.prototype.closest||(Element.prototype.closest=function(t){var e=this;if(!document.documentElement.contains(e))return null;do{if(e.matches(t))return e;e=e.parentElement||e.parentNode}while(null!==e&&1===e.nodeType);return null}),\"document\"in window.self&&(\"classList\"in document.createElement(\"_\")&&(!document.createElementNS||\"classList\"in document.createElementNS(\"http://www.w3.org/2000/svg\",\"g\"))||function(t){if(\"Element\"in t){var e=t.Element.prototype,n=Object,i=String.prototype.trim||function(){return this.replace(/^\\s+|\\s+$/g,\"\")},r=Array.prototype.indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1},o=function(t,e){this.name=t,this.code=DOMException[t],this.message=e},a=function(t,e){if(\"\"===e)throw new o(\"SYNTAX_ERR\",\"An invalid or illegal string was specified\");if(/\\s/.test(e))throw new o(\"INVALID_CHARACTER_ERR\",\"String contains an invalid character\");return r.call(t,e)},s=function(t){for(var e=i.call(t.getAttribute(\"class\")||\"\"),n=e?e.split(/\\s+/):[],r=0,o=n.length;r<o;r++)this.push(n[r]);this._updateClassName=function(){t.setAttribute(\"class\",this.toString())}},l=s.prototype=[],c=function(){return new s(this)};if(o.prototype=Error.prototype,l.item=function(t){return this[t]||null},l.contains=function(t){return-1!==a(this,t+=\"\")},l.add=function(){var t,e=arguments,n=0,i=e.length,r=!1;do{-1===a(this,t=e[n]+\"\")&&(this.push(t),r=!0)}while(++n<i);r&&this._updateClassName()},l.remove=function(){var t,e,n=arguments,i=0,r=n.length,o=!1;do{for(e=a(this,t=n[i]+\"\");-1!==e;)this.splice(e,1),o=!0,e=a(this,t)}while(++i<r);o&&this._updateClassName()},l.toggle=function(t,e){var n=this.contains(t+=\"\"),i=n?!0!==e&&\"remove\":!1!==e&&\"add\";return i&&this[i](t),!0===e||!1===e?e:!n},l.toString=function(){return this.join(\" \")},n.defineProperty){var u={get:c,enumerable:!0,configurable:!0};try{n.defineProperty(e,\"classList\",u)}catch(h){void 0!==h.number&&-2146823252!==h.number||(u.enumerable=!1,n.defineProperty(e,\"classList\",u))}}else n.prototype.__defineGetter__&&e.__defineGetter__(\"classList\",c)}}(window.self),function(){var t=document.createElement(\"_\");if(t.classList.add(\"c1\",\"c2\"),!t.classList.contains(\"c2\")){var e=function(t){var e=DOMTokenList.prototype[t];DOMTokenList.prototype[t]=function(t){var n,i=arguments.length;for(n=0;n<i;n++)e.call(this,t=arguments[n])}};e(\"add\"),e(\"remove\")}if(t.classList.toggle(\"c3\",!1),t.classList.contains(\"c3\")){var n=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(t,e){return 1 in arguments&&!this.contains(t)==!e?e:n.call(this,t)}}t=null}()),function(){if(\"undefined\"!=typeof window&&window.addEventListener){var t,e,n,i=Object.create(null),r=function(){clearTimeout(e),e=setTimeout(t,100)},o=function(){},a=function(){var t;window.addEventListener(\"resize\",r,!1),window.addEventListener(\"orientationchange\",r,!1),window.MutationObserver?((t=new MutationObserver(r)).observe(document.documentElement,{childList:!0,subtree:!0,attributes:!0}),o=function(){try{t.disconnect(),window.removeEventListener(\"resize\",r,!1),window.removeEventListener(\"orientationchange\",r,!1)}catch(e){}}):(document.documentElement.addEventListener(\"DOMSubtreeModified\",r,!1),o=function(){document.documentElement.removeEventListener(\"DOMSubtreeModified\",r,!1),window.removeEventListener(\"resize\",r,!1),window.removeEventListener(\"orientationchange\",r,!1)})},s=function(t){function e(t){var e;return void 0!==t.protocol?e=t:(e=document.createElement(\"a\")).href=t,e.protocol.replace(/:/g,\"\")+e.host}var n,i,r;return window.XMLHttpRequest&&(n=new XMLHttpRequest,i=e(location),r=e(t),n=void 0===n.withCredentials&&\"\"!==r&&r!==i?XDomainRequest||void 0:XMLHttpRequest),n},l=\"http://www.w3.org/1999/xlink\";t=function(){var t,e,n,r,c,u,h,d,f,p,g=0;function m(){0==(g-=1)&&(o(),a())}function v(t){return function(){!0!==i[t.base]&&(t.useEl.setAttributeNS(l,\"xlink:href\",\"#\"+t.hash),t.useEl.hasAttribute(\"href\")&&t.useEl.setAttribute(\"href\",\"#\"+t.hash))}}function y(t){return function(){var e,n=document.body,i=document.createElement(\"x\");t.onload=null,i.innerHTML=t.responseText,(e=i.getElementsByTagName(\"svg\")[0])&&(e.setAttribute(\"aria-hidden\",\"true\"),e.style.position=\"absolute\",e.style.width=0,e.style.height=0,e.style.overflow=\"hidden\",n.insertBefore(e,n.firstChild)),m()}}function b(t){return function(){t.onerror=null,t.ontimeout=null,m()}}for(o(),f=document.getElementsByTagName(\"use\"),c=0;c<f.length;c+=1){try{e=f[c].getBoundingClientRect()}catch(_){e=!1}t=(d=(r=f[c].getAttribute(\"href\")||f[c].getAttributeNS(l,\"href\")||f[c].getAttribute(\"xlink:href\"))&&r.split?r.split(\"#\"):[\"\",\"\"])[0],n=d[1],u=e&&0===e.left&&0===e.right&&0===e.top&&0===e.bottom,e&&0===e.width&&0===e.height&&!u?(f[c].hasAttribute(\"href\")&&f[c].setAttributeNS(l,\"xlink:href\",r),t.length&&(!0!==(p=i[t])&&setTimeout(v({useEl:f[c],base:t,hash:n}),0),void 0===p&&void 0!==(h=s(t))&&(p=new h,i[t]=p,p.onload=y(p),p.onerror=b(p),p.ontimeout=b(p),p.open(\"GET\",t),p.send(),g+=1))):u?t.length&&i[t]&&setTimeout(v({useEl:f[c],base:t,hash:n}),0):void 0===i[t]?i[t]=!0:i[t].onload&&(i[t].abort(),delete i[t].onload,i[t]=!0)}f=\"\",g+=1,m()},n=function(){window.removeEventListener(\"load\",n,!1),e=setTimeout(t,0)},\"complete\"!==document.readyState?window.addEventListener(\"load\",n,!1):n()}}()},function(t,e,n){\"use strict\";var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=f(n(3)),o=f(n(4)),a=f(n(68)),s=f(n(74)),l=f(n(103)),c=f(n(69)),u=f(n(105)),h=f(n(73)),d=n(72);function f(t){return t&&t.__esModule?t:{default:t}}var p=h.default.eventNames,g=h.default.commandNames,m=h.default.keyCodes,v=h.default.rejectMessages,y=r.default.isUndefined,b=r.default.forEach,_=r.default.CustomEvents,w=function(){function t(e,n){if(function(e,n){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this),n=r.default.extend({includeUI:!1,usageStatistics:!0},n),this.mode=null,this.activeObjectId=null,n.includeUI){var i=n.includeUI;i.usageStatistics=n.usageStatistics,this.ui=new s.default(e,i,this.getActions()),n=this.ui.setUiDefaultSelectionStyle(n)}this._invoker=new a.default,this._graphics=new u.default(this.ui?this.ui.getEditorArea():e,{cssMaxWidth:n.cssMaxWidth,cssMaxHeight:n.cssMaxHeight,useItext:!!this.ui,useDragAddIcon:!!this.ui}),this._handlers={keydown:this._onKeyDown.bind(this),mousedown:this._onMouseDown.bind(this),objectActivated:this._onObjectActivated.bind(this),objectMoved:this._onObjectMoved.bind(this),objectScaled:this._onObjectScaled.bind(this),createdPath:this._onCreatedPath,addText:this._onAddText.bind(this),addObject:this._onAddObject.bind(this),addObjectAfter:this._onAddObjectAfter.bind(this),textEditing:this._onTextEditing.bind(this),textChanged:this._onTextChanged.bind(this),iconCreateResize:this._onIconCreateResize.bind(this),iconCreateEnd:this._onIconCreateEnd.bind(this),selectionCleared:this._selectionCleared.bind(this),selectionCreated:this._selectionCreated.bind(this)},this._attachInvokerEvents(),this._attachGraphicsEvents(),this._attachDomEvents(),this._setSelectionStyle(n.selectionStyle,{applyCropSelectionStyle:n.applyCropSelectionStyle,applyGroupSelectionStyle:n.applyGroupSelectionStyle}),n.usageStatistics&&(0,d.sendHostName)(),this.ui&&(this.ui.initCanvas(),this.setReAction()),fabric.enableGLFiltering=!1}return i(t,[{key:\"_setSelectionStyle\",value:function(t,e){var n=e.applyCropSelectionStyle,i=e.applyGroupSelectionStyle;t&&this._graphics.setSelectionStyle(t),n&&this._graphics.setCropSelectionStyle(t),i&&this.on(\"selectionCreated\",function(e){\"activeSelection\"===e.type&&e.set(t)})}},{key:\"_attachInvokerEvents\",value:function(){var t=p.UNDO_STACK_CHANGED,e=p.REDO_STACK_CHANGED;this._invoker.on(t,this.fire.bind(this,t)),this._invoker.on(e,this.fire.bind(this,e))}},{key:\"_attachGraphicsEvents\",value:function(){this._graphics.on({mousedown:this._handlers.mousedown,objectMoved:this._handlers.objectMoved,objectScaled:this._handlers.objectScaled,objectActivated:this._handlers.objectActivated,addText:this._handlers.addText,addObject:this._handlers.addObject,textEditing:this._handlers.textEditing,textChanged:this._handlers.textChanged,iconCreateResize:this._handlers.iconCreateResize,iconCreateEnd:this._handlers.iconCreateEnd,selectionCleared:this._handlers.selectionCleared,selectionCreated:this._handlers.selectionCreated,addObjectAfter:this._handlers.addObjectAfter})}},{key:\"_attachDomEvents\",value:function(){document.addEventListener(\"keydown\",this._handlers.keydown)}},{key:\"_detachDomEvents\",value:function(){document.removeEventListener(\"keydown\",this._handlers.keydown)}},{key:\"_onKeyDown\",value:function(t){var e=t.ctrlKey,n=t.keyCode,i=t.metaKey,r=this._graphics.getActiveObject(),o=this._graphics.getActiveObjects(),a=r||o&&o.size();(e||i)&&(n===m.Z?this.undo().catch(function(){}):n===m.Y&&this.redo().catch(function(){})),(!r||!r.isEditing)&&(n===m.BACKSPACE||n===m.DEL)&&a&&(t.preventDefault(),this.removeActiveObject())}},{key:\"removeActiveObject\",value:function(){var t=this._graphics.getActiveObject(),e=this._graphics.getActiveObjects();if(e&&e.size())this.discardSelection(),this._removeObjectStream(e.getObjects());else if(t){var n=this._graphics.getObjectId(t);this.removeObject(n)}}},{key:\"_removeObjectStream\",value:function(t){var e=this;if(!t.length)return!0;var n=t.pop();return this.removeObject(this._graphics.getObjectId(n)).then(function(){return e._removeObjectStream(t)})}},{key:\"_onMouseDown\",value:function(t,e){this.fire(p.MOUSE_DOWN,t,e)}},{key:\"_pushAddObjectCommand\",value:function(t){var e=c.default.create(g.ADD_OBJECT,this._graphics,t);this._invoker.pushUndoStack(e)}},{key:\"_onObjectActivated\",value:function(t){this.fire(p.OBJECT_ACTIVATED,t)}},{key:\"_onObjectMoved\",value:function(t){this.fire(p.OBJECT_MOVED,t)}},{key:\"_onObjectScaled\",value:function(t){this.fire(p.OBJECT_SCALED,t)}},{key:\"getDrawingMode\",value:function(){return this._graphics.getDrawingMode()}},{key:\"clearObjects\",value:function(){return this.execute(g.CLEAR_OBJECTS)}},{key:\"deactivateAll\",value:function(){this._graphics.deactivateAll(),this._graphics.renderAll()}},{key:\"discardSelection\",value:function(){this._graphics.discardSelection()}},{key:\"changeSelectableAll\",value:function(t){this._graphics.changeSelectableAll(t)}},{key:\"execute\",value:function(t){for(var e,n=arguments.length,i=Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];var o=[this._graphics].concat(i);return(e=this._invoker).execute.apply(e,[t].concat(o))}},{key:\"executeSilent\",value:function(t){for(var e,n=arguments.length,i=Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];var o=[this._graphics].concat(i);return(e=this._invoker).executeSilent.apply(e,[t].concat(o))}},{key:\"undo\",value:function(){return this._invoker.undo()}},{key:\"redo\",value:function(){return this._invoker.redo()}},{key:\"loadImageFromFile\",value:function(t,e){if(!t)return o.default.reject(v.invalidParameters);var n=URL.createObjectURL(t);return this.loadImageFromURL(n,e=e||t.name).then(function(e){return URL.revokeObjectURL(t),e})}},{key:\"loadImageFromURL\",value:function(t,e){return e&&t?this.execute(g.LOAD_IMAGE,e,t):o.default.reject(v.invalidParameters)}},{key:\"addImageObject\",value:function(t){return t?this.execute(g.ADD_IMAGE_OBJECT,t):o.default.reject(v.invalidParameters)}},{key:\"startDrawingMode\",value:function(t,e){return this._graphics.startDrawingMode(t,e)}},{key:\"stopDrawingMode\",value:function(){this._graphics.stopDrawingMode()}},{key:\"crop\",value:function(t){var e=this._graphics.getCroppedImageData(t);return e?this.loadImageFromURL(e.url,e.imageName):o.default.reject(v.invalidParameters)}},{key:\"getCropzoneRect\",value:function(){return this._graphics.getCropzoneRect()}},{key:\"setCropzoneRect\",value:function(t){this._graphics.setCropzoneRect(t)}},{key:\"_flip\",value:function(t){return this.execute(g.FLIP_IMAGE,t)}},{key:\"flipX\",value:function(){return this._flip(\"flipX\")}},{key:\"flipY\",value:function(){return this._flip(\"flipY\")}},{key:\"resetFlip\",value:function(){return this._flip(\"reset\")}},{key:\"_rotate\",value:function(t,e,n){return n?this.executeSilent(g.ROTATE_IMAGE,t,e):this.execute(g.ROTATE_IMAGE,t,e)}},{key:\"rotate\",value:function(t,e){return this._rotate(\"rotate\",t,e)}},{key:\"setAngle\",value:function(t,e){return this._rotate(\"setAngle\",t,e)}},{key:\"setBrush\",value:function(t){this._graphics.setBrush(t)}},{key:\"setDrawingShape\",value:function(t,e){this._graphics.setDrawingShape(t,e)}},{key:\"addShape\",value:function(t,e){return this._setPositions(e=e||{}),this.execute(g.ADD_SHAPE,t,e)}},{key:\"changeShape\",value:function(t,e){return this.execute(g.CHANGE_SHAPE,t,e)}},{key:\"addText\",value:function(t,e){return this.execute(g.ADD_TEXT,t=t||\"\",e=e||{})}},{key:\"changeText\",value:function(t,e){return this.execute(g.CHANGE_TEXT,t,e=e||\"\")}},{key:\"changeTextStyle\",value:function(t,e){return this.execute(g.CHANGE_TEXT_STYLE,t,e)}},{key:\"_changeActivateMode\",value:function(t){\"ICON\"!==t&&this.getDrawingMode()!==t&&this.startDrawingMode(t)}},{key:\"_onTextChanged\",value:function(t){this.changeText(t.id,t.text)}},{key:\"_onIconCreateResize\",value:function(t){this.fire(p.ICON_CREATE_RESIZE,t)}},{key:\"_onIconCreateEnd\",value:function(t){this.fire(p.ICON_CREATE_END,t)}},{key:\"_onTextEditing\",value:function(){this.fire(p.TEXT_EDITING)}},{key:\"_onAddText\",value:function(t){this.fire(p.ADD_TEXT,{originPosition:t.originPosition,clientPosition:t.clientPosition})}},{key:\"_onAddObject\",value:function(t){var e=this._graphics.getObject(t.id);this._pushAddObjectCommand(e)}},{key:\"_onAddObjectAfter\",value:function(t){this.fire(p.ADD_OBJECT_AFTER,t)}},{key:\"_selectionCleared\",value:function(){this.fire(p.SELECTION_CLEARED)}},{key:\"_selectionCreated\",value:function(t){this.fire(p.SELECTION_CREATED,t)}},{key:\"registerIcons\",value:function(t){this._graphics.registerPaths(t)}},{key:\"changeCursor\",value:function(t){this._graphics.changeCursor(t)}},{key:\"addIcon\",value:function(t,e){return this._setPositions(e=e||{}),this.execute(g.ADD_ICON,t,e)}},{key:\"changeIconColor\",value:function(t,e){return this.execute(g.CHANGE_ICON_COLOR,t,e)}},{key:\"removeObject\",value:function(t){return this.execute(g.REMOVE_OBJECT,t)}},{key:\"hasFilter\",value:function(t){return this._graphics.hasFilter(t)}},{key:\"removeFilter\",value:function(t){return this.execute(g.REMOVE_FILTER,t)}},{key:\"applyFilter\",value:function(t,e){return this.execute(g.APPLY_FILTER,t,e)}},{key:\"toDataURL\",value:function(t){return this._graphics.toDataURL(t)}},{key:\"getImageName\",value:function(){return this._graphics.getImageName()}},{key:\"clearUndoStack\",value:function(){this._invoker.clearUndoStack()}},{key:\"clearRedoStack\",value:function(){this._invoker.clearRedoStack()}},{key:\"isEmptyUndoStack\",value:function(){return this._invoker.isEmptyUndoStack()}},{key:\"isEmptyRedoStack\",value:function(){return this._invoker.isEmptyRedoStack()}},{key:\"resizeCanvasDimension\",value:function(t){return t?this.execute(g.RESIZE_CANVAS_DIMENSION,t):o.default.reject(v.invalidParameters)}},{key:\"destroy\",value:function(){var t=this;this.stopDrawingMode(),this._detachDomEvents(),this._graphics.destroy(),this._graphics=null,b(this,function(e,n){t[n]=null},this)}},{key:\"_setPositions\",value:function(t){var e=this._graphics.getCenter();y(t.left)&&(t.left=e.left),y(t.top)&&(t.top=e.top)}},{key:\"setObjectProperties\",value:function(t,e){return this.execute(g.SET_OBJECT_PROPERTIES,t,e)}},{key:\"setObjectPropertiesQuietly\",value:function(t,e){this._graphics.setObjectProperties(t,e)}},{key:\"getObjectProperties\",value:function(t,e){return this._graphics.getObject(t)?this._graphics.getObjectProperties(t,e):null}},{key:\"getCanvasSize\",value:function(){return this._graphics.getCanvasSize()}},{key:\"getObjectPosition\",value:function(t,e,n){return this._graphics.getObjectPosition(t,e,n)}},{key:\"setObjectPosition\",value:function(t,e){return this.execute(g.SET_OBJECT_POSITION,t,e)}}]),t}();l.default.mixin(w),_.mixin(w),t.exports=w},function(e,n){e.exports=t},function(t,e,n){n(5),n(6),n(50),n(54),t.exports=n(14).Promise},function(t,e){},function(t,e,n){\"use strict\";var i=n(7)(!0);n(10)(String,\"String\",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=i(e,n),this._i+=t.length,{value:t,done:!1})})},function(t,e,n){var i=n(8),r=n(9);t.exports=function(t){return function(e,n){var o,a,s=String(r(e)),l=i(n),c=s.length;return l<0||l>=c?t?\"\":void 0:(o=s.charCodeAt(l))<55296||o>56319||l+1===c||(a=s.charCodeAt(l+1))<56320||a>57343?t?s.charAt(l):o:t?s.slice(l,l+2):a-56320+(o-55296<<10)+65536}}},function(t,e){var n=Math.ceil,i=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?i:n)(t)}},function(t,e){t.exports=function(t){if(null==t)throw TypeError(\"Can't call method on  \"+t);return t}},function(t,e,n){\"use strict\";var i=n(11),r=n(12),o=n(27),a=n(17),s=n(28),l=n(29),c=n(30),u=n(46),h=n(48),d=n(47)(\"iterator\"),f=!([].keys&&\"next\"in[].keys()),p=function(){return this};t.exports=function(t,e,n,g,m,v,y){c(n,e,g);var b,_,w,x=function(t){if(!f&&t in E)return E[t];switch(t){case\"keys\":case\"values\":return function(){return new n(this,t)}}return function(){return new n(this,t)}},C=e+\" Iterator\",S=\"values\"==m,k=!1,E=t.prototype,T=E[d]||E[\"@@iterator\"]||m&&E[m],O=T||x(m),P=m?S?x(\"entries\"):O:void 0,j=\"Array\"==e&&E.entries||T;if(j&&(w=h(j.call(new t)))!==Object.prototype&&(u(w,C,!0),i||s(w,d)||a(w,d,p)),S&&T&&\"values\"!==T.name&&(k=!0,O=function(){return T.call(this)}),i&&!y||!f&&!k&&E[d]||a(E,d,O),l[e]=O,l[C]=p,m)if(b={values:S?O:x(\"values\"),keys:v?O:x(\"keys\"),entries:P},y)for(_ in b)_ in E||o(E,_,b[_]);else r(r.P+r.F*(f||k),e,b);return b}},function(t,e){t.exports=!0},function(t,e,n){var i=n(13),r=n(14),o=n(15),a=n(17),s=function(t,e,n){var l,c,u,h=t&s.F,d=t&s.G,f=t&s.S,p=t&s.P,g=t&s.B,m=t&s.W,v=d?r:r[e]||(r[e]={}),y=v.prototype,b=d?i:f?i[e]:(i[e]||{}).prototype;for(l in d&&(n=e),n)(c=!h&&b&&void 0!==b[l])&&l in v||(u=c?b[l]:n[l],v[l]=d&&\"function\"!=typeof b[l]?n[l]:g&&c?o(u,i):m&&b[l]==u?function(t){var e=function(e,n,i){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,i)}return t.apply(this,arguments)};return e.prototype=t.prototype,e}(u):p&&\"function\"==typeof u?o(Function.call,u):u,p&&((v.virtual||(v.virtual={}))[l]=u,t&s.R&&y&&!y[l]&&a(y,l,u)))};s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,s.U=64,s.R=128,t.exports=s},function(t,e){var n=t.exports=\"undefined\"!=typeof window&&window.Math==Math?window:\"undefined\"!=typeof self&&self.Math==Math?self:Function(\"return this\")();\"number\"==typeof __g&&(__g=n)},function(t,e){var n=t.exports={version:\"2.4.0\"};\"number\"==typeof __e&&(__e=n)},function(t,e,n){var i=n(16);t.exports=function(t,e,n){if(i(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,i){return t.call(e,n,i)};case 3:return function(n,i,r){return t.call(e,n,i,r)}}return function(){return t.apply(e,arguments)}}},function(t,e){t.exports=function(t){if(\"function\"!=typeof t)throw TypeError(t+\" is not a function!\");return t}},function(t,e,n){var i=n(18),r=n(26);t.exports=n(22)?function(t,e,n){return i.f(t,e,r(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){var i=n(19),r=n(21),o=n(25),a=Object.defineProperty;e.f=n(22)?Object.defineProperty:function(t,e,n){if(i(t),e=o(e,!0),i(n),r)try{return a(t,e,n)}catch(s){}if(\"get\"in n||\"set\"in n)throw TypeError(\"Accessors not supported!\");return\"value\"in n&&(t[e]=n.value),t}},function(t,e,n){var i=n(20);t.exports=function(t){if(!i(t))throw TypeError(t+\" is not an object!\");return t}},function(t,e){t.exports=function(t){return\"object\"==typeof t?null!==t:\"function\"==typeof t}},function(t,e,n){t.exports=!n(22)&&!n(23)(function(){return 7!=Object.defineProperty(n(24)(\"div\"),\"a\",{get:function(){return 7}}).a})},function(t,e,n){t.exports=!n(23)(function(){return 7!=Object.defineProperty({},\"a\",{get:function(){return 7}}).a})},function(t,e){t.exports=function(t){try{return!!t()}catch(e){return!0}}},function(t,e,n){var i=n(20),r=n(13).document,o=i(r)&&i(r.createElement);t.exports=function(t){return o?r.createElement(t):{}}},function(t,e,n){var i=n(20);t.exports=function(t,e){if(!i(t))return t;var n,r;if(e&&\"function\"==typeof(n=t.toString)&&!i(r=n.call(t)))return r;if(\"function\"==typeof(n=t.valueOf)&&!i(r=n.call(t)))return r;if(!e&&\"function\"==typeof(n=t.toString)&&!i(r=n.call(t)))return r;throw TypeError(\"Can't convert object to primitive value\")}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,n){t.exports=n(17)},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e){t.exports={}},function(t,e,n){\"use strict\";var i=n(31),r=n(26),o=n(46),a={};n(17)(a,n(47)(\"iterator\"),function(){return this}),t.exports=function(t,e,n){t.prototype=i(a,{next:r(1,n)}),o(t,e+\" Iterator\")}},function(t,e,n){var i=n(19),r=n(32),o=n(44),a=n(41)(\"IE_PROTO\"),s=function(){},l=function(){var t,e=n(24)(\"iframe\"),i=o.length;for(e.style.display=\"none\",n(45).appendChild(e),e.src=\"javascript:\",(t=e.contentWindow.document).open(),t.write(\"<script>document.F=Object<\\/script>\"),t.close(),l=t.F;i--;)delete l.prototype[o[i]];return l()};t.exports=Object.create||function(t,e){var n;return null!==t?(s.prototype=i(t),n=new s,s.prototype=null,n[a]=t):n=l(),void 0===e?n:r(n,e)}},function(t,e,n){var i=n(18),r=n(19),o=n(33);t.exports=n(22)?Object.defineProperties:function(t,e){r(t);for(var n,a=o(e),s=a.length,l=0;s>l;)i.f(t,n=a[l++],e[n]);return t}},function(t,e,n){var i=n(34),r=n(44);t.exports=Object.keys||function(t){return i(t,r)}},function(t,e,n){var i=n(28),r=n(35),o=n(38)(!1),a=n(41)(\"IE_PROTO\");t.exports=function(t,e){var n,s=r(t),l=0,c=[];for(n in s)n!=a&&i(s,n)&&c.push(n);for(;e.length>l;)i(s,n=e[l++])&&(~o(c,n)||c.push(n));return c}},function(t,e,n){var i=n(36),r=n(9);t.exports=function(t){return i(r(t))}},function(t,e,n){var i=n(37);t.exports=Object(\"z\").propertyIsEnumerable(0)?Object:function(t){return\"String\"==i(t)?t.split(\"\"):Object(t)}},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e,n){var i=n(35),r=n(39),o=n(40);t.exports=function(t){return function(e,n,a){var s,l=i(e),c=r(l.length),u=o(a,c);if(t&&n!=n){for(;c>u;)if((s=l[u++])!=s)return!0}else for(;c>u;u++)if((t||u in l)&&l[u]===n)return t||u||0;return!t&&-1}}},function(t,e,n){var i=n(8),r=Math.min;t.exports=function(t){return t>0?r(i(t),9007199254740991):0}},function(t,e,n){var i=n(8),r=Math.max,o=Math.min;t.exports=function(t,e){return(t=i(t))<0?r(t+e,0):o(t,e)}},function(t,e,n){var i=n(42)(\"keys\"),r=n(43);t.exports=function(t){return i[t]||(i[t]=r(t))}},function(t,e,n){var i=n(13),r=i[\"__core-js_shared__\"]||(i[\"__core-js_shared__\"]={});t.exports=function(t){return r[t]||(r[t]={})}},function(t,e){var n=0,i=Math.random();t.exports=function(t){return\"Symbol(\".concat(void 0===t?\"\":t,\")_\",(++n+i).toString(36))}},function(t,e){t.exports=\"constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf\".split(\",\")},function(t,e,n){t.exports=n(13).document&&document.documentElement},function(t,e,n){var i=n(18).f,r=n(28),o=n(47)(\"toStringTag\");t.exports=function(t,e,n){t&&!r(t=n?t:t.prototype,o)&&i(t,o,{configurable:!0,value:e})}},function(t,e,n){var i=n(42)(\"wks\"),r=n(43),o=n(13).Symbol,a=\"function\"==typeof o;(t.exports=function(t){return i[t]||(i[t]=a&&o[t]||(a?o:r)(\"Symbol.\"+t))}).store=i},function(t,e,n){var i=n(28),r=n(49),o=n(41)(\"IE_PROTO\"),a=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=r(t),i(t,o)?t[o]:\"function\"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?a:null}},function(t,e,n){var i=n(9);t.exports=function(t){return Object(i(t))}},function(t,e,n){n(51);for(var i=n(13),r=n(17),o=n(29),a=n(47)(\"toStringTag\"),s=[\"NodeList\",\"DOMTokenList\",\"MediaList\",\"StyleSheetList\",\"CSSRuleList\"],l=0;l<5;l++){var c=s[l],u=i[c],h=u&&u.prototype;h&&!h[a]&&r(h,a,c),o[c]=o.Array}},function(t,e,n){\"use strict\";var i=n(52),r=n(53),o=n(29),a=n(35);t.exports=n(10)(Array,\"Array\",function(t,e){this._t=a(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,r(1)):r(0,\"keys\"==e?n:\"values\"==e?t[n]:[n,t[n]])},\"values\"),o.Arguments=o.Array,i(\"keys\"),i(\"values\"),i(\"entries\")},function(t,e){t.exports=function(){}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,n){\"use strict\";var i,r,o,a=n(11),s=n(13),l=n(15),c=n(55),u=n(12),h=n(20),d=n(16),f=n(56),p=n(57),g=n(61),m=n(62).set,v=n(64)(),y=s.TypeError,b=s.process,_=s.Promise,w=\"process\"==c(b=s.process),x=function(){},C=!!function(){try{var t=_.resolve(1),e=(t.constructor={})[n(47)(\"species\")]=function(t){t(x,x)};return(w||\"function\"==typeof PromiseRejectionEvent)&&t.then(x)instanceof e}catch(i){}}(),S=function(t,e){return t===e||t===_&&e===o},k=function(t){var e;return!(!h(t)||\"function\"!=typeof(e=t.then))&&e},E=function(t){return S(_,t)?new T(t):new r(t)},T=r=function(t){var e,n;this.promise=new t(function(t,i){if(void 0!==e||void 0!==n)throw y(\"Bad Promise constructor\");e=t,n=i}),this.resolve=d(e),this.reject=d(n)},O=function(t){try{t()}catch(e){return{error:e}}},P=function(t,e){if(!t._n){t._n=!0;var n=t._c;v(function(){for(var i=t._v,r=1==t._s,o=0,a=function(e){var n,o,a=r?e.ok:e.fail,s=e.resolve,l=e.reject,c=e.domain;try{a?(r||(2==t._h&&M(t),t._h=1),!0===a?n=i:(c&&c.enter(),n=a(i),c&&c.exit()),n===e.promise?l(y(\"Promise-chain cycle\")):(o=k(n))?o.call(n,s,l):s(n)):l(i)}catch(u){l(u)}};n.length>o;)a(n[o++]);t._c=[],t._n=!1,e&&!t._h&&j(t)})}},j=function(t){m.call(s,function(){var e,n,i,r=t._v;if(A(t)&&(e=O(function(){w?b.emit(\"unhandledRejection\",r,t):(n=s.onunhandledrejection)?n({promise:t,reason:r}):(i=s.console)&&i.error&&i.error(\"Unhandled promise rejection\",r)}),t._h=w||A(t)?2:1),t._a=void 0,e)throw e.error})},A=function(t){if(1==t._h)return!1;for(var e,n=t._a||t._c,i=0;n.length>i;)if((e=n[i++]).fail||!A(e.promise))return!1;return!0},M=function(t){m.call(s,function(){var e;w?b.emit(\"rejectionHandled\",t):(e=s.onrejectionhandled)&&e({promise:t,reason:t._v})})},D=function(t){var e=this;e._d||(e._d=!0,(e=e._w||e)._v=t,e._s=2,e._a||(e._a=e._c.slice()),P(e,!0))},I=function(t){var e,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===t)throw y(\"Promise can't be resolved itself\");(e=k(t))?v(function(){var i={_w:n,_d:!1};try{e.call(t,l(I,i,1),l(D,i,1))}catch(r){D.call(i,r)}}):(n._v=t,n._s=1,P(n,!1))}catch(i){D.call({_w:n,_d:!1},i)}}};C||(_=function(t){f(this,_,\"Promise\",\"_h\"),d(t),i.call(this);try{t(l(I,this,1),l(D,this,1))}catch(e){D.call(this,e)}},(i=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=n(65)(_.prototype,{then:function(t,e){var n=E(g(this,_));return n.ok=\"function\"!=typeof t||t,n.fail=\"function\"==typeof e&&e,n.domain=w?b.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&P(this,!1),n.promise},catch:function(t){return this.then(void 0,t)}}),T=function(){var t=new i;this.promise=t,this.resolve=l(I,t,1),this.reject=l(D,t,1)}),u(u.G+u.W+u.F*!C,{Promise:_}),n(46)(_,\"Promise\"),n(66)(\"Promise\"),o=n(14).Promise,u(u.S+u.F*!C,\"Promise\",{reject:function(t){var e=E(this);return(0,e.reject)(t),e.promise}}),u(u.S+u.F*(a||!C),\"Promise\",{resolve:function(t){if(t instanceof _&&S(t.constructor,this))return t;var e=E(this);return(0,e.resolve)(t),e.promise}}),u(u.S+u.F*!(C&&n(67)(function(t){_.all(t).catch(x)})),\"Promise\",{all:function(t){var e=this,n=E(e),i=n.resolve,r=n.reject,o=O(function(){var n=[],o=0,a=1;p(t,!1,function(t){var s=o++,l=!1;n.push(void 0),a++,e.resolve(t).then(function(t){l||(l=!0,n[s]=t,--a||i(n))},r)}),--a||i(n)});return o&&r(o.error),n.promise},race:function(t){var e=this,n=E(e),i=n.reject,r=O(function(){p(t,!1,function(t){e.resolve(t).then(n.resolve,i)})});return r&&i(r.error),n.promise}})},function(t,e,n){var i=n(37),r=n(47)(\"toStringTag\"),o=\"Arguments\"==i(function(){return arguments}());t.exports=function(t){var e,n,a;return void 0===t?\"Undefined\":null===t?\"Null\":\"string\"==typeof(n=function(t,e){try{return t[e]}catch(n){}}(e=Object(t),r))?n:o?i(e):\"Object\"==(a=i(e))&&\"function\"==typeof e.callee?\"Arguments\":a}},function(t,e){t.exports=function(t,e,n,i){if(!(t instanceof e)||void 0!==i&&i in t)throw TypeError(n+\": incorrect invocation!\");return t}},function(t,e,n){var i=n(15),r=n(58),o=n(59),a=n(19),s=n(39),l=n(60),c={},u={};(e=t.exports=function(t,e,n,h,d){var f,p,g,m,v=d?function(){return t}:l(t),y=i(n,h,e?2:1),b=0;if(\"function\"!=typeof v)throw TypeError(t+\" is not iterable!\");if(o(v)){for(f=s(t.length);f>b;b++)if((m=e?y(a(p=t[b])[0],p[1]):y(t[b]))===c||m===u)return m}else for(g=v.call(t);!(p=g.next()).done;)if((m=r(g,y,p.value,e))===c||m===u)return m}).BREAK=c,e.RETURN=u},function(t,e,n){var i=n(19);t.exports=function(t,e,n,r){try{return r?e(i(n)[0],n[1]):e(n)}catch(a){var o=t.return;throw void 0!==o&&i(o.call(t)),a}}},function(t,e,n){var i=n(29),r=n(47)(\"iterator\"),o=Array.prototype;t.exports=function(t){return void 0!==t&&(i.Array===t||o[r]===t)}},function(t,e,n){var i=n(55),r=n(47)(\"iterator\"),o=n(29);t.exports=n(14).getIteratorMethod=function(t){if(null!=t)return t[r]||t[\"@@iterator\"]||o[i(t)]}},function(t,e,n){var i=n(19),r=n(16),o=n(47)(\"species\");t.exports=function(t,e){var n,a=i(t).constructor;return void 0===a||null==(n=i(a)[o])?e:r(n)}},function(t,e,n){var i,r,o,a=n(15),s=n(63),l=n(45),c=n(24),u=n(13),h=u.process,d=u.setImmediate,f=u.clearImmediate,p=u.MessageChannel,g=0,m={},v=function(){var t=+this;if(m.hasOwnProperty(t)){var e=m[t];delete m[t],e()}},y=function(t){v.call(t.data)};d&&f||(d=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return m[++g]=function(){s(\"function\"==typeof t?t:Function(t),e)},i(g),g},f=function(t){delete m[t]},\"process\"==n(37)(h)?i=function(t){h.nextTick(a(v,t,1))}:p?(o=(r=new p).port2,r.port1.onmessage=y,i=a(o.postMessage,o,1)):u.addEventListener&&\"function\"==typeof postMessage&&!u.importScripts?(i=function(t){u.postMessage(t+\"\",\"*\")},u.addEventListener(\"message\",y,!1)):i=\"onreadystatechange\"in c(\"script\")?function(t){l.appendChild(c(\"script\")).onreadystatechange=function(){l.removeChild(this),v.call(t)}}:function(t){setTimeout(a(v,t,1),0)}),t.exports={set:d,clear:f}},function(t,e){t.exports=function(t,e,n){var i=void 0===n;switch(e.length){case 0:return i?t():t.call(n);case 1:return i?t(e[0]):t.call(n,e[0]);case 2:return i?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return i?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return i?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)}},function(t,e,n){var i=n(13),r=n(62).set,o=i.MutationObserver||i.WebKitMutationObserver,a=i.process,s=i.Promise,l=\"process\"==n(37)(a);t.exports=function(){var t,e,n,c=function(){var i,r;for(l&&(i=a.domain)&&i.exit();t;){r=t.fn,t=t.next;try{r()}catch(o){throw t?n():e=void 0,o}}e=void 0,i&&i.enter()};if(l)n=function(){a.nextTick(c)};else if(o){var u=!0,h=document.createTextNode(\"\");new o(c).observe(h,{characterData:!0}),n=function(){h.data=u=!u}}else if(s&&s.resolve){var d=s.resolve();n=function(){d.then(c)}}else n=function(){r.call(i,c)};return function(i){var r={fn:i,next:void 0};e&&(e.next=r),t||(t=r,n()),e=r}}},function(t,e,n){var i=n(17);t.exports=function(t,e,n){for(var r in e)n&&t[r]?t[r]=e[r]:i(t,r,e[r]);return t}},function(t,e,n){\"use strict\";var i=n(13),r=n(14),o=n(18),a=n(22),s=n(47)(\"species\");t.exports=function(t){var e=\"function\"==typeof r[t]?r[t]:i[t];a&&e&&!e[s]&&o.f(e,s,{configurable:!0,get:function(){return this}})}},function(t,e,n){var i=n(47)(\"iterator\"),r=!1;try{var o=[7][i]();o.return=function(){r=!0},Array.from(o,function(){throw 2})}catch(a){}t.exports=function(t,e){if(!e&&!r)return!1;var n=!1;try{var o=[7],s=o[i]();s.next=function(){return{done:n=!0}},o[i]=function(){return s},t(o)}catch(a){}return n}},function(t,e,n){\"use strict\";var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=l(n(3)),o=l(n(4)),a=l(n(69)),s=l(n(73));function l(t){return t&&t.__esModule?t:{default:t}}var c=s.default.eventNames,u=s.default.rejectMessages,h=r.default.isFunction,d=r.default.isString,f=r.default.CustomEvents,p=function(){function t(){!function(e,n){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this),this._undoStack=[],this._redoStack=[],this._isLocked=!1,this._isSilent=!1}return i(t,[{key:\"_invokeExecution\",value:function(t){var e=this;this.lock();var n=t.args;return n||(n=[]),t.execute.apply(t,n).then(function(n){return e._isSilent||e.pushUndoStack(t),e.unlock(),h(t.executeCallback)&&t.executeCallback(n),n}).catch(function(t){return e.unlock(),o.default.reject(t)})}},{key:\"_invokeUndo\",value:function(t){var e=this;this.lock();var n=t.args;return n||(n=[]),t.undo.apply(t,n).then(function(n){return e.pushRedoStack(t),e.unlock(),h(t.undoCallback)&&t.undoCallback(n),n}).catch(function(t){return e.unlock(),o.default.reject(t)})}},{key:\"_fireRedoStackChanged\",value:function(){this.fire(c.REDO_STACK_CHANGED,this._redoStack.length)}},{key:\"_fireUndoStackChanged\",value:function(){this.fire(c.UNDO_STACK_CHANGED,this._undoStack.length)}},{key:\"lock\",value:function(){this._isLocked=!0}},{key:\"unlock\",value:function(){this._isLocked=!1}},{key:\"executeSilent\",value:function(){var t=this;this._isSilent=!0;for(var e=arguments.length,n=Array(e),i=0;i<e;i++)n[i]=arguments[i];return this.execute.apply(this,n.concat([this._isSilent])).then(function(){t._isSilent=!1})}},{key:\"execute\",value:function(){var t=this;if(this._isLocked)return o.default.reject(u.isLock);for(var e=arguments.length,n=Array(e),i=0;i<e;i++)n[i]=arguments[i];var r=n[0];return d(r)&&(r=a.default.create.apply(a.default,n)),this._invokeExecution(r).then(function(e){return t.clearRedoStack(),e})}},{key:\"undo\",value:function(){var t=this._undoStack.pop(),e=void 0,n=\"\";return t&&this._isLocked&&(this.pushUndoStack(t,!0),t=null),t?(this.isEmptyUndoStack()&&this._fireUndoStackChanged(),e=this._invokeUndo(t)):(n=u.undo,this._isLocked&&(n=n+\" Because \"+u.isLock),e=o.default.reject(n)),e}},{key:\"redo\",value:function(){var t=this._redoStack.pop(),e=void 0,n=\"\";return t&&this._isLocked&&(this.pushRedoStack(t,!0),t=null),t?(this.isEmptyRedoStack()&&this._fireRedoStackChanged(),e=this._invokeExecution(t)):(n=u.redo,this._isLocked&&(n=n+\" Because \"+u.isLock),e=o.default.reject(n)),e}},{key:\"pushUndoStack\",value:function(t,e){this._undoStack.push(t),e||this._fireUndoStackChanged()}},{key:\"pushRedoStack\",value:function(t,e){this._redoStack.push(t),e||this._fireRedoStackChanged()}},{key:\"isEmptyRedoStack\",value:function(){return 0===this._redoStack.length}},{key:\"isEmptyUndoStack\",value:function(){return 0===this._undoStack.length}},{key:\"clearUndoStack\",value:function(){this.isEmptyUndoStack()||(this._undoStack=[],this._fireUndoStackChanged())}},{key:\"clearRedoStack\",value:function(){this.isEmptyRedoStack()||(this._redoStack=[],this._fireRedoStackChanged())}}]),t}();f.mixin(p),t.exports=p},function(t,e,n){\"use strict\";var i,r=(i=n(70))&&i.__esModule?i:{default:i},o={};t.exports={create:function(t){var e=o[t];if(e){for(var n=arguments.length,i=Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];return new r.default(e,i)}return null},register:function(t){o[t.name]=t}}},function(t,e,n){\"use strict\";var i,r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=(i=n(71))&&i.__esModule?i:{default:i},a=o.default.create,s=o.default.types,l=function(){function t(e,n){!function(e,n){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this),this.name=e.name,this.args=n,this.execute=e.execute,this.undo=e.undo,this.executeCallback=e.executeCallback||null,this.undoCallback=e.undoCallback||null,this.undoData={}}return r(t,[{key:\"execute\",value:function(){throw new Error(a(s.UN_IMPLEMENTATION,\"execute\"))}},{key:\"undo\",value:function(){throw new Error(a(s.UN_IMPLEMENTATION,\"undo\"))}},{key:\"setExecuteCallback\",value:function(t){return this.executeCallback=t,this}},{key:\"setUndoCallback\",value:function(t){return this.undoCallback=t,this}}]),t}();t.exports=l},function(t,e,n){\"use strict\";var i,r=(i=n(3))&&i.__esModule?i:{default:i},o=(0,n(72).keyMirror)(\"UN_IMPLEMENTATION\",\"NO_COMPONENT_NAME\"),a={UN_IMPLEMENTATION:function(t){return\"Should implement a method: \"+t},NO_COMPONENT_NAME:function(){return\"Should set a component name\"}};t.exports={types:r.default.extend({},o),create:function(t){t=t.toLowerCase();for(var e=a[t],n=arguments.length,i=Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return e.apply(void 0,i)}}},function(t,e,n){\"use strict\";var i=n(3),r=Math.min,o=Math.max,a=!1;t.exports={clamp:function(t,e,n){var i=void 0;return e>n&&(i=e,e=n,n=i),o(e,r(t,n))},keyMirror:function(){for(var t={},e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return(0,i.forEach)(n,function(e){t[e]=e}),t},makeStyleText:function(t){var e=\"\";return(0,i.forEach)(t,function(t,n){e+=n+\": \"+t+\";\"}),e},getProperties:function(t,e){var n={},i=e.length,r=0,o=void 0;for(r=0;r<i;r+=1)n[o=e[r]]=t[o];return n},toInteger:function(t){return parseInt(t,10)},toCamelCase:function(t){return t.replace(/-([a-z])/g,function(t,e){return e.toUpperCase()})},isSupportFileApi:function(){return!!(window.File&&window.FileList&&window.FileReader)},getRgb:function(t,e){return 4===t.length&&(t=\"\"+t+t.slice(1,4)),\"rgba(\"+parseInt(t.slice(1,3),16)+\", \"+parseInt(t.slice(3,5),16)+\", \"+parseInt(t.slice(5,7),16)+\", \"+(e||1)+\")\"},sendHostName:function(){a||(a=!0,(0,i.sendHostname)(\"image-editor\",\"UA-129999381-1\"))},styleLoad:function(t,e){var n=document.getElementsByTagName(\"head\")[0],i=document.createElement(\"link\"),r=encodeURIComponent(t);e&&(i.id=e),i.setAttribute(\"rel\",\"stylesheet\"),i.setAttribute(\"type\",\"text/css\"),i.setAttribute(\"href\",\"data:text/css;charset=UTF-8,\"+r),n.appendChild(i)},getSelector:function(t){return function(e){return t.querySelector(e)}},base64ToBlob:function(t){var e=\"\",n=void 0,i=void 0,r=void 0;n=t.replace(/data:(image\\/.+);base64,/,function(t,n){return e=n,\"\"});var o=(n=atob(n)).length;for(i=new Uint8Array(o),r=0;r<o;r+=1)i[r]=n.charCodeAt(r);return new Blob([i],{type:e})}}},function(t,e,n){\"use strict\";var i,r=(i=n(72))&&i.__esModule?i:{default:i};t.exports={componentNames:r.default.keyMirror(\"IMAGE_LOADER\",\"CROPPER\",\"FLIP\",\"ROTATION\",\"FREE_DRAWING\",\"LINE\",\"TEXT\",\"ICON\",\"FILTER\",\"SHAPE\"),commandNames:{CLEAR_OBJECTS:\"clearObjects\",LOAD_IMAGE:\"loadImage\",FLIP_IMAGE:\"flip\",ROTATE_IMAGE:\"rotate\",ADD_OBJECT:\"addObject\",REMOVE_OBJECT:\"removeObject\",APPLY_FILTER:\"applyFilter\",REMOVE_FILTER:\"removeFilter\",ADD_ICON:\"addIcon\",CHANGE_ICON_COLOR:\"changeIconColor\",ADD_SHAPE:\"addShape\",CHANGE_SHAPE:\"changeShape\",ADD_TEXT:\"addText\",CHANGE_TEXT:\"changeText\",CHANGE_TEXT_STYLE:\"changeTextStyle\",ADD_IMAGE_OBJECT:\"addImageObject\",RESIZE_CANVAS_DIMENSION:\"resizeCanvasDimension\",SET_OBJECT_PROPERTIES:\"setObjectProperties\",SET_OBJECT_POSITION:\"setObjectPosition\"},eventNames:{OBJECT_ACTIVATED:\"objectActivated\",OBJECT_MOVED:\"objectMoved\",OBJECT_SCALED:\"objectScaled\",OBJECT_CREATED:\"objectCreated\",TEXT_EDITING:\"textEditing\",TEXT_CHANGED:\"textChanged\",ICON_CREATE_RESIZE:\"iconCreateResize\",ICON_CREATE_END:\"iconCreateEnd\",ADD_TEXT:\"addText\",ADD_OBJECT:\"addObject\",ADD_OBJECT_AFTER:\"addObjectAfter\",MOUSE_DOWN:\"mousedown\",MOUSE_UP:\"mouseup\",MOUSE_MOVE:\"mousemove\",REDO_STACK_CHANGED:\"redoStackChanged\",UNDO_STACK_CHANGED:\"undoStackChanged\",SELECTION_CLEARED:\"selectionCleared\",SELECTION_CREATED:\"selectionCreated\"},drawingModes:r.default.keyMirror(\"NORMAL\",\"CROPPER\",\"FREE_DRAWING\",\"LINE_DRAWING\",\"TEXT\",\"SHAPE\"),keyCodes:{Z:90,Y:89,SHIFT:16,BACKSPACE:8,DEL:46},fObjectOptions:{SELECTION_STYLE:{borderColor:\"red\",cornerColor:\"green\",cornerSize:10,originX:\"center\",originY:\"center\",transparentCorners:!1}},rejectMessages:{addedObject:\"The object is already added.\",flip:\"The flipX and flipY setting values are not changed.\",invalidDrawingMode:\"This operation is not supported in the drawing mode.\",invalidParameters:\"Invalid parameters.\",isLock:\"The executing command state is locked.\",loadImage:\"The background image is empty.\",loadingImageFailed:\"Invalid image loaded.\",noActiveObject:\"There is no active object.\",noObject:\"The object is not in canvas.\",redo:\"The promise of redo command is reject.\",rotation:\"The current angle is same the old angle.\",undo:\"The promise of undo command is reject.\",unsupportedOperation:\"Unsupported operation.\",unsupportedType:\"Unsupported object type.\"},defaultIconPath:{\"icon-arrow\":\"M40 12V0l24 24-24 24V36H0V12h40z\",\"icon-arrow-2\":\"M49,32 H3 V22 h46 l-18,-18 h12 l23,23 L43,50 h-12 l18,-18  z \",\"icon-arrow-3\":\"M43.349998,27 L17.354,53 H1.949999 l25.996,-26 L1.949999,1 h15.404 L43.349998,27  z \",\"icon-star\":\"M35,54.557999 l-19.912001,10.468 l3.804,-22.172001 l-16.108,-15.7 l22.26,-3.236 L35,3.746 l9.956,20.172001 l22.26,3.236 l-16.108,15.7 l3.804,22.172001  z \",\"icon-star-2\":\"M17,31.212 l-7.194,4.08 l-4.728,-6.83 l-8.234,0.524 l-1.328,-8.226 l-7.644,-3.14 l2.338,-7.992 l-5.54,-6.18 l5.54,-6.176 l-2.338,-7.994 l7.644,-3.138 l1.328,-8.226 l8.234,0.522 l4.728,-6.83 L17,-24.312 l7.194,-4.08 l4.728,6.83 l8.234,-0.522 l1.328,8.226 l7.644,3.14 l-2.338,7.992 l5.54,6.178 l-5.54,6.178 l2.338,7.992 l-7.644,3.14 l-1.328,8.226 l-8.234,-0.524 l-4.728,6.83  z \",\"icon-polygon\":\"M3,31 L19,3 h32 l16,28 l-16,28 H19  z \",\"icon-location\":\"M24 62C8 45.503 0 32.837 0 24 0 10.745 10.745 0 24 0s24 10.745 24 24c0 8.837-8 21.503-24 38zm0-28c5.523 0 10-4.477 10-10s-4.477-10-10-10-10 4.477-10 10 4.477 10 10 10z\",\"icon-heart\":\"M49.994999,91.349998 l-6.96,-6.333 C18.324001,62.606995 2.01,47.829002 2.01,29.690998 C2.01,14.912998 13.619999,3.299999 28.401001,3.299999 c8.349,0 16.362,5.859 21.594,12 c5.229,-6.141 13.242001,-12 21.591,-12 c14.778,0 26.390999,11.61 26.390999,26.390999 c0,18.138 -16.314001,32.916 -41.025002,55.374001 l-6.96,6.285  z \",\"icon-bubble\":\"M44 48L34 58V48H12C5.373 48 0 42.627 0 36V12C0 5.373 5.373 0 12 0h40c6.627 0 12 5.373 12 12v24c0 6.627-5.373 12-12 12h-8z\"},defaultRotateRangeValus:{realTimeEvent:!0,min:-360,max:360,value:0},defaultDrawRangeValus:{min:5,max:30,value:12},defaultShapeStrokeValus:{realTimeEvent:!1,min:2,max:300,value:3},defaultTextRangeValus:{realTimeEvent:!0,min:10,max:100,value:50},defaultFilterRangeValus:{tintOpacityRange:{min:0,max:1,value:.7},removewhiteDistanceRange:{min:0,max:1,value:.2},brightnessRange:{min:-1,max:1,value:0},noiseRange:{min:0,max:1e3,value:100},pixelateRange:{min:2,max:20,value:4},colorfilterThresholeRange:{min:0,max:1,value:.2}}}},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=b(n(3)),o=b(n(72)),a=b(n(75)),s=b(n(76)),l=b(n(77)),c=b(n(80)),u=b(n(86)),h=b(n(88)),d=b(n(90)),f=b(n(92)),p=b(n(94)),g=b(n(96)),m=b(n(98)),v=b(n(100)),y=b(n(102));function b(t){return t&&t.__esModule?t:{default:t}}var _={Shape:c.default,Crop:u.default,Flip:h.default,Rotate:d.default,Text:f.default,Mask:p.default,Icon:g.default,Draw:m.default,Filter:v.default},w=function(){function t(e,n,i){!function(e,n){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this),this.options=this._initializeOption(n),this._actions=i,this.submenu=!1,this.imageSize={},this.uiSize={},this._locale=new y.default(this.options.locale),this.theme=new l.default(this.options.theme),this._submenuChangeTransection=!1,this._selectedElement=null,this._mainElement=null,this._editorElementWrap=null,this._editorElement=null,this._menuElement=null,this._subMenuElement=null,this._makeUiElement(e),this._setUiSize(),this._initMenuEvent=!1,this._els={undo:this._menuElement.querySelector(\"#tie-btn-undo\"),redo:this._menuElement.querySelector(\"#tie-btn-redo\"),reset:this._menuElement.querySelector(\"#tie-btn-reset\"),delete:this._menuElement.querySelector(\"#tie-btn-delete\"),deleteAll:this._menuElement.querySelector(\"#tie-btn-delete-all\"),download:this._selectedElement.querySelectorAll(\".tui-image-editor-download-btn\"),load:this._selectedElement.querySelectorAll(\".tui-image-editor-load-btn\")},this._makeSubMenu()}return i(t,[{key:\"setUiDefaultSelectionStyle\",value:function(t){return r.default.extend({applyCropSelectionStyle:!0,applyGroupSelectionStyle:!0,selectionStyle:{cornerStyle:\"circle\",cornerSize:16,cornerColor:\"#fff\",cornerStrokeColor:\"#fff\",transparentCorners:!1,lineWidth:2,borderColor:\"#fff\"}},t)}},{key:\"resizeEditor\",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.uiSize,n=t.imageSize,i=void 0===n?this.imageSize:n;i!==this.imageSize&&(this.imageSize=i),e&&this._setUiSize(e);var r=this._getEditorDimension(),o=r.width,a=this._editorElement.style,s=this.options.menuBarPosition;a.height=r.height+\"px\",a.width=o+\"px\",this._setEditorPosition(s),this._editorElementWrap.style.bottom=\"0px\",this._editorElementWrap.style.top=\"0px\",this._editorElementWrap.style.left=\"0px\",this._editorElementWrap.style.width=\"100%\";var l=this._selectedElement.classList;\"top\"===s&&this._selectedElement.offsetWidth<\"1300\"?l.add(\"tui-image-editor-top-optimization\"):l.remove(\"tui-image-editor-top-optimization\")}},{key:\"changeUndoButtonStatus\",value:function(t){t?this._els.undo.classList.add(\"enabled\"):this._els.undo.classList.remove(\"enabled\")}},{key:\"changeRedoButtonStatus\",value:function(t){t?this._els.redo.classList.add(\"enabled\"):this._els.redo.classList.remove(\"enabled\")}},{key:\"changeResetButtonStatus\",value:function(t){t?this._els.reset.classList.add(\"enabled\"):this._els.reset.classList.remove(\"enabled\")}},{key:\"changeDeleteAllButtonEnabled\",value:function(t){t?this._els.deleteAll.classList.add(\"enabled\"):this._els.deleteAll.classList.remove(\"enabled\")}},{key:\"changeDeleteButtonEnabled\",value:function(t){t?this._els.delete.classList.add(\"enabled\"):this._els.delete.classList.remove(\"enabled\")}},{key:\"_initializeOption\",value:function(t){return r.default.extend({loadImage:{path:\"\",name:\"\"},locale:{},menuIconPath:\"\",menu:[\"crop\",\"flip\",\"rotate\",\"draw\",\"shape\",\"icon\",\"text\",\"mask\",\"filter\"],initMenu:\"\",uiSize:{width:\"100%\",height:\"100%\"},menuBarPosition:\"bottom\"},t)}},{key:\"_setUiSize\",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options.uiSize,e=this._selectedElement.style;e.width=t.width,e.height=t.height}},{key:\"_makeSubMenu\",value:function(){var t=this;r.default.forEach(this.options.menu,function(e){var n=_[e.replace(/^[a-z]/,function(t){return t.toUpperCase()})];t._makeMenuElement(e),t._els[e]=t._menuElement.querySelector(\"#tie-btn-\"+e),t[e]=new n(t._subMenuElement,{locale:t._locale,iconStyle:t.theme.getStyle(\"submenu.icon\"),menuBarPosition:t.options.menuBarPosition,usageStatistics:t.options.usageStatistics})})}},{key:\"_makeUiElement\",value:function(t){var e=void 0;window.snippet=r.default,e=t.nodeType?t:document.querySelector(t);var n=o.default.getSelector(e);e.classList.add(\"tui-image-editor-container\"),e.innerHTML=(0,s.default)({locale:this._locale,biImage:this.theme.getStyle(\"common.bi\"),iconStyle:this.theme.getStyle(\"menu.icon\"),loadButtonStyle:this.theme.getStyle(\"loadButton\"),downloadButtonStyle:this.theme.getStyle(\"downloadButton\")})+(0,a.default)({locale:this._locale,biImage:this.theme.getStyle(\"common.bi\"),commonStyle:this.theme.getStyle(\"common\"),headerStyle:this.theme.getStyle(\"header\"),loadButtonStyle:this.theme.getStyle(\"loadButton\"),downloadButtonStyle:this.theme.getStyle(\"downloadButton\"),submenuStyle:this.theme.getStyle(\"submenu\")}),this._selectedElement=e,this._selectedElement.classList.add(this.options.menuBarPosition),this._mainElement=n(\".tui-image-editor-main\"),this._editorElementWrap=n(\".tui-image-editor-wrap\"),this._editorElement=n(\".tui-image-editor\"),this._menuElement=n(\".tui-image-editor-menu\"),this._subMenuElement=n(\".tui-image-editor-submenu\")}},{key:\"_makeMenuElement\",value:function(t){var e=document.createElement(\"li\"),n=this.theme.getStyle(\"menu.icon\"),i=n.normal,r=n.active,o=n.hover,a='\\n            <svg class=\"svg_ic-menu\">\\n                <use xlink:href=\"'+i.path+\"#\"+i.name+\"-ic-\"+t+'\" class=\"normal\"/>\\n                <use xlink:href=\"'+r.path+\"#\"+r.name+\"-ic-\"+t+'\" class=\"active\"/>\\n                <use xlink:href=\"'+o.path+\"#\"+o.name+\"-ic-\"+t+'\" class=\"hover\"/>\\n            </svg>\\n        ';e.id=\"tie-btn-\"+t,e.className=\"tui-image-editor-item normal\",e.setAttribute(\"tooltip-content\",this._locale.localize(t.replace(/^[a-z]/g,function(t){return t.toUpperCase()}))),e.innerHTML=a,this._menuElement.appendChild(e)}},{key:\"_addHelpActionEvent\",value:function(t){var e=this;this._els[t].addEventListener(\"click\",function(){e._actions.main[t]()})}},{key:\"_addDownloadEvent\",value:function(){var t=this;r.default.forEach(this._els.download,function(e){e.addEventListener(\"click\",function(){t._actions.main.download()})})}},{key:\"_addLoadEvent\",value:function(){var t=this;r.default.forEach(this._els.load,function(e){e.addEventListener(\"change\",function(e){t._actions.main.load(e.target.files[0])})})}},{key:\"_addMenuEvent\",value:function(t){var e=this;this._els[t].addEventListener(\"click\",function(){e.changeMenu(t)})}},{key:\"_addSubMenuEvent\",value:function(t){this[t].addEvent(this._actions[t])}},{key:\"getEditorArea\",value:function(){return this._editorElement}},{key:\"activeMenuEvent\",value:function(){var t=this;this._initMenuEvent||(this._addHelpActionEvent(\"undo\"),this._addHelpActionEvent(\"redo\"),this._addHelpActionEvent(\"reset\"),this._addHelpActionEvent(\"delete\"),this._addHelpActionEvent(\"deleteAll\"),this._addDownloadEvent(),r.default.forEach(this.options.menu,function(e){t._addMenuEvent(e),t._addSubMenuEvent(e)}),this._initMenu(),this._initMenuEvent=!0)}},{key:\"initCanvas\",value:function(){var t=this,e=this._getLoadImage();e.path&&this._actions.main.initLoadImage(e.path,e.name).then(function(){t.activeMenuEvent()}),this._addLoadEvent();var n=document.createElement(\"div\");n.className=\"tui-image-editor-grid-visual\",n.innerHTML='<table>\\n           <tr><td class=\"dot left-top\"></td><td></td><td class=\"dot right-top\"></td></tr>\\n           <tr><td></td><td></td><td></td></tr>\\n           <tr><td class=\"dot left-bottom\"></td><td></td><td class=\"dot right-bottom\"></td></tr>\\n         </table>',this._editorContainerElement=this._editorElement.querySelector(\".tui-image-editor-canvas-container\"),this._editorContainerElement.appendChild(n)}},{key:\"_getLoadImage\",value:function(){return this.options.loadImage}},{key:\"changeMenu\",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this._submenuChangeTransection||(this._submenuChangeTransection=!0,this._changeMenu(t,e,n),this._submenuChangeTransection=!1)}},{key:\"_changeMenu\",value:function(t,e,n){this.submenu&&(this._els[this.submenu].classList.remove(\"active\"),this._mainElement.classList.remove(\"tui-image-editor-menu-\"+this.submenu),n&&this._actions.main.discardSelection(),this._actions.main.changeSelectableAll(!0),this[this.submenu].changeStandbyMode()),this.submenu===t&&e?this.submenu=null:(this._els[t].classList.add(\"active\"),this._mainElement.classList.add(\"tui-image-editor-menu-\"+t),this.submenu=t,this[this.submenu].changeStartMode()),this.resizeEditor()}},{key:\"_initMenu\",value:function(){if(this.options.initMenu){var t=document.createEvent(\"MouseEvents\");t.initEvent(\"click\",!0,!1),this._els[this.options.initMenu].dispatchEvent(t)}this.icon&&this.icon.registDefaultIcon()}},{key:\"_getEditorDimension\",value:function(){var t=parseFloat(this._editorContainerElement.style.maxHeight),e=this.imageSize.newHeight>t?t:this.imageSize.newHeight,n=parseFloat(this._editorContainerElement.style.maxWidth);return{width:this.imageSize.newWidth>n?n:this.imageSize.newWidth,height:e}}},{key:\"_setEditorPosition\",value:function(t){var e=this._getEditorDimension(),n=e.width,i=e.height,r=this._editorElement.style,o=0,a=0;this.submenu&&(\"bottom\"===t?o=i>this._editorElementWrap.scrollHeight-150?(i-this._editorElementWrap.scrollHeight)/2:-75:\"top\"===t?o=i>this._editorElementWrap.offsetHeight-150?75-(i-(this._editorElementWrap.offsetHeight-150))/2:75:\"left\"===t?a=n>this._editorElementWrap.offsetWidth-248?124-(n-(this._editorElementWrap.offsetWidth-248))/2:124:\"right\"===t&&(a=n>this._editorElementWrap.scrollWidth-248?(n-this._editorElementWrap.scrollWidth)/2:-124)),r.top=o+\"px\",r.left=a+\"px\"}}]),t}();e.default=w},function(t,e){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.default=function(t){var e=t.locale,n=t.downloadButtonStyle,i=t.submenuStyle;return'\\n    <div class=\"tui-image-editor-main-container\" style=\"'+t.commonStyle+'\">\\n        <div class=\"tui-image-editor-header\" style=\"'+t.headerStyle+'\">\\n            <div class=\"tui-image-editor-header-logo\">\\n                <img src=\"'+t.biImage+'\" />\\n            </div>\\n            <div class=\"tui-image-editor-header-buttons\">\\n                <div style=\"'+t.loadButtonStyle+'\">\\n                    '+e.localize(\"Load\")+'\\n                    <input type=\"file\" class=\"tui-image-editor-load-btn\" />\\n                </div>\\n                <button class=\"tui-image-editor-download-btn\" style=\"'+n+'\">\\n                    '+e.localize(\"Download\")+'\\n                </button>\\n            </div>\\n        </div>\\n        <div class=\"tui-image-editor-main\">\\n            <div class=\"tui-image-editor-submenu\">\\n                <div class=\"tui-image-editor-submenu-style\" style=\"'+i+'\"></div>\\n            </div>\\n            <div class=\"tui-image-editor-wrap\">\\n                <div class=\"tui-image-editor-size-wrap\">\\n                    <div class=\"tui-image-editor-align-wrap\">\\n                        <div class=\"tui-image-editor\"></div>\\n                    </div>\\n                </div>\\n            </div>\\n        </div>\\n    </div>\\n'}},function(t,e){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.default=function(t){var e=t.locale,n=t.iconStyle,i=n.normal,r=n.hover,o=n.disabled,a=t.downloadButtonStyle;return'\\n    <div class=\"tui-image-editor-controls\">\\n        <div class=\"tui-image-editor-controls-logo\">\\n            <img src=\"'+t.biImage+'\" />\\n        </div>\\n        <ul class=\"tui-image-editor-menu\">\\n            <li id=\"tie-btn-undo\" class=\"tui-image-editor-item\">\\n                <svg class=\"svg_ic-menu\">\\n                    <use xlink:href=\"'+i.path+\"#\"+i.name+'-ic-undo\" class=\"enabled\"/>\\n                    <use xlink:href=\"'+o.path+\"#\"+o.name+'-ic-undo\" class=\"normal\"/>\\n                    <use xlink:href=\"'+r.path+\"#\"+r.name+'-ic-undo\" class=\"hover\"/>\\n                </svg>\\n            </li>\\n            <li id=\"tie-btn-redo\" class=\"tui-image-editor-item\">\\n                <svg class=\"svg_ic-menu\">\\n                    <use xlink:href=\"'+i.path+\"#\"+i.name+'-ic-redo\" class=\"enabled\"/>\\n                    <use xlink:href=\"'+o.path+\"#\"+o.name+'-ic-redo\" class=\"normal\"/>\\n                    <use xlink:href=\"'+r.path+\"#\"+r.name+'-ic-redo\" class=\"hover\"/>\\n                </svg>\\n            </li>\\n            <li id=\"tie-btn-reset\" class=\"tui-image-editor-item\">\\n                <svg class=\"svg_ic-menu\">\\n                    <use xlink:href=\"'+i.path+\"#\"+i.name+'-ic-reset\" class=\"enabled\"/>\\n                    <use xlink:href=\"'+o.path+\"#\"+o.name+'-ic-reset\" class=\"normal\"/>\\n                    <use xlink:href=\"'+r.path+\"#\"+r.name+'-ic-reset\" class=\"hover\"/>\\n                </svg>\\n            </li>\\n            <li class=\"tui-image-editor-item\">\\n                <div class=\"tui-image-editor-icpartition\"></div>\\n            </li>\\n            <li id=\"tie-btn-delete\" class=\"tui-image-editor-item\">\\n                <svg class=\"svg_ic-menu\">\\n                    <use xlink:href=\"'+i.path+\"#\"+i.name+'-ic-delete\" class=\"enabled\"/>\\n                    <use xlink:href=\"'+o.path+\"#\"+o.name+'-ic-delete\" class=\"normal\"/>\\n                    <use xlink:href=\"'+r.path+\"#\"+r.name+'-ic-delete\" class=\"hover\"/>\\n                </svg>\\n            </li>\\n            <li id=\"tie-btn-delete-all\" class=\"tui-image-editor-item\">\\n                <svg class=\"svg_ic-menu\">\\n                    <use xlink:href=\"'+i.path+\"#\"+i.name+'-ic-delete-all\" class=\"enabled\"/>\\n                    <use xlink:href=\"'+o.path+\"#\"+o.name+'-ic-delete-all\" class=\"normal\"/>\\n                    <use xlink:href=\"'+r.path+\"#\"+r.name+'-ic-delete-all\" class=\"hover\"/>\\n                </svg>\\n            </li>\\n            <li class=\"tui-image-editor-item\">\\n                <div class=\"tui-image-editor-icpartition\"></div>\\n            </li>\\n        </ul>\\n\\n        <div class=\"tui-image-editor-controls-buttons\">\\n            <div style=\"'+t.loadButtonStyle+'\">\\n                '+e.localize(\"Load\")+'\\n                <input type=\"file\" class=\"tui-image-editor-load-btn\" />\\n            </div>\\n            <button class=\"tui-image-editor-download-btn\" style=\"'+a+'\">\\n                '+e.localize(\"Download\")+\"\\n            </button>\\n        </div>\\n    </div>\\n\"}},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(3),o=n(72),a=l(n(78)),s=l(n(79));function l(t){return t&&t.__esModule?t:{default:t}}var c=function(){function t(e){!function(e,n){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this),this.styles=this._changeToObject((0,r.extend)(s.default,e)),(0,o.styleLoad)(this._styleMaker())}return i(t,[{key:\"getStyle\",value:function(t){var e=null,n=t.replace(/\\..+$/,\"\"),i=this.styles[t];switch(t){case\"common.bi\":e=this.styles[t].image;break;case\"menu.icon\":case\"submenu.icon\":e={active:this.styles[n+\".activeIcon\"],normal:this.styles[n+\".normalIcon\"],hover:this.styles[n+\".hoverIcon\"],disabled:this.styles[n+\".disabledIcon\"]};break;case\"submenu.label\":e={active:this._makeCssText(this.styles[n+\".activeLabel\"]),normal:this._makeCssText(this.styles[n+\".normalLabel\"])};break;case\"submenu.partition\":e={vertical:this._makeCssText((0,r.extend)({},i,{borderLeft:\"1px solid \"+i.color})),horizontal:this._makeCssText((0,r.extend)({},i,{borderBottom:\"1px solid \"+i.color}))};break;case\"range.disabledPointer\":case\"range.disabledBar\":case\"range.disabledSubbar\":case\"range.pointer\":case\"range.bar\":case\"range.subbar\":i.backgroundColor=i.color,e=this._makeCssText(i);break;default:e=this._makeCssText(i)}return e}},{key:\"_styleMaker\",value:function(){var t=this.getStyle(\"submenu.label\"),e=this.getStyle(\"submenu.partition\");return(0,a.default)({subMenuLabelActive:t.active,subMenuLabelNormal:t.normal,submenuPartitionVertical:e.vertical,submenuPartitionHorizontal:e.horizontal,biSize:this.getStyle(\"common.bisize\"),subMenuRangeTitle:this.getStyle(\"range.title\"),submenuRangePointer:this.getStyle(\"range.pointer\"),submenuRangeBar:this.getStyle(\"range.bar\"),submenuRangeSubbar:this.getStyle(\"range.subbar\"),submenuDisabledRangePointer:this.getStyle(\"range.disabledPointer\"),submenuDisabledRangeBar:this.getStyle(\"range.disabledBar\"),submenuDisabledRangeSubbar:this.getStyle(\"range.disabledSubbar\"),submenuRangeValue:this.getStyle(\"range.value\"),submenuColorpickerTitle:this.getStyle(\"colorpicker.title\"),submenuColorpickerButton:this.getStyle(\"colorpicker.button\"),submenuCheckbox:this.getStyle(\"checkbox\"),menuIconSize:this.getStyle(\"menu.iconSize\"),submenuIconSize:this.getStyle(\"submenu.iconSize\")})}},{key:\"_changeToObject\",value:function(t){var e={};return(0,r.forEach)(t,function(t,n){var i=n.match(/^(.+)\\.([a-z]+)$/i),r=i[1],o=i[2];e[r]||(e[r]={}),e[r][o]=t}),e}},{key:\"_makeCssText\",value:function(t){var e=this,n=[];return(0,r.forEach)(t,function(t,i){[\"backgroundImage\"].indexOf(i)>-1&&\"none\"!==t&&(t=\"url(\"+t+\")\"),n.push(e._toUnderScore(i)+\": \"+t)}),n.join(\";\")}},{key:\"_toUnderScore\",value:function(t){return t.replace(/([A-Z])/g,function(t,e){return\"-\"+e.toLowerCase()})}}]),t}();e.default=c},function(t,e){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.default=function(t){return'\\n    #tie-icon-add-button.icon-bubble .tui-image-editor-button[data-icontype=\"icon-bubble\"] label,\\n    #tie-icon-add-button.icon-heart .tui-image-editor-button[data-icontype=\"icon-heart\"] label,\\n    #tie-icon-add-button.icon-location .tui-image-editor-button[data-icontype=\"icon-location\"] label,\\n    #tie-icon-add-button.icon-polygon .tui-image-editor-button[data-icontype=\"icon-polygon\"] label,\\n    #tie-icon-add-button.icon-star .tui-image-editor-button[data-icontype=\"icon-star\"] label,\\n    #tie-icon-add-button.icon-star-2 .tui-image-editor-button[data-icontype=\"icon-star-2\"] label,\\n    #tie-icon-add-button.icon-arrow-3 .tui-image-editor-button[data-icontype=\"icon-arrow-3\"] label,\\n    #tie-icon-add-button.icon-arrow-2 .tui-image-editor-button[data-icontype=\"icon-arrow-2\"] label,\\n    #tie-icon-add-button.icon-arrow .tui-image-editor-button[data-icontype=\"icon-arrow\"] label,\\n    #tie-icon-add-button.icon-bubble .tui-image-editor-button[data-icontype=\"icon-bubble\"] label,\\n    #tie-draw-line-select-button.line .tui-image-editor-button.line label,\\n    #tie-draw-line-select-button.free .tui-image-editor-button.free label,\\n    #tie-flip-button.flipX .tui-image-editor-button.flipX label,\\n    #tie-flip-button.flipY .tui-image-editor-button.flipY label,\\n    #tie-flip-button.resetFlip .tui-image-editor-button.resetFlip label,\\n    #tie-crop-button .tui-image-editor-button.apply.active label,\\n    #tie-crop-preset-button .tui-image-editor-button.preset.active label,\\n    #tie-shape-button.rect .tui-image-editor-button.rect label,\\n    #tie-shape-button.circle .tui-image-editor-button.circle label,\\n    #tie-shape-button.triangle .tui-image-editor-button.triangle label,\\n    #tie-text-effect-button .tui-image-editor-button.active label,\\n    #tie-text-align-button.left .tui-image-editor-button.left label,\\n    #tie-text-align-button.center .tui-image-editor-button.center label,\\n    #tie-text-align-button.right .tui-image-editor-button.right label,\\n    #tie-mask-apply.apply.active .tui-image-editor-button.apply label,\\n    .tui-image-editor-container .tui-image-editor-submenu .tui-image-editor-button:hover > label,\\n    .tui-image-editor-container .tui-image-editor-checkbox input + label {\\n        '+t.subMenuLabelActive+\"\\n    }\\n    .tui-image-editor-container .tui-image-editor-submenu .tui-image-editor-button > label,\\n    .tui-image-editor-container .tui-image-editor-range-wrap.tui-image-editor-newline.short label {\\n        \"+t.subMenuLabelNormal+\"\\n    }\\n    .tui-image-editor-container .tui-image-editor-range-wrap label {\\n        \"+t.subMenuRangeTitle+\"\\n    }\\n    .tui-image-editor-container .tui-image-editor-partition > div {\\n        \"+t.submenuPartitionVertical+\"\\n    }\\n    .tui-image-editor-container.left .tui-image-editor-submenu .tui-image-editor-partition > div,\\n    .tui-image-editor-container.right .tui-image-editor-submenu .tui-image-editor-partition > div {\\n        \"+t.submenuPartitionHorizontal+\"\\n    }\\n    .tui-image-editor-container .tui-image-editor-checkbox input + label:before {\\n        \"+t.submenuCheckbox+\"\\n    }\\n    .tui-image-editor-container .tui-image-editor-checkbox input:checked + label:before {\\n        border: 0;\\n    }\\n    .tui-image-editor-container .tui-image-editor-virtual-range-pointer {\\n        \"+t.submenuRangePointer+\"\\n    }\\n    .tui-image-editor-container .tui-image-editor-virtual-range-bar {\\n        \"+t.submenuRangeBar+\"\\n    }\\n    .tui-image-editor-container .tui-image-editor-virtual-range-subbar {\\n        \"+t.submenuRangeSubbar+\"\\n    }\\n    .tui-image-editor-container .tui-image-editor-disabled .tui-image-editor-virtual-range-pointer {\\n        \"+t.submenuDisabledRangePointer+\"\\n    }\\n    .tui-image-editor-container .tui-image-editor-disabled .tui-image-editor-virtual-range-subbar {\\n        \"+t.submenuDisabledRangeSubbar+\"\\n    }\\n    .tui-image-editor-container .tui-image-editor-disabled .tui-image-editor-virtual-range-bar {\\n        \"+t.submenuDisabledRangeBar+\"\\n    }\\n    .tui-image-editor-container .tui-image-editor-range-value {\\n        \"+t.submenuRangeValue+\"\\n    }\\n    .tui-image-editor-container .tui-image-editor-submenu .tui-image-editor-button .color-picker-value + label {\\n        \"+t.submenuColorpickerTitle+\"\\n    }\\n    .tui-image-editor-container .tui-image-editor-submenu .tui-image-editor-button .color-picker-value {\\n        \"+t.submenuColorpickerButton+\"\\n    }\\n    .tui-image-editor-container .svg_ic-menu {\\n        \"+t.menuIconSize+\"\\n    }\\n    .tui-image-editor-container .svg_ic-submenu {\\n        \"+t.submenuIconSize+\"\\n    }\\n    .tui-image-editor-container .tui-image-editor-controls-logo > img,\\n    .tui-image-editor-container .tui-image-editor-header-logo > img {\\n        \"+t.biSize+\"\\n    }\\n\\n\"}},function(t,e){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.default={\"common.bi.image\":\"\",\"common.bisize.width\":\"1px\",\"common.bisize.height\":\"1px\",\"common.backgroundImage\":\"none\",\"common.backgroundColor\":\"#1e1e1e\",\"common.border\":\"0px\",\"header.backgroundImage\":\"none\",\"header.backgroundColor\":\"transparent\",\"header.border\":\"0px\",\"loadButton.backgroundColor\":\"#fff\",\"loadButton.border\":\"1px solid #ddd\",\"loadButton.color\":\"#222\",\"loadButton.fontFamily\":\"'Noto Sans', sans-serif\",\"loadButton.fontSize\":\"12px\",\"downloadButton.backgroundColor\":\"#fdba3b\",\"downloadButton.border\":\"1px solid #fdba3b\",\"downloadButton.color\":\"#fff\",\"downloadButton.fontFamily\":\"'Noto Sans', sans-serif\",\"downloadButton.fontSize\":\"12px\",\"menu.normalIcon.path\":\"icon-d.svg\",\"menu.normalIcon.name\":\"icon-d\",\"menu.activeIcon.path\":\"icon-b.svg\",\"menu.activeIcon.name\":\"icon-b\",\"menu.disabledIcon.path\":\"icon-a.svg\",\"menu.disabledIcon.name\":\"icon-a\",\"menu.hoverIcon.path\":\"icon-c.svg\",\"menu.hoverIcon.name\":\"icon-c\",\"menu.iconSize.width\":\"24px\",\"menu.iconSize.height\":\"24px\",\"submenu.backgroundColor\":\"#1e1e1e\",\"submenu.partition.color\":\"#3c3c3c\",\"submenu.normalIcon.path\":\"icon-d.svg\",\"submenu.normalIcon.name\":\"icon-d\",\"submenu.activeIcon.path\":\"icon-c.svg\",\"submenu.activeIcon.name\":\"icon-c\",\"submenu.iconSize.width\":\"32px\",\"submenu.iconSize.height\":\"32px\",\"submenu.normalLabel.color\":\"#8a8a8a\",\"submenu.normalLabel.fontWeight\":\"lighter\",\"submenu.activeLabel.color\":\"#fff\",\"submenu.activeLabel.fontWeight\":\"lighter\",\"checkbox.border\":\"0px\",\"checkbox.backgroundColor\":\"#fff\",\"range.pointer.color\":\"#fff\",\"range.bar.color\":\"#666\",\"range.subbar.color\":\"#d1d1d1\",\"range.disabledPointer.color\":\"#414141\",\"range.disabledBar.color\":\"#282828\",\"range.disabledSubbar.color\":\"#414141\",\"range.value.color\":\"#fff\",\"range.value.fontWeight\":\"lighter\",\"range.value.fontSize\":\"11px\",\"range.value.border\":\"1px solid #353535\",\"range.value.backgroundColor\":\"#151515\",\"range.title.color\":\"#fff\",\"range.title.fontWeight\":\"lighter\",\"colorpicker.button.border\":\"1px solid #1e1e1e\",\"colorpicker.title.color\":\"#fff\"}},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=u(n(81)),o=u(n(83)),a=u(n(84)),s=u(n(85)),l=n(72),c=n(73);function u(t){return t&&t.__esModule?t:{default:t}}var h={stroke:\"#ffbb3b\",fill:\"\",strokeWidth:3},d=function(t){function e(t,n){var i=n.locale,a=n.iconStyle,l=n.menuBarPosition,u=n.usageStatistics;!function(t,n){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this);var d=function(t,e){if(!t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!e||\"object\"!=typeof e&&\"function\"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,{locale:i,name:\"shape\",iconStyle:a,menuBarPosition:l,templateHtml:s.default,usageStatistics:u}));return d.type=null,d.options=h,d._els={shapeSelectButton:d.selector(\"#tie-shape-button\"),shapeColorButton:d.selector(\"#tie-shape-color-button\"),strokeRange:new o.default(d.selector(\"#tie-stroke-range\"),c.defaultShapeStrokeValus),strokeRangeValue:d.selector(\"#tie-stroke-range-value\"),fillColorpicker:new r.default(d.selector(\"#tie-color-fill\"),\"\",d.toggleDirection,d.usageStatistics),strokeColorpicker:new r.default(d.selector(\"#tie-color-stroke\"),\"#ffbb3b\",d.toggleDirection,d.usageStatistics)},d.colorPickerControls.push(d._els.fillColorpicker),d.colorPickerControls.push(d._els.strokeColorpicker),d}return function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.default),i(e,[{key:\"addEvent\",value:function(t){this.actions=t,this._els.shapeSelectButton.addEventListener(\"click\",this._changeShapeHandler.bind(this)),this._els.strokeRange.on(\"change\",this._changeStrokeRangeHandler.bind(this)),this._els.fillColorpicker.on(\"change\",this._changeFillColorHandler.bind(this)),this._els.strokeColorpicker.on(\"change\",this._changeStrokeColorHandler.bind(this)),this._els.fillColorpicker.on(\"changeShow\",this.colorPickerChangeShow.bind(this)),this._els.strokeColorpicker.on(\"changeShow\",this.colorPickerChangeShow.bind(this)),this._els.strokeRangeValue.value=this._els.strokeRange.value,this._els.strokeRangeValue.setAttribute(\"readonly\",!0)}},{key:\"setShapeStatus\",value:function(t){var e=t.strokeWidth,n=t.strokeColor,i=t.fillColor;this._els.strokeRange.value=e,this._els.strokeRange.trigger(\"change\"),this._els.strokeColorpicker.color=n,this._els.fillColorpicker.color=i,this.options.stroke=n,this.options.fill=i,this.options.strokeWidth=e}},{key:\"changeStartMode\",value:function(){this.actions.stopDrawingMode()}},{key:\"changeStandbyMode\",value:function(){this.type=null,this.actions.changeSelectableAll(!0),this._els.shapeSelectButton.classList.remove(\"circle\"),this._els.shapeSelectButton.classList.remove(\"triangle\"),this._els.shapeSelectButton.classList.remove(\"rect\")}},{key:\"setMaxStrokeValue\",value:function(t){var e=t;e<=0&&(e=c.defaultShapeStrokeValus.max),this._els.strokeRange.max=e}},{key:\"setStrokeValue\",value:function(t){this._els.strokeRange.value=t,this._els.strokeRange.trigger(\"change\")}},{key:\"getStrokeValue\",value:function(){return this._els.strokeRange.value}},{key:\"_changeShapeHandler\",value:function(t){var e=t.target.closest(\".tui-image-editor-button\");if(e){this.actions.stopDrawingMode(),this.actions.discardSelection();var n=this.getButtonType(e,[\"circle\",\"triangle\",\"rect\"]);if(this.type===n)return void this.changeStandbyMode();this.changeStandbyMode(),this.type=n,t.currentTarget.classList.add(n),this.actions.changeSelectableAll(!1),this.actions.modeChange(\"shape\")}}},{key:\"_changeStrokeRangeHandler\",value:function(t){this.options.strokeWidth=(0,l.toInteger)(t),this._els.strokeRangeValue.value=(0,l.toInteger)(t),this.actions.changeShape({strokeWidth:t}),this.actions.setDrawingShape(this.type,this.options)}},{key:\"_changeFillColorHandler\",value:function(t){this.options.fill=t=t||\"transparent\",this.actions.changeShape({fill:t})}},{key:\"_changeStrokeColorHandler\",value:function(t){this.options.stroke=t=t||\"transparent\",this.actions.changeShape({stroke:t})}}]),e}();e.default=d},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=a(n(3)),o=a(n(82));function a(t){return t&&t.__esModule?t:{default:t}}var s=[\"#000000\",\"#2a2a2a\",\"#545454\",\"#7e7e7e\",\"#a8a8a8\",\"#d2d2d2\",\"#ffffff\",\"\",\"#ff4040\",\"#ff6518\",\"#ffbb3b\",\"#03bd9e\",\"#00a9ff\",\"#515ce6\",\"#9e5fff\",\"#ff5583\"],l=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:\"#7e7e7e\",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:\"up\",r=arguments[3];!function(e,n){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this);var a=e.getAttribute(\"title\");this.usageStatistics=r,this._show=!1,this._colorpickerElement=e,this._toggleDirection=i,this._makePickerButtonElement(e,n),this._makePickerLayerElement(e,a),this._color=n,this.picker=o.default.create({container:this.pickerElement,preset:s,color:n,usageStatistics:this.usageStatistics}),this._addEvent(e)}return i(t,[{key:\"_changeColorElement\",value:function(t){t?(this.colorElement.classList.remove(\"transparent\"),this.colorElement.style.backgroundColor=t):(this.colorElement.style.backgroundColor=\"#fff\",this.colorElement.classList.add(\"transparent\"))}},{key:\"_makePickerButtonElement\",value:function(t,e){t.classList.add(\"tui-image-editor-button\"),this.colorElement=document.createElement(\"div\"),this.colorElement.className=\"color-picker-value\",e?this.colorElement.style.backgroundColor=e:this.colorElement.classList.add(\"transparent\")}},{key:\"_makePickerLayerElement\",value:function(t,e){var n=document.createElement(\"label\"),i=document.createElement(\"div\");this.pickerControl=document.createElement(\"div\"),this.pickerControl.className=\"color-picker-control\",this.pickerElement=document.createElement(\"div\"),this.pickerElement.className=\"color-picker\",n.innerHTML=e,i.className=\"triangle\",this.pickerControl.appendChild(this.pickerElement),this.pickerControl.appendChild(i),t.appendChild(this.pickerControl),t.appendChild(this.colorElement),t.appendChild(n)}},{key:\"_addEvent\",value:function(t){var e=this;this.picker.on(\"selectColor\",function(t){e._changeColorElement(t.color),e._color=t.color,e.fire(\"change\",t.color)}),t.addEventListener(\"click\",function(t){var n=t.target,i=n&&e._isElementInColorPickerControl(n);(!i||i&&e._isPaletteButton(n))&&(e._show=!e._show,e.pickerControl.style.display=e._show?\"block\":\"none\",e._setPickerControlPosition(),e.fire(\"changeShow\",e)),t.stopPropagation()}),document.body.addEventListener(\"click\",function(){e.hide()})}},{key:\"_isPaletteButton\",value:function(t){return\"tui-colorpicker-palette-button\"===t.className}},{key:\"_isElementInColorPickerControl\",value:function(t){for(var e=t;e!==document.body&&e;){if(e===this.pickerControl)return!0;e=e.parentNode}return!1}},{key:\"hide\",value:function(){this._show=!1,this.pickerControl.style.display=\"none\"}},{key:\"_setPickerControlPosition\",value:function(){var t=this.pickerControl.style,e=this.pickerControl.offsetWidth/2-(this._colorpickerElement.clientWidth/2+2),n=-1*(this.pickerControl.offsetHeight+10);\"down\"===this._toggleDirection&&(n=30),t.top=n+\"px\",t.left=\"-\"+e+\"px\"}},{key:\"color\",get:function(){return this._color},set:function(t){this._color=t,this._changeColorElement(t)}}]),t}();r.default.CustomEvents.mixin(l),e.default=l},function(t,n){t.exports=e},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var i,r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=(i=n(3))&&i.__esModule?i:{default:i},a=n(72),s=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,n){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this),this._value=n.value||0,this.rangeElement=e,this._drawRangeElement(),this.rangeWidth=(0,a.toInteger)(window.getComputedStyle(e,null).width)-12,this._min=n.min||0,this._max=n.max||100,this._absMax=-1*this._min+this._max,this.realTimeEvent=n.realTimeEvent||!1,this._addClickEvent(),this._addDragEvent(),this.value=n.value,this.trigger(\"change\")}return r(t,[{key:\"trigger\",value:function(t){this.fire(t,this._value)}},{key:\"_drawRangeElement\",value:function(){this.rangeElement.classList.add(\"tui-image-editor-range\"),this.bar=document.createElement(\"div\"),this.bar.className=\"tui-image-editor-virtual-range-bar\",this.subbar=document.createElement(\"div\"),this.subbar.className=\"tui-image-editor-virtual-range-subbar\",this.pointer=document.createElement(\"div\"),this.pointer.className=\"tui-image-editor-virtual-range-pointer\",this.bar.appendChild(this.subbar),this.bar.appendChild(this.pointer),this.rangeElement.appendChild(this.bar)}},{key:\"_addClickEvent\",value:function(){var t=this;this.rangeElement.addEventListener(\"click\",function(e){if(e.stopPropagation(),\"tui-image-editor-range\"===e.target.className){var n=e.offsetX/t.rangeWidth,i=t._absMax*n+t._min;t.pointer.style.left=n*t.rangeWidth+\"px\",t.subbar.style.right=(1-n)*t.rangeWidth+\"px\",t._value=i,t.fire(\"change\",i,!0)}})}},{key:\"_addDragEvent\",value:function(){var t=this;this.pointer.addEventListener(\"mousedown\",function(e){t.firstPosition=e.screenX,t.firstLeft=(0,a.toInteger)(t.pointer.style.left)||0,t.dragEventHandler={changeAngle:t._changeAngle.bind(t),stopChangingAngle:t._stopChangingAngle.bind(t)},document.addEventListener(\"mousemove\",t.dragEventHandler.changeAngle),document.addEventListener(\"mouseup\",t.dragEventHandler.stopChangingAngle)})}},{key:\"_changeAngle\",value:function(t){var e=this.firstLeft+(t.screenX-this.firstPosition);this.pointer.style.left=(e=(e=e>this.rangeWidth?this.rangeWidth:e)<0?0:e)+\"px\",this.subbar.style.right=this.rangeWidth-e+\"px\";var n=this._absMax*(e/this.rangeWidth)+this._min;this._value=n,this.realTimeEvent&&this.fire(\"change\",n,!1)}},{key:\"_stopChangingAngle\",value:function(){this.fire(\"change\",this._value,!0),document.removeEventListener(\"mousemove\",this.dragEventHandler.changeAngle),document.removeEventListener(\"mouseup\",this.dragEventHandler.stopChangingAngle)}},{key:\"max\",set:function(t){this._max=t,this._absMax=-1*this._min+this._max,this.value=this._value},get:function(){return this._max}},{key:\"value\",get:function(){return this._value},set:function(t){var e=(t-this._min)*this.rangeWidth/this._absMax;this.rangeWidth<e&&(e=this.rangeWidth),this.pointer.style.left=e+\"px\",this.subbar.style.right=this.rangeWidth-e+\"px\",this._value=t}}]),t}();o.default.CustomEvents.mixin(s),e.default=s},function(t,e){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var n=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),i=function(){function t(e,n){var i=n.locale,r=n.name,o=n.iconStyle,a=n.menuBarPosition,s=n.templateHtml,l=n.usageStatistics;!function(e,n){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this),this.selector=function(t){return e.querySelector(t)},this.menuBarPosition=a,this.toggleDirection=\"top\"===a?\"down\":\"up\",this.colorPickerControls=[],this.usageStatistics=l,this._makeSubMenuElement(e,{locale:i,name:r,iconStyle:o,templateHtml:s})}return n(t,[{key:\"colorPickerChangeShow\",value:function(t){this.colorPickerControls.forEach(function(e){t!==e&&e.hide()})}},{key:\"getButtonType\",value:function(t,e){return t.className.match(RegExp(\"(\"+e.join(\"|\")+\")\"))[0]}},{key:\"changeClass\",value:function(t,e,n){t.classList.remove(e),t.classList.add(n)}},{key:\"changeStandbyMode\",value:function(){}},{key:\"changeStartMode\",value:function(){}},{key:\"_makeSubMenuElement\",value:function(t,e){var n=e.locale,i=e.name,r=e.iconStyle,o=e.templateHtml,a=document.createElement(\"div\");a.className=\"tui-image-editor-menu-\"+i,a.innerHTML=o({locale:n,iconStyle:r}),t.appendChild(a)}}]),t}();e.default=i},function(t,e){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.default=function(t){var e=t.locale,n=t.iconStyle,i=n.normal,r=n.active;return'\\n    <ul class=\"tui-image-editor-submenu-item\">\\n        <li id=\"tie-shape-button\">\\n            <div class=\"tui-image-editor-button rect\">\\n                <div>\\n                    <svg class=\"svg_ic-submenu\">\\n                        <use xlink:href=\"'+i.path+\"#\"+i.name+'-ic-shape-rectangle\"\\n                            class=\"normal\"/>\\n                        <use xlink:href=\"'+r.path+\"#\"+r.name+'-ic-shape-rectangle\"\\n                            class=\"active\"/>\\n                    </svg>\\n                </div>\\n                <label> '+e.localize(\"Rectangle\")+' </label>\\n            </div>\\n            <div class=\"tui-image-editor-button circle\">\\n                <div>\\n                    <svg class=\"svg_ic-submenu\">\\n                        <use xlink:href=\"'+i.path+\"#\"+i.name+'-ic-shape-circle\"\\n                            class=\"normal\"/>\\n                        <use xlink:href=\"'+r.path+\"#\"+r.name+'-ic-shape-circle\"\\n                            class=\"active\"/>\\n                    </svg>\\n                </div>\\n                <label> '+e.localize(\"Circle\")+' </label>\\n            </div>\\n            <div class=\"tui-image-editor-button triangle\">\\n                <div>\\n                    <svg class=\"svg_ic-submenu\">\\n                        <use xlink:href=\"'+i.path+\"#\"+i.name+'-ic-shape-triangle\"\\n                            class=\"normal\"/>\\n                        <use xlink:href=\"'+r.path+\"#\"+r.name+'-ic-shape-triangle\"\\n                            class=\"active\"/>\\n                    </svg>\\n                </div>\\n                <label> '+e.localize(\"Triangle\")+' </label>\\n            </div>\\n        </li>\\n        <li class=\"tui-image-editor-partition\">\\n            <div></div>\\n        </li>\\n        <li id=\"tie-shape-color-button\">\\n            <div id=\"tie-color-fill\" title=\"'+e.localize(\"Fill\")+'\"></div>\\n            <div id=\"tie-color-stroke\" title=\"'+e.localize(\"Stroke\")+'\"></div>\\n        </li>\\n        <li class=\"tui-image-editor-partition only-left-right\">\\n            <div></div>\\n        </li>\\n        <li class=\"tui-image-editor-newline tui-image-editor-range-wrap\">\\n            <label class=\"range\">'+e.localize(\"Stroke\")+'</label>\\n            <div id=\"tie-stroke-range\"></div>\\n            <input id=\"tie-stroke-range-value\" class=\"tui-image-editor-range-value\" value=\"0\" />\\n        </li>\\n    </ul>\\n'}},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=s(n(3)),o=s(n(84)),a=s(n(87));function s(t){return t&&t.__esModule?t:{default:t}}var l=function(t){function e(t,n){var i=n.locale,r=n.iconStyle,o=n.menuBarPosition,s=n.usageStatistics;!function(t,n){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this);var l=function(t,e){if(!t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!e||\"object\"!=typeof e&&\"function\"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,{locale:i,name:\"crop\",iconStyle:r,menuBarPosition:o,templateHtml:a.default,usageStatistics:s}));return l.status=\"active\",l._els={apply:l.selector(\"#tie-crop-button .apply\"),cancel:l.selector(\"#tie-crop-button .cancel\"),preset:l.selector(\"#tie-crop-preset-button\")},l.defaultPresetButton=l._els.preset.querySelector(\".preset-none\"),l}return function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.default),i(e,[{key:\"addEvent\",value:function(t){var e=this;this.actions=t,this._els.apply.addEventListener(\"click\",function(){e.actions.crop(),e._els.apply.classList.remove(\"active\")}),this._els.cancel.addEventListener(\"click\",function(){e.actions.cancel(),e._els.apply.classList.remove(\"active\")}),this._els.preset.addEventListener(\"click\",function(t){var n=t.target.closest(\".tui-image-editor-button.preset\");if(n){var i=n.className.match(/preset-[^\\s]+/)[0];e._setPresetButtonActive(n),e.actions.preset(i)}})}},{key:\"changeStartMode\",value:function(){this.actions.modeChange(\"crop\")}},{key:\"changeStandbyMode\",value:function(){this.actions.stopDrawingMode(),this._setPresetButtonActive()}},{key:\"changeApplyButtonStatus\",value:function(t){t?this._els.apply.classList.add(\"active\"):this._els.apply.classList.remove(\"active\")}},{key:\"_setPresetButtonActive\",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.defaultPresetButton;r.default.forEach([].slice.call(this._els.preset.querySelectorAll(\".preset\")),function(t){t.classList.remove(\"active\")}),t&&t.classList.add(\"active\")}}]),e}();e.default=l},function(t,e){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.default=function(t){var e=t.locale,n=t.iconStyle,i=n.normal,r=n.active;return'\\n    <ul class=\"tui-image-editor-submenu-item\">\\n        <li id=\"tie-crop-preset-button\">\\n            <div class=\"tui-image-editor-button preset preset-none active\">\\n                <div>\\n                    <svg class=\"svg_ic-submenu\">\\n                        <use xlink:href=\"'+i.path+\"#\"+i.name+'-ic-shape-rectangle\"\\n                            class=\"normal\"/>\\n                        <use xlink:href=\"'+r.path+\"#\"+r.name+'-ic-shape-rectangle\"\\n                            class=\"active\"/>\\n                    </svg>\\n                </div>\\n                <label> '+e.localize(\"Custom\")+' </label>\\n            </div>\\n            <div class=\"tui-image-editor-button preset preset-square\">\\n                <div>\\n                    <svg class=\"svg_ic-submenu\">\\n                        <use xlink:href=\"'+i.path+\"#\"+i.name+'-ic-crop\"\\n                            class=\"normal\"/>\\n                        <use xlink:href=\"'+r.path+\"#\"+r.name+'-ic-crop\"\\n                            class=\"active\"/>\\n                    </svg>\\n                </div>\\n                <label> '+e.localize(\"Square\")+' </label>\\n            </div>\\n            <div class=\"tui-image-editor-button preset preset-3-2\">\\n                <div>\\n                    <svg class=\"svg_ic-submenu\">\\n                        <use xlink:href=\"'+i.path+\"#\"+i.name+'-ic-crop\"\\n                            class=\"normal\"/>\\n                        <use xlink:href=\"'+r.path+\"#\"+r.name+'-ic-crop\"\\n                            class=\"active\"/>\\n                    </svg>\\n                </div>\\n                <label> '+e.localize(\"3:2\")+' </label>\\n            </div>\\n            <div class=\"tui-image-editor-button preset preset-4-3\">\\n                <div>\\n                    <svg class=\"svg_ic-submenu\">\\n                        <use xlink:href=\"'+i.path+\"#\"+i.name+'-ic-crop\"\\n                            class=\"normal\"/>\\n                        <use xlink:href=\"'+r.path+\"#\"+r.name+'-ic-crop\"\\n                            class=\"active\"/>\\n                    </svg>\\n                </div>\\n                <label> '+e.localize(\"4:3\")+' </label>\\n            </div>\\n            <div class=\"tui-image-editor-button preset preset-5-4\">\\n                <div>\\n                    <svg class=\"svg_ic-submenu\">\\n                        <use xlink:href=\"'+i.path+\"#\"+i.name+'-ic-crop\"\\n                            class=\"normal\"/>\\n                        <use xlink:href=\"'+r.path+\"#\"+r.name+'-ic-crop\"\\n                            class=\"active\"/>\\n                    </svg>\\n                </div>\\n                <label> '+e.localize(\"5:4\")+' </label>\\n            </div>\\n            <div class=\"tui-image-editor-button preset preset-7-5\">\\n                <div>\\n                    <svg class=\"svg_ic-submenu\">\\n                        <use xlink:href=\"'+i.path+\"#\"+i.name+'-ic-crop\"\\n                            class=\"normal\"/>\\n                        <use xlink:href=\"'+r.path+\"#\"+r.name+'-ic-crop\"\\n                            class=\"active\"/>\\n                    </svg>\\n                </div>\\n                <label> '+e.localize(\"7:5\")+' </label>\\n            </div>\\n            <div class=\"tui-image-editor-button preset preset-16-9\">\\n                <div>\\n                    <svg class=\"svg_ic-submenu\">\\n                        <use xlink:href=\"'+i.path+\"#\"+i.name+'-ic-crop\"\\n                            class=\"normal\"/>\\n                        <use xlink:href=\"'+r.path+\"#\"+r.name+'-ic-crop\"\\n                            class=\"active\"/>\\n                    </svg>\\n                </div>\\n                <label> '+e.localize(\"16:9\")+' </label>\\n            </div>\\n        </li>\\n        <li class=\"tui-image-editor-partition tui-image-editor-newline\">\\n        </li>\\n        <li class=\"tui-image-editor-partition only-left-right\">\\n            <div></div>\\n        </li>\\n        <li id=\"tie-crop-button\" class=\"action\">\\n            <div class=\"tui-image-editor-button apply\">\\n                <svg class=\"svg_ic-menu\">\\n                    <use xlink:href=\"'+i.path+\"#\"+i.name+'-ic-apply\" class=\"normal\"/>\\n                    <use xlink:href=\"'+r.path+\"#\"+r.name+'-ic-apply\" class=\"active\"/>\\n                </svg>\\n                <label>\\n                    '+e.localize(\"Apply\")+'\\n                </label>\\n            </div>\\n            <div class=\"tui-image-editor-button cancel\">\\n                <svg class=\"svg_ic-menu\">\\n                    <use xlink:href=\"'+i.path+\"#\"+i.name+'-ic-cancel\" class=\"normal\"/>\\n                    <use xlink:href=\"'+r.path+\"#\"+r.name+'-ic-cancel\" class=\"active\"/>\\n                </svg>\\n                <label>\\n                    '+e.localize(\"Cancel\")+\"\\n                </label>\\n            </div>\\n        </li>\\n    </ul>\\n\"}},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=s(n(3)),o=s(n(84)),a=s(n(89));function s(t){return t&&t.__esModule?t:{default:t}}var l=function(t){function e(t,n){var i=n.locale,r=n.iconStyle,o=n.menuBarPosition,s=n.usageStatistics;!function(t,n){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this);var l=function(t,e){if(!t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!e||\"object\"!=typeof e&&\"function\"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,{locale:i,name:\"flip\",iconStyle:r,menuBarPosition:o,templateHtml:a.default,usageStatistics:s}));return l.flipStatus=!1,l._els={flipButton:l.selector(\"#tie-flip-button\")},l}return function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.default),i(e,[{key:\"addEvent\",value:function(t){this._actions=t,this._els.flipButton.addEventListener(\"click\",this._changeFlip.bind(this))}},{key:\"_changeFlip\",value:function(t){var e=this,n=t.target.closest(\".tui-image-editor-button\");if(n){var i=this.getButtonType(n,[\"flipX\",\"flipY\",\"resetFlip\"]);if(!this.flipStatus&&\"resetFlip\"===i)return;this._actions.flip(i).then(function(t){var n=e._els.flipButton.classList;e.flipStatus=!1,n.remove(\"resetFlip\"),r.default.forEach([\"flipX\",\"flipY\"],function(i){n.remove(i),t[i]&&(n.add(i),n.add(\"resetFlip\"),e.flipStatus=!0)})})}}}]),e}();e.default=l},function(t,e){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.default=function(t){var e=t.locale,n=t.iconStyle,i=n.normal,r=n.active;return'\\n    <ul id=\"tie-flip-button\" class=\"tui-image-editor-submenu-item\">\\n        <li>\\n            <div class=\"tui-image-editor-button flipX\">\\n                <div>\\n                    <svg class=\"svg_ic-submenu\">\\n                        <use xlink:href=\"'+i.path+\"#\"+i.name+'-ic-flip-x\" class=\"normal\"/>\\n                        <use xlink:href=\"'+r.path+\"#\"+r.name+'-ic-flip-x\" class=\"active\"/>\\n                    </svg>\\n                </div>\\n                <label>\\n                    '+e.localize(\"Flip X\")+'\\n                </label>\\n            </div>\\n            <div class=\"tui-image-editor-button flipY\">\\n                <div>\\n                    <svg class=\"svg_ic-submenu\">\\n                        <use xlink:href=\"'+i.path+\"#\"+i.name+'-ic-flip-y\" class=\"normal\"/>\\n                        <use xlink:href=\"'+r.path+\"#\"+r.name+'-ic-flip-y\" class=\"active\"/>\\n                    </svg>\\n                </div>\\n                <label>\\n                    '+e.localize(\"Flip Y\")+'\\n                </label>\\n            </div>\\n        </li>\\n        <li class=\"tui-image-editor-partition\">\\n            <div></div>\\n        </li>\\n        <li>\\n            <div class=\"tui-image-editor-button resetFlip\">\\n                <div>\\n                    <svg class=\"svg_ic-submenu\">\\n                        <use xlink:href=\"'+i.path+\"#\"+i.name+'-ic-flip-reset\"\\n                            class=\"normal\"/>\\n                        <use xlink:href=\"'+r.path+\"#\"+r.name+'-ic-flip-reset\"\\n                            class=\"active\"/>\\n                    </svg>\\n                </div>\\n                <label>\\n                    '+e.localize(\"Reset\")+\"\\n                </label>\\n            </div>\\n        </li>\\n    </ul>\\n\"}},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=c(n(83)),o=c(n(84)),a=c(n(91)),s=n(72),l=n(73);function c(t){return t&&t.__esModule?t:{default:t}}var u=function(t){function e(t,n){var i=n.locale,o=n.iconStyle,s=n.menuBarPosition,c=n.usageStatistics;!function(t,n){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this);var u=function(t,e){if(!t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!e||\"object\"!=typeof e&&\"function\"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,{locale:i,name:\"rotate\",iconStyle:o,menuBarPosition:s,templateHtml:a.default,usageStatistics:c}));return u._value=0,u._els={rotateButton:u.selector(\"#tie-retate-button\"),rotateRange:new r.default(u.selector(\"#tie-rotate-range\"),l.defaultRotateRangeValus),rotateRangeValue:u.selector(\"#tie-ratate-range-value\")},u}return function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.default),i(e,[{key:\"setRangeBarAngle\",value:function(t,e){var n=e;\"rotate\"===t&&(n=parseInt(this._els.rotateRangeValue.value,10)+e),this._els.rotateRangeValue.value=n,this._setRangeBarRatio(n)}},{key:\"_setRangeBarRatio\",value:function(t){this._els.rotateRange.value=t}},{key:\"addEvent\",value:function(t){this.actions=t,this._els.rotateButton.addEventListener(\"click\",this._changeRotateForButton.bind(this)),this._els.rotateRange.on(\"change\",this._changeRotateForRange.bind(this)),this._els.rotateRangeValue.setAttribute(\"readonly\",!0)}},{key:\"_changeRotateForRange\",value:function(t,e){var n=(0,s.toInteger)(t);this._els.rotateRangeValue.value=n,this.actions.setAngle(n,!e),this._value=n}},{key:\"_changeRotateForButton\",value:function(t){var e=t.target.closest(\".tui-image-editor-button\"),n=this._els.rotateRangeValue.value;if(e){var i={clockwise:30,counterclockwise:-30}[this.getButtonType(e,[\"counterclockwise\",\"clockwise\"])],r=parseInt(n,10)+i;r>=-360&&r<=360&&this.actions.rotate(i)}}}]),e}();e.default=u},function(t,e){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.default=function(t){var e=t.iconStyle,n=e.normal,i=e.active;return'\\n    <ul class=\"tui-image-editor-submenu-item\">\\n        <li id=\"tie-retate-button\">\\n            <div class=\"tui-image-editor-button clockwise\">\\n                <div>\\n                    <svg class=\"svg_ic-submenu\">\\n                        <use xlink:href=\"'+n.path+\"#\"+n.name+'-ic-rotate-clockwise\"\\n                            class=\"normal\"/>\\n                        <use xlink:href=\"'+i.path+\"#\"+i.name+'-ic-rotate-clockwise\"\\n                            class=\"active\"/>\\n                    </svg>\\n                </div>\\n                <label> 30 </label>\\n            </div>\\n            <div class=\"tui-image-editor-button counterclockwise\">\\n                <div>\\n                    <svg class=\"svg_ic-submenu\">\\n                        <use xlink:href=\"'+n.path+\"#\"+n.name+'-ic-rotate-counterclockwise\"\\n                            class=\"normal\"/>\\n                        <use xlink:href=\"'+i.path+\"#\"+i.name+'-ic-rotate-counterclockwise\"\\n                            class=\"active\"/>\\n                    </svg>\\n                </div>\\n                <label> -30 </label>\\n            </div>\\n        </li>\\n        <li class=\"tui-image-editor-partition only-left-right\">\\n            <div></div>\\n        </li>\\n        <li class=\"tui-image-editor-newline tui-image-editor-range-wrap\">\\n            <label class=\"range\">'+t.locale.localize(\"Range\")+'</label>\\n            <div id=\"tie-rotate-range\"></div>\\n            <input id=\"tie-ratate-range-value\" class=\"tui-image-editor-range-value\" value=\"0\" />\\n        </li>\\n    </ul>\\n'}},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=u(n(83)),o=u(n(81)),a=u(n(84)),s=u(n(93)),l=n(72),c=n(73);function u(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function e(t,n){var i=n.locale,a=n.iconStyle,l=n.menuBarPosition,u=n.usageStatistics;!function(t,n){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this);var h=function(t,e){if(!t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!e||\"object\"!=typeof e&&\"function\"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,{locale:i,name:\"text\",iconStyle:a,menuBarPosition:l,templateHtml:s.default,usageStatistics:u}));return h.effect={bold:!1,italic:!1,underline:!1},h.align=\"left\",h._els={textEffectButton:h.selector(\"#tie-text-effect-button\"),textAlignButton:h.selector(\"#tie-text-align-button\"),textColorpicker:new o.default(h.selector(\"#tie-text-color\"),\"#ffbb3b\",h.toggleDirection,h.usageStatistics),textRange:new r.default(h.selector(\"#tie-text-range\"),c.defaultTextRangeValus),textRangeValue:h.selector(\"#tie-text-range-value\")},h}return function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.default),i(e,[{key:\"addEvent\",value:function(t){this.actions=t,this._els.textEffectButton.addEventListener(\"click\",this._setTextEffectHandler.bind(this)),this._els.textAlignButton.addEventListener(\"click\",this._setTextAlignHandler.bind(this)),this._els.textRange.on(\"change\",this._changeTextRnageHandler.bind(this)),this._els.textRangeValue.value=this._els.textRange.value,this._els.textRangeValue.setAttribute(\"readonly\",!0),this._els.textColorpicker.on(\"change\",this._changeColorHandler.bind(this))}},{key:\"changeStandbyMode\",value:function(){this.actions.stopDrawingMode()}},{key:\"changeStartMode\",value:function(){this.actions.modeChange(\"text\")}},{key:\"_setTextEffectHandler\",value:function(t){var e=t.target.closest(\".tui-image-editor-button\"),n=e.className.match(/(bold|italic|underline)/)[0],i={bold:{fontWeight:\"bold\"},italic:{fontStyle:\"italic\"},underline:{textDecoration:\"underline\"}}[n];this.effect[n]=!this.effect[n],e.classList.toggle(\"active\"),this.actions.changeTextStyle(i)}},{key:\"_setTextAlignHandler\",value:function(t){var e=t.target.closest(\".tui-image-editor-button\");if(e){var n=this.getButtonType(e,[\"left\",\"center\",\"right\"]);t.currentTarget.classList.remove(this.align),this.align!==n&&t.currentTarget.classList.add(n),this.actions.changeTextStyle({textAlign:n}),this.align=n}}},{key:\"_changeTextRnageHandler\",value:function(t){t=(0,l.toInteger)(t),(0,l.toInteger)(this._els.textRangeValue.value)!==t&&(this.actions.changeTextStyle({fontSize:t}),this._els.textRangeValue.value=t)}},{key:\"_changeColorHandler\",value:function(t){this.actions.changeTextStyle({fill:t=t||\"transparent\"})}},{key:\"textColor\",get:function(){return this._els.textColorpicker.color}},{key:\"fontSize\",get:function(){return this._els.textRange.value},set:function(t){this._els.textRange.value=t,this._els.textRangeValue.value=t}}]),e}();e.default=h},function(t,e){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.default=function(t){var e=t.locale,n=t.iconStyle,i=n.normal,r=n.active;return'\\n    <ul class=\"tui-image-editor-submenu-item\">\\n        <li id=\"tie-text-effect-button\">\\n            <div class=\"tui-image-editor-button bold\">\\n                <div>\\n                    <svg class=\"svg_ic-submenu\">\\n                    <use xlink:href=\"'+i.path+\"#\"+i.name+'-ic-text-bold\" class=\"normal\"/>\\n                    <use xlink:href=\"'+r.path+\"#\"+r.name+'-ic-text-bold\" class=\"active\"/>\\n                    </svg>\\n                </div>\\n                <label> '+e.localize(\"Bold\")+' </label>\\n            </div>\\n            <div class=\"tui-image-editor-button italic\">\\n                <div>\\n                    <svg class=\"svg_ic-submenu\">\\n                    <use xlink:href=\"'+i.path+\"#\"+i.name+'-ic-text-italic\" class=\"normal\"/>\\n                    <use xlink:href=\"'+r.path+\"#\"+r.name+'-ic-text-italic\" class=\"active\"/>\\n                    </svg>\\n                </div>\\n                <label> '+e.localize(\"Italic\")+' </label>\\n            </div>\\n            <div class=\"tui-image-editor-button underline\">\\n                <div>\\n                    <svg class=\"svg_ic-submenu\">\\n                        <use xlink:href=\"'+i.path+\"#\"+i.name+'-ic-text-underline\"\\n                            class=\"normal\"/>\\n                        <use xlink:href=\"'+r.path+\"#\"+r.name+'-ic-text-underline\"\\n                            class=\"active\"/>\\n                    </svg>\\n                </div>\\n                <label> '+e.localize(\"Underline\")+' </label>\\n            </div>\\n        </li>\\n        <li class=\"tui-image-editor-partition\">\\n            <div></div>\\n        </li>\\n        <li id=\"tie-text-align-button\">\\n            <div class=\"tui-image-editor-button left\">\\n                <div>\\n                    <svg class=\"svg_ic-submenu\">\\n                     <use xlink:href=\"'+i.path+\"#\"+i.name+'-ic-text-align-left\"\\n                        class=\"normal\"/>\\n                     <use xlink:href=\"'+r.path+\"#\"+r.name+'-ic-text-align-left\"\\n                        class=\"active\"/>\\n                    </svg>\\n                </div>\\n                <label> '+e.localize(\"Left\")+' </label>\\n            </div>\\n            <div class=\"tui-image-editor-button center\">\\n                <div>\\n                    <svg class=\"svg_ic-submenu\">\\n                     <use xlink:href=\"'+i.path+\"#\"+i.name+'-ic-text-align-center\"\\n                        class=\"normal\"/>\\n                     <use xlink:href=\"'+r.path+\"#\"+r.name+'-ic-text-align-center\"\\n                        class=\"active\"/>\\n                    </svg>\\n                </div>\\n                <label> '+e.localize(\"Center\")+' </label>\\n            </div>\\n            <div class=\"tui-image-editor-button right\">\\n                <div>\\n                    <svg class=\"svg_ic-submenu\">\\n                     <use xlink:href=\"'+i.path+\"#\"+i.name+'-ic-text-align-right\"\\n                        class=\"normal\"/>\\n                     <use xlink:href=\"'+r.path+\"#\"+r.name+'-ic-text-align-right\"\\n                        class=\"active\"/>\\n                    </svg>\\n                </div>\\n                <label> '+e.localize(\"Right\")+' </label>\\n            </div>\\n        </li>\\n        <li class=\"tui-image-editor-partition\">\\n            <div></div>\\n        </li>\\n        <li>\\n            <div id=\"tie-text-color\" title=\"'+e.localize(\"Color\")+'\"></div>\\n        </li>\\n        <li class=\"tui-image-editor-partition only-left-right\">\\n            <div></div>\\n        </li>\\n        <li class=\"tui-image-editor-newline tui-image-editor-range-wrap\">\\n            <label class=\"range\">'+e.localize(\"Text size\")+'</label>\\n            <div id=\"tie-text-range\"></div>\\n            <input id=\"tie-text-range-value\" class=\"tui-image-editor-range-value\" value=\"0\" />\\n        </li>\\n    </ul>\\n'}},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=s(n(84)),o=s(n(72)),a=s(n(95));function s(t){return t&&t.__esModule?t:{default:t}}var l=function(t){function e(t,n){var i=n.locale,r=n.iconStyle,o=n.menuBarPosition,s=n.usageStatistics;!function(t,n){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this);var l=function(t,e){if(!t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!e||\"object\"!=typeof e&&\"function\"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,{locale:i,name:\"mask\",iconStyle:r,menuBarPosition:o,templateHtml:a.default,usageStatistics:s}));return l._els={applyButton:l.selector(\"#tie-mask-apply\"),maskImageButton:l.selector(\"#tie-mask-image-file\")},l}return function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.default),i(e,[{key:\"addEvent\",value:function(t){this.actions=t,this._els.maskImageButton.addEventListener(\"change\",this._loadMaskFile.bind(this)),this._els.applyButton.addEventListener(\"click\",this._applyMask.bind(this))}},{key:\"_applyMask\",value:function(){this.actions.applyFilter(),this._els.applyButton.classList.remove(\"active\")}},{key:\"_loadMaskFile\",value:function(t){var e=void 0;o.default.isSupportFileApi()||alert(\"This browser does not support file-api\");var n=t.target.files[0];n&&(e=URL.createObjectURL(n),this.actions.loadImageFromURL(e,n),this._els.applyButton.classList.add(\"active\"))}}]),e}();e.default=l},function(t,e){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.default=function(t){var e=t.locale,n=t.iconStyle,i=n.normal,r=n.active;return'\\n    <ul class=\"tui-image-editor-submenu-item\">\\n        <li>\\n            <div class=\"tui-image-editor-button\">\\n                <div>\\n                    <input type=\"file\" accept=\"image/*\" id=\"tie-mask-image-file\">\\n                    <svg class=\"svg_ic-submenu\">\\n                        <use xlink:href=\"'+i.path+\"#\"+i.name+'-ic-mask-load\" class=\"normal\"/>\\n                        <use xlink:href=\"'+r.path+\"#\"+r.name+'-ic-mask-load\" class=\"active\"/>\\n                    </svg>\\n                </div>\\n                <label> '+e.localize(\"Load Mask Image\")+' </label>\\n            </div>\\n        </li>\\n        <li class=\"tui-image-editor-partition only-left-right\">\\n            <div></div>\\n        </li>\\n        <li id=\"tie-mask-apply\" class=\"tui-image-editor-newline apply\" style=\"margin-top: 22px;margin-bottom: 5px\">\\n            <div class=\"tui-image-editor-button apply\">\\n                <svg class=\"svg_ic-menu\">\\n                    <use xlink:href=\"'+i.path+\"#\"+i.name+'-ic-apply\" class=\"normal\"/>\\n                    <use xlink:href=\"'+r.path+\"#\"+r.name+'-ic-apply\" class=\"active\"/>\\n                </svg>\\n                <label>\\n                    '+e.localize(\"Apply\")+\"\\n                </label>\\n            </div>\\n        </li>\\n    </ul>\\n\"}},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=u(n(3)),o=u(n(81)),a=u(n(84)),s=u(n(97)),l=n(72),c=n(73);function u(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function e(t,n){var i=n.locale,r=n.iconStyle,a=n.menuBarPosition,l=n.usageStatistics;!function(t,n){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this);var c=function(t,e){if(!t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!e||\"object\"!=typeof e&&\"function\"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,{locale:i,name:\"icon\",iconStyle:r,menuBarPosition:a,templateHtml:s.default,usageStatistics:l}));return c.iconType=null,c._iconMap={},c._els={registIconButton:c.selector(\"#tie-icon-image-file\"),addIconButton:c.selector(\"#tie-icon-add-button\"),iconColorpicker:new o.default(c.selector(\"#tie-icon-color\"),\"#ffbb3b\",c.toggleDirection,c.usageStatistics)},c}return function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.default),i(e,[{key:\"addEvent\",value:function(t){this.actions=t,this._els.iconColorpicker.on(\"change\",this._changeColorHandler.bind(this)),this._els.registIconButton.addEventListener(\"change\",this._registeIconHandler.bind(this)),this._els.addIconButton.addEventListener(\"click\",this._addIconHandler.bind(this))}},{key:\"clearIconType\",value:function(){this._els.addIconButton.classList.remove(this.iconType),this.iconType=null}},{key:\"registDefaultIcon\",value:function(){var t=this;r.default.forEach(c.defaultIconPath,function(e,n){t.actions.registDefalutIcons(n,e)})}},{key:\"setIconPickerColor\",value:function(t){this._els.iconColorpicker.color=t}},{key:\"changeStandbyMode\",value:function(){this.clearIconType(),this.actions.cancelAddIcon()}},{key:\"_changeColorHandler\",value:function(t){this.actions.changeColor(t=t||\"transparent\")}},{key:\"_addIconHandler\",value:function(t){var e=t.target.closest(\".tui-image-editor-button\");if(e){var n=e.getAttribute(\"data-icontype\"),i=this._els.iconColorpicker.color;this.actions.discardSelection(),this.actions.changeSelectableAll(!1),this._els.addIconButton.classList.remove(this.iconType),this._els.addIconButton.classList.add(n),this.iconType===n?this.changeStandbyMode():(this.actions.addIcon(n,i),this.iconType=n)}}},{key:\"_registeIconHandler\",value:function(t){var e=void 0;l.isSupportFileApi||alert(\"This browser does not support file-api\");var n=t.target.files[0];n&&(e=URL.createObjectURL(n),this.actions.registCustomIcon(e,n))}}]),e}();e.default=h},function(t,e){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.default=function(t){var e=t.locale,n=t.iconStyle,i=n.normal,r=n.active;return'\\n    <ul class=\"tui-image-editor-submenu-item\">\\n        <li id=\"tie-icon-add-button\">\\n            <div class=\"tui-image-editor-button\" data-icontype=\"icon-arrow\">\\n                <div>\\n                    <svg class=\"svg_ic-submenu\">\\n                        <use xlink:href=\"'+i.path+\"#\"+i.name+'-ic-icon-arrow\"\\n                            class=\"normal\"/>\\n                        <use xlink:href=\"'+r.path+\"#\"+r.name+'-ic-icon-arrow\"\\n                            class=\"active\"/>\\n                    </svg>\\n                </div>\\n                <label>\\n                    '+e.localize(\"Arrow\")+'\\n                </label>\\n            </div>\\n            <div class=\"tui-image-editor-button\" data-icontype=\"icon-arrow-2\">\\n                <div>\\n                    <svg class=\"svg_ic-submenu\">\\n                        <use xlink:href=\"'+i.path+\"#\"+i.name+'-ic-icon-arrow-2\"\\n                            class=\"normal\"/>\\n                        <use xlink:href=\"'+r.path+\"#\"+r.name+'-ic-icon-arrow-2\"\\n                            class=\"active\"/>\\n                    </svg>\\n                </div>\\n                <label>\\n                    '+e.localize(\"Arrow-2\")+'\\n                </label>\\n            </div>\\n            <div class=\"tui-image-editor-button\" data-icontype=\"icon-arrow-3\">\\n                <div>\\n                    <svg class=\"svg_ic-submenu\">\\n                        <use xlink:href=\"'+i.path+\"#\"+i.name+'-ic-icon-arrow-3\"\\n                            class=\"normal\"/>\\n                        <use xlink:href=\"'+r.path+\"#\"+r.name+'-ic-icon-arrow-3\"\\n                            class=\"active\"/>\\n                    </svg>\\n                </div>\\n                <label>\\n                    '+e.localize(\"Arrow-3\")+'\\n                </label>\\n            </div>\\n            <div class=\"tui-image-editor-button\" data-icontype=\"icon-star\">\\n                <div>\\n                    <svg class=\"svg_ic-submenu\">\\n                        <use xlink:href=\"'+i.path+\"#\"+i.name+'-ic-icon-star\" class=\"normal\"/>\\n                        <use xlink:href=\"'+r.path+\"#\"+r.name+'-ic-icon-star\" class=\"active\"/>\\n                    </svg>\\n                </div>\\n                <label>\\n                    '+e.localize(\"Star-1\")+'\\n                </label>\\n            </div>\\n            <div class=\"tui-image-editor-button\" data-icontype=\"icon-star-2\">\\n                <div>\\n                    <svg class=\"svg_ic-submenu\">\\n                        <use xlink:href=\"'+i.path+\"#\"+i.name+'-ic-icon-star-2\"\\n                            class=\"normal\"/>\\n                        <use xlink:href=\"'+r.path+\"#\"+r.name+'-ic-icon-star-2\"\\n                            class=\"active\"/>\\n                    </svg>\\n                </div>\\n                <label>\\n                    '+e.localize(\"Star-2\")+'\\n                </label>\\n            </div>\\n\\n            <div class=\"tui-image-editor-button\" data-icontype=\"icon-polygon\">\\n                <div>\\n                    <svg class=\"svg_ic-submenu\">\\n                        <use xlink:href=\"'+i.path+\"#\"+i.name+'-ic-icon-polygon\"\\n                            class=\"normal\"/>\\n                        <use xlink:href=\"'+i.path+\"#\"+i.name+'-ic-icon-polygon\"\\n                            class=\"active\"/>\\n                    </svg>\\n                </div>\\n                <label>\\n                    '+e.localize(\"Polygon\")+'\\n                </label>\\n            </div>\\n\\n            <div class=\"tui-image-editor-button\" data-icontype=\"icon-location\">\\n                <div>\\n                    <svg class=\"svg_ic-submenu\">\\n                        <use xlink:href=\"'+i.path+\"#\"+i.name+'-ic-icon-location\"\\n                            class=\"normal\"/>\\n                        <use xlink:href=\"'+r.path+\"#\"+r.name+'-ic-icon-location\"\\n                            class=\"active\"/>\\n                    </svg>\\n                </div>\\n                <label>\\n                    '+e.localize(\"Location\")+'\\n                </label>\\n            </div>\\n\\n            <div class=\"tui-image-editor-button\" data-icontype=\"icon-heart\">\\n                <div>\\n                    <svg class=\"svg_ic-submenu\">\\n                        <use xlink:href=\"'+i.path+\"#\"+i.name+'-ic-icon-heart\"\\n                            class=\"normal\"/>\\n                        <use xlink:href=\"'+r.path+\"#\"+r.name+'-ic-icon-heart\"\\n                            class=\"active\"/>\\n                    </svg>\\n                </div>\\n                <label>\\n                    '+e.localize(\"Heart\")+'\\n                </label>\\n            </div>\\n\\n            <div class=\"tui-image-editor-button\" data-icontype=\"icon-bubble\">\\n                <div>\\n                    <svg class=\"svg_ic-submenu\">\\n                        <use xlink:href=\"'+i.path+\"#\"+i.name+'-ic-icon-bubble\"\\n                            class=\"normal\"/>\\n                        <use xlink:href=\"'+r.path+\"#\"+r.name+'-ic-icon-bubble\"\\n                            class=\"active\"/>\\n                    </svg>\\n                </div>\\n                <label>\\n                    '+e.localize(\"Bubble\")+'\\n                </label>\\n            </div>\\n        </li>\\n        <li class=\"tui-image-editor-partition\">\\n            <div></div>\\n        </li>\\n        <li id=\"tie-icon-add-button\">\\n            <div class=\"tui-image-editor-button\" style=\"margin:0\">\\n                <div>\\n                    <input type=\"file\" accept=\"image/*\" id=\"tie-icon-image-file\">\\n                    <svg class=\"svg_ic-submenu\">\\n                        <use xlink:href=\"'+i.path+\"#\"+i.name+'-ic-icon-load\" class=\"normal\"/>\\n                        <use xlink:href=\"'+r.path+\"#\"+r.name+'-ic-icon-load\" class=\"active\"/>\\n                    </svg>\\n                </div>\\n                <label>\\n                    '+e.localize(\"Custom icon\")+'\\n                </label>\\n            </div>\\n        </li>\\n        <li class=\"tui-image-editor-partition\">\\n            <div></div>\\n        </li>\\n        <li>\\n            <div id=\"tie-icon-color\" title=\"'+e.localize(\"Color\")+'\"></div>\\n        </li>\\n    </ul>\\n'}},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=u(n(72)),o=u(n(81)),a=u(n(83)),s=u(n(84)),l=u(n(99)),c=n(73);function u(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function e(t,n){var i=n.locale,r=n.iconStyle,s=n.menuBarPosition,u=n.usageStatistics;!function(t,n){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this);var h=function(t,e){if(!t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!e||\"object\"!=typeof e&&\"function\"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,{locale:i,name:\"draw\",iconStyle:r,menuBarPosition:s,templateHtml:l.default,usageStatistics:u}));return h._els={lineSelectButton:h.selector(\"#tie-draw-line-select-button\"),drawColorpicker:new o.default(h.selector(\"#tie-draw-color\"),\"#00a9ff\",h.toggleDirection,h.usageStatistics),drawRange:new a.default(h.selector(\"#tie-draw-range\"),c.defaultDrawRangeValus),drawRangeValue:h.selector(\"#tie-draw-range-value\")},h.type=null,h.color=h._els.drawColorpicker.color,h.width=h._els.drawRange.value,h}return function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.default),i(e,[{key:\"addEvent\",value:function(t){this.actions=t,this._els.lineSelectButton.addEventListener(\"click\",this._changeDrawType.bind(this)),this._els.drawColorpicker.on(\"change\",this._changeDrawColor.bind(this)),this._els.drawRange.on(\"change\",this._changeDrawRange.bind(this)),this._els.drawRangeValue.value=this._els.drawRange.value,this._els.drawRangeValue.setAttribute(\"readonly\",!0)}},{key:\"setDrawMode\",value:function(){this.actions.setDrawMode(this.type,{width:this.width,color:r.default.getRgb(this.color,.7)})}},{key:\"changeStandbyMode\",value:function(){this.type=null,this.actions.stopDrawingMode(),this.actions.changeSelectableAll(!0),this._els.lineSelectButton.classList.remove(\"free\"),this._els.lineSelectButton.classList.remove(\"line\")}},{key:\"changeStartMode\",value:function(){this.type=\"free\",this._els.lineSelectButton.classList.add(\"free\"),this.setDrawMode()}},{key:\"_changeDrawType\",value:function(t){var e=t.target.closest(\".tui-image-editor-button\");if(e){var n=this.getButtonType(e,[\"free\",\"line\"]);if(this.actions.discardSelection(),this.type===n)return void this.changeStandbyMode();this.changeStandbyMode(),this.type=n,this._els.lineSelectButton.classList.add(n),this.setDrawMode()}}},{key:\"_changeDrawColor\",value:function(t){this.color=t||\"transparent\",this.type?this.setDrawMode():this.changeStartMode()}},{key:\"_changeDrawRange\",value:function(t){t=r.default.toInteger(t),this._els.drawRangeValue.value=t,this.width=t,this.type?this.setDrawMode():this.changeStartMode()}}]),e}();e.default=h},function(t,e){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.default=function(t){var e=t.locale,n=t.iconStyle,i=n.normal,r=n.active;return'\\n    <ul class=\"tui-image-editor-submenu-item\">\\n        <li id=\"tie-draw-line-select-button\">\\n            <div class=\"tui-image-editor-button free\">\\n                <div>\\n                    <svg class=\"svg_ic-submenu\">\\n                        <use xlink:href=\"'+i.path+\"#\"+i.name+'-ic-draw-free\" class=\"normal\"/>\\n                        <use xlink:href=\"'+r.path+\"#\"+r.name+'-ic-draw-free\" class=\"active\"/>\\n                    </svg>\\n                </div>\\n                <label>\\n                    '+e.localize(\"Free\")+'\\n                </label>\\n            </div>\\n            <div class=\"tui-image-editor-button line\">\\n                <div>\\n                    <svg class=\"svg_ic-submenu\">\\n                        <use xlink:href=\"'+i.path+\"#\"+i.name+'-ic-draw-line\" class=\"normal\"/>\\n                        <use xlink:href=\"'+r.path+\"#\"+r.name+'-ic-draw-line\" class=\"active\"/>\\n                    </svg>\\n                </div>\\n                <label>\\n                    '+e.localize(\"Straight\")+'\\n                </label>\\n            </div>\\n        </li>\\n        <li class=\"tui-image-editor-partition\">\\n            <div></div>\\n        </li>\\n        <li>\\n            <div id=\"tie-draw-color\" title=\"'+e.localize(\"Color\")+'\"></div>\\n        </li>\\n        <li class=\"tui-image-editor-partition only-left-right\">\\n            <div></div>\\n        </li>\\n        <li class=\"tui-image-editor-newline tui-image-editor-range-wrap\">\\n            <label class=\"range\">'+e.localize(\"Range\")+'</label>\\n            <div id=\"tie-draw-range\"></div>\\n            <input id=\"tie-draw-range-value\" class=\"tui-image-editor-range-value\" value=\"0\" />\\n        </li>\\n    </ul>\\n'}},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=h(n(3)),o=h(n(81)),a=h(n(83)),s=h(n(84)),l=h(n(101)),c=n(72),u=n(73);function h(t){return t&&t.__esModule?t:{default:t}}var d=[\"add\",\"diff\",\"subtract\",\"multiply\",\"screen\",\"lighten\",\"darken\"],f=[\"grayscale\",\"invert\",\"sepia\",\"sepia2\",\"blur\",\"sharpen\",\"emboss\",\"remove-white\",\"brightness\",\"noise\",\"pixelate\",\"color-filter\",\"tint\",\"multiply\",\"blend\"],p={grayscale:\"grayscale\",invert:\"invert\",sepia:\"sepia\",sepia2:\"vintage\",blur:\"blur\",sharpen:\"sharpen\",emboss:\"emboss\",removeWhite:\"removeColor\",brightness:\"brightness\",contrast:\"contrast\",saturation:\"saturation\",vintage:\"vintage\",polaroid:\"polaroid\",noise:\"noise\",pixelate:\"pixelate\",colorFilter:\"removeColor\",tint:\"blendColor\",multiply:\"blendColor\",blend:\"blendColor\",hue:\"hue\",gamma:\"gamma\"},g=function(t){function e(t,n){var i=n.locale,r=n.iconStyle,o=n.menuBarPosition,a=n.usageStatistics;!function(t,n){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this);var s=function(t,e){if(!t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!e||\"object\"!=typeof e&&\"function\"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,{locale:i,name:\"filter\",iconStyle:r,menuBarPosition:o,templateHtml:l.default,usageStatistics:a}));return s.selectBoxShow=!1,s.checkedMap={},s._makeControlElement(),s}return function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.default),i(e,[{key:\"addEvent\",value:function(t){var e=this,n=this._changeRangeValue.bind(this,t.applyFilter);r.default.forEach(f,function(t){var i=e.selector(\"#tie-\"+t),r=(0,c.toCamelCase)(t);e.checkedMap[r]=i,i.addEventListener(\"change\",function(){return n(r)})}),this._els.removewhiteDistanceRange.on(\"change\",function(){return n(\"removeWhite\")}),this._els.colorfilterThresholeRange.on(\"change\",function(){return n(\"colorFilter\")}),this._els.pixelateRange.on(\"change\",function(){return n(\"pixelate\")}),this._els.noiseRange.on(\"change\",function(){return n(\"noise\")}),this._els.brightnessRange.on(\"change\",function(){return n(\"brightness\")}),this._els.blendType.addEventListener(\"change\",function(){return n(\"blend\")}),this._els.filterBlendColor.on(\"change\",function(){return n(\"blend\")}),this._els.filterMultiplyColor.on(\"change\",function(){return n(\"multiply\")}),this._els.tintOpacity.on(\"change\",function(){return n(\"tint\")}),this._els.filterTintColor.on(\"change\",function(){return n(\"tint\")}),this._els.blendType.addEventListener(\"click\",function(t){return t.stopPropagation()}),this._els.filterMultiplyColor.on(\"changeShow\",this.colorPickerChangeShow.bind(this)),this._els.filterTintColor.on(\"changeShow\",this.colorPickerChangeShow.bind(this)),this._els.filterBlendColor.on(\"changeShow\",this.colorPickerChangeShow.bind(this))}},{key:\"_changeRangeValue\",value:function(t,e){var n=this.checkedMap[e].checked,i=p[e],r=this.checkedMap[e].closest(\".tui-image-editor-checkbox-group\");r&&(n?r.classList.remove(\"tui-image-editor-disabled\"):r.classList.add(\"tui-image-editor-disabled\")),t(n,i,this._getFilterOption(e))}},{key:\"_getFilterOption\",value:function(t){var e={};switch(t){case\"removeWhite\":e.color=\"#FFFFFF\",e.useAlpha=!1,e.distance=parseFloat(this._els.removewhiteDistanceRange.value);break;case\"colorFilter\":e.color=\"#FFFFFF\",e.distance=parseFloat(this._els.colorfilterThresholeRange.value);break;case\"pixelate\":e.blocksize=(0,c.toInteger)(this._els.pixelateRange.value);break;case\"noise\":e.noise=(0,c.toInteger)(this._els.noiseRange.value);break;case\"brightness\":e.brightness=parseFloat(this._els.brightnessRange.value);break;case\"blend\":e.mode=\"add\",e.color=this._els.filterBlendColor.color,e.mode=this._els.blendType.value;break;case\"multiply\":e.mode=\"multiply\",e.color=this._els.filterMultiplyColor.color;break;case\"tint\":e.mode=\"tint\",e.color=this._els.filterTintColor.color,e.alpha=this._els.tintOpacity.value}return e}},{key:\"_makeControlElement\",value:function(){var t=this.selector;this._els={removewhiteDistanceRange:new a.default(t(\"#tie-removewhite-distance-range\"),u.defaultFilterRangeValus.removewhiteDistanceRange),brightnessRange:new a.default(t(\"#tie-brightness-range\"),u.defaultFilterRangeValus.brightnessRange),noiseRange:new a.default(t(\"#tie-noise-range\"),u.defaultFilterRangeValus.noiseRange),pixelateRange:new a.default(t(\"#tie-pixelate-range\"),u.defaultFilterRangeValus.pixelateRange),colorfilterThresholeRange:new a.default(t(\"#tie-colorfilter-threshole-range\"),u.defaultFilterRangeValus.colorfilterThresholeRange),filterTintColor:new o.default(t(\"#tie-filter-tint-color\"),\"#03bd9e\",this.toggleDirection,this.usageStatistics),filterMultiplyColor:new o.default(t(\"#tie-filter-multiply-color\"),\"#515ce6\",this.toggleDirection,this.usageStatistics),filterBlendColor:new o.default(t(\"#tie-filter-blend-color\"),\"#ffbb3b\",this.toggleDirection,this.usageStatistics)},this._els.tintOpacity=this._pickerWithRange(this._els.filterTintColor.pickerControl),this._els.blendType=this._pickerWithSelectbox(this._els.filterBlendColor.pickerControl),this.colorPickerControls.push(this._els.filterTintColor),this.colorPickerControls.push(this._els.filterMultiplyColor),this.colorPickerControls.push(this._els.filterBlendColor)}},{key:\"_pickerWithRange\",value:function(t){var e=document.createElement(\"div\"),n=document.createElement(\"label\"),i=document.createElement(\"div\");return i.id=\"tie-filter-tint-opacity\",n.innerHTML=\"Opacity\",e.appendChild(n),e.appendChild(i),t.appendChild(e),t.style.height=\"130px\",new a.default(i,u.defaultFilterRangeValus.tintOpacityRange)}},{key:\"_pickerWithSelectbox\",value:function(t){var e=document.createElement(\"div\"),n=document.createElement(\"select\"),i=document.createElement(\"ul\");return e.className=\"tui-image-editor-selectlist-wrap\",i.className=\"tui-image-editor-selectlist\",e.appendChild(n),e.appendChild(i),this._makeSelectOptionList(n),t.appendChild(e),t.style.height=\"130px\",this._drawSelectOptionList(n,i),this._pickerWithSelectboxForAddEvent(n,i),n}},{key:\"_drawSelectOptionList\",value:function(t,e){var n=t.querySelectorAll(\"option\");r.default.forEach(n,function(t){var n=document.createElement(\"li\");n.innerHTML=t.innerHTML,n.setAttribute(\"data-item\",t.value),e.appendChild(n)})}},{key:\"_pickerWithSelectboxForAddEvent\",value:function(t,e){var n=this;e.addEventListener(\"click\",function(i){var r=i.target.getAttribute(\"data-item\"),o=document.createEvent(\"HTMLEvents\");t.querySelector('[value=\"'+r+'\"]').selected=!0,o.initEvent(\"change\",!0,!0),t.dispatchEvent(o),n.selectBoxShow=!1,e.style.display=\"none\"}),t.addEventListener(\"mousedown\",function(i){i.preventDefault(),n.selectBoxShow=!n.selectBoxShow,e.style.display=n.selectBoxShow?\"block\":\"none\",e.setAttribute(\"data-selectitem\",t.value),e.querySelector(\"[data-item='\"+t.value+\"']\").classList.add(\"active\")})}},{key:\"_makeSelectOptionList\",value:function(t){r.default.forEach(d,function(e){var n=document.createElement(\"option\");n.setAttribute(\"value\",e),n.innerHTML=e.replace(/^[a-z]/,function(t){return t.toUpperCase()}),t.appendChild(n)})}}]),e}();e.default=g},function(t,e){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.default=function(t){var e=t.locale;return'\\n    <ul class=\"tui-image-editor-submenu-item\">\\n        <li class=\"tui-image-editor-submenu-align\">\\n            <div class=\"tui-image-editor-checkbox-wrap fixed-width\">\\n                <div class=\"tui-image-editor-checkbox\">\\n                    <input type=\"checkbox\" id=\"tie-grayscale\">\\n                    <label for=\"tie-grayscale\">'+e.localize(\"Grayscale\")+'</label>\\n                </div>\\n                <div class=\"tui-image-editor-checkbox\">\\n                    <input type=\"checkbox\" id=\"tie-invert\">\\n                    <label for=\"tie-invert\">'+e.localize(\"Invert\")+'</label>\\n                </div>\\n                <div class=\"tui-image-editor-checkbox\">\\n                    <input type=\"checkbox\" id=\"tie-sepia\">\\n                    <label for=\"tie-sepia\">'+e.localize(\"Sepia\")+'</label>\\n                </div>\\n                <div class=\"tui-image-editor-checkbox\">\\n                    <input type=\"checkbox\" id=\"tie-sepia2\">\\n                    <label for=\"tie-sepia2\">'+e.localize(\"Sepia2\")+'</label>\\n                </div>\\n                <div class=\"tui-image-editor-checkbox\">\\n                    <input type=\"checkbox\" id=\"tie-blur\">\\n                    <label for=\"tie-blur\">'+e.localize(\"Blur\")+'</label>\\n                </div>\\n                <div class=\"tui-image-editor-checkbox\">\\n                    <input type=\"checkbox\" id=\"tie-sharpen\">\\n                    <label for=\"tie-sharpen\">'+e.localize(\"Sharpen\")+'</label>\\n                </div>\\n                <div class=\"tui-image-editor-checkbox\">\\n                    <input type=\"checkbox\" id=\"tie-emboss\">\\n                    <label for=\"tie-emboss\">'+e.localize(\"Emboss\")+'</label>\\n                </div>\\n            </div>\\n        </li>\\n        <li class=\"tui-image-editor-partition\">\\n            <div></div>\\n        </li>\\n        <li class=\"tui-image-editor-submenu-align\">\\n            <div class=\"tui-image-editor-checkbox-group tui-image-editor-disabled\" style=\"margin-bottom: 7px;\">\\n                <div class=\"tui-image-editor-checkbox-wrap\">\\n                    <div class=\"tui-image-editor-checkbox\">\\n                        <input type=\"checkbox\" id=\"tie-remove-white\">\\n                        <label for=\"tie-remove-white\">'+e.localize(\"Remove White\")+'</label>\\n                    </div>\\n                </div>\\n                <div class=\"tui-image-editor-newline tui-image-editor-range-wrap short\">\\n                    <label>'+e.localize(\"Distance\")+'</label>\\n                    <div id=\"tie-removewhite-distance-range\"></div>\\n                </div>\\n            </div>\\n            <div class=\"tui-image-editor-checkbox-group tui-image-editor-disabled\">\\n                <div class=\"tui-image-editor-checkbox\">\\n                    <input type=\"checkbox\" id=\"tie-brightness\">\\n                    <label for=\"tie-brightness\">'+e.localize(\"Brightness\")+'</label>\\n                </div>\\n                <div class=\"tui-image-editor-range-wrap short\">\\n                    <div id=\"tie-brightness-range\"></div>\\n                </div>\\n            </div>\\n            <div class=\"tui-image-editor-checkbox-group tui-image-editor-disabled\">\\n                <div class=\"tui-image-editor-checkbox\">\\n                    <input type=\"checkbox\" id=\"tie-noise\">\\n                    <label for=\"tie-noise\">'+e.localize(\"Noise\")+'</label>\\n                </div>\\n                <div class=\"tui-image-editor-range-wrap short\">\\n                    <div id=\"tie-noise-range\"></div>\\n                </div>\\n            </div>\\n        </li>\\n        <li class=\"tui-image-editor-partition only-left-right\">\\n            <div></div>\\n        </li>\\n        <li class=\"tui-image-editor-submenu-align\">\\n            <div class=\"tui-image-editor-checkbox-group tui-image-editor-disabled\">\\n                <div class=\"tui-image-editor-checkbox\">\\n                    <input type=\"checkbox\" id=\"tie-pixelate\">\\n                    <label for=\"tie-pixelate\">'+e.localize(\"Pixelate\")+'</label>\\n                </div>\\n                <div class=\"tui-image-editor-range-wrap short\">\\n                    <div id=\"tie-pixelate-range\"></div>\\n                </div>\\n            </div>\\n            <div class=\"tui-image-editor-checkbox-group tui-image-editor-disabled\">\\n                <div class=\"tui-image-editor-newline tui-image-editor-checkbox-wrap\">\\n                    <div class=\"tui-image-editor-checkbox\">\\n                        <input type=\"checkbox\" id=\"tie-color-filter\">\\n                        <label for=\"tie-color-filter\">'+e.localize(\"Color Filter\")+'</label>\\n                    </div>\\n                </div>\\n                <div class=\"tui-image-editor-newline tui-image-editor-range-wrap short\">\\n                    <label>'+e.localize(\"Threshold\")+'</label>\\n                    <div id=\"tie-colorfilter-threshole-range\"></div>\\n                </div>\\n            </div>\\n        </li>\\n        <li class=\"tui-image-editor-partition\">\\n            <div></div>\\n        </li>\\n        <li>\\n            <div class=\"filter-color-item\">\\n                <div id=\"tie-filter-tint-color\" title=\"'+e.localize(\"Tint\")+'\"></div>\\n                <div class=\"tui-image-editor-checkbox\">\\n                    <input type=\"checkbox\" id=\"tie-tint\">\\n                    <label for=\"tie-tint\"></label>\\n                </div>\\n            </div>\\n            <div class=\"filter-color-item\">\\n                <div id=\"tie-filter-multiply-color\" title=\"'+e.localize(\"Multiply\")+'\"></div>\\n                <div class=\"tui-image-editor-checkbox\">\\n                    <input type=\"checkbox\" id=\"tie-multiply\">\\n                    <label for=\"tie-multiply\"></label>\\n                </div>\\n            </div>\\n            <div class=\"filter-color-item\">\\n                <div id=\"tie-filter-blend-color\" title=\"'+e.localize(\"Blend\")+'\"></div>\\n                <div class=\"tui-image-editor-checkbox\">\\n                    <input type=\"checkbox\" id=\"tie-blend\">\\n                    <label for=\"tie-blend\"></label>\\n                </div>\\n            </div>\\n        </li>\\n    </ul>\\n'}},function(t,e){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var n=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),i=function(){function t(e){!function(e,n){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this),this._locale=e}return n(t,[{key:\"localize\",value:function(t){return this._locale[t]||t}}]),t}();e.default=i},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var i=n(3),r=a(n(72)),o=a(n(104));function a(t){return t&&t.__esModule?t:{default:t}}e.default={getActions:function(){return{main:this._mainAction(),shape:this._shapeAction(),crop:this._cropAction(),flip:this._flipAction(),rotate:this._rotateAction(),text:this._textAction(),mask:this._maskAction(),draw:this._drawAction(),icon:this._iconAction(),filter:this._filterAction()}},_mainAction:function(){var t=this,e=function(){\"crop\"===t.ui.submenu&&(t.stopDrawingMode(),t.ui.changeMenu(\"crop\"))},n=function(e){return\"rotate\"===t.ui.submenu&&t.ui.rotate.setRangeBarAngle(\"setAngle\",e),e};return(0,i.extend)({initLoadImage:function(n,i){return t.loadImageFromURL(n,i).then(function(i){e(),t.ui.initializeImgUrl=n,t.ui.resizeEditor({imageSize:i}),t.clearUndoStack()})},undo:function(){t.isEmptyUndoStack()||(e(),t.undo().then(n))},redo:function(){t.isEmptyRedoStack()||(e(),t.redo().then(n))},reset:function(){e(),t.loadImageFromURL(t.ui.initializeImgUrl,\"resetImage\").then(function(n){e(),t.ui.resizeEditor({imageSize:n}),t.clearUndoStack()})},delete:function(){t.ui.changeDeleteButtonEnabled(!1),e(),t.removeActiveObject(),t.activeObjectId=null},deleteAll:function(){e(),t.clearObjects(),t.ui.changeDeleteButtonEnabled(!1),t.ui.changeDeleteAllButtonEnabled(!1)},load:function(n){r.default.isSupportFileApi()||alert(\"This browser does not support file-api\"),t.ui.initializeImgUrl=URL.createObjectURL(n),t.loadImageFromFile(n).then(function(n){e(),t.clearUndoStack(),t.ui.activeMenuEvent(),t.ui.resizeEditor({imageSize:n})}).catch(function(t){return Promise.reject(t)})},download:function(){var e=t.toDataURL(),n=t.getImageName(),i=void 0,o=void 0;r.default.isSupportFileApi()&&window.saveAs?(o=(i=r.default.base64ToBlob(e)).type.split(\"/\")[1],n.split(\".\").pop()!==o&&(n+=\".\"+o),saveAs(i,n)):window.open().document.body.innerHTML=\"<img src='\"+e+\"'>\"}},this._commonAction())},_iconAction:function(){var t=this,e=void 0,n=void 0,r=void 0,a=void 0,s=void 0,l=void 0,c=void 0;return this.on({iconCreateResize:function(e){var n=e.moveOriginPointer,i=(n.y-a)/l;t.setObjectPropertiesQuietly(c,{scaleX:Math.abs((n.x-r)/s*2),scaleY:Math.abs(2*i)})},iconCreateEnd:function(){t.ui.icon.clearIconType(),t.changeSelectableAll(!0)}}),(0,i.extend)({changeColor:function(e){t.activeObjectId&&t.changeIconColor(t.activeObjectId,e)},addIcon:function(i,o){e=i,n=o,t.changeCursor(\"crosshair\"),t.off(\"mousedown\"),t.once(\"mousedown\",(function(i,o){r=o.x,a=o.y,t.addIcon(e,{left:o.x,top:o.y,fill:n}).then(function(t){c=t.id,s=t.width,l=t.height})}).bind(t))},cancelAddIcon:function(){t.off(\"mousedown\"),t.ui.icon.clearIconType(),t.changeSelectableAll(!0),t.changeCursor(\"default\")},registDefalutIcons:function(e,n){var i={};i[e]=n,t.registerIcons(i)},registCustomIcon:function(e,n){(new o.default).imageToSVG(e,function(e){var i=e.match(/path[^>]*d=\"([^\"]*)\"/),r={};r[n.name]=i[1],t.registerIcons(r),t.addIcon(n.name,{left:100,top:100})},o.default.tracerDefaultOption())}},this._commonAction())},_drawAction:function(){var t=this;return(0,i.extend)({setDrawMode:function(e,n){t.stopDrawingMode(),t.startDrawingMode(\"free\"===e?\"FREE_DRAWING\":\"LINE_DRAWING\",n)},setColor:function(e){t.setBrush({color:e})}},this._commonAction())},_maskAction:function(){var t=this;return(0,i.extend)({loadImageFromURL:function(e,n){return t.loadImageFromURL(t.toDataURL(),\"FilterImage\").then(function(){t.addImageObject(e).then(function(){URL.revokeObjectURL(n)})})},applyFilter:function(){t.applyFilter(\"mask\",{maskObjId:t.activeObjectId})}},this._commonAction())},_textAction:function(){var t=this;return(0,i.extend)({changeTextStyle:function(e){t.activeObjectId&&t.changeTextStyle(t.activeObjectId,e)}},this._commonAction())},_rotateAction:function(){var t=this;return(0,i.extend)({rotate:function(e,n){t.rotate(e,n),t.ui.resizeEditor(),t.ui.rotate.setRangeBarAngle(\"rotate\",e)},setAngle:function(e,n){t.setAngle(e,n),t.ui.resizeEditor(),t.ui.rotate.setRangeBarAngle(\"setAngle\",e)}},this._commonAction())},_shapeAction:function(){var t=this;return(0,i.extend)({changeShape:function(e){t.activeObjectId&&t.changeShape(t.activeObjectId,e)},setDrawingShape:function(e){t.setDrawingShape(e)}},this._commonAction())},_cropAction:function(){var t=this;return(0,i.extend)({crop:function(){var e=t.getCropzoneRect();e&&t.crop(e).then(function(){t.stopDrawingMode(),t.ui.resizeEditor(),t.ui.changeMenu(\"crop\")}).catch(function(t){return Promise.reject(t)})},cancel:function(){t.stopDrawingMode(),t.ui.changeMenu(\"crop\")},preset:function(e){switch(e){case\"preset-square\":t.setCropzoneRect(1);break;case\"preset-3-2\":t.setCropzoneRect(1.5);break;case\"preset-4-3\":t.setCropzoneRect(4/3);break;case\"preset-5-4\":t.setCropzoneRect(5/4);break;case\"preset-7-5\":t.setCropzoneRect(1.4);break;case\"preset-16-9\":t.setCropzoneRect(16/9);break;default:t.setCropzoneRect(),t.ui.crop.changeApplyButtonStatus(!1)}}},this._commonAction())},_flipAction:function(){var t=this;return(0,i.extend)({flip:function(e){return t[e]()}},this._commonAction())},_filterAction:function(){var t=this;return(0,i.extend)({applyFilter:function(e,n,i){e?t.applyFilter(n,i):t.hasFilter(n)&&t.removeFilter(n)}},this._commonAction())},setReAction:function(){var t=this;this.on({undoStackChanged:function(e){e?(t.ui.changeUndoButtonStatus(!0),t.ui.changeResetButtonStatus(!0)):(t.ui.changeUndoButtonStatus(!1),t.ui.changeResetButtonStatus(!1)),t.ui.resizeEditor()},redoStackChanged:function(e){t.ui.changeRedoButtonStatus(!!e),t.ui.resizeEditor()},objectActivated:function(e){t.activeObjectId=e.id,t.ui.changeDeleteButtonEnabled(!0),t.ui.changeDeleteAllButtonEnabled(!0),\"cropzone\"===e.type?t.ui.crop.changeApplyButtonStatus(!0):[\"rect\",\"circle\",\"triangle\"].indexOf(e.type)>-1?(t.stopDrawingMode(),\"shape\"!==t.ui.submenu&&t.ui.changeMenu(\"shape\",!1,!1),t.ui.shape.setShapeStatus({strokeColor:e.stroke,strokeWidth:e.strokeWidth,fillColor:e.fill}),t.ui.shape.setMaxStrokeValue(Math.min(e.width,e.height))):\"path\"===e.type||\"line\"===e.type?\"draw\"!==t.ui.submenu&&(t.ui.changeMenu(\"draw\",!1,!1),t.ui.draw.changeStandbyMode()):[\"i-text\",\"text\"].indexOf(e.type)>-1?\"text\"!==t.ui.submenu&&t.ui.changeMenu(\"text\",!1,!1):\"icon\"===e.type&&(t.stopDrawingMode(),\"icon\"!==t.ui.submenu&&t.ui.changeMenu(\"icon\",!1,!1),t.ui.icon.setIconPickerColor(e.fill))},addText:function(e){t.addText(\"Double Click\",{position:e.originPosition,styles:{fill:t.ui.text.textColor,fontSize:r.default.toInteger(t.ui.text.fontSize),fontFamily:\"Noto Sans\"}}).then(function(){t.changeCursor(\"default\")})},addObjectAfter:function(e){[\"rect\",\"circle\",\"triangle\"].indexOf(e.type)>-1&&(t.ui.shape.setMaxStrokeValue(Math.min(e.width,e.height)),t.ui.shape.changeStandbyMode())},objectScaled:function(e){if([\"i-text\",\"text\"].indexOf(e.type)>-1)t.ui.text.fontSize=r.default.toInteger(e.fontSize);else if([\"rect\",\"circle\",\"triangle\"].indexOf(e.type)>=0){var n=e.width,i=e.height,o=t.ui.shape.getStrokeValue();n<o&&t.ui.shape.setStrokeValue(n),i<o&&t.ui.shape.setStrokeValue(i)}},selectionCleared:function(){t.activeObjectId=null,\"text\"===t.ui.submenu?t.changeCursor(\"text\"):\"draw\"!==t.ui.submenu&&\"crop\"!==t.ui.submenu&&t.stopDrawingMode()}})},_commonAction:function(){var t=this;return{modeChange:function(e){switch(e){case\"text\":t._changeActivateMode(\"TEXT\");break;case\"crop\":t.startDrawingMode(\"CROPPER\");break;case\"shape\":t._changeActivateMode(\"SHAPE\"),t.setDrawingShape(t.ui.shape.type,t.ui.shape.options)}},deactivateAll:this.deactivateAll.bind(this),changeSelectableAll:this.changeSelectableAll.bind(this),discardSelection:this.discardSelection.bind(this),stopDrawingMode:this.stopDrawingMode.bind(this)}},mixin:function(t){(0,i.extend)(t.prototype,this)}}},function(t,e){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var n=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),i=function(){function t(){!function(e,n){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this),this.versionnumber=\"1.2.4\",this.optionpresets={default:{corsenabled:!1,ltres:1,qtres:1,pathomit:8,rightangleenhance:!0,colorsampling:2,numberofcolors:16,mincolorratio:0,colorquantcycles:3,layering:0,strokewidth:1,linefilter:!1,scale:1,roundcoords:1,viewbox:!1,desc:!1,lcpr:0,qcpr:0,blurradius:0,blurdelta:20},posterized1:{colorsampling:0,numberofcolors:2},posterized2:{numberofcolors:4,blurradius:5},curvy:{ltres:.01,linefilter:!0,rightangleenhance:!1},sharp:{qtres:.01,linefilter:!1},detailed:{pathomit:0,roundcoords:2,ltres:.5,qtres:.5,numberofcolors:64},smoothed:{blurradius:5,blurdelta:64},grayscale:{colorsampling:0,colorquantcycles:1,numberofcolors:7},fixedpalette:{colorsampling:0,colorquantcycles:1,numberofcolors:27},randomsampling1:{colorsampling:1,numberofcolors:8},randomsampling2:{colorsampling:1,numberofcolors:64},artistic1:{colorsampling:0,colorquantcycles:1,pathomit:0,blurradius:5,blurdelta:64,ltres:.01,linefilter:!0,numberofcolors:16,strokewidth:2},artistic2:{qtres:.01,colorsampling:0,colorquantcycles:1,numberofcolors:4,strokewidth:0},artistic3:{qtres:10,ltres:10,numberofcolors:8},artistic4:{qtres:10,ltres:10,numberofcolors:64,blurradius:5,blurdelta:256,strokewidth:2},posterized3:{ltres:1,qtres:1,pathomit:20,rightangleenhance:!0,colorsampling:0,numberofcolors:3,mincolorratio:0,colorquantcycles:3,blurradius:3,blurdelta:20,strokewidth:0,linefilter:!1,roundcoords:1,pal:[{r:0,g:0,b:100,a:255},{r:255,g:255,b:255,a:255}]}},this.pathscan_combined_lookup=[[[-1,-1,-1,-1],[-1,-1,-1,-1],[-1,-1,-1,-1],[-1,-1,-1,-1]],[[0,1,0,-1],[-1,-1,-1,-1],[-1,-1,-1,-1],[0,2,-1,0]],[[-1,-1,-1,-1],[-1,-1,-1,-1],[0,1,0,-1],[0,0,1,0]],[[0,0,1,0],[-1,-1,-1,-1],[0,2,-1,0],[-1,-1,-1,-1]],[[-1,-1,-1,-1],[0,0,1,0],[0,3,0,1],[-1,-1,-1,-1]],[[13,3,0,1],[13,2,-1,0],[7,1,0,-1],[7,0,1,0]],[[-1,-1,-1,-1],[0,1,0,-1],[-1,-1,-1,-1],[0,3,0,1]],[[0,3,0,1],[0,2,-1,0],[-1,-1,-1,-1],[-1,-1,-1,-1]],[[0,3,0,1],[0,2,-1,0],[-1,-1,-1,-1],[-1,-1,-1,-1]],[[-1,-1,-1,-1],[0,1,0,-1],[-1,-1,-1,-1],[0,3,0,1]],[[11,1,0,-1],[14,0,1,0],[14,3,0,1],[11,2,-1,0]],[[-1,-1,-1,-1],[0,0,1,0],[0,3,0,1],[-1,-1,-1,-1]],[[0,0,1,0],[-1,-1,-1,-1],[0,2,-1,0],[-1,-1,-1,-1]],[[-1,-1,-1,-1],[-1,-1,-1,-1],[0,1,0,-1],[0,0,1,0]],[[0,1,0,-1],[-1,-1,-1,-1],[-1,-1,-1,-1],[0,2,-1,0]],[[-1,-1,-1,-1],[-1,-1,-1,-1],[-1,-1,-1,-1],[-1,-1,-1,-1]]],this.gks=[[.27901,.44198,.27901],[.135336,.228569,.272192,.228569,.135336],[.086776,.136394,.178908,.195843,.178908,.136394,.086776],[.063327,.093095,.122589,.144599,.152781,.144599,.122589,.093095,.063327],[.049692,.069304,.089767,.107988,.120651,.125194,.120651,.107988,.089767,.069304,.049692]],this.specpalette=[{r:0,g:0,b:0,a:255},{r:128,g:128,b:128,a:255},{r:0,g:0,b:128,a:255},{r:64,g:64,b:128,a:255},{r:192,g:192,b:192,a:255},{r:255,g:255,b:255,a:255},{r:128,g:128,b:192,a:255},{r:0,g:0,b:192,a:255},{r:128,g:0,b:0,a:255},{r:128,g:64,b:64,a:255},{r:128,g:0,b:128,a:255},{r:168,g:168,b:168,a:255},{r:192,g:128,b:128,a:255},{r:192,g:0,b:0,a:255},{r:255,g:255,b:255,a:255},{r:0,g:128,b:0,a:255}]}return n(t,null,[{key:\"tracerDefaultOption\",value:function(){return{pathomit:100,ltres:.1,qtres:1,scale:1,strokewidth:5,viewbox:!1,linefilter:!0,desc:!1,rightangleenhance:!1,pal:[{r:0,g:0,b:0,a:255},{r:255,g:255,b:255,a:255}]}}}]),n(t,[{key:\"imageToSVG\",value:function(t,e,n){var i=this;n=this.checkoptions(n),this.loadImage(t,function(t){e(i.imagedataToSVG(i.getImgdata(t),n))},n)}},{key:\"imagedataToSVG\",value:function(t,e){e=this.checkoptions(e);var n=this.imagedataToTracedata(t,e);return this.getsvgstring(n,e)}},{key:\"imageToTracedata\",value:function(t,e,n){var i=this;n=this.checkoptions(n),this.loadImage(t,function(t){e(i.imagedataToTracedata(i.getImgdata(t),n))},n)}},{key:\"imagedataToTracedata\",value:function(t,e){e=this.checkoptions(e);var n=this.colorquantization(t,e),i=void 0;if(0===e.layering){i={layers:[],palette:n.palette,width:n.array[0].length-2,height:n.array.length-2};for(var r=0;r<n.palette.length;r+=1){var o=this.batchtracepaths(this.internodes(this.pathscan(this.layeringstep(n,r),e.pathomit),e),e.ltres,e.qtres);i.layers.push(o)}}else{var a=this.layering(n);e.layercontainerid&&this.drawLayers(a,this.specpalette,e.scale,e.layercontainerid);var s=this.batchpathscan(a,e.pathomit),l=this.batchinternodes(s,e);i={layers:this.batchtracelayers(l,e.ltres,e.qtres),palette:n.palette,width:t.width,height:t.height}}return i}},{key:\"checkoptions\",value:function(t){\"string\"==typeof(t=t||{})&&(t=t.toLowerCase(),t=this.optionpresets[t]?this.optionpresets[t]:{});for(var e=Object.keys(this.optionpresets.default),n=0;n<e.length;n+=1)t.hasOwnProperty(e[n])||(t[e[n]]=this.optionpresets.default[e[n]]);return t}},{key:\"colorquantization\",value:function(t,e){var n=[],i=0,r=void 0,o=void 0,a=void 0,s=[],l=t.width*t.height,c=void 0,u=void 0,h=void 0,d=void 0,f=void 0;for(u=0;u<t.height+2;u+=1)for(n[u]=[],c=0;c<t.width+2;c+=1)n[u][c]=-1;for(f=e.pal?e.pal:0===e.colorsampling?this.generatepalette(e.numberofcolors):1===e.colorsampling?this.samplepalette(e.numberofcolors,t):this.samplepalette2(e.numberofcolors,t),e.blurradius>0&&(t=this.blur(t,e.blurradius,e.blurdelta)),d=0;d<e.colorquantcycles;d+=1){if(d>0)for(h=0;h<f.length;h+=1)s[h].n>0&&(f[h]={r:Math.floor(s[h].r/s[h].n),g:Math.floor(s[h].g/s[h].n),b:Math.floor(s[h].b/s[h].n),a:Math.floor(s[h].a/s[h].n)}),s[h].n/l<e.mincolorratio&&d<e.colorquantcycles-1&&(f[h]={r:Math.floor(255*Math.random()),g:Math.floor(255*Math.random()),b:Math.floor(255*Math.random()),a:Math.floor(255*Math.random())});for(c=0;c<f.length;c+=1)s[c]={r:0,g:0,b:0,a:0,n:0};for(u=0;u<t.height;u+=1)for(c=0;c<t.width;c+=1){for(i=4*(u*t.width+c),a=0,o=1024,h=0;h<f.length;h+=1)(r=Math.abs(f[h].r-t.data[i])+Math.abs(f[h].g-t.data[i+1])+Math.abs(f[h].b-t.data[i+2])+Math.abs(f[h].a-t.data[i+3]))<o&&(o=r,a=h);s[a].r+=t.data[i],s[a].g+=t.data[i+1],s[a].b+=t.data[i+2],s[a].a+=t.data[i+3],s[a].n+=1,n[u+1][c+1]=a}}return{array:n,palette:f}}},{key:\"samplepalette\",value:function(t,e){for(var n=void 0,i=[],r=0;r<t;r+=1)n=4*Math.floor(Math.random()*e.data.length/4),i.push({r:e.data[n],g:e.data[n+1],b:e.data[n+2],a:e.data[n+3]});return i}},{key:\"samplepalette2\",value:function(t,e){for(var n=void 0,i=[],r=Math.ceil(Math.sqrt(t)),o=Math.ceil(t/r),a=e.width/(r+1),s=e.height/(o+1),l=0;l<o;l+=1)for(var c=0;c<r&&i.length!==t;c+=1)n=4*Math.floor((l+1)*s*e.width+(c+1)*a),i.push({r:e.data[n],g:e.data[n+1],b:e.data[n+2],a:e.data[n+3]});return i}},{key:\"generatepalette\",value:function(t){var e=[],n=void 0,i=void 0,r=void 0;if(t<8)for(var o=Math.floor(255/(t-1)),a=0;a<t;a+=1)e.push({r:a*o,g:a*o,b:a*o,a:255});else{var s=Math.floor(Math.pow(t,1/3)),l=Math.floor(255/(s-1)),c=t-s*s*s;for(n=0;n<s;n+=1)for(i=0;i<s;i+=1)for(r=0;r<s;r+=1)e.push({r:n*l,g:i*l,b:r*l,a:255});for(n=0;n<c;n+=1)e.push({r:Math.floor(255*Math.random()),g:Math.floor(255*Math.random()),b:Math.floor(255*Math.random()),a:Math.floor(255*Math.random())})}return e}},{key:\"layering\",value:function(t){var e=[],n=0,i=t.array.length,r=t.array[0].length,o=void 0,a=void 0,s=void 0,l=void 0,c=void 0,u=void 0,h=void 0,d=void 0,f=void 0,p=void 0;for(p=0;p<t.palette.length;p+=1)for(e[p]=[],f=0;f<i;f+=1)for(e[p][f]=[],d=0;d<r;d+=1)e[p][f][d]=0;for(f=1;f<i-1;f+=1)for(d=1;d<r-1;d+=1)o=t.array[f-1][d-1]===(n=t.array[f][d])?1:0,a=t.array[f-1][d]===n?1:0,s=t.array[f-1][d+1]===n?1:0,l=t.array[f][d-1]===n?1:0,u=t.array[f+1][d-1]===n?1:0,e[n][f+1][d+1]=1+2*(c=t.array[f][d+1]===n?1:0)+4*(t.array[f+1][d+1]===n?1:0)+8*(h=t.array[f+1][d]===n?1:0),l||(e[n][f+1][d]=2+4*h+8*u),a||(e[n][f][d+1]=0+2*s+4*c+8),o||(e[n][f][d]=0+2*a+4+8*l);return e}},{key:\"layeringstep\",value:function(t,e){var n=[],i=t.array.length,r=t.array[0].length,o=void 0,a=void 0;for(a=0;a<i;a+=1)for(n[a]=[],o=0;o<r;o+=1)n[a][o]=0;for(a=1;a<i;a+=1)for(o=1;o<r;o+=1)n[a][o]=(t.array[a-1][o-1]===e?1:0)+(t.array[a-1][o]===e?2:0)+(t.array[a][o-1]===e?8:0)+(t.array[a][o]===e?4:0);return n}},{key:\"pathscan\",value:function(t,e){for(var n=[],i=0,r=0,o=0,a=0,s=t[0].length,l=t.length,c=0,u=!0,h=!1,d=void 0,f=0;f<l;f+=1)for(var p=0;p<s;p+=1)if(4===t[f][p]||11===t[f][p])for(o=p,a=f,n[i]={},n[i].points=[],n[i].boundingbox=[o,a,o,a],n[i].holechildren=[],u=!1,r=0,h=11===t[f][p],c=1;!u;){if(n[i].points[r]={},n[i].points[r].x=o-1,n[i].points[r].y=a-1,n[i].points[r].t=t[a][o],o-1<n[i].boundingbox[0]&&(n[i].boundingbox[0]=o-1),o-1>n[i].boundingbox[2]&&(n[i].boundingbox[2]=o-1),a-1<n[i].boundingbox[1]&&(n[i].boundingbox[1]=a-1),a-1>n[i].boundingbox[3]&&(n[i].boundingbox[3]=a-1),t[a][o]=(d=this.pathscan_combined_lookup[t[a][o]][c])[0],c=d[1],a+=d[3],(o+=d[2])-1===n[i].points[0].x&&a-1===n[i].points[0].y)if(u=!0,n[i].points.length<e)n.pop();else{if(n[i].isholepath=!!h,h){for(var g=0,m=[-1,-1,s+1,l+1],v=0;v<i;v++)!n[v].isholepath&&this.boundingboxincludes(n[v].boundingbox,n[i].boundingbox)&&this.boundingboxincludes(m,n[v].boundingbox)&&(g=v,m=n[v].boundingbox);n[g].holechildren.push(i)}i+=1}r+=1}return n}},{key:\"boundingboxincludes\",value:function(t,e){return t[0]<e[0]&&t[1]<e[1]&&t[2]>e[2]&&t[3]>e[3]}},{key:\"batchpathscan\",value:function(t,e){var n=[];for(var i in t)t.hasOwnProperty(i)&&(n[i]=this.pathscan(t[i],e));return n}},{key:\"internodes\",value:function(t,e){var n=[],i=0,r=0,o=0,a=void 0,s=void 0;for(a=0;a<t.length;a+=1)for(n[a]={},n[a].points=[],n[a].boundingbox=t[a].boundingbox,n[a].holechildren=t[a].holechildren,n[a].isholepath=t[a].isholepath,i=t[a].points.length,s=0;s<i;s+=1)r=(s+1)%i,o=(s+2)%i,e.rightangleenhance&&this.testrightangle(t[a],(s-2+i)%i,(s-1+i)%i,s,r,o)&&(n[a].points.length>0&&(n[a].points[n[a].points.length-1].linesegment=this.getdirection(n[a].points[n[a].points.length-1].x,n[a].points[n[a].points.length-1].y,t[a].points[s].x,t[a].points[s].y)),n[a].points.push({x:t[a].points[s].x,y:t[a].points[s].y,linesegment:this.getdirection(t[a].points[s].x,t[a].points[s].y,(t[a].points[s].x+t[a].points[r].x)/2,(t[a].points[s].y+t[a].points[r].y)/2)})),n[a].points.push({x:(t[a].points[s].x+t[a].points[r].x)/2,y:(t[a].points[s].y+t[a].points[r].y)/2,linesegment:this.getdirection((t[a].points[s].x+t[a].points[r].x)/2,(t[a].points[s].y+t[a].points[r].y)/2,(t[a].points[r].x+t[a].points[o].x)/2,(t[a].points[r].y+t[a].points[o].y)/2)});return n}},{key:\"testrightangle\",value:function(t,e,n,i,r,o){return t.points[i].x===t.points[e].x&&t.points[i].x===t.points[n].x&&t.points[i].y===t.points[r].y&&t.points[i].y===t.points[o].y||t.points[i].y===t.points[e].y&&t.points[i].y===t.points[n].y&&t.points[i].x===t.points[r].x&&t.points[i].x===t.points[o].x}},{key:\"getdirection\",value:function(t,e,n,i){return t<n?e<i?1:e>i?7:0:t>n?e<i?3:e>i?5:4:e<i?2:e>i?6:8}},{key:\"batchinternodes\",value:function(t,e){var n=[];for(var i in t)t.hasOwnProperty(i)&&(n[i]=this.internodes(t[i],e));return n}},{key:\"tracepath\",value:function(t,e,n){var i=0,r=void 0,o=void 0,a=void 0,s={segments:[]};for(s.boundingbox=t.boundingbox,s.holechildren=t.holechildren,s.isholepath=t.isholepath;i<t.points.length;){for(r=t.points[i].linesegment,o=-1,a=i+1;(t.points[a].linesegment===r||t.points[a].linesegment===o||-1===o)&&a<t.points.length-1;)t.points[a].linesegment!==r&&-1===o&&(o=t.points[a].linesegment),a+=1;a===t.points.length-1&&(a=0),s.segments=s.segments.concat(this.fitseq(t,e,n,i,a)),i=a>0?a:t.points.length}return s}},{key:\"fitseq\",value:function(t,e,n,i,r){if(r>t.points.length||r<0)return[];var o=i,a=0,s=!0,l=void 0,c=void 0,u=void 0,h=r-i;h<0&&(h+=t.points.length);for(var d=(t.points[r].x-t.points[i].x)/h,f=(t.points[r].y-t.points[i].y)/h,p=(i+1)%t.points.length,g=void 0;p!=r;)(g=p-i)<0&&(g+=t.points.length),(u=(t.points[p].x-(l=t.points[i].x+d*g))*(t.points[p].x-l)+(t.points[p].y-(c=t.points[i].y+f*g))*(t.points[p].y-c))>e&&(s=!1),u>a&&(o=p,a=u),p=(p+1)%t.points.length;if(s)return[{type:\"L\",x1:t.points[i].x,y1:t.points[i].y,x2:t.points[r].x,y2:t.points[r].y}];var m=o;s=!0,a=0;var v=(m-i)/h,y=(1-v)*(1-v),b=2*(1-v)*v,_=v*v,w=(y*t.points[i].x+_*t.points[r].x-t.points[m].x)/-b,x=(y*t.points[i].y+_*t.points[r].y-t.points[m].y)/-b;for(p=i+1;p!=r;)(u=(t.points[p].x-(l=(y=(1-(v=(p-i)/h))*(1-v))*t.points[i].x+(b=2*(1-v)*v)*w+(_=v*v)*t.points[r].x))*(t.points[p].x-l)+(t.points[p].y-(c=y*t.points[i].y+b*x+_*t.points[r].y))*(t.points[p].y-c))>n&&(s=!1),u>a&&(o=p,a=u),p=(p+1)%t.points.length;if(s)return[{type:\"Q\",x1:t.points[i].x,y1:t.points[i].y,x2:w,y2:x,x3:t.points[r].x,y3:t.points[r].y}];var C=m;return this.fitseq(t,e,n,i,C).concat(this.fitseq(t,e,n,C,r))}},{key:\"batchtracepaths\",value:function(t,e,n){var i=[];for(var r in t)t.hasOwnProperty(r)&&i.push(this.tracepath(t[r],e,n));return i}},{key:\"batchtracelayers\",value:function(t,e,n){var i=[];for(var r in t)t.hasOwnProperty(r)&&(i[r]=this.batchtracepaths(t[r],e,n));return i}},{key:\"roundtodec\",value:function(t,e){return Number(t.toFixed(e))}},{key:\"svgpathstring\",value:function(t,e,n,i){var r=t.layers[e],o=r[n],a=\"\",s=void 0;if(i.linefilter&&o.segments.length<3)return a;if(a=\"<path \"+(i.desc?'desc=\"l '+e+\" p \"+n+'\" ':\"\")+this.tosvgcolorstr(t.palette[e],i)+'d=\"',-1===i.roundcoords){for(a+=\"M \"+o.segments[0].x1*i.scale+\" \"+o.segments[0].y1*i.scale+\" \",s=0;s<o.segments.length;s++)a+=o.segments[s].type+\" \"+o.segments[s].x2*i.scale+\" \"+o.segments[s].y2*i.scale+\" \",o.segments[s].hasOwnProperty(\"x3\")&&(a+=o.segments[s].x3*i.scale+\" \"+o.segments[s].y3*i.scale+\" \");a+=\"Z \"}else{for(a+=\"M \"+this.roundtodec(o.segments[0].x1*i.scale,i.roundcoords)+\" \"+this.roundtodec(o.segments[0].y1*i.scale,i.roundcoords)+\" \",s=0;s<o.segments.length;s++)a+=o.segments[s].type+\" \"+this.roundtodec(o.segments[s].x2*i.scale,i.roundcoords)+\" \"+this.roundtodec(o.segments[s].y2*i.scale,i.roundcoords)+\" \",o.segments[s].hasOwnProperty(\"x3\")&&(a+=this.roundtodec(o.segments[s].x3*i.scale,i.roundcoords)+\" \"+this.roundtodec(o.segments[s].y3*i.scale,i.roundcoords)+\" \");a+=\"Z \"}for(var l=0;l<o.holechildren.length;l++){var c=r[o.holechildren[l]];if(-1===i.roundcoords)for(c.segments[c.segments.length-1].hasOwnProperty(\"x3\")?a+=\"M \"+c.segments[c.segments.length-1].x3*i.scale+\" \"+c.segments[c.segments.length-1].y3*i.scale+\" \":a+=\"M \"+c.segments[c.segments.length-1].x2*i.scale+\" \"+c.segments[c.segments.length-1].y2*i.scale+\" \",s=c.segments.length-1;s>=0;s--)a+=c.segments[s].type+\" \",c.segments[s].hasOwnProperty(\"x3\")&&(a+=c.segments[s].x2*i.scale+\" \"+c.segments[s].y2*i.scale+\" \"),a+=c.segments[s].x1*i.scale+\" \"+c.segments[s].y1*i.scale+\" \";else for(c.segments[c.segments.length-1].hasOwnProperty(\"x3\")?a+=\"M \"+this.roundtodec(c.segments[c.segments.length-1].x3*i.scale)+\" \"+this.roundtodec(c.segments[c.segments.length-1].y3*i.scale)+\" \":a+=\"M \"+this.roundtodec(c.segments[c.segments.length-1].x2*i.scale)+\" \"+this.roundtodec(c.segments[c.segments.length-1].y2*i.scale)+\" \",s=c.segments.length-1;s>=0;s--)a+=c.segments[s].type+\" \",c.segments[s].hasOwnProperty(\"x3\")&&(a+=this.roundtodec(c.segments[s].x2*i.scale)+\" \"+this.roundtodec(c.segments[s].y2*i.scale)+\" \"),a+=this.roundtodec(c.segments[s].x1*i.scale)+\" \"+this.roundtodec(c.segments[s].y1*i.scale)+\" \";a+=\"Z \"}if(a+='\" />',i.lcpr||i.qcpr){for(s=0;s<o.segments.length;s++)o.segments[s].hasOwnProperty(\"x3\")&&i.qcpr&&(a+='<circle cx=\"'+o.segments[s].x2*i.scale+'\" cy=\"'+o.segments[s].y2*i.scale+'\" r=\"'+i.qcpr+'\" fill=\"cyan\" stroke-width=\"'+.2*i.qcpr+'\" stroke=\"black\" />',a+='<circle cx=\"'+o.segments[s].x3*i.scale+'\" cy=\"'+o.segments[s].y3*i.scale+'\" r=\"'+i.qcpr+'\" fill=\"white\" stroke-width=\"'+.2*i.qcpr+'\" stroke=\"black\" />',a+='<line x1=\"'+o.segments[s].x1*i.scale+'\" y1=\"'+o.segments[s].y1*i.scale+'\" x2=\"'+o.segments[s].x2*i.scale+'\" y2=\"'+o.segments[s].y2*i.scale+'\" stroke-width=\"'+.2*i.qcpr+'\" stroke=\"cyan\" />',a+='<line x1=\"'+o.segments[s].x2*i.scale+'\" y1=\"'+o.segments[s].y2*i.scale+'\" x2=\"'+o.segments[s].x3*i.scale+'\" y2=\"'+o.segments[s].y3*i.scale+'\" stroke-width=\"'+.2*i.qcpr+'\" stroke=\"cyan\" />'),!o.segments[s].hasOwnProperty(\"x3\")&&i.lcpr&&(a+='<circle cx=\"'+o.segments[s].x2*i.scale+'\" cy=\"'+o.segments[s].y2*i.scale+'\" r=\"'+i.lcpr+'\" fill=\"white\" stroke-width=\"'+.2*i.lcpr+'\" stroke=\"black\" />');for(l=0;l<o.holechildren.length;l++)for(c=r[o.holechildren[l]],s=0;s<c.segments.length;s++)c.segments[s].hasOwnProperty(\"x3\")&&i.qcpr&&(a+='<circle cx=\"'+c.segments[s].x2*i.scale+'\" cy=\"'+c.segments[s].y2*i.scale+'\" r=\"'+i.qcpr+'\" fill=\"cyan\" stroke-width=\"'+.2*i.qcpr+'\" stroke=\"black\" />',a+='<circle cx=\"'+c.segments[s].x3*i.scale+'\" cy=\"'+c.segments[s].y3*i.scale+'\" r=\"'+i.qcpr+'\" fill=\"white\" stroke-width=\"'+.2*i.qcpr+'\" stroke=\"black\" />',a+='<line x1=\"'+c.segments[s].x1*i.scale+'\" y1=\"'+c.segments[s].y1*i.scale+'\" x2=\"'+c.segments[s].x2*i.scale+'\" y2=\"'+c.segments[s].y2*i.scale+'\" stroke-width=\"'+.2*i.qcpr+'\" stroke=\"cyan\" />',a+='<line x1=\"'+c.segments[s].x2*i.scale+'\" y1=\"'+c.segments[s].y2*i.scale+'\" x2=\"'+c.segments[s].x3*i.scale+'\" y2=\"'+c.segments[s].y3*i.scale+'\" stroke-width=\"'+.2*i.qcpr+'\" stroke=\"cyan\" />'),!c.segments[s].hasOwnProperty(\"x3\")&&i.lcpr&&(a+='<circle cx=\"'+c.segments[s].x2*i.scale+'\" cy=\"'+c.segments[s].y2*i.scale+'\" r=\"'+i.lcpr+'\" fill=\"white\" stroke-width=\"'+.2*i.lcpr+'\" stroke=\"black\" />')}return a}},{key:\"getsvgstring\",value:function(t,e){e=this.checkoptions(e);for(var n=t.width*e.scale,i=t.height*e.scale,r=\"<svg \"+(e.viewbox?'viewBox=\"0 0 '+n+\" \"+i+'\" ':'width=\"'+n+'\" height=\"'+i+'\" ')+'version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" desc=\"Created with imagetracer.js version '+this.versionnumber+'\" >',o=0;o<t.layers.length;o+=1)for(var a=0;a<t.layers[o].length;a+=1)t.layers[o][a].isholepath||(r+=this.svgpathstring(t,o,a,e));return r+\"</svg>\"}},{key:\"compareNumbers\",value:function(t,e){return t-e}},{key:\"torgbastr\",value:function(t){return\"rgba(\"+t.r+\",\"+t.g+\",\"+t.b+\",\"+t.a+\")\"}},{key:\"tosvgcolorstr\",value:function(t,e){return'fill=\"rgb('+t.r+\",\"+t.g+\",\"+t.b+')\" stroke=\"rgb('+t.r+\",\"+t.g+\",\"+t.b+')\" stroke-width=\"'+e.strokewidth+'\" opacity=\"'+t.a/255+'\" '}},{key:\"appendSVGString\",value:function(t,e){var n=void 0;e?(n=document.getElementById(e))||((n=document.createElement(\"div\")).id=e,document.body.appendChild(n)):(n=document.createElement(\"div\"),document.body.appendChild(n)),n.innerHTML+=t}},{key:\"blur\",value:function(t,e,n){var i=void 0,r=void 0,o=void 0,a=void 0,s=void 0,l=void 0,c=void 0,u=void 0,h=void 0,d={width:t.width,height:t.height,data:[]};if((e=Math.floor(e))<1)return t;e>5&&(e=5),(n=Math.abs(n))>1024&&(n=1024);var f=this.gks[e-1];for(r=0;r<t.height;r++)for(i=0;i<t.width;i++){for(s=0,l=0,c=0,u=0,h=0,o=-e;o<e+1;o++)i+o>0&&i+o<t.width&&(s+=t.data[a=4*(r*t.width+i+o)]*f[o+e],l+=t.data[a+1]*f[o+e],c+=t.data[a+2]*f[o+e],u+=t.data[a+3]*f[o+e],h+=f[o+e]);d.data[a=4*(r*t.width+i)]=Math.floor(s/h),d.data[a+1]=Math.floor(l/h),d.data[a+2]=Math.floor(c/h),d.data[a+3]=Math.floor(u/h)}var p=new Uint8ClampedArray(d.data);for(r=0;r<t.height;r++)for(i=0;i<t.width;i++){for(s=0,l=0,c=0,u=0,h=0,o=-e;o<e+1;o++)r+o>0&&r+o<t.height&&(s+=p[a=4*((r+o)*t.width+i)]*f[o+e],l+=p[a+1]*f[o+e],c+=p[a+2]*f[o+e],u+=p[a+3]*f[o+e],h+=f[o+e]);d.data[a=4*(r*t.width+i)]=Math.floor(s/h),d.data[a+1]=Math.floor(l/h),d.data[a+2]=Math.floor(c/h),d.data[a+3]=Math.floor(u/h)}for(r=0;r<t.height;r++)for(i=0;i<t.width;i++)a=4*(r*t.width+i),Math.abs(d.data[a]-t.data[a])+Math.abs(d.data[a+1]-t.data[a+1])+Math.abs(d.data[a+2]-t.data[a+2])+Math.abs(d.data[a+3]-t.data[a+3])>n&&(d.data[a]=t.data[a],d.data[a+1]=t.data[a+1],d.data[a+2]=t.data[a+2],d.data[a+3]=t.data[a+3]);return d}},{key:\"loadImage\",value:function(t,e,n){var i=new Image;n&&n.corsenabled&&(i.crossOrigin=\"Anonymous\"),i.src=t,i.onload=function(){var t=document.createElement(\"canvas\");t.width=i.width,t.height=i.height,t.getContext(\"2d\").drawImage(i,0,0),e(t)}}},{key:\"getImgdata\",value:function(t){return t.getContext(\"2d\").getImageData(0,0,t.width,t.height)}},{key:\"drawLayers\",value:function(t,e,n,i){n=n||1;var r=void 0,o=void 0,a=void 0,s=void 0,l=void 0,c=void 0;for(l in i?(c=document.getElementById(i))||((c=document.createElement(\"div\")).id=i,document.body.appendChild(c)):(c=document.createElement(\"div\"),document.body.appendChild(c)),t)if(t.hasOwnProperty(l)){r=t[l][0].length,o=t[l].length;var u=document.createElement(\"canvas\");u.width=r*n,u.height=o*n;var h=u.getContext(\"2d\");for(s=0;s<o;s+=1)for(a=0;a<r;a+=1)h.fillStyle=this.torgbastr(e[t[l][s][a]%e.length]),h.fillRect(a*n,s*n,n,n);c.appendChild(u)}}}]),t}();e.default=i},function(t,e,n){\"use strict\";var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=S(n(3)),o=S(n(4)),a=S(n(106)),s=S(n(107)),l=S(n(109)),c=S(n(111)),u=S(n(112)),h=S(n(113)),d=S(n(114)),f=S(n(115)),p=S(n(116)),g=S(n(117)),m=S(n(123)),v=S(n(125)),y=S(n(127)),b=S(n(128)),_=S(n(129)),w=S(n(130)),x=S(n(73)),C=S(n(72));function S(t){return t&&t.__esModule?t:{default:t}}var k=x.default.componentNames,E=x.default.eventNames,T=x.default.drawingModes,O=x.default.fObjectOptions,P=r.default.extend,j=r.default.stamp,A=r.default.isArray,M=r.default.isString,D=r.default.forEachArray,I=r.default.forEachOwnProperties,R=r.default.CustomEvents,L=1e3,F=800,N={cssOnly:!0},B={backstoreOnly:!0},H=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.cssMaxWidth,r=n.cssMaxHeight,o=n.useItext,a=void 0!==o&&o,s=n.useDragAddIcon,l=void 0!==s&&s;!function(e,n){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this),this.canvasImage=null,this.cssMaxWidth=i||L,this.cssMaxHeight=r||F,this.useItext=a,this.useDragAddIcon=l,this.cropSelectionStyle={},this.imageName=\"\",this._objects={},this._canvas=null,this._drawingMode=T.NORMAL,this._drawingModeMap={},this._componentMap={},this._handler={onMouseDown:this._onMouseDown.bind(this),onObjectAdded:this._onObjectAdded.bind(this),onObjectRemoved:this._onObjectRemoved.bind(this),onObjectMoved:this._onObjectMoved.bind(this),onObjectScaled:this._onObjectScaled.bind(this),onObjectSelected:this._onObjectSelected.bind(this),onPathCreated:this._onPathCreated.bind(this),onSelectionCleared:this._onSelectionCleared.bind(this),onSelectionCreated:this._onSelectionCreated.bind(this)},this._setObjectCachingToFalse(),this._setCanvasElement(e),this._createDrawingModeInstances(),this._createComponents(),this._attachCanvasEvents()}return i(t,[{key:\"destroy\",value:function(){var t=this._canvas.wrapperEl;this._canvas.clear(),t.parentNode.removeChild(t)}},{key:\"deactivateAll\",value:function(){return this._canvas.discardActiveObject(),this}},{key:\"renderAll\",value:function(){return this._canvas.renderAll(),this}},{key:\"add\",value:function(t){var e,n=[];A(t)?n=t:n.push(t),(e=this._canvas).add.apply(e,n)}},{key:\"contains\",value:function(t){return this._canvas.contains(t)}},{key:\"getObjects\",value:function(){return this._canvas.getObjects().slice()}},{key:\"getObject\",value:function(t){return this._objects[t]}},{key:\"remove\",value:function(t){this._canvas.remove(t)}},{key:\"removeAll\",value:function(t){var e=this._canvas,n=e.getObjects().slice();return e.remove.apply(e,this._canvas.getObjects()),t&&e.clear(),n}},{key:\"removeObjectById\",value:function(t){var e=[],n=this._canvas,i=this.getObject(t);return i&&i.isType(\"group\")&&!i.isEmpty()?(n.discardActiveObject(),i.forEachObject(function(t){e.push(t),n.remove(t)})):n.contains(i)&&(e.push(i),n.remove(i)),e}},{key:\"getObjectId\",value:function(t){var e=null;for(e in this._objects)if(this._objects.hasOwnProperty(e)&&t===this._objects[e])return e;return null}},{key:\"getActiveObject\",value:function(){return this._canvas._activeObject}},{key:\"getActiveObjects\",value:function(){var t=this._canvas._activeObject;return t&&\"activeSelection\"===t.type?t:null}},{key:\"setActiveObject\",value:function(t){this._canvas.setActiveObject(t)}},{key:\"setCropSelectionStyle\",value:function(t){this.cropSelectionStyle=t}},{key:\"getComponent\",value:function(t){return this._componentMap[t]}},{key:\"getDrawingMode\",value:function(){return this._drawingMode}},{key:\"startDrawingMode\",value:function(t,e){if(this._isSameDrawingMode(t))return!0;this.stopDrawingMode();var n=this._getDrawingModeInstance(t);return n&&n.start&&(n.start(this,e),this._drawingMode=t),!!n}},{key:\"stopDrawingMode\",value:function(){if(!this._isSameDrawingMode(T.NORMAL)){var t=this._getDrawingModeInstance(this.getDrawingMode());t&&t.end&&t.end(this),this._drawingMode=T.NORMAL}}},{key:\"toDataURL\",value:function(t){return this._canvas&&this._canvas.toDataURL(t)}},{key:\"setCanvasImage\",value:function(t,e){e&&j(e),this.imageName=t,this.canvasImage=e}},{key:\"setCssMaxDimension\",value:function(t){this.cssMaxWidth=t.width||this.cssMaxWidth,this.cssMaxHeight=t.height||this.cssMaxHeight}},{key:\"adjustCanvasDimension\",value:function(){var t=this.canvasImage.scale(1),e=t.getBoundingRect(),n=e.width,i=e.height,r=this._calcMaxDimension(n,i);this.setCanvasCssDimension({width:\"100%\",height:\"100%\",\"max-width\":r.width+\"px\",\"max-height\":r.height+\"px\"}),this.setCanvasBackstoreDimension({width:n,height:i}),this._canvas.centerObject(t)}},{key:\"setCanvasCssDimension\",value:function(t){this._canvas.setDimensions(t,N)}},{key:\"setCanvasBackstoreDimension\",value:function(t){this._canvas.setDimensions(t,B)}},{key:\"setImageProperties\",value:function(t,e){var n=this.canvasImage;n&&(n.set(t).setCoords(),e&&this._canvas.renderAll())}},{key:\"getCanvasElement\",value:function(){return this._canvas.getElement()}},{key:\"getCanvas\",value:function(){return this._canvas}},{key:\"getCanvasImage\",value:function(){return this.canvasImage}},{key:\"getImageName\",value:function(){return this.imageName}},{key:\"addImageObject\",value:function(t){var e=this,n=this._callbackAfterLoadingImageObject.bind(this);return new o.default(function(i){a.default.Image.fromURL(t,function(t){n(t),i(e.createObjectProperties(t))},{crossOrigin:\"Anonymous\"})})}},{key:\"getCenter\",value:function(){return this._canvas.getCenter()}},{key:\"getCropzoneRect\",value:function(){return this.getComponent(k.CROPPER).getCropzoneRect()}},{key:\"setCropzoneRect\",value:function(t){this.getComponent(k.CROPPER).setCropzoneRect(t)}},{key:\"getCroppedImageData\",value:function(t){return this.getComponent(k.CROPPER).getCroppedImageData(t)}},{key:\"setBrush\",value:function(t){var e=k.FREE_DRAWING;this._drawingMode===T.LINE&&(e=T.LINE),this.getComponent(e).setBrush(t)}},{key:\"setDrawingShape\",value:function(t,e){this.getComponent(k.SHAPE).setStates(t,e)}},{key:\"registerPaths\",value:function(t){this.getComponent(k.ICON).registerPaths(t)}},{key:\"changeCursor\",value:function(t){var e=this.getCanvas();e.defaultCursor=t,e.renderAll()}},{key:\"hasFilter\",value:function(t){return this.getComponent(k.FILTER).hasFilter(t)}},{key:\"setSelectionStyle\",value:function(t){P(O.SELECTION_STYLE,t)}},{key:\"setObjectProperties\",value:function(t,e){var n=this.getObject(t),i=P({},e);return n.set(i),n.setCoords(),this.getCanvas().renderAll(),i}},{key:\"getObjectProperties\",value:function(t,e){var n=this.getObject(t),i={};return M(e)?i[e]=n[e]:A(e)?D(e,function(t){i[t]=n[t]}):I(e,function(t,e){i[e]=n[e]}),i}},{key:\"getObjectPosition\",value:function(t,e,n){var i=this.getObject(t);return i?i.getPointByOrigin(e,n):null}},{key:\"setObjectPosition\",value:function(t,e){var n=this.getObject(t),i=e.x,r=e.y;if(!n)return!1;var o=n.getPointByOrigin(e.originX,e.originY),a=n.getPointByOrigin(\"center\",\"center\");return n.set({left:i+(a.x-o.x),top:r+(a.y-o.y)}),n.setCoords(),!0}},{key:\"getCanvasSize\",value:function(){var t=this.getCanvasImage();return{width:t?t.width:0,height:t?t.height:0}}},{key:\"_getDrawingModeInstance\",value:function(t){return this._drawingModeMap[t]}},{key:\"_setObjectCachingToFalse\",value:function(){a.default.Object.prototype.objectCaching=!1}},{key:\"_setCanvasElement\",value:function(t){var e=void 0,n=void 0;\"CANVAS\"!==(e=t.nodeType?t:document.querySelector(t)).nodeName.toUpperCase()&&(n=document.createElement(\"canvas\"),e.appendChild(n)),this._canvas=new a.default.Canvas(n,{containerClass:\"tui-image-editor-canvas-container\",enableRetinaScaling:!1})}},{key:\"_createDrawingModeInstances\",value:function(){this._register(this._drawingModeMap,new v.default),this._register(this._drawingModeMap,new y.default),this._register(this._drawingModeMap,new b.default),this._register(this._drawingModeMap,new _.default),this._register(this._drawingModeMap,new w.default)}},{key:\"_createComponents\",value:function(){this._register(this._componentMap,new s.default(this)),this._register(this._componentMap,new l.default(this)),this._register(this._componentMap,new c.default(this)),this._register(this._componentMap,new u.default(this)),this._register(this._componentMap,new h.default(this)),this._register(this._componentMap,new d.default(this)),this._register(this._componentMap,new f.default(this)),this._register(this._componentMap,new p.default(this)),this._register(this._componentMap,new g.default(this)),this._register(this._componentMap,new m.default(this))}},{key:\"_register\",value:function(t,e){t[e.getName()]=e}},{key:\"_isSameDrawingMode\",value:function(t){return this.getDrawingMode()===t}},{key:\"_calcMaxDimension\",value:function(t,e){var n=this.cssMaxWidth/t,i=this.cssMaxHeight/e,r=Math.min(t,this.cssMaxWidth),o=Math.min(e,this.cssMaxHeight);return n<1&&n<i?(r=t*n,o=e*n):i<1&&i<n&&(r=t*i,o=e*i),{width:Math.floor(r),height:Math.floor(o)}}},{key:\"_callbackAfterLoadingImageObject\",value:function(t){var e=this.getCanvasImage().getCenterPoint();t.set(x.default.fObjectOptions.SELECTION_STYLE),t.set({left:e.x,top:e.y,crossOrigin:\"Anonymous\"}),this.getCanvas().add(t).setActiveObject(t)}},{key:\"_attachCanvasEvents\",value:function(){var t=this._handler;this._canvas.on({\"mouse:down\":t.onMouseDown,\"object:added\":t.onObjectAdded,\"object:removed\":t.onObjectRemoved,\"object:moving\":t.onObjectMoved,\"object:scaling\":t.onObjectScaled,\"object:selected\":t.onObjectSelected,\"path:created\":t.onPathCreated,\"selection:cleared\":t.onSelectionCleared,\"selection:created\":t.onSelectionCreated,\"selection:updated\":t.onObjectSelected})}},{key:\"_onMouseDown\",value:function(t){var e=this._canvas.getPointer(t.e);this.fire(E.MOUSE_DOWN,t.e,e)}},{key:\"_onObjectAdded\",value:function(t){var e=t.target;e.isType(\"cropzone\")||this._addFabricObject(e)}},{key:\"_onObjectRemoved\",value:function(t){this._removeFabricObject(j(t.target))}},{key:\"_onObjectMoved\",value:function(t){var e=this.createObjectProperties(t.target);this.fire(E.OBJECT_MOVED,e)}},{key:\"_onObjectScaled\",value:function(t){var e=this.createObjectProperties(t.target);this.fire(E.OBJECT_SCALED,e)}},{key:\"_onObjectSelected\",value:function(t){var e=this.createObjectProperties(t.target);this.fire(E.OBJECT_ACTIVATED,e)}},{key:\"_onPathCreated\",value:function(t){t.path.set(x.default.fObjectOptions.SELECTION_STYLE);var e=this.createObjectProperties(t.path);this.fire(E.ADD_OBJECT,e)}},{key:\"_onSelectionCleared\",value:function(){this.fire(E.SELECTION_CLEARED)}},{key:\"_onSelectionCreated\",value:function(t){this.fire(E.SELECTION_CREATED,t.target)}},{key:\"discardSelection\",value:function(){this._canvas.discardActiveObject(),this._canvas.renderAll()}},{key:\"changeSelectableAll\",value:function(t){this._canvas.forEachObject(function(e){e.selectable=t,e.hoverCursor=t?\"move\":\"crosshair\"})}},{key:\"createObjectProperties\",value:function(t){var e={id:j(t),type:t.type};return P(e,C.default.getProperties(t,[\"left\",\"top\",\"width\",\"height\",\"fill\",\"stroke\",\"strokeWidth\",\"opacity\"])),[\"i-text\",\"text\"].indexOf(t.type)>-1&&P(e,this._createTextProperties(t,e)),e}},{key:\"_createTextProperties\",value:function(t){var e={};return P(e,C.default.getProperties(t,[\"text\",\"fontFamily\",\"fontSize\",\"fontStyle\",\"textAlign\",\"textDecoration\"])),e}},{key:\"_addFabricObject\",value:function(t){var e=j(t);return this._objects[e]=t,e}},{key:\"_removeFabricObject\",value:function(t){delete this._objects[t]}}]),t}();R.mixin(H),t.exports=H},function(t,e){t.exports=n},function(t,e,n){\"use strict\";var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=s(n(4)),o=s(n(108)),a=s(n(73));function s(t){return t&&t.__esModule?t:{default:t}}var l=a.default.componentNames,c=a.default.rejectMessages,u={padding:0,crossOrigin:\"Anonymous\"},h=function(t){function e(t){return function(t,n){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this),function(t,e){if(!t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!e||\"object\"!=typeof e&&\"function\"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,l.IMAGE_LOADER,t))}return function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.default),i(e,[{key:\"load\",value:function(t,e){var n=this,i=void 0;if(t||e)i=this._setBackgroundImage(e).then(function(e){return n.setCanvasImage(t,e),n.adjustCanvasDimension(),e});else{var o=this.getCanvas();o.backgroundImage=null,o.renderAll(),i=new r.default(function(t){n.setCanvasImage(\"\",null),t()})}return i}},{key:\"_setBackgroundImage\",value:function(t){var e=this;return t?new r.default(function(n,i){var r=e.getCanvas();r.setBackgroundImage(t,function(){var t=r.backgroundImage;t&&t.getElement()?n(t):i(c.loadingImageFailed)},u)}):r.default.reject(c.loadImage)}}]),e}();t.exports=h},function(t,e){\"use strict\";var n=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),i=function(){function t(e,n){!function(e,n){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this),this.name=e,this.graphics=n}return n(t,[{key:\"fire\",value:function(){for(var t=this.graphics,e=arguments.length,n=Array(e),i=0;i<e;i++)n[i]=arguments[i];return this.graphics.fire.apply(t,n)}},{key:\"setCanvasImage\",value:function(t,e){this.graphics.setCanvasImage(t,e)}},{key:\"getCanvasElement\",value:function(){return this.graphics.getCanvasElement()}},{key:\"getCanvas\",value:function(){return this.graphics.getCanvas()}},{key:\"getCanvasImage\",value:function(){return this.graphics.getCanvasImage()}},{key:\"getImageName\",value:function(){return this.graphics.getImageName()}},{key:\"getEditor\",value:function(){return this.graphics.getEditor()}},{key:\"getName\",value:function(){return this.name}},{key:\"setImageProperties\",value:function(t,e){this.graphics.setImageProperties(t,e)}},{key:\"setCanvasCssDimension\",value:function(t){this.graphics.setCanvasCssDimension(t)}},{key:\"setCanvasBackstoreDimension\",value:function(t){this.graphics.setCanvasBackstoreDimension(t)}},{key:\"adjustCanvasDimension\",value:function(){this.graphics.adjustCanvasDimension()}}]),t}();t.exports=i},function(t,e,n){\"use strict\";var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=u(n(3)),o=u(n(106)),a=u(n(108)),s=u(n(110)),l=n(73),c=n(72);function u(t){return t&&t.__esModule?t:{default:t}}var h={top:-10,left:-10,height:1,width:1},d=function(t){function e(t){!function(t,n){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this);var n=function(t,e){if(!t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!e||\"object\"!=typeof e&&\"function\"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,l.componentNames.CROPPER,t));return n._cropzone=null,n._startX=null,n._startY=null,n._withShiftKey=!1,n._listeners={keydown:n._onKeyDown.bind(n),keyup:n._onKeyUp.bind(n),mousedown:n._onFabricMouseDown.bind(n),mousemove:n._onFabricMouseMove.bind(n),mouseup:n._onFabricMouseUp.bind(n)},n}return function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.default),i(e,[{key:\"start\",value:function(){if(!this._cropzone){var t=this.getCanvas();t.forEachObject(function(t){t.evented=!1}),this._cropzone=new s.default(t,{left:0,top:0,width:.5,height:.5,strokeWidth:0,cornerSize:10,cornerColor:\"black\",fill:\"transparent\",hasRotatingPoint:!1,hasBorders:!1,lockScalingFlip:!0,lockRotation:!0},this.graphics.cropSelectionStyle),t.discardActiveObject(),t.add(this._cropzone),t.on(\"mouse:down\",this._listeners.mousedown),t.selection=!1,t.defaultCursor=\"crosshair\",o.default.util.addListener(document,\"keydown\",this._listeners.keydown),o.default.util.addListener(document,\"keyup\",this._listeners.keyup)}}},{key:\"end\",value:function(){var t=this.getCanvas(),e=this._cropzone;e&&(t.remove(e),t.selection=!0,t.defaultCursor=\"default\",t.off(\"mouse:down\",this._listeners.mousedown),t.forEachObject(function(t){t.evented=!0}),this._cropzone=null,o.default.util.removeListener(document,\"keydown\",this._listeners.keydown),o.default.util.removeListener(document,\"keyup\",this._listeners.keyup))}},{key:\"_onFabricMouseDown\",value:function(t){var e=this.getCanvas();if(!t.target){e.selection=!1;var n=e.getPointer(t.e);this._startX=n.x,this._startY=n.y,e.on({\"mouse:move\":this._listeners.mousemove,\"mouse:up\":this._listeners.mouseup})}}},{key:\"_onFabricMouseMove\",value:function(t){var e=this.getCanvas(),n=e.getPointer(t.e),i=n.x,r=n.y,o=this._cropzone;Math.abs(i-this._startX)+Math.abs(r-this._startY)>10&&(e.remove(o),o.set(this._calcRectDimensionFromPoint(i,r)),e.add(o),e.setActiveObject(o))}},{key:\"_calcRectDimensionFromPoint\",value:function(t,e){var n=this.getCanvas(),i=n.getWidth(),r=n.getHeight(),o=this._startX,a=this._startY,s=(0,c.clamp)(t,0,o),l=(0,c.clamp)(e,0,a),u=(0,c.clamp)(t,o,i)-s,h=(0,c.clamp)(e,a,r)-l;return this._withShiftKey&&(u>h?h=u:h>u&&(u=h),o>=t&&(s=o-u),a>=e&&(l=a-h)),{left:s,top:l,width:u,height:h}}},{key:\"_onFabricMouseUp\",value:function(){var t=this._cropzone,e=this._listeners,n=this.getCanvas();n.setActiveObject(t),n.off({\"mouse:move\":e.mousemove,\"mouse:up\":e.mouseup})}},{key:\"getCroppedImageData\",value:function(t){var e=this.getCanvas(),n=e.contains(this._cropzone);if(!t)return null;n&&e.remove(this._cropzone);var i={imageName:this.getImageName(),url:e.toDataURL(t)};return n&&e.add(this._cropzone),i}},{key:\"getCropzoneRect\",value:function(){var t=this._cropzone;return t.isValid()?{left:t.left,top:t.top,width:t.width,height:t.height}:null}},{key:\"setCropzoneRect\",value:function(t){var e=this.getCanvas(),n=this._cropzone;e.discardActiveObject(),e.selection=!1,e.remove(n),n.set(t?this._getPresetCropSizePosition(t):h),e.add(n),e.selection=!0,t&&e.setActiveObject(n)}},{key:\"_getPresetCropSizePosition\",value:function(t){var e=this.getCanvas(),n=e.getWidth(),i=e.getHeight(),o=n>=i?n:i,a=function(t,e){return t>e?e/t:1},s=o*t,l=o,c=a(s,n),u=r.default.map([s,l],function(t){return t*c});s=u[0];var h=a(l=u[1],i),d=r.default.map([s,l],function(t){return t*h});return{top:(i-(l=d[1]))/2,left:(n-(s=d[0]))/2,width:s,height:l}}},{key:\"_onKeyDown\",value:function(t){t.keyCode===l.keyCodes.SHIFT&&(this._withShiftKey=!0)}},{key:\"_onKeyUp\",value:function(t){t.keyCode===l.keyCodes.SHIFT&&(this._withShiftKey=!1)}}]),e}();t.exports=d},function(t,e,n){\"use strict\";var i=a(n(3)),r=a(n(106)),o=n(72);function a(t){return t&&t.__esModule?t:{default:t}}var s=r.default.util.createClass(r.default.Rect,{initialize:function(t,e,n){(e=i.default.extend(e,n)).type=\"cropzone\",this.callSuper(\"initialize\",e),this.canvas=t,this.options=e,this.on({moving:this._onMoving.bind(this),scaling:this._onScaling.bind(this)})},_renderCropzone:function(){var t=(this.flipX?-1:1)/this.scaleX,e=(this.flipY?-1:1)/this.scaleY,n=this.canvas.getContext();n.scale(t,e),this._fillOuterRect(n,\"rgba(0, 0, 0, 0.5)\"),this.options.lineWidth?(this._fillInnerRect(n),this._strokeBorder(n,\"rgb(255, 255, 255)\",{lineWidth:this.options.lineWidth})):(this._strokeBorder(n,\"rgb(0, 0, 0)\",{lineDashWidth:7}),this._strokeBorder(n,\"rgb(255, 255, 255)\",{lineDashWidth:7,lineDashOffset:7})),n.scale(1/t,1/e)},_render:function(){var t=this.canvas.getContext();this.callSuper(\"_render\",t),this._renderCropzone()},_fillOuterRect:function(t,e){var n=this._getCoordinates(),i=n.x,r=n.y;t.save(),t.fillStyle=e,t.beginPath(),t.moveTo(i[0]-1,r[0]-1),t.lineTo(i[3]+1,r[0]-1),t.lineTo(i[3]+1,r[3]+1),t.lineTo(i[0]-1,r[3]+1),t.lineTo(i[0]-1,r[0]-1),t.closePath(),t.moveTo(i[1],r[1]),t.lineTo(i[1],r[2]),t.lineTo(i[2],r[2]),t.lineTo(i[2],r[1]),t.lineTo(i[1],r[1]),t.closePath(),t.fill(),t.restore()},_fillInnerRect:function(t){var e=this._getCoordinates(),n=e.x,i=e.y,r=this._caculateInnerPosition(n,(n[2]-n[1])/3),o=this._caculateInnerPosition(i,(i[2]-i[1])/3);t.save(),t.strokeStyle=\"rgba(255, 255, 255, 0.7)\",t.lineWidth=this.options.lineWidth,t.beginPath(),t.moveTo(r[0],o[1]),t.lineTo(r[3],o[1]),t.moveTo(r[0],o[2]),t.lineTo(r[3],o[2]),t.moveTo(r[1],o[0]),t.lineTo(r[1],o[3]),t.moveTo(r[2],o[0]),t.lineTo(r[2],o[3]),t.stroke(),t.closePath(),t.restore()},_caculateInnerPosition:function(t,e){var n=[];return n[0]=t[1],n[1]=t[1]+e,n[2]=t[1]+2*e,n[3]=t[2],n},_getCoordinates:function(){var t=this.canvas,e=this.width,n=this.height,r=this.left,o=this.top,a=e/2,s=n/2,l=t.getHeight(),c=t.getWidth();return{x:i.default.map([-(a+r),-a,a,a+(c-r-e)],Math.ceil),y:i.default.map([-(s+o),-s,s,s+(l-o-n)],Math.ceil)}},_strokeBorder:function(t,e,n){var i=n.lineDashWidth,r=n.lineDashOffset,o=n.lineWidth,a=this.width/2,s=this.height/2;t.save(),t.strokeStyle=e,t.setLineDash&&t.setLineDash([i,i]),r&&(t.lineDashOffset=r),o&&(t.lineWidth=o),t.beginPath(),t.moveTo(-a,-s),t.lineTo(a,-s),t.lineTo(a,s),t.lineTo(-a,s),t.lineTo(-a,-s),t.stroke(),t.restore()},_onMoving:function(){var t=this.height,e=this.width,n=this.left,i=this.top,r=this.canvas.getWidth()-e,a=this.canvas.getHeight()-t;this.left=(0,o.clamp)(n,0,r),this.top=(0,o.clamp)(i,0,a)},_onScaling:function(t){var e=this.canvas.getPointer(t.e),n=this._calcScalingSizeFromPointer(e);this.scale(1).set(n)},_calcScalingSizeFromPointer:function(t){var e=t.x,n=t.y,i=this._calcTopLeftScalingSizeFromPointer(e,n),r=this._calcBottomRightScalingSizeFromPointer(e,n);return this._makeScalingSettings(i,r)},_calcTopLeftScalingSizeFromPointer:function(t,e){var n=this.getBoundingRect(!1,!0),i=n.height+this.top,r=n.width+this.left,a=(0,o.clamp)(e,0,i-1),s=(0,o.clamp)(t,0,r-1);return{top:a,left:s,width:r-s,height:i-a}},_calcBottomRightScalingSizeFromPointer:function(t,e){var n=this.canvas,i=n.height,r=this.left,a=this.top;return{width:(0,o.clamp)(t,r+1,n.width)-r,height:(0,o.clamp)(e,a+1,i)-a}},_makeScalingSettings:function(t,e){var n=t.width,i=t.height,r=e.height,o=e.width,a=t.left,s=t.top,l=void 0;switch(this.__corner){case\"tl\":l=t;break;case\"tr\":l={width:o,height:i,top:s};break;case\"bl\":l={width:n,height:r,left:a};break;case\"br\":l=e;break;case\"ml\":l={width:n,left:a};break;case\"mt\":l={height:i,top:s};break;case\"mr\":l={width:o};break;case\"mb\":l={height:r}}return l},isValid:function(){return this.left>=0&&this.top>=0&&this.width>0&&this.height>0}});t.exports=s},function(t,e,n){\"use strict\";var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=l(n(3)),o=l(n(4)),a=l(n(108)),s=l(n(73));function l(t){return t&&t.__esModule?t:{default:t}}var c=s.default.componentNames,u=s.default.rejectMessages,h=function(t){function e(t){return function(t,n){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this),function(t,e){if(!t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!e||\"object\"!=typeof e&&\"function\"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,c.FLIP,t))}return function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.default),i(e,[{key:\"getCurrentSetting\",value:function(){var t=this.getCanvasImage();return{flipX:t.flipX,flipY:t.flipY}}},{key:\"set\",value:function(t){var e=this.getCurrentSetting(),n=e.flipX!==t.flipX,i=e.flipY!==t.flipY;return n||i?(r.default.extend(e,t),this.setImageProperties(e,!0),this._invertAngle(n,i),this._flipObjects(n,i),o.default.resolve({flipX:e.flipX,flipY:e.flipY,angle:this.getCanvasImage().angle})):o.default.reject(u.flip)}},{key:\"_invertAngle\",value:function(t,e){var n=this.getCanvasImage(),i=n.angle;t&&(i*=-1),e&&(i*=-1),n.rotate(parseFloat(i)).setCoords()}},{key:\"_flipObjects\",value:function(t,e){var n=this.getCanvas();t&&n.forEachObject(function(t){t.set({angle:parseFloat(-1*t.angle),flipX:!t.flipX,left:n.width-t.left}).setCoords()}),e&&n.forEachObject(function(t){t.set({angle:parseFloat(-1*t.angle),flipY:!t.flipY,top:n.height-t.top}).setCoords()}),n.renderAll()}},{key:\"reset\",value:function(){return this.set({flipX:!1,flipY:!1})}},{key:\"flipX\",value:function(){var t=this.getCurrentSetting();return this.set({flipX:!t.flipX,flipY:t.flipY})}},{key:\"flipY\",value:function(){var t=this.getCurrentSetting();return this.set({flipX:t.flipX,flipY:!t.flipY})}}]),e}();t.exports=h},function(t,e,n){\"use strict\";var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=s(n(106)),o=s(n(4)),a=s(n(108));function s(t){return t&&t.__esModule?t:{default:t}}var l=s(n(73)).default.componentNames,c=function(t){function e(t){return function(t,n){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this),function(t,e){if(!t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!e||\"object\"!=typeof e&&\"function\"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,l.ROTATION,t))}return function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.default),i(e,[{key:\"getCurrentAngle\",value:function(){return this.getCanvasImage().angle}},{key:\"setAngle\",value:function(t){var e=this.getCurrentAngle()%360;t%=360;var n=this.getCanvasImage(),i=n.getCenterPoint();n.set({angle:t}).setCoords(),this.adjustCanvasDimension();var r=n.getCenterPoint();return this._rotateForEachObject(i,r,t-e),o.default.resolve(t)}},{key:\"_rotateForEachObject\",value:function(t,e,n){var i=this.getCanvas(),o=t.x-e.x,a=t.y-e.y;i.forEachObject(function(e){var i=e.getCenterPoint(),s=r.default.util.degreesToRadians(n),l=r.default.util.rotatePoint(i,t,s);e.set({left:l.x-o,top:l.y-a,angle:(e.angle+n)%360}),e.setCoords()}),i.renderAll()}},{key:\"rotate\",value:function(t){var e=this.getCurrentAngle();return this.setAngle(e+t)}}]),e}();t.exports=c},function(t,e,n){\"use strict\";var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=s(n(106)),o=s(n(108)),a=s(n(73));function s(t){return t&&t.__esModule?t:{default:t}}var l=function(t){function e(t){!function(t,n){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this);var n=function(t,e){if(!t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!e||\"object\"!=typeof e&&\"function\"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,a.default.componentNames.FREE_DRAWING,t));return n.width=12,n.oColor=new r.default.Color(\"rgba(0, 0, 0, 0.5)\"),n}return function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.default),i(e,[{key:\"start\",value:function(t){this.getCanvas().isDrawingMode=!0,this.setBrush(t)}},{key:\"setBrush\",value:function(t){var e=this.getCanvas().freeDrawingBrush;this.width=(t=t||{}).width||this.width,t.color&&(this.oColor=new r.default.Color(t.color)),e.width=this.width,e.color=this.oColor.toRgba()}},{key:\"end\",value:function(){this.getCanvas().isDrawingMode=!1}}]),e}();t.exports=l},function(t,e,n){\"use strict\";var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=s(n(106)),o=s(n(108)),a=s(n(73));function s(t){return t&&t.__esModule?t:{default:t}}var l=a.default.eventNames,c=function(t){function e(t){!function(t,n){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this);var n=function(t,e){if(!t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!e||\"object\"!=typeof e&&\"function\"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,a.default.componentNames.LINE,t));return n._width=12,n._oColor=new r.default.Color(\"rgba(0, 0, 0, 0.5)\"),n._listeners={mousedown:n._onFabricMouseDown.bind(n),mousemove:n._onFabricMouseMove.bind(n),mouseup:n._onFabricMouseUp.bind(n)},n}return function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.default),i(e,[{key:\"start\",value:function(t){var e=this.getCanvas();e.defaultCursor=\"crosshair\",e.selection=!1,this.setBrush(t),e.forEachObject(function(t){t.set({evented:!1})}),e.on({\"mouse:down\":this._listeners.mousedown})}},{key:\"setBrush\",value:function(t){var e=this.getCanvas().freeDrawingBrush;this._width=(t=t||{}).width||this._width,t.color&&(this._oColor=new r.default.Color(t.color)),e.width=this._width,e.color=this._oColor.toRgba()}},{key:\"end\",value:function(){var t=this.getCanvas();t.defaultCursor=\"default\",t.selection=!0,t.forEachObject(function(t){t.set({evented:!0})}),t.off(\"mouse:down\",this._listeners.mousedown)}},{key:\"_onFabricMouseDown\",value:function(t){var e=this.getCanvas(),n=e.getPointer(t.e);this._line=new r.default.Line([n.x,n.y,n.x,n.y],{stroke:this._oColor.toRgba(),strokeWidth:this._width,evented:!1}),this._line.set(a.default.fObjectOptions.SELECTION_STYLE),e.add(this._line),e.on({\"mouse:move\":this._listeners.mousemove,\"mouse:up\":this._listeners.mouseup})}},{key:\"_onFabricMouseMove\",value:function(t){var e=this.getCanvas(),n=e.getPointer(t.e);this._line.set({x2:n.x,y2:n.y}),this._line.setCoords(),e.renderAll()}},{key:\"_onFabricMouseUp\",value:function(){var t=this.getCanvas(),e=this.graphics.createObjectProperties(this._line);this.fire(l.ADD_OBJECT,e),this._line=null,t.off({\"mouse:move\":this._listeners.mousemove,\"mouse:up\":this._listeners.mouseup})}}]),e}();t.exports=c},function(t,e,n){\"use strict\";var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=u(n(106)),o=u(n(3)),a=u(n(4)),s=u(n(108)),l=u(n(73)),c=u(n(72));function u(t){return t&&t.__esModule?t:{default:t}}var h=l.default.eventNames,d={fill:\"#000000\",left:0,top:0},f={fill:\"#000000\",fontStyle:\"normal\",fontWeight:\"normal\",textAlign:\"left\",textDecoraiton:\"\"},p=o.default.browser,g=c.default.makeStyleText({position:\"absolute\",padding:0,display:\"none\",border:\"1px dotted red\",overflow:\"hidden\",resize:\"none\",outline:\"none\",\"border-radius\":0,\"background-color\":\"transparent\",\"-webkit-appearance\":\"none\",\"z-index\":9999,\"white-space\":\"pre\"}),m=function(t){function e(t){!function(t,n){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this);var n=function(t,e){if(!t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!e||\"object\"!=typeof e&&\"function\"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,l.default.componentNames.TEXT,t));return n._defaultStyles=d,n._isSelected=!1,n._selectedObj={},n._editingObj={},n._listeners={mousedown:n._onFabricMouseDown.bind(n),select:n._onFabricSelect.bind(n),selectClear:n._onFabricSelectClear.bind(n),scaling:n._onFabricScaling.bind(n)},n._textarea=null,n._ratio=1,n._lastClickTime=(new Date).getTime(),n._editingObjInfos={},n.isPrevEditing=!1,n.useItext=t.useItext,n}return function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.default),i(e,[{key:\"start\",value:function(){var t=this.getCanvas();t.selection=!1,t.defaultCursor=\"text\",t.on({\"mouse:down\":this._listeners.mousedown,\"object:selected\":this._listeners.select,\"before:selection:cleared\":this._listeners.selectClear,\"object:scaling\":this._listeners.scaling,\"text:editing\":this._listeners.modify}),this.useItext?t.forEachObject(function(t){\"i-text\"===t.type&&t.set({left:t.left-t.width/2,top:t.top-t.height/2,originX:\"left\",originY:\"top\"})}):this._createTextarea(),this.setCanvasRatio()}},{key:\"end\",value:function(){var t=this.getCanvas();t.selection=!0,t.defaultCursor=\"default\",this.useItext?t.forEachObject(function(e){\"i-text\"===e.type&&(\"\"===e.text?t.remove(e):e.set({left:e.left+e.width/2,top:e.top+e.height/2,originX:\"center\",originY:\"center\"}))}):(t.discardActiveObject(),this._removeTextarea()),t.off({\"mouse:down\":this._listeners.mousedown,\"object:selected\":this._listeners.select,\"before:selection:cleared\":this._listeners.selectClear,\"object:scaling\":this._listeners.scaling,\"text:editing\":this._listeners.modify})}},{key:\"add\",value:function(t,e){var n=this;return new a.default(function(i){var a=n.getCanvas(),s=null,c=l.default.fObjectOptions.SELECTION_STYLE,u=n._defaultStyles;n._setInitPos(e.position),e.styles&&(u=o.default.extend(u,e.styles)),n.useItext?(s=new r.default.IText(t,u),c=o.default.extend({},c,{originX:\"left\",originY:\"top\"})):s=new r.default.Text(t,u),s.set(c),s.on({mouseup:n._onFabricMouseUp.bind(n)}),a.add(s),a.getActiveObject()||a.setActiveObject(s),n.isPrevEditing=!0,i(n.graphics.createObjectProperties(s))})}},{key:\"change\",value:function(t,e){var n=this;return new a.default(function(i){t.set(\"text\",e),n.getCanvas().renderAll(),i()})}},{key:\"setStyle\",value:function(t,e){var n=this;return new a.default(function(i){o.default.forEach(e,function(n,i){t[i]===n&&(e[i]=f[i]||\"\")},n),t.set(e),n.getCanvas().renderAll(),i()})}},{key:\"getText\",value:function(t){return t.text}},{key:\"setSelectedInfo\",value:function(t,e){this._selectedObj=t,this._isSelected=e}},{key:\"isSelected\",value:function(){return this._isSelected}},{key:\"getSelectedObj\",value:function(){return this._selectedObj}},{key:\"setCanvasRatio\",value:function(){var t=this.getCanvasElement(),e=parseInt(t.style.maxWidth,10);this._ratio=t.width/e}},{key:\"getCanvasRatio\",value:function(){return this._ratio}},{key:\"_setInitPos\",value:function(t){t=t||this.getCanvasImage().getCenterPoint(),this._defaultStyles.left=t.x,this._defaultStyles.top=t.y}},{key:\"_createTextarea\",value:function(){var t=this.getCanvasElement().parentNode,e=document.createElement(\"textarea\");e.className=\"tui-image-eidtor-textarea\",e.setAttribute(\"style\",g),e.setAttribute(\"wrap\",\"off\"),t.appendChild(e),this._textarea=e,this._listeners=o.default.extend(this._listeners,{input:this._onInput.bind(this),keydown:this._onKeyDown.bind(this),blur:this._onBlur.bind(this),scroll:this._onScroll.bind(this)}),p.msie&&9===p.version?r.default.util.addListener(e,\"keydown\",this._listeners.keydown):r.default.util.addListener(e,\"input\",this._listeners.input),r.default.util.addListener(e,\"blur\",this._listeners.blur),r.default.util.addListener(e,\"scroll\",this._listeners.scroll)}},{key:\"_removeTextarea\",value:function(){var t=this.getCanvasElement().parentNode,e=t.querySelector(\"textarea\");t.removeChild(e),this._textarea=null,p.msie&&p.version<10?r.default.util.removeListener(e,\"keydown\",this._listeners.keydown):r.default.util.removeListener(e,\"input\",this._listeners.input),r.default.util.removeListener(e,\"blur\",this._listeners.blur),r.default.util.removeListener(e,\"scroll\",this._listeners.scroll)}},{key:\"_onInput\",value:function(){var t=this.getCanvasRatio(),e=this._editingObj,n=this._textarea.style;n.width=Math.ceil(e.width/t)+\"px\",n.height=Math.ceil(e.height/t)+\"px\"}},{key:\"_onKeyDown\",value:function(){var t=this,e=this.getCanvasRatio(),n=this._editingObj,i=this._textarea.style;setTimeout(function(){n.text(t._textarea.value),i.width=Math.ceil(n.width/e)+\"px\",i.height=Math.ceil(n.height/e)+\"px\"},0)}},{key:\"_onBlur\",value:function(){var t=this.getCanvasRatio(),e=this._editingObj,n=this._editingObjInfos,i=this._textarea.value,r=e.width/t-n.width/t,a=e.height/t-n.height/t;if(1===t&&(r/=2,a/=2),this._textarea.style.display=\"none\",e.set({left:n.left+r,top:n.top+a}),i.length){this.getCanvas().add(e);var s={id:o.default.stamp(e),type:e.type,text:i};this.fire(h.TEXT_CHANGED,s)}}},{key:\"_onScroll\",value:function(){this._textarea.scrollLeft=0,this._textarea.scrollTop=0}},{key:\"_onFabricScaling\",value:function(t){var e=t.target;e.fontSize=e.fontSize*e.scaleY,e.scaleX=1,e.scaleY=1}},{key:\"_onFabricSelectClear\",value:function(t){var e=this.getSelectedObj();this.isPrevEditing=!0,this.setSelectedInfo(t.target,!1),e&&\"\"===e.text&&this.getCanvas().remove(e)}},{key:\"_onFabricSelect\",value:function(t){this.isPrevEditing=!0,this.setSelectedInfo(t.target,!0)}},{key:\"_onFabricMouseDown\",value:function(t){var e=t.target;e&&!e.isType(\"text\")||(this.isPrevEditing?this.isPrevEditing=!1:this._fireAddText(t))}},{key:\"_fireAddText\",value:function(t){var e=t.target,n=t.e||{},i=this.getCanvas().getPointer(n);e||this.fire(h.ADD_TEXT,{originPosition:{x:i.x,y:i.y},clientPosition:{x:n.clientX||0,y:n.clientY||0}})}},{key:\"_onFabricMouseUp\",value:function(t){var e=t.target,n=(new Date).getTime();(e.isEditing||this._isDoubleClick(n))&&(this.useItext||this._changeToEditingMode(e),this.fire(h.TEXT_EDITING)),this._lastClickTime=n}},{key:\"_isDoubleClick\",value:function(t){return t-this._lastClickTime<500}},{key:\"_changeToEditingMode\",value:function(t){var e=this.getCanvasRatio(),n=this._textarea.style,i=this.getCanvas();this.isPrevEditing=!0,i.remove(t),i.discardActiveObject(),this._editingObj=t,this._textarea.value=t.text,this._editingObjInfos={left:t.left,top:t.top,width:t.width,height:t.height},n.display=\"block\",n.left=t.oCoords.tl.x/e+\"px\",n.top=t.oCoords.tl.y/e+\"px\",n.width=Math.ceil(t.width/e)+\"px\",n.height=Math.ceil(t.height/e)+\"px\",n.transform=\"rotate(\"+t.angle+\"deg)\",n.color=t.fill,n[\"font-size\"]=t.fontSize/e+\"px\",n[\"font-family\"]=t.fontFamily,n[\"font-style\"]=t.fontStyle,n[\"font-weight\"]=t.fontWeight,n[\"text-align\"]=t.textAlign,n[\"line-height\"]=t.lineHeight+.1,n[\"transform-origin\"]=\"left top\",this._textarea.focus()}}]),e}();t.exports=m},function(t,e,n){\"use strict\";var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=c(n(106)),o=c(n(3)),a=c(n(4)),s=c(n(108)),l=c(n(73));function c(t){return t&&t.__esModule?t:{default:t}}var u=l.default.eventNames,h=l.default.rejectMessages,d={arrow:\"M 0 90 H 105 V 120 L 160 60 L 105 0 V 30 H 0 Z\",cancel:\"M 0 30 L 30 60 L 0 90 L 30 120 L 60 90 L 90 120 L 120 90 L 90 60 L 120 30 L 90 0 L 60 30 L 30 0 Z\"},f=function(t){function e(t){!function(t,n){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this);var n=function(t,e){if(!t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!e||\"object\"!=typeof e&&\"function\"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,l.default.componentNames.ICON,t));return n._oColor=\"#000000\",n._pathMap=d,n.useDragAddIcon=t.useDragAddIcon,n}return function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.default),i(e,[{key:\"add\",value:function(t,e){var n=this;return new a.default(function(i,r){var a=n.getCanvas(),s=n._pathMap[t],c=l.default.fObjectOptions.SELECTION_STYLE,u=Object.keys(l.default.defaultIconPath).indexOf(t)>=0,d=n.useDragAddIcon&&u,f=s?n._createIcon(s):null;f||r(h.invalidParameters),f.set(o.default.extend({type:\"icon\",fill:n._oColor},c,e,n.graphics.controlStyle)),a.add(f).setActiveObject(f),d&&n._addWithDragEvent(a),i(n.graphics.createObjectProperties(f))})}},{key:\"_addWithDragEvent\",value:function(t){var e=this;t.on({\"mouse:move\":function(n){t.selection=!1,e.fire(u.ICON_CREATE_RESIZE,{moveOriginPointer:t.getPointer(n.e)})},\"mouse:up\":function(n){e.fire(u.ICON_CREATE_END,{moveOriginPointer:t.getPointer(n.e)}),t.defaultCursor=\"default\",t.off(\"mouse:up\"),t.off(\"mouse:move\"),t.selection=!0}})}},{key:\"registerPaths\",value:function(t){var e=this;o.default.forEach(t,function(t,n){e._pathMap[n]=t},this)}},{key:\"setColor\",value:function(t,e){this._oColor=t,e&&\"icon\"===e.get(\"type\")&&(e.set({fill:this._oColor}),this.getCanvas().renderAll())}},{key:\"getColor\",value:function(t){return t.fill}},{key:\"_createIcon\",value:function(t){return new r.default.Path(t)}}]),e}();t.exports=f},function(t,e,n){\"use strict\";var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(3),o=p(n(4)),a=p(n(106)),s=p(n(108)),l=p(n(118)),c=p(n(73)),u=p(n(119)),h=p(n(120)),d=p(n(121)),f=p(n(122));function p(t){return t&&t.__esModule?t:{default:t}}var g=c.default.rejectMessages,m=a.default.Image.filters;m.Mask=l.default,m.Blur=u.default,m.Sharpen=h.default,m.Emboss=d.default,m.ColorFilter=f.default;var v=function(t){function e(t){return function(t,n){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this),function(t,e){if(!t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!e||\"object\"!=typeof e&&\"function\"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,c.default.componentNames.FILTER,t))}return function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.default),i(e,[{key:\"add\",value:function(t,e){var n=this;return new o.default(function(i,r){var o=n._getSourceImage(),a=n.getCanvas(),s=n._getFilter(o,t);s||(s=n._createFilter(o,t,e)),s||r(g.invalidParameters),n._changeFilterValues(s,e),n._apply(o,function(){a.renderAll(),i({type:t,action:\"add\"})})})}},{key:\"remove\",value:function(t){var e=this;return new o.default(function(n,i){var r=e._getSourceImage(),o=e.getCanvas();r.filters.length||i(g.unsupportedOperation),e._removeFilter(r,t),e._apply(r,function(){o.renderAll(),n({type:t,action:\"remove\"})})})}},{key:\"hasFilter\",value:function(t){return!!this._getFilter(this._getSourceImage(),t)}},{key:\"getOptions\",value:function(t){var e=this._getSourceImage(),n=this._getFilter(e,t);return n?(0,r.extend)({},n.options):null}},{key:\"_changeFilterValues\",value:function(t,e){(0,r.forEach)(e,function(e,n){(0,r.isUndefined)(t[n])||(t[n]=e)}),(0,r.forEach)(t.options,function(n,i){(0,r.isUndefined)(e[i])||(t.options[i]=e[i])})}},{key:\"_apply\",value:function(t,e){t.filters.push(),t.applyFilters()&&e()}},{key:\"_getSourceImage\",value:function(){return this.getCanvasImage()}},{key:\"_createFilter\",value:function(t,e,n){var i=void 0,r=this._getFabricFilterType(e),o=a.default.Image.filters[r];return o&&((i=new o(n)).options=n,t.filters.push(i)),i}},{key:\"_getFilter\",value:function(t,e){var n=null;if(t){var i=this._getFabricFilterType(e),r=t.filters.length,o=void 0,a=void 0;for(a=0;a<r;a+=1)if((o=t.filters[a]).type===i){n=o;break}}return n}},{key:\"_removeFilter\",value:function(t,e){var n=this._getFabricFilterType(e);t.filters=(0,r.filter)(t.filters,function(t){return t.type!==n})}},{key:\"_getFabricFilterType\",value:function(t){return t.charAt(0).toUpperCase()+t.slice(1)}}]),e}();t.exports=v},function(t,e,n){\"use strict\";var i,r=(i=n(106))&&i.__esModule?i:{default:i},o=r.default.util.createClass(r.default.Image.filters.BlendImage,{applyTo:function(t){if(this.mask){var e=t.canvasEl,n=e.width,i=e.height,r=this._createCanvasOfMask(n,i),o=e.getContext(\"2d\"),a=r.getContext(\"2d\"),s=o.getImageData(0,0,n,i);this._drawMask(a,e,o),this._mapData(a,s,n,i),t.imageData=s}},_createCanvasOfMask:function(t,e){var n=r.default.util.createCanvasElement();return n.width=t,n.height=e,n},_drawMask:function(t){var e=this.mask,n=e.getElement(),i=e.angle,r=e.left,o=e.scaleX,a=e.scaleY,s=e.top;t.save(),t.translate(r,s),t.rotate(i*Math.PI/180),t.scale(o,a),t.drawImage(n,-n.width/2,-n.height/2),t.restore()},_mapData:function(t,e,n,i){for(var r=e.data,o=e.width*e.height*4,a=t.getImageData(0,0,n,i).data,s=0;s<o;s+=4)r[s+3]=a[s]}});t.exports=o},function(t,e,n){\"use strict\";var i,r=(i=n(106))&&i.__esModule?i:{default:i},o=r.default.util.createClass(r.default.Image.filters.Convolute,{type:\"Blur\",initialize:function(){this.matrix=[1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9]}});t.exports=o},function(t,e,n){\"use strict\";var i,r=(i=n(106))&&i.__esModule?i:{default:i},o=r.default.util.createClass(r.default.Image.filters.Convolute,{type:\"Sharpen\",initialize:function(){this.matrix=[0,-1,0,-1,5,-1,0,-1,0]}});t.exports=o},function(t,e,n){\"use strict\";var i,r=(i=n(106))&&i.__esModule?i:{default:i},o=r.default.util.createClass(r.default.Image.filters.Convolute,{type:\"Emboss\",initialize:function(){this.matrix=[1,1,1,1,.7,-1,-1,-1,-1]}});t.exports=o},function(t,e,n){\"use strict\";var i,r=(i=n(106))&&i.__esModule?i:{default:i},o=r.default.util.createClass(r.default.Image.filters.BaseFilter,{type:\"ColorFilter\",initialize:function(t){t||(t={}),this.color=t.color||\"#FFFFFF\",this.threshold=t.threshold||45,this.x=t.x||null,this.y=t.y||null},applyTo:function(t){var e,n=t.canvasEl,i=n.getContext(\"2d\"),o=i.getImageData(0,0,n.width,n.height),a=o.data,s=this.threshold,l=r.default.Color.sourceFromHex(this.color),c=void 0;for(this.x&&this.y&&(l=this._getColor(o,this.x,this.y)),c=0,e=a.length;c<e;c+=4)this._isOutsideThreshold(a[c],l[0],s)||this._isOutsideThreshold(a[c+1],l[1],s)||this._isOutsideThreshold(a[c+2],l[2],s)||(a[c]=a[c+1]=a[c+2]=a[c+3]=0);i.putImageData(o,0,0)},_isOutsideThreshold:function(t,e,n){return Math.abs(t-e)>n},_getColor:function(t,e,n){var i=[0,0,0,0],r=t.data,o=4*(t.width*n+e);return i[0]=r[o],i[1]=r[o+1],i[2]=r[o+2],i[3]=r[o+3],i}});t.exports=o},function(t,e,n){\"use strict\";var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=u(n(106)),o=u(n(4)),a=u(n(108)),s=u(n(73)),l=u(n(124)),c=n(3);function u(t){return t&&t.__esModule?t:{default:t}}var h=s.default.rejectMessages,d=s.default.eventNames,f=s.default.keyCodes,p=\"rect\",g={strokeWidth:1,stroke:\"#000000\",fill:\"#ffffff\",width:1,height:1,rx:0,ry:0,lockSkewingX:!0,lockSkewingY:!0,lockUniScaling:!1,bringForward:!0,isRegular:!1},m=[\"rect\",\"circle\",\"triangle\"],v=function(t){function e(t){!function(t,n){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this);var n=function(t,e){if(!t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!e||\"object\"!=typeof e&&\"function\"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,s.default.componentNames.SHAPE,t));return n._shapeObj=null,n._type=p,n._options=(0,c.extend)({},g),n._isSelected=!1,n._startPoint={},n._withShiftKey=!1,n._handlers={mousedown:n._onFabricMouseDown.bind(n),mousemove:n._onFabricMouseMove.bind(n),mouseup:n._onFabricMouseUp.bind(n),keydown:n._onKeyDown.bind(n),keyup:n._onKeyUp.bind(n)},n}return function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.default),i(e,[{key:\"start\",value:function(){var t=this.getCanvas();this._isSelected=!1,t.defaultCursor=\"crosshair\",t.selection=!1,t.uniScaleTransform=!0,t.on({\"mouse:down\":this._handlers.mousedown}),r.default.util.addListener(document,\"keydown\",this._handlers.keydown),r.default.util.addListener(document,\"keyup\",this._handlers.keyup)}},{key:\"end\",value:function(){var t=this.getCanvas();this._isSelected=!1,t.defaultCursor=\"default\",t.selection=!0,t.uniScaleTransform=!1,t.off({\"mouse:down\":this._handlers.mousedown}),r.default.util.removeListener(document,\"keydown\",this._handlers.keydown),r.default.util.removeListener(document,\"keyup\",this._handlers.keyup)}},{key:\"setStates\",value:function(t,e){this._type=t,e&&(this._options=(0,c.extend)(this._options,e))}},{key:\"add\",value:function(t,e){var n=this;return new o.default(function(i){var r=n.getCanvas();e=n._extendOptions(e);var o=n._createInstance(t,e);n._bindEventOnShape(o),r.add(o).setActiveObject(o),i(n.graphics.createObjectProperties(o))})}},{key:\"change\",value:function(t,e){var n=this;return new o.default(function(i,r){(0,c.inArray)(t.get(\"type\"),m)<0&&r(h.unsupportedType),t.set(e),n.getCanvas().renderAll(),i()})}},{key:\"_createInstance\",value:function(t,e){var n=void 0;switch(t){case\"rect\":n=new r.default.Rect(e);break;case\"circle\":n=new r.default.Ellipse((0,c.extend)({type:\"circle\"},e));break;case\"triangle\":n=new r.default.Triangle(e);break;default:n={}}return n}},{key:\"_extendOptions\",value:function(t){return(t=(0,c.extend)({},g,this._options,s.default.fObjectOptions.SELECTION_STYLE,t)).isRegular&&(t.lockUniScaling=!0),t}},{key:\"_bindEventOnShape\",value:function(t){var e=this,n=this.getCanvas();t.on({added:function(){e._shapeObj=this,l.default.setOrigins(e._shapeObj)},selected:function(){e._isSelected=!0,e._shapeObj=this,n.uniScaleTransform=!0,n.defaultCursor=\"default\",l.default.setOrigins(e._shapeObj)},deselected:function(){e._isSelected=!1,e._shapeObj=null,n.defaultCursor=\"crosshair\",n.uniScaleTransform=!1},modified:function(){var t=e._shapeObj;l.default.adjustOriginToCenter(t),l.default.setOrigins(t)},scaling:function(t){var i=n.getPointer(t.e),r=e._shapeObj;n.setCursor(\"crosshair\"),l.default.resize(r,i,!0)}})}},{key:\"_onFabricMouseDown\",value:function(t){if(t.target||(this._isSelected=!1,this._shapeObj=!1),!this._isSelected&&!this._shapeObj){var e=this.getCanvas();this._startPoint=e.getPointer(t.e),e.on({\"mouse:move\":this._handlers.mousemove,\"mouse:up\":this._handlers.mouseup})}}},{key:\"_onFabricMouseMove\",value:function(t){var e=this,n=this.getCanvas(),i=n.getPointer(t.e),r=this._startPoint.x,o=this._startPoint.y,a=r-i.x,s=o-i.y,c=this._shapeObj;c?(this._shapeObj.set({isRegular:this._withShiftKey}),l.default.resize(c,i),n.renderAll()):this.add(this._type,{left:r,top:o,width:a,height:s}).then(function(t){e.fire(d.ADD_OBJECT,t)})}},{key:\"_onFabricMouseUp\",value:function(){var t=this,e=this.getCanvas(),n=this._startPoint.x,i=this._startPoint.y,r=this._shapeObj;r?r&&(l.default.adjustOriginToCenter(r),this.fire(d.ADD_OBJECT_AFTER,this.graphics.createObjectProperties(r))):this.add(this._type,{left:n,top:i,width:20,height:20}).then(function(e){t.fire(d.ADD_OBJECT,e)}),e.off({\"mouse:move\":this._handlers.mousemove,\"mouse:up\":this._handlers.mouseup})}},{key:\"_onKeyDown\",value:function(t){t.keyCode===f.SHIFT&&(this._withShiftKey=!0,this._shapeObj&&(this._shapeObj.isRegular=!0))}},{key:\"_onKeyUp\",value:function(t){t.keyCode===f.SHIFT&&(this._withShiftKey=!1,this._shapeObj&&(this._shapeObj.isRegular=!1))}}]),e}();t.exports=v},function(t,e){\"use strict\";var n={rect:1,circle:2,triangle:1},i={rect:{w:\"width\",h:\"height\"},circle:{w:\"rx\",h:\"ry\"},triangle:{w:\"width\",h:\"height\"}};function r(t,e,n){var i=t.x,r=t.y,o=e.x,a=e.y,s=n*Math.PI/180;return{originX:i>(o-i)*Math.cos(s)-(a-r)*Math.sin(s)+i?\"right\":\"left\",originY:r>(o-i)*Math.sin(s)+(a-r)*Math.cos(s)+r?\"bottom\":\"top\"}}t.exports={setOrigins:function(t){var e=t.getPointByOrigin(\"left\",\"top\"),n=t.getPointByOrigin(\"right\",\"top\"),i=t.getPointByOrigin(\"right\",\"bottom\"),r=t.getPointByOrigin(\"left\",\"bottom\");t.origins={lt:e,rt:n,rb:i,lb:r}},resize:function(t,e,o){(function(t){return\"center\"===t.originX&&\"center\"===t.originY})(t)&&(function(t,e){var n=e.getPointByOrigin(\"center\",\"center\"),i=r(n,t,-e.angle),o=i.originX,a=i.originY,s=e.getPointByOrigin(o,a);e.set({originX:o,originY:a,left:e.left-(n.x-s.x),top:e.top-(n.x-s.y)}),e.setCoords()}(e,t),function(t){var e=t.originY,n=t.originX.substring(0,1)+e.substring(0,1);t.startPoint=t.origins[n]}(t)),o?function(t){var e=t.scaleX,n=t.scaleY,r=i[t.type],o=t[r.w]*e,a=t[r.h]*n;if(t.isRegular){var s=Math.max(e,n);o=t[r.w]*s,a=t[r.h]*s}var l={hasControls:!1,hasBorders:!1,scaleX:1,scaleY:1};l[r.w]=o,l[r.h]=a,t.set(l)}(t):function(t,e){var r=e.type,o=e.strokeWidth,a=e.startPoint,s=n[r],l=i[r],c=!(\"triangle\"!==e.type),u={},h=Math.abs(a.x-t.x)/s,d=Math.abs(a.y-t.y)/s;h>o&&(h-=o/s),d>o&&(d-=o/s),e.isRegular&&(h=d=Math.max(h,d),c&&(d=Math.sqrt(3)/2*h)),u[l.w]=h,u[l.h]=d,e.set(u)}(e,t),function(t,e){var n=e.startPoint,i=r(n,t,-e.angle);e.setPositionByOrigin(n,i.originX,i.originY)}(e,t)},adjustOriginToCenter:function(t){var e=t.getPointByOrigin(\"center\",\"center\"),n=t.getPointByOrigin(t.originX,t.originY);t.set({hasControls:!0,hasBorders:!0,originX:\"center\",originY:\"center\",left:t.left+(e.x-n.x),top:t.top+(e.y-n.y)}),t.setCoords()}}},function(t,e,n){\"use strict\";var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=a(n(126)),o=a(n(73));function a(t){return t&&t.__esModule?t:{default:t}}var s=o.default.drawingModes,l=o.default.componentNames,c=function(t){function e(){return function(t,n){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this),function(t,e){if(!t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!e||\"object\"!=typeof e&&\"function\"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,s.CROPPER))}return function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.default),i(e,[{key:\"start\",value:function(t){t.getComponent(l.CROPPER).start()}},{key:\"end\",value:function(t){t.getComponent(l.CROPPER).end()}}]),e}();t.exports=c},function(t,e,n){\"use strict\";var i,r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=(i=n(71))&&i.__esModule?i:{default:i},a=o.default.create,s=o.default.types,l=function(){function t(e){!function(e,n){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this),this.name=e}return r(t,[{key:\"getName\",value:function(){return this.name}},{key:\"start\",value:function(){throw new Error(a(s.UN_IMPLEMENTATION,\"start\"))}},{key:\"stop\",value:function(){throw new Error(a(s.UN_IMPLEMENTATION,\"stop\"))}}]),t}();t.exports=l},function(t,e,n){\"use strict\";var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=a(n(126)),o=a(n(73));function a(t){return t&&t.__esModule?t:{default:t}}var s=o.default.drawingModes,l=o.default.componentNames,c=function(t){function e(){return function(t,n){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this),function(t,e){if(!t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!e||\"object\"!=typeof e&&\"function\"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,s.FREE_DRAWING))}return function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.default),i(e,[{key:\"start\",value:function(t,e){t.getComponent(l.FREE_DRAWING).start(e)}},{key:\"end\",value:function(t){t.getComponent(l.FREE_DRAWING).end()}}]),e}();t.exports=c},function(t,e,n){\"use strict\";var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=a(n(126)),o=a(n(73));function a(t){return t&&t.__esModule?t:{default:t}}var s=o.default.drawingModes,l=o.default.componentNames,c=function(t){function e(){return function(t,n){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this),function(t,e){if(!t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!e||\"object\"!=typeof e&&\"function\"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,s.LINE_DRAWING))}return function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.default),i(e,[{key:\"start\",value:function(t,e){t.getComponent(l.LINE).start(e)}},{key:\"end\",value:function(t){t.getComponent(l.LINE).end()}}]),e}();t.exports=c},function(t,e,n){\"use strict\";var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=a(n(126)),o=a(n(73));function a(t){return t&&t.__esModule?t:{default:t}}var s=o.default.drawingModes,l=o.default.componentNames,c=function(t){function e(){return function(t,n){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this),function(t,e){if(!t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!e||\"object\"!=typeof e&&\"function\"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,s.SHAPE))}return function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.default),i(e,[{key:\"start\",value:function(t){t.getComponent(l.SHAPE).start()}},{key:\"end\",value:function(t){t.getComponent(l.SHAPE).end()}}]),e}();t.exports=c},function(t,e,n){\"use strict\";var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=a(n(126)),o=a(n(73));function a(t){return t&&t.__esModule?t:{default:t}}var s=o.default.drawingModes,l=o.default.componentNames,c=function(t){function e(){return function(t,n){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this),function(t,e){if(!t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!e||\"object\"!=typeof e&&\"function\"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,s.TEXT))}return function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.default),i(e,[{key:\"start\",value:function(t){t.getComponent(l.TEXT).start()}},{key:\"end\",value:function(t){t.getComponent(l.TEXT).end()}}]),e}();t.exports=c},function(t,e){},,function(t,e,n){\"use strict\";var i=a(n(69)),r=a(n(4)),o=a(n(73));function a(t){return t&&t.__esModule?t:{default:t}}var s=o.default.componentNames.ICON,l={name:o.default.commandNames.ADD_ICON,execute:function(t,e,n){var i=this;return t.getComponent(s).add(e,n).then(function(e){return i.undoData.object=t.getObject(e.id),e})},undo:function(t){return t.remove(this.undoData.object),r.default.resolve()}};i.default.register(l),t.exports=l},function(t,e,n){\"use strict\";var i=o(n(69)),r=o(n(4));function o(t){return t&&t.__esModule?t:{default:t}}var a={name:o(n(73)).default.commandNames.ADD_IMAGE_OBJECT,execute:function(t,e){var n=this;return t.addImageObject(e).then(function(e){return n.undoData.object=t.getObject(e.id),e})},undo:function(t){return t.remove(this.undoData.object),r.default.resolve()}};i.default.register(a),t.exports=a},function(t,e,n){\"use strict\";var i=a(n(69)),r=a(n(4)),o=a(n(73));function a(t){return t&&t.__esModule?t:{default:t}}var s=o.default.rejectMessages,l={name:o.default.commandNames.ADD_OBJECT,execute:function(t,e){return new r.default(function(n,i){t.contains(e)?i(s.addedObject):(t.add(e),n(e))})},undo:function(t,e){return new r.default(function(n,i){t.contains(e)?(t.remove(e),n(e)):i(s.noObject)})}};i.default.register(l),t.exports=l},function(t,e,n){\"use strict\";var i=a(n(69)),r=a(n(4)),o=a(n(73));function a(t){return t&&t.__esModule?t:{default:t}}var s=o.default.componentNames.SHAPE,l={name:o.default.commandNames.ADD_SHAPE,execute:function(t,e,n){var i=this;return t.getComponent(s).add(e,n).then(function(e){return i.undoData.object=t.getObject(e.id),e})},undo:function(t){return t.remove(this.undoData.object),r.default.resolve()}};i.default.register(l),t.exports=l},function(t,e,n){\"use strict\";var i=a(n(69)),r=a(n(4)),o=a(n(73));function a(t){return t&&t.__esModule?t:{default:t}}var s=o.default.componentNames.TEXT,l={name:o.default.commandNames.ADD_TEXT,execute:function(t,e,n){var i=this;return t.getComponent(s).add(e,n).then(function(e){return i.undoData.object=t.getObject(e.id),e})},undo:function(t){return t.remove(this.undoData.object),r.default.resolve()}};i.default.register(l),t.exports=l},function(t,e,n){\"use strict\";var i=o(n(69)),r=o(n(73));function o(t){return t&&t.__esModule?t:{default:t}}var a=r.default.rejectMessages,s=r.default.componentNames.FILTER,l={name:r.default.commandNames.APPLY_FILTER,execute:function(t,e,n){var i=t.getComponent(s);if(\"mask\"===e){var r=t.getObject(n.maskObjId);if(!r||!r.isType(\"image\"))return Promise.reject(a.invalidParameters);n={mask:r}}return\"mask\"===e?(this.undoData.object=n.mask,t.remove(n.mask)):this.undoData.options=i.getOptions(e),i.add(e,n)},undo:function(t,e){var n=t.getComponent(s);if(\"mask\"===e){var i=this.undoData.object;return t.add(i),t.setActiveObject(i),n.remove(e)}return this.undoData.options?n.add(e,this.undoData.options):n.remove(e)}};i.default.register(l),t.exports=l},function(t,e,n){\"use strict\";var i=a(n(69)),r=a(n(4)),o=a(n(73));function a(t){return t&&t.__esModule?t:{default:t}}var s=o.default.rejectMessages,l=o.default.componentNames.ICON,c={name:o.default.commandNames.CHANGE_ICON_COLOR,execute:function(t,e,n){var i=this;return new r.default(function(r,o){var a=t.getComponent(l),c=t.getObject(e);c||o(s.noObject),i.undoData.object=c,i.undoData.color=a.getColor(c),a.setColor(n,c),r()})},undo:function(t){var e=t.getComponent(l),n=this.undoData.object;return e.setColor(n.color,n.object),r.default.resolve()}};i.default.register(c),t.exports=c},function(t,e,n){\"use strict\";var i=s(n(3)),r=s(n(69)),o=s(n(4)),a=s(n(73));function s(t){return t&&t.__esModule?t:{default:t}}var l=a.default.rejectMessages,c=a.default.componentNames.SHAPE,u={name:a.default.commandNames.CHANGE_SHAPE,execute:function(t,e,n){var r=this,a=t.getComponent(c),s=t.getObject(e);return s?(this.undoData.object=s,this.undoData.options={},i.default.forEachOwnProperties(n,function(t,e){r.undoData.options[e]=s[e]}),a.change(s,n)):o.default.reject(l.noObject)},undo:function(t){var e=t.getComponent(c),n=this.undoData;return e.change(n.object,n.options)}};r.default.register(u),t.exports=u},function(t,e,n){\"use strict\";var i=a(n(69)),r=a(n(4)),o=a(n(73));function a(t){return t&&t.__esModule?t:{default:t}}var s=o.default.rejectMessages,l=o.default.componentNames.TEXT,c={name:o.default.commandNames.CHANGE_TEXT,execute:function(t,e,n){var i=t.getComponent(l),o=t.getObject(e);return o?(this.undoData.object=o,this.undoData.text=i.getText(o),i.change(o,n)):r.default.reject(s.noObject)},undo:function(t){var e=t.getComponent(l),n=this.undoData;return e.change(n.object,n.text)}};i.default.register(c),t.exports=c},function(t,e,n){\"use strict\";var i=s(n(3)),r=s(n(69)),o=s(n(4)),a=s(n(73));function s(t){return t&&t.__esModule?t:{default:t}}var l=a.default.rejectMessages,c=a.default.componentNames.TEXT,u={name:a.default.commandNames.CHANGE_TEXT_STYLE,execute:function(t,e,n){var r=this,a=t.getComponent(c),s=t.getObject(e);return s?(this.undoData.object=s,this.undoData.styles={},i.default.forEachOwnProperties(n,function(t,e){r.undoData.styles[e]=s[e]}),a.setStyle(s,n)):o.default.reject(l.noObject)},undo:function(t){var e=t.getComponent(c),n=this.undoData;return e.setStyle(n.object,n.styles)}};r.default.register(u),t.exports=u},function(t,e,n){\"use strict\";var i=o(n(69)),r=o(n(4));function o(t){return t&&t.__esModule?t:{default:t}}var a={name:o(n(73)).default.commandNames.CLEAR_OBJECTS,execute:function(t){var e=this;return new r.default(function(n){e.undoData.objects=t.removeAll(),n()})},undo:function(t){return t.add(this.undoData.objects),r.default.resolve()}};i.default.register(a),t.exports=a},function(t,e,n){\"use strict\";var i=o(n(69)),r=o(n(73));function o(t){return t&&t.__esModule?t:{default:t}}var a=r.default.componentNames.FLIP,s={name:r.default.commandNames.FLIP_IMAGE,execute:function(t,e){var n=t.getComponent(a);return this.undoData.setting=n.getCurrentSetting(),n[e]()},undo:function(t){return t.getComponent(a).set(this.undoData.setting)}};i.default.register(s),t.exports=s},function(t,e,n){\"use strict\";var i=o(n(69)),r=o(n(73));function o(t){return t&&t.__esModule?t:{default:t}}var a=r.default.componentNames.IMAGE_LOADER,s={name:r.default.commandNames.LOAD_IMAGE,execute:function(t,e,n){var i=t.getComponent(a),r=i.getCanvasImage(),o=r?r.width:0,s=r?r.height:0,l=t.removeAll(!0).filter(function(t){return\"cropzone\"!==t.type});return l.forEach(function(t){t.evented=!0}),this.undoData={name:i.getImageName(),image:r,objects:l},i.load(e,n).then(function(t){return{oldWidth:o,oldHeight:s,newWidth:t.width,newHeight:t.height}})},undo:function(t){var e=t.getComponent(a),n=this.undoData,i=n.objects,r=n.name,o=n.image;return t.removeAll(!0),t.add(i),e.load(r,o)}};i.default.register(s),t.exports=s},function(t,e,n){\"use strict\";var i=o(n(69)),r=o(n(73));function o(t){return t&&t.__esModule?t:{default:t}}var a=r.default.componentNames.FILTER,s={name:r.default.commandNames.REMOVE_FILTER,execute:function(t,e){var n=t.getComponent(a);return this.undoData.options=n.getOptions(e),n.remove(e)},undo:function(t,e){return t.getComponent(a).add(e,this.undoData.options)}};i.default.register(s),t.exports=s},function(t,e,n){\"use strict\";var i=a(n(69)),r=a(n(4)),o=a(n(73));function a(t){return t&&t.__esModule?t:{default:t}}var s=o.default.rejectMessages,l={name:o.default.commandNames.REMOVE_OBJECT,execute:function(t,e){var n=this;return new r.default(function(i,r){n.undoData.objects=t.removeObjectById(e),n.undoData.objects.length?i():r(s.noObject)})},undo:function(t){return t.add(this.undoData.objects),r.default.resolve()}};i.default.register(l),t.exports=l},function(t,e,n){\"use strict\";var i=o(n(69)),r=o(n(4));function o(t){return t&&t.__esModule?t:{default:t}}var a={name:o(n(73)).default.commandNames.RESIZE_CANVAS_DIMENSION,execute:function(t,e){var n=this;return new r.default(function(i){n.undoData.size={width:t.cssMaxWidth,height:t.cssMaxHeight},t.setCssMaxDimension(e),t.adjustCanvasDimension(),i()})},undo:function(t){return t.setCssMaxDimension(this.undoData.size),t.adjustCanvasDimension(),r.default.resolve()}};i.default.register(a),t.exports=a},function(t,e,n){\"use strict\";var i=o(n(69)),r=o(n(73));function o(t){return t&&t.__esModule?t:{default:t}}var a=r.default.componentNames.ROTATION,s={name:r.default.commandNames.ROTATE_IMAGE,execute:function(t,e,n,i){var r=t.getComponent(a);return i||(this.undoData.angle=r.getCurrentAngle()),r[e](n)},undo:function(t){var e=t.getComponent(a),n=this.args,i=n[1],r=n[2];return\"setAngle\"===i?e[i](this.undoData.angle):e.rotate(-r)}};i.default.register(s),t.exports=s},function(t,e,n){\"use strict\";var i=s(n(3)),r=s(n(69)),o=s(n(4)),a=s(n(73));function s(t){return t&&t.__esModule?t:{default:t}}var l=a.default.rejectMessages,c={name:a.default.commandNames.SET_OBJECT_PROPERTIES,execute:function(t,e,n){var r=this,a=t.getObject(e);return a?(this.undoData.props={},i.default.forEachOwnProperties(n,function(t,e){r.undoData.props[e]=a[e]}),t.setObjectProperties(e,n),o.default.resolve()):o.default.reject(l.noObject)},undo:function(t,e){return t.setObjectProperties(e,this.undoData.props),o.default.resolve()}};r.default.register(c),t.exports=c},function(t,e,n){\"use strict\";var i=a(n(69)),r=a(n(4)),o=a(n(73));function a(t){return t&&t.__esModule?t:{default:t}}var s=o.default.rejectMessages,l={name:o.default.commandNames.SET_OBJECT_POSITION,execute:function(t,e,n){return t.getObject(e)?(this.undoData.objectId=e,this.undoData.props=t.getObjectProperties(e,[\"left\",\"top\"]),t.setObjectPosition(e,n),t.renderAll(),r.default.resolve()):r.default.reject(s.noObject)},undo:function(t){var e=this.undoData;return t.setObjectProperties(e.objectId,e.props),t.renderAll(),r.default.resolve()}};i.default.register(l),t.exports=l}])},t.exports=i(n(\"SuO2\"),n(\"/sK6\"),n(\"L3Vq\").fabric)},qMs7:function(t,e,n){t.exports=n.p+\"icon-d.4ef3abbd14fbe85ceebf.svg\"},rsCt:function(t,e,n){t.exports=n.p+\"icon-b.d70663d06bd44437c178.svg\"},yDQ0:function(t,e,n){t.exports=n.p+\"icon-c.6f440c0d2fa852de523e.svg\"},zUnb:function(t,e,n){\"use strict\";n.r(e);var i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function r(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};function a(t,e,n,i){var r,o=arguments.length,a=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(o<3?r(a):o>3?r(e,n,a):r(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a}function s(t,e){if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function l(t){var e=\"function\"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}function c(t,e){var n=\"function\"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,r,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(i=o.next()).done;)a.push(i.value)}catch(s){r={error:s}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return a}function u(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(c(arguments[e]));return t}var h=Array.isArray||function(t){return t&&\"number\"==typeof t.length};function d(t){return null!=t&&\"object\"==typeof t}function f(t){return\"function\"==typeof t}var p,g={e:{}};function m(){try{return p.apply(this,arguments)}catch(t){return g.e=t,g}}function v(t){return p=t,m}function y(t){return Error.call(this),this.message=t?t.length+\" errors occurred during unsubscription:\\n\"+t.map(function(t,e){return e+1+\") \"+t.toString()}).join(\"\\n  \"):\"\",this.name=\"UnsubscriptionError\",this.errors=t,this}y.prototype=Object.create(Error.prototype);var b=y,_=function(){function t(t){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}var e;return t.prototype.unsubscribe=function(){var t,e=!1;if(!this.closed){var n=this._parent,i=this._parents,r=this._unsubscribe,o=this._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var a=-1,s=i?i.length:0;n;)n.remove(this),n=++a<s&&i[a]||null;if(f(r)&&v(r).call(this)===g&&(e=!0,t=t||(g.e instanceof b?w(g.e.errors):[g.e])),h(o))for(a=-1,s=o.length;++a<s;){var l=o[a];if(d(l)&&v(l.unsubscribe).call(l)===g){e=!0,t=t||[];var c=g.e;c instanceof b?t=t.concat(w(c.errors)):t.push(c)}}if(e)throw new b(t)}},t.prototype.add=function(e){if(!e||e===t.EMPTY)return t.EMPTY;if(e===this)return this;var n=e;switch(typeof e){case\"function\":n=new t(e);case\"object\":if(n.closed||\"function\"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(\"function\"!=typeof n._addParent){var i=n;(n=new t)._subscriptions=[i]}break;default:throw new Error(\"unrecognized teardown \"+e+\" added to Subscription.\")}return(this._subscriptions||(this._subscriptions=[])).push(n),n._addParent(this),n},t.prototype.remove=function(t){var e=this._subscriptions;if(e){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}},t.prototype._addParent=function(t){var e=this._parent,n=this._parents;e&&e!==t?n?-1===n.indexOf(t)&&n.push(t):this._parents=[t]:this._parent=t},t.EMPTY=((e=new t).closed=!0,e),t}();function w(t){return t.reduce(function(t,e){return t.concat(e instanceof b?e.errors:e)},[])}var x=!1,C={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){x=t},get useDeprecatedSynchronousErrorHandling(){return x}};function S(t){setTimeout(function(){throw t})}var k={closed:!0,next:function(t){},error:function(t){if(C.useDeprecatedSynchronousErrorHandling)throw t;S(t)},complete:function(){}},E=\"function\"==typeof Symbol?Symbol(\"rxSubscriber\"):\"@@rxSubscriber_\"+Math.random(),T=function(t){function e(n,i,r){var o=t.call(this)||this;switch(o.syncErrorValue=null,o.syncErrorThrown=!1,o.syncErrorThrowable=!1,o.isStopped=!1,o._parentSubscription=null,arguments.length){case 0:o.destination=k;break;case 1:if(!n){o.destination=k;break}if(\"object\"==typeof n){n instanceof e?(o.syncErrorThrowable=n.syncErrorThrowable,o.destination=n,n.add(o)):(o.syncErrorThrowable=!0,o.destination=new O(o,n));break}default:o.syncErrorThrowable=!0,o.destination=new O(o,n,i,r)}return o}return r(e,t),e.prototype[E]=function(){return this},e.create=function(t,n,i){var r=new e(t,n,i);return r.syncErrorThrowable=!1,r},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e.prototype._unsubscribeAndRecycle=function(){var t=this._parent,e=this._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=t,this._parents=e,this._parentSubscription=null,this},e}(_),O=function(t){function e(e,n,i,r){var o,a=t.call(this)||this;a._parentSubscriber=e;var s=a;return f(n)?o=n:n&&(o=n.next,i=n.error,r=n.complete,n!==k&&(f((s=Object.create(n)).unsubscribe)&&a.add(s.unsubscribe.bind(s)),s.unsubscribe=a.unsubscribe.bind(a))),a._context=s,a._next=o,a._error=i,a._complete=r,a}return r(e,t),e.prototype.next=function(t){if(!this.isStopped&&this._next){var e=this._parentSubscriber;C.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},e.prototype.error=function(t){if(!this.isStopped){var e=this._parentSubscriber,n=C.useDeprecatedSynchronousErrorHandling;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):S(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;S(t)}}},e.prototype.complete=function(){var t=this;if(!this.isStopped){var e=this._parentSubscriber;if(this._complete){var n=function(){return t._complete.call(t._context)};C.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),C.useDeprecatedSynchronousErrorHandling)throw n;S(n)}},e.prototype.__tryOrSetError=function(t,e,n){if(!C.useDeprecatedSynchronousErrorHandling)throw new Error(\"bad call\");try{e.call(this._context,n)}catch(i){return C.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=i,t.syncErrorThrown=!0,!0):(S(i),!0)}return!1},e.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},e}(T),P=\"function\"==typeof Symbol&&Symbol.observable||\"@@observable\";function j(){}function A(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return M(t)}function M(t){return t?1===t.length?t[0]:function(e){return t.reduce(function(t,e){return e(t)},e)}:j}var D=function(){function t(t){this._isScalar=!1,t&&(this._subscribe=t)}return t.prototype.lift=function(e){var n=new t;return n.source=this,n.operator=e,n},t.prototype.subscribe=function(t,e,n){var i=this.operator,r=function(t,e,n){if(t){if(t instanceof T)return t;if(t[E])return t[E]()}return t||e||n?new T(t,e,n):new T(k)}(t,e,n);if(i?i.call(r,this.source):r.add(this.source||C.useDeprecatedSynchronousErrorHandling&&!r.syncErrorThrowable?this._subscribe(r):this._trySubscribe(r)),C.useDeprecatedSynchronousErrorHandling&&r.syncErrorThrowable&&(r.syncErrorThrowable=!1,r.syncErrorThrown))throw r.syncErrorValue;return r},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){C.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){var e=t.destination;if(t.closed||t.isStopped)return!1;t=e&&e instanceof T?e:null}return!0}(t)?t.error(e):console.warn(e)}},t.prototype.forEach=function(t,e){var n=this;return new(e=I(e))(function(e,i){var r;r=n.subscribe(function(e){try{t(e)}catch(n){i(n),r&&r.unsubscribe()}},i,e)})},t.prototype._subscribe=function(t){var e=this.source;return e&&e.subscribe(t)},t.prototype[P]=function(){return this},t.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 0===t.length?this:M(t)(this)},t.prototype.toPromise=function(t){var e=this;return new(t=I(t))(function(t,n){var i;e.subscribe(function(t){return i=t},function(t){return n(t)},function(){return t(i)})})},t.create=function(e){return new t(e)},t}();function I(t){if(t||(t=C.Promise||Promise),!t)throw new Error(\"no Promise impl found\");return t}function R(){return Error.call(this),this.message=\"object unsubscribed\",this.name=\"ObjectUnsubscribedError\",this}R.prototype=Object.create(Error.prototype);var L=R,F=function(t){function e(e,n){var i=t.call(this)||this;return i.subject=e,i.subscriber=n,i.closed=!1,i}return r(e,t),e.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var t=this.subject,e=t.observers;if(this.subject=null,e&&0!==e.length&&!t.isStopped&&!t.closed){var n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},e}(_),N=function(t){function e(e){var n=t.call(this,e)||this;return n.destination=e,n}return r(e,t),e}(T),B=function(t){function e(){var e=t.call(this)||this;return e.observers=[],e.closed=!1,e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return r(e,t),e.prototype[E]=function(){return new N(this)},e.prototype.lift=function(t){var e=new H(this,this);return e.operator=t,e},e.prototype.next=function(t){if(this.closed)throw new L;if(!this.isStopped)for(var e=this.observers,n=e.length,i=e.slice(),r=0;r<n;r++)i[r].next(t)},e.prototype.error=function(t){if(this.closed)throw new L;this.hasError=!0,this.thrownError=t,this.isStopped=!0;for(var e=this.observers,n=e.length,i=e.slice(),r=0;r<n;r++)i[r].error(t);this.observers.length=0},e.prototype.complete=function(){if(this.closed)throw new L;this.isStopped=!0;for(var t=this.observers,e=t.length,n=t.slice(),i=0;i<e;i++)n[i].complete();this.observers.length=0},e.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},e.prototype._trySubscribe=function(e){if(this.closed)throw new L;return t.prototype._trySubscribe.call(this,e)},e.prototype._subscribe=function(t){if(this.closed)throw new L;return this.hasError?(t.error(this.thrownError),_.EMPTY):this.isStopped?(t.complete(),_.EMPTY):(this.observers.push(t),new F(this,t))},e.prototype.asObservable=function(){var t=new D;return t.source=this,t},e.create=function(t,e){return new H(t,e)},e}(D),H=function(t){function e(e,n){var i=t.call(this)||this;return i.destination=e,i.source=n,i}return r(e,t),e.prototype.next=function(t){var e=this.destination;e&&e.next&&e.next(t)},e.prototype.error=function(t){var e=this.destination;e&&e.error&&this.destination.error(t)},e.prototype.complete=function(){var t=this.destination;t&&t.complete&&this.destination.complete()},e.prototype._subscribe=function(t){return this.source?this.source.subscribe(t):_.EMPTY},e}(B);function U(t){return t&&\"function\"==typeof t.schedule}var z=function(t){function e(e,n,i){var r=t.call(this)||this;return r.parent=e,r.outerValue=n,r.outerIndex=i,r.index=0,r}return r(e,t),e.prototype._next=function(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)},e.prototype._error=function(t){this.parent.notifyError(t,this),this.unsubscribe()},e.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},e}(T),V=function(t){return function(e){for(var n=0,i=t.length;n<i&&!e.closed;n++)e.next(t[n]);e.closed||e.complete()}},G=function(t){return function(e){return t.then(function(t){e.closed||(e.next(t),e.complete())},function(t){return e.error(t)}).then(null,S),e}};function W(){return\"function\"==typeof Symbol&&Symbol.iterator?Symbol.iterator:\"@@iterator\"}var X=W(),Y=function(t){return function(e){for(var n=t[X]();;){var i=n.next();if(i.done){e.complete();break}if(e.next(i.value),e.closed)break}return\"function\"==typeof n.return&&e.add(function(){n.return&&n.return()}),e}},q=function(t){return function(e){var n=t[P]();if(\"function\"!=typeof n.subscribe)throw new TypeError(\"Provided object does not correctly implement Symbol.observable\");return n.subscribe(e)}},K=function(t){return t&&\"number\"==typeof t.length&&\"function\"!=typeof t};function Z(t){return t&&\"function\"!=typeof t.subscribe&&\"function\"==typeof t.then}var J=function(t){if(t instanceof D)return function(e){return t._isScalar?(e.next(t.value),void e.complete()):t.subscribe(e)};if(t&&\"function\"==typeof t[P])return q(t);if(K(t))return V(t);if(Z(t))return G(t);if(t&&\"function\"==typeof t[X])return Y(t);var e=d(t)?\"an invalid object\":\"'\"+t+\"'\";throw new TypeError(\"You provided \"+e+\" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.\")};function Q(t,e,n,i,r){if(void 0===r&&(r=new z(t,n,i)),!r.closed)return J(e)(r)}var $=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.notifyNext=function(t,e,n,i,r){this.destination.next(e)},e.prototype.notifyError=function(t,e){this.destination.error(t)},e.prototype.notifyComplete=function(t){this.destination.complete()},e}(T);function tt(t,e){return function(n){if(\"function\"!=typeof t)throw new TypeError(\"argument is not a function. Are you looking for `mapTo()`?\");return n.lift(new et(t,e))}}var et=function(){function t(t,e){this.project=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new nt(t,this.project,this.thisArg))},t}(),nt=function(t){function e(e,n,i){var r=t.call(this,e)||this;return r.project=n,r.count=0,r.thisArg=i||r,r}return r(e,t),e.prototype._next=function(t){var e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)},e}(T);function it(t,e){return new D(e?function(n){var i=new _,r=0;return i.add(e.schedule(function(){r!==t.length?(n.next(t[r++]),n.closed||i.add(this.schedule())):n.complete()})),i}:V(t))}function rt(t,e){if(!e)return t instanceof D?t:new D(J(t));if(null!=t){if(function(t){return t&&\"function\"==typeof t[P]}(t))return function(t,e){return new D(e?function(n){var i=new _;return i.add(e.schedule(function(){var r=t[P]();i.add(r.subscribe({next:function(t){i.add(e.schedule(function(){return n.next(t)}))},error:function(t){i.add(e.schedule(function(){return n.error(t)}))},complete:function(){i.add(e.schedule(function(){return n.complete()}))}}))})),i}:q(t))}(t,e);if(Z(t))return function(t,e){return new D(e?function(n){var i=new _;return i.add(e.schedule(function(){return t.then(function(t){i.add(e.schedule(function(){n.next(t),i.add(e.schedule(function(){return n.complete()}))}))},function(t){i.add(e.schedule(function(){return n.error(t)}))})})),i}:G(t))}(t,e);if(K(t))return it(t,e);if(function(t){return t&&\"function\"==typeof t[X]}(t)||\"string\"==typeof t)return function(t,e){if(!t)throw new Error(\"Iterable cannot be null\");return new D(e?function(n){var i,r=new _;return r.add(function(){i&&\"function\"==typeof i.return&&i.return()}),r.add(e.schedule(function(){i=t[X](),r.add(e.schedule(function(){if(!n.closed){var t,e;try{var r=i.next();t=r.value,e=r.done}catch(o){return void n.error(o)}e?n.complete():(n.next(t),this.schedule())}}))})),r}:Y(t))}(t,e)}throw new TypeError((null!==t&&typeof t||t)+\" is not observable\")}function ot(t,e,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),\"function\"==typeof e?function(i){return i.pipe(ot(function(n,i){return rt(t(n,i)).pipe(tt(function(t,r){return e(n,t,i,r)}))},n))}:(\"number\"==typeof e&&(n=e),function(e){return e.lift(new at(t,n))})}var at=function(){function t(t,e){void 0===e&&(e=Number.POSITIVE_INFINITY),this.project=t,this.concurrent=e}return t.prototype.call=function(t,e){return e.subscribe(new st(t,this.project,this.concurrent))},t}(),st=function(t){function e(e,n,i){void 0===i&&(i=Number.POSITIVE_INFINITY);var r=t.call(this,e)||this;return r.project=n,r.concurrent=i,r.hasCompleted=!1,r.buffer=[],r.active=0,r.index=0,r}return r(e,t),e.prototype._next=function(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)},e.prototype._tryNext=function(t){var e,n=this.index++;try{e=this.project(t,n)}catch(i){return void this.destination.error(i)}this.active++,this._innerSub(e,t,n)},e.prototype._innerSub=function(t,e,n){var i=new z(this,void 0,void 0);this.destination.add(i),Q(this,t,e,n,i)},e.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()},e.prototype.notifyNext=function(t,e,n,i,r){this.destination.next(e)},e.prototype.notifyComplete=function(t){var e=this.buffer;this.remove(t),this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},e}($);function lt(t){return t}function ct(t){return void 0===t&&(t=Number.POSITIVE_INFINITY),ot(lt,t)}function ut(){return function(t){return t.lift(new ht(t))}}var ht=function(){function t(t){this.connectable=t}return t.prototype.call=function(t,e){var n=this.connectable;n._refCount++;var i=new dt(t,n),r=e.subscribe(i);return i.closed||(i.connection=n.connect()),r},t}(),dt=function(t){function e(e,n){var i=t.call(this,e)||this;return i.connectable=n,i}return r(e,t),e.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var e=t._refCount;if(e<=0)this.connection=null;else if(t._refCount=e-1,e>1)this.connection=null;else{var n=this.connection,i=t._connection;this.connection=null,!i||n&&i!==n||i.unsubscribe()}}else this.connection=null},e}(T),ft=function(t){function e(e,n){var i=t.call(this)||this;return i.source=e,i.subjectFactory=n,i._refCount=0,i._isComplete=!1,i}return r(e,t),e.prototype._subscribe=function(t){return this.getSubject().subscribe(t)},e.prototype.getSubject=function(){var t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject},e.prototype.connect=function(){var t=this._connection;return t||(this._isComplete=!1,(t=this._connection=new _).add(this.source.subscribe(new gt(this.getSubject(),this))),t.closed?(this._connection=null,t=_.EMPTY):this._connection=t),t},e.prototype.refCount=function(){return ut()(this)},e}(D).prototype,pt={operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:ft._subscribe},_isComplete:{value:ft._isComplete,writable:!0},getSubject:{value:ft.getSubject},connect:{value:ft.connect},refCount:{value:ft.refCount}},gt=function(t){function e(e,n){var i=t.call(this,e)||this;return i.connectable=n,i}return r(e,t),e.prototype._error=function(e){this._unsubscribe(),t.prototype._error.call(this,e)},e.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}},e}(N);function mt(){return new B}function vt(t){for(var e in t)if(t[e]===vt)return e;throw Error(\"Could not find renamed property on target object.\")}var yt=vt({ngInjectableDef:vt});function bt(t){return{providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function _t(t){return t&&t.hasOwnProperty(yt)?t[yt]:null}var wt=function(){function t(t,e){this._desc=t,this.ngMetadataName=\"InjectionToken\",this.ngInjectableDef=void 0!==e?bt({providedIn:e.providedIn||\"root\",factory:e.factory}):void 0}return t.prototype.toString=function(){return\"InjectionToken \"+this._desc},t}(),xt=\"__parameters__\";function Ct(t,e,n){var i=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(t){var i=t.apply(void 0,u(e));for(var r in i)this[r]=i[r]}}}(e);function r(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(this instanceof r)return i.apply(this,e),this;var o=new((t=r).bind.apply(t,u([void 0],e)));return a.annotation=o,a;function a(t,e,n){for(var i=t.hasOwnProperty(xt)?t[xt]:Object.defineProperty(t,xt,{value:[]})[xt];i.length<=n;)i.push(null);return(i[n]=i[n]||[]).push(o),t}}return n&&(r.prototype=Object.create(n.prototype)),r.prototype.ngMetadataName=t,r.annotationCls=r,r}var St=new wt(\"AnalyzeForEntryComponents\"),kt=\"undefined\"!=typeof window&&window,Et=\"undefined\"!=typeof self&&\"undefined\"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Tt=\"undefined\"!=typeof global&&global||kt||Et,Ot=Promise.resolve(0),Pt=null;function jt(){if(!Pt){var t=Tt.Symbol;if(t&&t.iterator)Pt=t.iterator;else for(var e=Object.getOwnPropertyNames(Map.prototype),n=0;n<e.length;++n){var i=e[n];\"entries\"!==i&&\"size\"!==i&&Map.prototype[i]===Map.prototype.entries&&(Pt=i)}}return Pt}function At(t){\"undefined\"==typeof Zone?Ot.then(function(){t&&t.apply(null,null)}):Zone.current.scheduleMicroTask(\"scheduleMicrotask\",t)}function Mt(t,e){return t===e||\"number\"==typeof t&&\"number\"==typeof e&&isNaN(t)&&isNaN(e)}function Dt(t){if(\"string\"==typeof t)return t;if(t instanceof Array)return\"[\"+t.map(Dt).join(\", \")+\"]\";if(null==t)return\"\"+t;if(t.overriddenName)return\"\"+t.overriddenName;if(t.name)return\"\"+t.name;var e=t.toString();if(null==e)return\"\"+e;var n=e.indexOf(\"\\n\");return-1===n?e:e.substring(0,n)}var It=vt({__forward_ref__:vt});function Rt(t){return t.__forward_ref__=Rt,t.toString=function(){return Dt(this())},t}function Lt(t){var e=t;return\"function\"==typeof e&&e.hasOwnProperty(It)&&e.__forward_ref__===Rt?e():t}var Ft,Nt=function(t){return t[t.Emulated=0]=\"Emulated\",t[t.Native=1]=\"Native\",t[t.None=2]=\"None\",t[t.ShadowDom=3]=\"ShadowDom\",t}({}),Bt=Ct(\"Inject\",function(t){return{token:t}}),Ht=Ct(\"Optional\"),Ut=Ct(\"Self\"),zt=Ct(\"SkipSelf\"),Vt=function(t){return t[t.Default=0]=\"Default\",t[t.Host=1]=\"Host\",t[t.Self=2]=\"Self\",t[t.SkipSelf=4]=\"SkipSelf\",t[t.Optional=8]=\"Optional\",t}({}),Gt=void 0;function Wt(t){var e=Gt;return Gt=t,e}function Xt(t,e){return void 0===e&&(e=Vt.Default),(Ft||function(t,e){if(void 0===e&&(e=Vt.Default),void 0===Gt)throw new Error(\"inject() must be called from an injection context\");return null===Gt?function(t,e,n){var i=_t(t);if(i&&\"root\"==i.providedIn)return void 0===i.value?i.value=i.factory():i.value;if(n&Vt.Optional)return null;throw new Error(\"Injector: NOT_FOUND [\"+Dt(t)+\"]\")}(t,0,e):Gt.get(t,e&Vt.Optional?null:void 0,e)})(t,e)}var Yt=/([A-Z])/g;function qt(t){try{return null!=t?t.toString().slice(0,30):t}catch(e){return\"[ERROR] Exception while trying to serialize the value\"}}function Kt(t,e){var n=Qt(t),i=Qt(e);return n&&i?function(t,e,n){for(var i=t[jt()](),r=e[jt()]();;){var o=i.next(),a=r.next();if(o.done&&a.done)return!0;if(o.done||a.done)return!1;if(!n(o.value,a.value))return!1}}(t,e,Kt):!(n||!t||\"object\"!=typeof t&&\"function\"!=typeof t||i||!e||\"object\"!=typeof e&&\"function\"!=typeof e)||Mt(t,e)}var Zt=function(){function t(t){this.wrapped=t}return t.wrap=function(e){return new t(e)},t.unwrap=function(e){return t.isWrapped(e)?e.wrapped:e},t.isWrapped=function(e){return e instanceof t},t}(),Jt=function(){function t(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}return t.prototype.isFirstChange=function(){return this.firstChange},t}();function Qt(t){return!!$t(t)&&(Array.isArray(t)||!(t instanceof Map)&&jt()in t)}function $t(t){return null!==t&&(\"function\"==typeof t||\"object\"==typeof t)}function te(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}var ee=\"__source\",ne=new Object,ie=new wt(\"INJECTOR\"),re=function(){function t(){}return t.prototype.get=function(t,e){if(void 0===e&&(e=ne),e===ne)throw new Error(\"NullInjectorError: No provider for \"+Dt(t)+\"!\");return e},t}(),oe=function(){function t(){}return t.create=function(t,e){return Array.isArray(t)?new ge(t,e):new ge(t.providers,t.parent,t.name||null)},t.THROW_IF_NOT_FOUND=ne,t.NULL=new re,t.ngInjectableDef=bt({providedIn:\"any\",factory:function(){return Xt(ie)}}),t.__NG_ELEMENT_ID__=function(){return ae()},t}(),ae=te,se=function(t){return t},le=[],ce=se,ue=function(){return Array.prototype.slice.call(arguments)},he=vt({provide:String,useValue:vt}),de=oe.NULL,fe=/\\n/gm,pe=\"\\u0275\",ge=function(){function t(t,e,n){void 0===e&&(e=de),void 0===n&&(n=null),this.parent=e,this.source=n;var i=this._records=new Map;i.set(oe,{token:oe,fn:se,deps:le,value:this,useNew:!1}),i.set(ie,{token:ie,fn:se,deps:le,value:this,useNew:!1}),function t(e,n){if(n)if((n=Lt(n))instanceof Array)for(var i=0;i<n.length;i++)t(e,n[i]);else{if(\"function\"==typeof n)throw ye(\"Function/Class not supported\",n);if(!n||\"object\"!=typeof n||!n.provide)throw ye(\"Unexpected provider\",n);var r=Lt(n.provide),o=function(t){var e=function(t){var e=le,n=t.deps;if(n&&n.length){e=[];for(var i=0;i<n.length;i++){var r=6;if((l=Lt(n[i]))instanceof Array)for(var o=0,a=l;o<a.length;o++){var s=a[o];s instanceof Ht||s==Ht?r|=1:s instanceof zt||s==zt?r&=-3:s instanceof Ut||s==Ut?r&=-5:l=s instanceof Bt?s.token:Lt(s)}e.push({token:l,options:r})}}else if(t.useExisting){var l;e=[{token:l=Lt(t.useExisting),options:6}]}else if(!(n||he in t))throw ye(\"'deps' required\",t);return e}(t),n=se,i=le,r=!1,o=Lt(t.provide);if(he in t)i=t.useValue;else if(t.useFactory)n=t.useFactory;else if(t.useExisting);else if(t.useClass)r=!0,n=Lt(t.useClass);else{if(\"function\"!=typeof o)throw ye(\"StaticProvider does not have [useValue|useFactory|useExisting|useClass] or [provide] is not newable\",t);r=!0,n=o}return{deps:e,fn:n,useNew:r,value:i}}(n);if(!0===n.multi){var a=e.get(r);if(a){if(a.fn!==ue)throw me(r)}else e.set(r,a={token:n.provide,deps:[],useNew:!1,fn:ue,value:le});a.deps.push({token:r=n,options:6})}var s=e.get(r);if(s&&s.fn==ue)throw me(r);e.set(r,o)}}(i,t)}return t.prototype.get=function(t,e,n){void 0===n&&(n=Vt.Default);var i=this._records.get(t);try{return function t(e,n,i,r,o,a){try{return function(e,n,i,r,o,a){var s,l;if(!n||a&Vt.SkipSelf)a&Vt.Self||(l=r.get(e,o,Vt.Default));else{if((l=n.value)==ce)throw Error(pe+\"Circular dependency\");if(l===le){n.value=ce;var c=n.useNew,h=n.fn,d=n.deps,f=le;if(d.length){f=[];for(var p=0;p<d.length;p++){var g=d[p],m=g.options,v=2&m?i.get(g.token):void 0;f.push(t(g.token,v,i,v||4&m?r:de,1&m?null:oe.THROW_IF_NOT_FOUND,Vt.Default))}}n.value=l=c?new((s=h).bind.apply(s,u([void 0],f))):h.apply(void 0,f)}}return l}(e,n,i,r,o,a)}catch(s){throw s instanceof Error||(s=new Error(s)),(s.ngTempTokenPath=s.ngTempTokenPath||[]).unshift(e),n&&n.value==ce&&(n.value=le),s}}(t,i,this._records,this.parent,e,n)}catch(o){var r=o.ngTempTokenPath;throw t[ee]&&r.unshift(t[ee]),o.message=ve(\"\\n\"+o.message,r,this.source),o.ngTokenPath=r,o.ngTempTokenPath=null,o}},t.prototype.toString=function(){var t=[];return this._records.forEach(function(e,n){return t.push(Dt(n))}),\"StaticInjector[\"+t.join(\", \")+\"]\"},t}();function me(t){return ye(\"Cannot mix multi providers and regular providers\",t)}function ve(t,e,n){void 0===n&&(n=null),t=t&&\"\\n\"===t.charAt(0)&&t.charAt(1)==pe?t.substr(2):t;var i=Dt(e);if(e instanceof Array)i=e.map(Dt).join(\" -> \");else if(\"object\"==typeof e){var r=[];for(var o in e)if(e.hasOwnProperty(o)){var a=e[o];r.push(o+\":\"+(\"string\"==typeof a?JSON.stringify(a):Dt(a)))}i=\"{\"+r.join(\", \")+\"}\"}return\"StaticInjectorError\"+(n?\"(\"+n+\")\":\"\")+\"[\"+i+\"]: \"+t.replace(fe,\"\\n  \")}function ye(t,e){return new Error(ve(t,e))}var be=new wt(\"The presence of this token marks an injector as being the root injector.\"),_e=function(){return function(){}}(),we=function(){return function(){}}();function xe(t){var e=Error(\"No component factory found for \"+Dt(t)+\". Did you add it to @NgModule.entryComponents?\");return e[Ce]=t,e}var Ce=\"ngComponent\",Se=function(){function t(){}return t.prototype.resolveComponentFactory=function(t){throw xe(t)},t}(),ke=function(){function t(){}return t.NULL=new Se,t}(),Ee=function(){function t(t,e,n){this._parent=e,this._ngModule=n,this._factories=new Map;for(var i=0;i<t.length;i++){var r=t[i];this._factories.set(r.componentType,r)}}return t.prototype.resolveComponentFactory=function(t){var e=this._factories.get(t);if(!e&&this._parent&&(e=this._parent.resolveComponentFactory(t)),!e)throw xe(t);return new Te(e,this._ngModule)},t}(),Te=function(t){function e(e,n){var i=t.call(this)||this;return i.factory=e,i.ngModule=n,i.selector=e.selector,i.componentType=e.componentType,i.ngContentSelectors=e.ngContentSelectors,i.inputs=e.inputs,i.outputs=e.outputs,i}return r(e,t),e.prototype.create=function(t,e,n,i){return this.factory.create(t,e,n,i||this.ngModule)},e}(we),Oe=function(){return function(){}}(),Pe=function(){return function(){}}(),je=function(){function t(t){this.nativeElement=t}return t.__NG_ELEMENT_ID__=function(){return Ae(t)},t}(),Ae=te,Me=function(){return function(){}}(),De=function(){return function(){}}(),Ie=function(t){return t[t.Important=1]=\"Important\",t[t.DashCase=2]=\"DashCase\",t}({}),Re=function(){function t(){}return t.__NG_ELEMENT_ID__=function(){return Le()},t}(),Le=te,Fe=function(t){return t[t.NONE=0]=\"NONE\",t[t.HTML=1]=\"HTML\",t[t.STYLE=2]=\"STYLE\",t[t.SCRIPT=3]=\"SCRIPT\",t[t.URL=4]=\"URL\",t[t.RESOURCE_URL=5]=\"RESOURCE_URL\",t}({}),Ne=function(){return function(){}}(),Be=new(function(){return function(t){this.full=t,this.major=t.split(\".\")[0],this.minor=t.split(\".\")[1],this.patch=t.split(\".\").slice(2).join(\".\")}}())(\"7.2.15\"),He=!0,Ue=!1;function ze(){return Ue=!0,He}var Ve=function(){function t(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument(\"sanitization-inert\"),this.inertBodyElement=this.inertDocument.body,null==this.inertBodyElement){var e=this.inertDocument.createElement(\"html\");this.inertDocument.appendChild(e),this.inertBodyElement=this.inertDocument.createElement(\"body\"),e.appendChild(this.inertBodyElement)}this.inertBodyElement.innerHTML='<svg><g onload=\"this.parentNode.remove()\"></g></svg>',!this.inertBodyElement.querySelector||this.inertBodyElement.querySelector(\"svg\")?(this.inertBodyElement.innerHTML='<svg><p><style><img src=\"</style><img src=x onerror=alert(1)//\">',this.getInertBodyElement=this.inertBodyElement.querySelector&&this.inertBodyElement.querySelector(\"svg img\")&&function(){try{return!!window.DOMParser}catch(t){return!1}}()?this.getInertBodyElement_DOMParser:this.getInertBodyElement_InertDocument):this.getInertBodyElement=this.getInertBodyElement_XHR}return t.prototype.getInertBodyElement_XHR=function(t){t=\"<body><remove></remove>\"+t+\"</body>\";try{t=encodeURI(t)}catch(i){return null}var e=new XMLHttpRequest;e.responseType=\"document\",e.open(\"GET\",\"data:text/html;charset=utf-8,\"+t,!1),e.send(void 0);var n=e.response.body;return n.removeChild(n.firstChild),n},t.prototype.getInertBodyElement_DOMParser=function(t){t=\"<body><remove></remove>\"+t+\"</body>\";try{var e=(new window.DOMParser).parseFromString(t,\"text/html\").body;return e.removeChild(e.firstChild),e}catch(n){return null}},t.prototype.getInertBodyElement_InertDocument=function(t){var e=this.inertDocument.createElement(\"template\");return\"content\"in e?(e.innerHTML=t,e):(this.inertBodyElement.innerHTML=t,this.defaultDoc.documentMode&&this.stripCustomNsAttrs(this.inertBodyElement),this.inertBodyElement)},t.prototype.stripCustomNsAttrs=function(t){for(var e=t.attributes,n=e.length-1;0<n;n--){var i=e.item(n).name;\"xmlns:ns1\"!==i&&0!==i.indexOf(\"ns1:\")||t.removeAttribute(i)}for(var r=t.firstChild;r;)r.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(r),r=r.nextSibling},t}(),Ge=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:\\/?#]*(?:[\\/?#]|$))/gi,We=/^data:(?:image\\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\\/(?:mpeg|mp4|ogg|webm)|audio\\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\\/]+=*$/i;function Xe(t){return(t=String(t)).match(Ge)||t.match(We)?t:(ze()&&console.warn(\"WARNING: sanitizing unsafe URL value \"+t+\" (see http://g.co/ng/security#xss)\"),\"unsafe:\"+t)}function Ye(t){var e,n,i={};try{for(var r=l(t.split(\",\")),o=r.next();!o.done;o=r.next())i[o.value]=!0}catch(a){e={error:a}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return i}function qe(){for(var t,e,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var r={};try{for(var o=l(n),a=o.next();!a.done;a=o.next()){var s=a.value;for(var c in s)s.hasOwnProperty(c)&&(r[c]=!0)}}catch(u){t={error:u}}finally{try{a&&!a.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}return r}var Ke,Ze=Ye(\"area,br,col,hr,img,wbr\"),Je=Ye(\"colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr\"),Qe=Ye(\"rp,rt\"),$e=qe(Qe,Je),tn=qe(Ze,qe(Je,Ye(\"address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul\")),qe(Qe,Ye(\"a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video\")),$e),en=Ye(\"background,cite,href,itemtype,longdesc,poster,src,xlink:href\"),nn=Ye(\"srcset\"),rn=qe(en,nn,Ye(\"abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width\")),on=Ye(\"script,style,template\"),an=function(){function t(){this.sanitizedSomething=!1,this.buf=[]}return t.prototype.sanitizeChildren=function(t){for(var e=t.firstChild,n=!0;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);var i=this.checkClobberedElement(e,e.nextSibling);if(i){e=i;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join(\"\")},t.prototype.startElement=function(t){var e,n=t.nodeName.toLowerCase();if(!tn.hasOwnProperty(n))return this.sanitizedSomething=!0,!on.hasOwnProperty(n);this.buf.push(\"<\"),this.buf.push(n);for(var i=t.attributes,r=0;r<i.length;r++){var o=i.item(r),a=o.name,s=a.toLowerCase();if(rn.hasOwnProperty(s)){var l=o.value;en[s]&&(l=Xe(l)),nn[s]&&(e=l,l=(e=String(e)).split(\",\").map(function(t){return Xe(t.trim())}).join(\", \")),this.buf.push(\" \",a,'=\"',cn(l),'\"')}else this.sanitizedSomething=!0}return this.buf.push(\">\"),!0},t.prototype.endElement=function(t){var e=t.nodeName.toLowerCase();tn.hasOwnProperty(e)&&!Ze.hasOwnProperty(e)&&(this.buf.push(\"</\"),this.buf.push(e),this.buf.push(\">\"))},t.prototype.chars=function(t){this.buf.push(cn(t))},t.prototype.checkClobberedElement=function(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(\"Failed to sanitize html because the element is clobbered: \"+t.outerHTML);return e},t}(),sn=/[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/g,ln=/([^\\#-~ |!])/g;function cn(t){return t.replace(/&/g,\"&amp;\").replace(sn,function(t){return\"&#\"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+\";\"}).replace(ln,function(t){return\"&#\"+t.charCodeAt(0)+\";\"}).replace(/</g,\"&lt;\").replace(/>/g,\"&gt;\")}function un(t){return\"content\"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&\"TEMPLATE\"===t.nodeName}(t)?t.content:null}var hn=function(t){function e(e){void 0===e&&(e=!1);var n=t.call(this)||this;return n.__isAsync=e,n}return r(e,t),e.prototype.emit=function(e){t.prototype.next.call(this,e)},e.prototype.subscribe=function(e,n,i){var r,o=function(t){return null},a=function(){return null};e&&\"object\"==typeof e?(r=this.__isAsync?function(t){setTimeout(function(){return e.next(t)})}:function(t){e.next(t)},e.error&&(o=this.__isAsync?function(t){setTimeout(function(){return e.error(t)})}:function(t){e.error(t)}),e.complete&&(a=this.__isAsync?function(){setTimeout(function(){return e.complete()})}:function(){e.complete()})):(r=this.__isAsync?function(t){setTimeout(function(){return e(t)})}:function(t){e(t)},n&&(o=this.__isAsync?function(t){setTimeout(function(){return n(t)})}:function(t){n(t)}),i&&(a=this.__isAsync?function(){setTimeout(function(){return i()})}:function(){i()}));var s=t.prototype.subscribe.call(this,r,o,a);return e instanceof _&&e.add(s),s},e}(B),dn=function(){function t(){}return t.__NG_ELEMENT_ID__=function(){return fn(t,je)},t}(),fn=te,pn=new RegExp(\"^([-,.\\\"'%_!# a-zA-Z0-9]+|(?:(?:matrix|translate|scale|rotate|skew|perspective)(?:X|Y|3d)?|(?:rgb|hsl)a?|(?:repeating-)?(?:linear|radial)-gradient|(?:calc|attr))\\\\([-0-9.%, #a-zA-Z]+\\\\))$\",\"g\"),gn=/^url\\(([^)]+)\\)$/,mn=function(){return function(){}}(),vn=\"ngDebugContext\",yn=\"ngOriginalError\",bn=\"ngErrorLogger\";function _n(t){return t[vn]}function wn(t){return t[yn]}function xn(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];t.error.apply(t,u(e))}var Cn=function(){function t(){this._console=console}return t.prototype.handleError=function(t){var e=this._findOriginalError(t),n=this._findContext(t),i=function(t){return t[bn]||xn}(t);i(this._console,\"ERROR\",t),e&&i(this._console,\"ORIGINAL ERROR\",e),n&&i(this._console,\"ERROR CONTEXT\",n)},t.prototype._findContext=function(t){return t?_n(t)?_n(t):this._findContext(wn(t)):null},t.prototype._findOriginalError=function(t){for(var e=wn(t);e&&wn(e);)e=wn(e);return e},t}();function Sn(t){return!!t&&\"function\"==typeof t.then}function kn(t){return!!t&&\"function\"==typeof t.subscribe}var En=new wt(\"Application Initializer\"),Tn=function(){function t(t){var e=this;this.appInits=t,this.initialized=!1,this.done=!1,this.donePromise=new Promise(function(t,n){e.resolve=t,e.reject=n})}return t.prototype.runInitializers=function(){var t=this;if(!this.initialized){var e=[],n=function(){t.done=!0,t.resolve()};if(this.appInits)for(var i=0;i<this.appInits.length;i++){var r=this.appInits[i]();Sn(r)&&e.push(r)}Promise.all(e).then(function(){n()}).catch(function(e){t.reject(e)}),0===e.length&&n(),this.initialized=!0}},t}(),On=new wt(\"AppId\");function Pn(){return\"\"+jn()+jn()+jn()}function jn(){return String.fromCharCode(97+Math.floor(25*Math.random()))}var An=new wt(\"Platform Initializer\"),Mn=new wt(\"Platform ID\"),Dn=new wt(\"appBootstrapListener\"),In=function(){function t(){}return t.prototype.log=function(t){console.log(t)},t.prototype.warn=function(t){console.warn(t)},t}();function Rn(){throw new Error(\"Runtime compiler is not loaded\")}var Ln,Fn,Nn=Rn,Bn=Rn,Hn=Rn,Un=Rn,zn=function(){function t(){this.compileModuleSync=Nn,this.compileModuleAsync=Bn,this.compileModuleAndAllComponentsSync=Hn,this.compileModuleAndAllComponentsAsync=Un}return t.prototype.clearCache=function(){},t.prototype.clearCacheFor=function(t){},t.prototype.getModuleId=function(t){},t}(),Vn=function(){return function(){}}();function Gn(){var t=Tt.wtf;return!(!t||!(Ln=t.trace)||(Fn=Ln.events,0))}var Wn=Gn();function Xn(t,e){return null}var Yn=Wn?function(t,e){return void 0===e&&(e=null),Fn.createScope(t,e)}:function(t,e){return Xn},qn=Wn?function(t,e){return Ln.leaveScope(t,e),e}:function(t,e){return e},Kn=function(){function t(t){var e,n=t.enableLongStackTrace,i=void 0!==n&&n;if(this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new hn(!1),this.onMicrotaskEmpty=new hn(!1),this.onStable=new hn(!1),this.onError=new hn(!1),\"undefined\"==typeof Zone)throw new Error(\"In this configuration Angular requires Zone.js\");Zone.assertZonePatched(),this._nesting=0,this._outer=this._inner=Zone.current,Zone.wtfZoneSpec&&(this._inner=this._inner.fork(Zone.wtfZoneSpec)),Zone.TaskTrackingZoneSpec&&(this._inner=this._inner.fork(new Zone.TaskTrackingZoneSpec)),i&&Zone.longStackTraceZoneSpec&&(this._inner=this._inner.fork(Zone.longStackTraceZoneSpec)),(e=this)._inner=e._inner.fork({name:\"angular\",properties:{isAngularZone:!0},onInvokeTask:function(t,n,i,r,o,a){try{return $n(e),t.invokeTask(i,r,o,a)}finally{ti(e)}},onInvoke:function(t,n,i,r,o,a,s){try{return $n(e),t.invoke(i,r,o,a,s)}finally{ti(e)}},onHasTask:function(t,n,i,r){t.hasTask(i,r),n===i&&(\"microTask\"==r.change?(e.hasPendingMicrotasks=r.microTask,Qn(e)):\"macroTask\"==r.change&&(e.hasPendingMacrotasks=r.macroTask))},onHandleError:function(t,n,i,r){return t.handleError(i,r),e.runOutsideAngular(function(){return e.onError.emit(r)}),!1}})}return t.isInAngularZone=function(){return!0===Zone.current.get(\"isAngularZone\")},t.assertInAngularZone=function(){if(!t.isInAngularZone())throw new Error(\"Expected to be in Angular Zone, but it is not!\")},t.assertNotInAngularZone=function(){if(t.isInAngularZone())throw new Error(\"Expected to not be in Angular Zone, but it is!\")},t.prototype.run=function(t,e,n){return this._inner.run(t,e,n)},t.prototype.runTask=function(t,e,n,i){var r=this._inner,o=r.scheduleEventTask(\"NgZoneEvent: \"+i,t,Jn,Zn,Zn);try{return r.runTask(o,e,n)}finally{r.cancelTask(o)}},t.prototype.runGuarded=function(t,e,n){return this._inner.runGuarded(t,e,n)},t.prototype.runOutsideAngular=function(t){return this._outer.run(t)},t}();function Zn(){}var Jn={};function Qn(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(function(){return t.onStable.emit(null)})}finally{t.isStable=!0}}}function $n(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function ti(t){t._nesting--,Qn(t)}var ei,ni=function(){function t(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new hn,this.onMicrotaskEmpty=new hn,this.onStable=new hn,this.onError=new hn}return t.prototype.run=function(t){return t()},t.prototype.runGuarded=function(t){return t()},t.prototype.runOutsideAngular=function(t){return t()},t.prototype.runTask=function(t){return t()},t}(),ii=function(){function t(t){var e=this;this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(function(){e.taskTrackingZone=\"undefined\"==typeof Zone?null:Zone.current.get(\"TaskTrackingZone\")})}return t.prototype._watchAngularEvents=function(){var t=this;this._ngZone.onUnstable.subscribe({next:function(){t._didWork=!0,t._isZoneStable=!1}}),this._ngZone.runOutsideAngular(function(){t._ngZone.onStable.subscribe({next:function(){Kn.assertNotInAngularZone(),At(function(){t._isZoneStable=!0,t._runCallbacksIfReady()})}})})},t.prototype.increasePendingRequestCount=function(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount},t.prototype.decreasePendingRequestCount=function(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error(\"pending async requests below zero\");return this._runCallbacksIfReady(),this._pendingCount},t.prototype.isStable=function(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks},t.prototype._runCallbacksIfReady=function(){var t=this;if(this.isStable())At(function(){for(;0!==t._callbacks.length;){var e=t._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb(t._didWork)}t._didWork=!1});else{var e=this.getPendingTasks();this._callbacks=this._callbacks.filter(function(t){return!t.updateCb||!t.updateCb(e)||(clearTimeout(t.timeoutId),!1)}),this._didWork=!0}},t.prototype.getPendingTasks=function(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(function(t){return{source:t.source,creationLocation:t.creationLocation,data:t.data}}):[]},t.prototype.addCallback=function(t,e,n){var i=this,r=-1;e&&e>0&&(r=setTimeout(function(){i._callbacks=i._callbacks.filter(function(t){return t.timeoutId!==r}),t(i._didWork,i.getPendingTasks())},e)),this._callbacks.push({doneCb:t,timeoutId:r,updateCb:n})},t.prototype.whenStable=function(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is \"zone.js/dist/task-tracking.js\" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()},t.prototype.getPendingRequestCount=function(){return this._pendingCount},t.prototype.findProviders=function(t,e,n){return[]},t}(),ri=function(){function t(){this._applications=new Map,oi.addToWindow(this)}return t.prototype.registerApplication=function(t,e){this._applications.set(t,e)},t.prototype.unregisterApplication=function(t){this._applications.delete(t)},t.prototype.unregisterAllApplications=function(){this._applications.clear()},t.prototype.getTestability=function(t){return this._applications.get(t)||null},t.prototype.getAllTestabilities=function(){return Array.from(this._applications.values())},t.prototype.getAllRootElements=function(){return Array.from(this._applications.keys())},t.prototype.findTestabilityInTree=function(t,e){return void 0===e&&(e=!0),oi.findTestabilityInTree(this,t,e)},a([s(\"design:paramtypes\",[])],t)}(),oi=new(function(){function t(){}return t.prototype.addToWindow=function(t){},t.prototype.findTestabilityInTree=function(t,e,n){return null},t}()),ai=new wt(\"AllowMultipleToken\"),si=function(){return function(t,e){this.name=t,this.token=e}}();function li(t,e,n){void 0===n&&(n=[]);var i=\"Platform: \"+e,r=new wt(i);return function(e){void 0===e&&(e=[]);var o=ci();if(!o||o.injector.get(ai,!1))if(t)t(n.concat(e).concat({provide:r,useValue:!0}));else{var a=n.concat(e).concat({provide:r,useValue:!0});!function(t){if(ei&&!ei.destroyed&&!ei.injector.get(ai,!1))throw new Error(\"There can be only one platform. Destroy the previous one to create a new one.\");ei=t.get(ui);var e=t.get(An,null);e&&e.forEach(function(t){return t()})}(oe.create({providers:a,name:i}))}return function(t){var e=ci();if(!e)throw new Error(\"No platform exists!\");if(!e.injector.get(t,null))throw new Error(\"A platform with a different configuration has been created. Please destroy it first.\");return e}(r)}}function ci(){return ei&&!ei.destroyed?ei:null}var ui=function(){function t(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}return t.prototype.bootstrapModuleFactory=function(t,e){var n,i=this,r=\"noop\"===(n=e?e.ngZone:void 0)?new ni:(\"zone.js\"===n?void 0:n)||new Kn({enableLongStackTrace:ze()}),o=[{provide:Kn,useValue:r}];return r.run(function(){var e=oe.create({providers:o,parent:i.injector,name:t.moduleType.name}),n=t.create(e),a=n.injector.get(Cn,null);if(!a)throw new Error(\"No ErrorHandler. Is platform module (BrowserModule) included?\");return n.onDestroy(function(){return fi(i._modules,n)}),r.runOutsideAngular(function(){return r.onError.subscribe({next:function(t){a.handleError(t)}})}),function(t,e,r){try{var o=((a=n.injector.get(Tn)).runInitializers(),a.donePromise.then(function(){return i._moduleDoBootstrap(n),n}));return Sn(o)?o.catch(function(n){throw e.runOutsideAngular(function(){return t.handleError(n)}),n}):o}catch(s){throw e.runOutsideAngular(function(){return t.handleError(s)}),s}var a}(a,r)})},t.prototype.bootstrapModule=function(t,e){var n=this;void 0===e&&(e=[]);var i=hi({},e);return function(t,e,n){return t.get(Vn).createCompiler([e]).compileModuleAsync(n)}(this.injector,i,t).then(function(t){return n.bootstrapModuleFactory(t,i)})},t.prototype._moduleDoBootstrap=function(t){var e=t.injector.get(di);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(function(t){return e.bootstrap(t)});else{if(!t.instance.ngDoBootstrap)throw new Error(\"The module \"+Dt(t.instance.constructor)+' was bootstrapped, but it does not declare \"@NgModule.bootstrap\" components nor a \"ngDoBootstrap\" method. Please define one of these.');t.instance.ngDoBootstrap(e)}this._modules.push(t)},t.prototype.onDestroy=function(t){this._destroyListeners.push(t)},Object.defineProperty(t.prototype,\"injector\",{get:function(){return this._injector},enumerable:!0,configurable:!0}),t.prototype.destroy=function(){if(this._destroyed)throw new Error(\"The platform has already been destroyed!\");this._modules.slice().forEach(function(t){return t.destroy()}),this._destroyListeners.forEach(function(t){return t()}),this._destroyed=!0},Object.defineProperty(t.prototype,\"destroyed\",{get:function(){return this._destroyed},enumerable:!0,configurable:!0}),t}();function hi(t,e){return Array.isArray(e)?e.reduce(hi,t):o({},t,e)}var di=function(){function t(t,e,n,i,r,o){var a=this;this._zone=t,this._console=e,this._injector=n,this._exceptionHandler=i,this._componentFactoryResolver=r,this._initStatus=o,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._enforceNoNewChanges=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._enforceNoNewChanges=ze(),this._zone.onMicrotaskEmpty.subscribe({next:function(){a._zone.run(function(){a.tick()})}});var s=new D(function(t){a._stable=a._zone.isStable&&!a._zone.hasPendingMacrotasks&&!a._zone.hasPendingMicrotasks,a._zone.runOutsideAngular(function(){t.next(a._stable),t.complete()})}),l=new D(function(t){var e;a._zone.runOutsideAngular(function(){e=a._zone.onStable.subscribe(function(){Kn.assertNotInAngularZone(),At(function(){a._stable||a._zone.hasPendingMacrotasks||a._zone.hasPendingMicrotasks||(a._stable=!0,t.next(!0))})})});var n=a._zone.onUnstable.subscribe(function(){Kn.assertInAngularZone(),a._stable&&(a._stable=!1,a._zone.runOutsideAngular(function(){t.next(!1)}))});return function(){e.unsubscribe(),n.unsubscribe()}});this.isStable=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=Number.POSITIVE_INFINITY,i=null,r=t[t.length-1];return U(r)?(i=t.pop(),t.length>1&&\"number\"==typeof t[t.length-1]&&(n=t.pop())):\"number\"==typeof r&&(n=t.pop()),null===i&&1===t.length&&t[0]instanceof D?t[0]:ct(n)(it(t,i))}(s,l.pipe(function(t){return ut()((e=mt,function(t){var n;n=\"function\"==typeof e?e:function(){return e};var i=Object.create(t,pt);return i.source=t,i.subjectFactory=n,i})(t));var e}))}var e;return e=t,t.prototype.bootstrap=function(t,e){var n,i=this;if(!this._initStatus.done)throw new Error(\"Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.\");n=t instanceof we?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);var r=n instanceof Te?null:this._injector.get(Oe),o=n.create(oe.NULL,[],e||n.selector,r);o.onDestroy(function(){i._unloadComponent(o)});var a=o.injector.get(ii,null);return a&&o.injector.get(ri).registerApplication(o.location.nativeElement,a),this._loadComponent(o),ze()&&this._console.log(\"Angular is running in the development mode. Call enableProdMode() to enable the production mode.\"),o},t.prototype.tick=function(){var t=this;if(this._runningTick)throw new Error(\"ApplicationRef.tick is called recursively\");var n=e._tickScope();try{this._runningTick=!0,this._views.forEach(function(t){return t.detectChanges()}),this._enforceNoNewChanges&&this._views.forEach(function(t){return t.checkNoChanges()})}catch(i){this._zone.runOutsideAngular(function(){return t._exceptionHandler.handleError(i)})}finally{this._runningTick=!1,qn(n)}},t.prototype.attachView=function(t){var e=t;this._views.push(e),e.attachToAppRef(this)},t.prototype.detachView=function(t){var e=t;fi(this._views,e),e.detachFromAppRef()},t.prototype._loadComponent=function(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(Dn,[]).concat(this._bootstrapListeners).forEach(function(e){return e(t)})},t.prototype._unloadComponent=function(t){this.detachView(t.hostView),fi(this.components,t)},t.prototype.ngOnDestroy=function(){this._views.slice().forEach(function(t){return t.destroy()})},Object.defineProperty(t.prototype,\"viewCount\",{get:function(){return this._views.length},enumerable:!0,configurable:!0}),t._tickScope=Yn(\"ApplicationRef#tick()\"),t}();function fi(t,e){var n=t.indexOf(e);n>-1&&t.splice(n,1)}var pi=function(){function t(){this.dirty=!0,this._results=[],this.changes=new hn,this.length=0}return t.prototype.map=function(t){return this._results.map(t)},t.prototype.filter=function(t){return this._results.filter(t)},t.prototype.find=function(t){return this._results.find(t)},t.prototype.reduce=function(t,e){return this._results.reduce(t,e)},t.prototype.forEach=function(t){this._results.forEach(t)},t.prototype.some=function(t){return this._results.some(t)},t.prototype.toArray=function(){return this._results.slice()},t.prototype[jt()]=function(){return this._results[jt()]()},t.prototype.toString=function(){return this._results.toString()},t.prototype.reset=function(t){this._results=function t(e){return e.reduce(function(e,n){var i=Array.isArray(n)?t(n):n;return e.concat(i)},[])}(t),this.dirty=!1,this.length=this._results.length,this.last=this._results[this.length-1],this.first=this._results[0]},t.prototype.notifyOnChanges=function(){this.changes.emit(this)},t.prototype.setDirty=function(){this.dirty=!0},t.prototype.destroy=function(){this.changes.complete(),this.changes.unsubscribe()},t}(),gi=function(){return function(){}}(),mi={factoryPathPrefix:\"\",factoryPathSuffix:\".ngfactory\"},vi=function(){function t(t,e){this._compiler=t,this._config=e||mi}return t.prototype.load=function(t){return this._compiler instanceof zn?this.loadFactory(t):this.loadAndCompile(t)},t.prototype.loadAndCompile=function(t){var e=this,i=c(t.split(\"#\"),2),r=i[0],o=i[1];return void 0===o&&(o=\"default\"),n(\"crnd\")(r).then(function(t){return t[o]}).then(function(t){return yi(t,r,o)}).then(function(t){return e._compiler.compileModuleAsync(t)})},t.prototype.loadFactory=function(t){var e=c(t.split(\"#\"),2),i=e[0],r=e[1],o=\"NgFactory\";return void 0===r&&(r=\"default\",o=\"\"),n(\"crnd\")(this._config.factoryPathPrefix+i+this._config.factoryPathSuffix).then(function(t){return t[r+o]}).then(function(t){return yi(t,i,r)})},t}();function yi(t,e,n){if(!t)throw new Error(\"Cannot find '\"+n+\"' in '\"+e+\"'\");return t}var bi=function(){function t(){}return t.__NG_ELEMENT_ID__=function(){return _i(t,je)},t}(),_i=te,wi=function(){function t(){}return t.__NG_ELEMENT_ID__=function(){return xi()},t}(),xi=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]},Ci=function(){return function(t,e){this.name=t,this.callback=e}}(),Si=function(){function t(t,e,n){this.listeners=[],this.parent=null,this._debugContext=n,this.nativeNode=t,e&&e instanceof ki&&e.addChild(this)}return Object.defineProperty(t.prototype,\"injector\",{get:function(){return this._debugContext.injector},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"componentInstance\",{get:function(){return this._debugContext.component},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"context\",{get:function(){return this._debugContext.context},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"references\",{get:function(){return this._debugContext.references},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"providerTokens\",{get:function(){return this._debugContext.providerTokens},enumerable:!0,configurable:!0}),t}(),ki=function(t){function e(e,n,i){var r=t.call(this,e,n,i)||this;return r.properties={},r.attributes={},r.classes={},r.styles={},r.childNodes=[],r.nativeElement=e,r}return r(e,t),e.prototype.addChild=function(t){t&&(this.childNodes.push(t),t.parent=this)},e.prototype.removeChild=function(t){var e=this.childNodes.indexOf(t);-1!==e&&(t.parent=null,this.childNodes.splice(e,1))},e.prototype.insertChildrenAfter=function(t,e){var n,i=this,r=this.childNodes.indexOf(t);-1!==r&&((n=this.childNodes).splice.apply(n,u([r+1,0],e)),e.forEach(function(e){e.parent&&e.parent.removeChild(e),t.parent=i}))},e.prototype.insertBefore=function(t,e){var n=this.childNodes.indexOf(t);-1===n?this.addChild(e):(e.parent&&e.parent.removeChild(e),e.parent=this,this.childNodes.splice(n,0,e))},e.prototype.query=function(t){return this.queryAll(t)[0]||null},e.prototype.queryAll=function(t){var e=[];return function t(e,n,i){e.childNodes.forEach(function(e){e instanceof ki&&(n(e)&&i.push(e),t(e,n,i))})}(this,t,e),e},e.prototype.queryAllNodes=function(t){var e=[];return function t(e,n,i){e instanceof ki&&e.childNodes.forEach(function(e){n(e)&&i.push(e),e instanceof ki&&t(e,n,i)})}(this,t,e),e},Object.defineProperty(e.prototype,\"children\",{get:function(){return this.childNodes.filter(function(t){return t instanceof e})},enumerable:!0,configurable:!0}),e.prototype.triggerEventHandler=function(t,e){this.listeners.forEach(function(n){n.name==t&&n.callback(e)})},e}(Si),Ei=new Map,Ti=function(t){return Ei.get(t)||null};function Oi(t){Ei.set(t.nativeNode,t)}var Pi=function(){function t(){}return t.prototype.supports=function(t){return Qt(t)},t.prototype.create=function(t){return new Ai(t)},t}(),ji=function(t,e){return e},Ai=function(){function t(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||ji}return t.prototype.forEachItem=function(t){var e;for(e=this._itHead;null!==e;e=e._next)t(e)},t.prototype.forEachOperation=function(t){for(var e=this._itHead,n=this._removalsHead,i=0,r=null;e||n;){var o=!n||e&&e.currentIndex<Ri(n,i,r)?e:n,a=Ri(o,i,r),s=o.currentIndex;if(o===n)i--,n=n._nextRemoved;else if(e=e._next,null==o.previousIndex)i++;else{r||(r=[]);var l=a-i,c=s-i;if(l!=c){for(var u=0;u<l;u++){var h=u<r.length?r[u]:r[u]=0,d=h+u;c<=d&&d<l&&(r[u]=h+1)}r[o.previousIndex]=c-l}}a!==s&&t(o,a,s)}},t.prototype.forEachPreviousItem=function(t){var e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)},t.prototype.forEachAddedItem=function(t){var e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)},t.prototype.forEachMovedItem=function(t){var e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)},t.prototype.forEachRemovedItem=function(t){var e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)},t.prototype.forEachIdentityChange=function(t){var e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)},t.prototype.diff=function(t){if(null==t&&(t=[]),!Qt(t))throw new Error(\"Error trying to diff '\"+Dt(t)+\"'. Only arrays and iterables are allowed\");return this.check(t)?this:null},t.prototype.onDestroy=function(){},t.prototype.check=function(t){var e=this;this._reset();var n,i,r,o=this._itHead,a=!1;if(Array.isArray(t)){this.length=t.length;for(var s=0;s<this.length;s++)r=this._trackByFn(s,i=t[s]),null!==o&&Mt(o.trackById,r)?(a&&(o=this._verifyReinsertion(o,i,r,s)),Mt(o.item,i)||this._addIdentityChange(o,i)):(o=this._mismatch(o,i,r,s),a=!0),o=o._next}else n=0,function(t,e){if(Array.isArray(t))for(var n=0;n<t.length;n++)e(t[n]);else for(var i=t[jt()](),r=void 0;!(r=i.next()).done;)e(r.value)}(t,function(t){r=e._trackByFn(n,t),null!==o&&Mt(o.trackById,r)?(a&&(o=e._verifyReinsertion(o,t,r,n)),Mt(o.item,t)||e._addIdentityChange(o,t)):(o=e._mismatch(o,t,r,n),a=!0),o=o._next,n++}),this.length=n;return this._truncate(o),this.collection=t,this.isDirty},Object.defineProperty(t.prototype,\"isDirty\",{get:function(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead},enumerable:!0,configurable:!0}),t.prototype._reset=function(){if(this.isDirty){var t=void 0,e=void 0;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=e)t.previousIndex=t.currentIndex,e=t._nextMoved;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}},t.prototype._mismatch=function(t,e,n,i){var r;return null===t?r=this._itTail:(r=t._prev,this._remove(t)),null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,i))?(Mt(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,r,i)):null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Mt(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,r,i)):t=this._addAfter(new Mi(e,n),r,i),t},t.prototype._verifyReinsertion=function(t,e,n,i){var r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==r?t=this._reinsertAfter(r,t._prev,i):t.currentIndex!=i&&(t.currentIndex=i,this._addToMoves(t,i)),t},t.prototype._truncate=function(t){for(;null!==t;){var e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)},t.prototype._reinsertAfter=function(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);var i=t._prevRemoved,r=t._nextRemoved;return null===i?this._removalsHead=r:i._nextRemoved=r,null===r?this._removalsTail=i:r._prevRemoved=i,this._insertAfter(t,e,n),this._addToMoves(t,n),t},t.prototype._moveAfter=function(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t},t.prototype._addAfter=function(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t},t.prototype._insertAfter=function(t,e,n){var i=null===e?this._itHead:e._next;return t._next=i,t._prev=e,null===i?this._itTail=t:i._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new Ii),this._linkedRecords.put(t),t.currentIndex=n,t},t.prototype._remove=function(t){return this._addToRemovals(this._unlink(t))},t.prototype._unlink=function(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);var e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t},t.prototype._addToMoves=function(t,e){return t.previousIndex===e?t:(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t,t)},t.prototype._addToRemovals=function(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Ii),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t},t.prototype._addIdentityChange=function(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t},t}(),Mi=function(){return function(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}(),Di=function(){function t(){this._head=null,this._tail=null}return t.prototype.add=function(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)},t.prototype.get=function(t,e){var n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Mt(n.trackById,t))return n;return null},t.prototype.remove=function(t){var e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head},t}(),Ii=function(){function t(){this.map=new Map}return t.prototype.put=function(t){var e=t.trackById,n=this.map.get(e);n||(n=new Di,this.map.set(e,n)),n.add(t)},t.prototype.get=function(t,e){var n=this.map.get(t);return n?n.get(t,e):null},t.prototype.remove=function(t){var e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t},Object.defineProperty(t.prototype,\"isEmpty\",{get:function(){return 0===this.map.size},enumerable:!0,configurable:!0}),t.prototype.clear=function(){this.map.clear()},t}();function Ri(t,e,n){var i=t.previousIndex;if(null===i)return i;var r=0;return n&&i<n.length&&(r=n[i]),i+e+r}var Li=function(){function t(){}return t.prototype.supports=function(t){return t instanceof Map||$t(t)},t.prototype.create=function(){return new Fi},t}(),Fi=function(){function t(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}return Object.defineProperty(t.prototype,\"isDirty\",{get:function(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead},enumerable:!0,configurable:!0}),t.prototype.forEachItem=function(t){var e;for(e=this._mapHead;null!==e;e=e._next)t(e)},t.prototype.forEachPreviousItem=function(t){var e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)},t.prototype.forEachChangedItem=function(t){var e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)},t.prototype.forEachAddedItem=function(t){var e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)},t.prototype.forEachRemovedItem=function(t){var e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)},t.prototype.diff=function(t){if(t){if(!(t instanceof Map||$t(t)))throw new Error(\"Error trying to diff '\"+Dt(t)+\"'. Only maps and objects are allowed\")}else t=new Map;return this.check(t)?this:null},t.prototype.onDestroy=function(){},t.prototype.check=function(t){var e=this;this._reset();var n=this._mapHead;if(this._appendAfter=null,this._forEach(t,function(t,i){if(n&&n.key===i)e._maybeAddToChanges(n,t),e._appendAfter=n,n=n._next;else{var r=e._getOrCreateRecordForKey(i,t);n=e._insertBeforeOrAppend(n,r)}}),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(var i=n;null!==i;i=i._nextRemoved)i===this._mapHead&&(this._mapHead=null),this._records.delete(i.key),i._nextRemoved=i._next,i.previousValue=i.currentValue,i.currentValue=null,i._prev=null,i._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty},t.prototype._insertBeforeOrAppend=function(t,e){if(t){var n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null},t.prototype._getOrCreateRecordForKey=function(t,e){if(this._records.has(t)){var n=this._records.get(t);this._maybeAddToChanges(n,e);var i=n._prev,r=n._next;return i&&(i._next=r),r&&(r._prev=i),n._next=null,n._prev=null,n}var o=new Ni(t);return this._records.set(t,o),o.currentValue=e,this._addToAdditions(o),o},t.prototype._reset=function(){if(this.isDirty){var t=void 0;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}},t.prototype._maybeAddToChanges=function(t,e){Mt(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))},t.prototype._addToAdditions=function(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)},t.prototype._addToChanges=function(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)},t.prototype._forEach=function(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(function(n){return e(t[n],n)})},t}(),Ni=function(){return function(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}(),Bi=function(){function t(t){this.factories=t}return t.create=function(e,n){if(null!=n){var i=n.factories.slice();e=e.concat(i)}return new t(e)},t.extend=function(e){return{provide:t,useFactory:function(n){if(!n)throw new Error(\"Cannot extend IterableDiffers without a parent injector\");return t.create(e,n)},deps:[[t,new zt,new Ht]]}},t.prototype.find=function(t){var e,n=this.factories.find(function(e){return e.supports(t)});if(null!=n)return n;throw new Error(\"Cannot find a differ supporting object '\"+t+\"' of type '\"+((e=t).name||typeof e)+\"'\")},t.ngInjectableDef=bt({providedIn:\"root\",factory:function(){return new t([new Pi])}}),t}(),Hi=function(){function t(t){this.factories=t}return t.create=function(e,n){if(n){var i=n.factories.slice();e=e.concat(i)}return new t(e)},t.extend=function(e){return{provide:t,useFactory:function(n){if(!n)throw new Error(\"Cannot extend KeyValueDiffers without a parent injector\");return t.create(e,n)},deps:[[t,new zt,new Ht]]}},t.prototype.find=function(t){var e=this.factories.find(function(e){return e.supports(t)});if(e)return e;throw new Error(\"Cannot find a differ supporting object '\"+t+\"'\")},t.ngInjectableDef=bt({providedIn:\"root\",factory:function(){return new t([new Li])}}),t}(),Ui=[new Li],zi=new Bi([new Pi]),Vi=new Hi(Ui),Gi=li(null,\"core\",[{provide:Mn,useValue:\"unknown\"},{provide:ui,deps:[oe]},{provide:ri,deps:[]},{provide:In,deps:[]}]),Wi=new wt(\"LocaleId\");function Xi(){return zi}function Yi(){return Vi}function qi(t){return t||\"en-US\"}var Ki=function(){return function(t){}}();function Zi(t,e,n){var i=t.state,r=1792&i;return r===e?(t.state=-1793&i|n,t.initIndex=-1,!0):r===n}function Ji(t,e,n){return(1792&t.state)===e&&t.initIndex<=n&&(t.initIndex=n+1,!0)}function Qi(t,e){return t.nodes[e]}function $i(t,e){return t.nodes[e]}function tr(t,e){return t.nodes[e]}function er(t,e){return t.nodes[e]}function nr(t,e){return t.nodes[e]}var ir={setCurrentNode:void 0,createRootView:void 0,createEmbeddedView:void 0,createComponentView:void 0,createNgModuleRef:void 0,overrideProvider:void 0,overrideComponentView:void 0,clearOverrides:void 0,checkAndUpdateView:void 0,checkNoChangesView:void 0,destroyView:void 0,resolveDep:void 0,createDebugContext:void 0,handleEvent:void 0,updateDirectives:void 0,updateRenderer:void 0,dirtyParentQueries:void 0};function rr(t,e,n,i){var r=\"ExpressionChangedAfterItHasBeenCheckedError: Expression has changed after it was checked. Previous value: '\"+e+\"'. Current value: '\"+n+\"'.\";return i&&(r+=\" It seems like the view has been created after its parent and its children have been dirty checked. Has it been created in a change detection hook ?\"),function(t,e){var n=new Error(t);return or(n,e),n}(r,t)}function or(t,e){t[vn]=e,t[bn]=e.logError.bind(e)}function ar(t){return new Error(\"ViewDestroyedError: Attempt to use a destroyed view: \"+t)}var sr=function(){},lr=new Map;function cr(t){var e=lr.get(t);return e||(e=Dt(t)+\"_\"+lr.size,lr.set(t,e)),e}var ur=\"$$undefined\",hr=\"$$empty\";function dr(t){return{id:ur,styles:t.styles,encapsulation:t.encapsulation,data:t.data}}var fr=0;function pr(t,e,n,i){return!(!(2&t.state)&&Mt(t.oldValues[e.bindingIndex+n],i))}function gr(t,e,n,i){return!!pr(t,e,n,i)&&(t.oldValues[e.bindingIndex+n]=i,!0)}function mr(t,e,n,i){var r=t.oldValues[e.bindingIndex+n];if(1&t.state||!Kt(r,i)){var o=e.bindings[n].name;throw rr(ir.createDebugContext(t,e.nodeIndex),o+\": \"+r,o+\": \"+i,0!=(1&t.state))}}function vr(t){for(var e=t;e;)2&e.def.flags&&(e.state|=8),e=e.viewContainerParent||e.parent}function yr(t,e){for(var n=t;n&&n!==e;)n.state|=64,n=n.viewContainerParent||n.parent}function br(t,e,n,i){try{return vr(33554432&t.def.nodes[e].flags?$i(t,e).componentView:t),ir.handleEvent(t,e,n,i)}catch(r){t.root.errorHandler.handleError(r)}}function _r(t){return t.parent?$i(t.parent,t.parentNodeDef.nodeIndex):null}function wr(t){return t.parent?t.parentNodeDef.parent:null}function xr(t,e){switch(201347067&e.flags){case 1:return $i(t,e.nodeIndex).renderElement;case 2:return Qi(t,e.nodeIndex).renderText}}function Cr(t){return!!t.parent&&!!(32768&t.parentNodeDef.flags)}function Sr(t){return!(!t.parent||32768&t.parentNodeDef.flags)}function kr(t){return 1<<t%32}function Er(t){var e={},n=0,i={};return t&&t.forEach(function(t){var r=c(t,2),o=r[0],a=r[1];\"number\"==typeof o?(e[o]=a,n|=kr(o)):i[o]=a}),{matchedQueries:e,references:i,matchedQueryIds:n}}function Tr(t,e){return t.map(function(t){var n,i,r;return Array.isArray(t)?(r=(n=c(t,2))[0],i=n[1]):(r=0,i=t),i&&(\"function\"==typeof i||\"object\"==typeof i)&&e&&Object.defineProperty(i,ee,{value:e,configurable:!0}),{flags:r,token:i,tokenKey:cr(i)}})}function Or(t,e,n){var i=n.renderParent;return i?0==(1&i.flags)||0==(33554432&i.flags)||i.element.componentRendererType&&i.element.componentRendererType.encapsulation===Nt.Native?$i(t,n.renderParent.nodeIndex).renderElement:void 0:e}var Pr=new WeakMap;function jr(t){var e=Pr.get(t);return e||((e=t(function(){return sr})).factory=t,Pr.set(t,e)),e}function Ar(t,e,n,i,r){3===e&&(n=t.renderer.parentNode(xr(t,t.def.lastRenderRootNode))),Mr(t,e,0,t.def.nodes.length-1,n,i,r)}function Mr(t,e,n,i,r,o,a){for(var s=n;s<=i;s++){var l=t.def.nodes[s];11&l.flags&&Ir(t,l,e,r,o,a),s+=l.childCount}}function Dr(t,e,n,i,r,o){for(var a=t;a&&!Cr(a);)a=a.parent;for(var s=a.parent,l=wr(a),c=l.nodeIndex+l.childCount,u=l.nodeIndex+1;u<=c;u++){var h=s.def.nodes[u];h.ngContentIndex===e&&Ir(s,h,n,i,r,o),u+=h.childCount}if(!s.parent){var d=t.root.projectableNodes[e];if(d)for(u=0;u<d.length;u++)Rr(t,d[u],n,i,r,o)}}function Ir(t,e,n,i,r,o){if(8&e.flags)Dr(t,e.ngContent.index,n,i,r,o);else{var a=xr(t,e);if(3===n&&33554432&e.flags&&48&e.bindingFlags?(16&e.bindingFlags&&Rr(t,a,n,i,r,o),32&e.bindingFlags&&Rr($i(t,e.nodeIndex).componentView,a,n,i,r,o)):Rr(t,a,n,i,r,o),16777216&e.flags)for(var s=$i(t,e.nodeIndex).viewContainer._embeddedViews,l=0;l<s.length;l++)Ar(s[l],n,i,r,o);1&e.flags&&!e.element.name&&Mr(t,n,e.nodeIndex+1,e.nodeIndex+e.childCount,i,r,o)}}function Rr(t,e,n,i,r,o){var a=t.renderer;switch(n){case 1:a.appendChild(i,e);break;case 2:a.insertBefore(i,e,r);break;case 3:a.removeChild(i,e);break;case 0:o.push(e)}}var Lr=/^:([^:]+):(.+)$/;function Fr(t){if(\":\"===t[0]){var e=t.match(Lr);return[e[1],e[2]]}return[\"\",t]}function Nr(t){for(var e=0,n=0;n<t.length;n++)e|=t[n].flags;return e}function Br(t,e,n,i,r,o,a,s,l,u,h,d){var f;void 0===a&&(a=[]),u||(u=sr);var p=Er(n),g=p.matchedQueries,m=p.references,v=p.matchedQueryIds,y=null,b=null;o&&(y=(f=c(Fr(o),2))[0],b=f[1]),s=s||[];for(var _=new Array(s.length),w=0;w<s.length;w++){var x=c(s[w],3),C=x[0],S=x[2],k=c(Fr(x[1]),2),E=k[0],T=k[1],O=void 0,P=void 0;switch(15&C){case 4:P=S;break;case 1:case 8:O=S}_[w]={flags:C,ns:E,name:T,nonMinifiedName:T,securityContext:O,suffix:P}}l=l||[];var j=new Array(l.length);for(w=0;w<l.length;w++){var A=c(l[w],2);j[w]={type:0,target:A[0],eventName:A[1],propName:null}}var M=(a=a||[]).map(function(t){var e=c(t,2),n=e[1],i=c(Fr(e[0]),2);return[i[0],i[1],n]});return d=function(t){if(t&&t.id===ur){var e=null!=t.encapsulation&&t.encapsulation!==Nt.None||t.styles.length||Object.keys(t.data).length;t.id=e?\"c\"+fr++:hr}return t&&t.id===hr&&(t=null),t||null}(d),h&&(e|=33554432),{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:t,flags:e|=1,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:g,matchedQueryIds:v,references:m,ngContentIndex:i,childCount:r,bindings:_,bindingFlags:Nr(_),outputs:j,element:{ns:y,name:b,attrs:M,template:null,componentProvider:null,componentView:h||null,componentRendererType:d,publicProviders:null,allProviders:null,handleEvent:u||sr},provider:null,text:null,query:null,ngContent:null}}function Hr(t,e,n){var i,r=n.element,o=t.root.selectorOrNode,a=t.renderer;if(t.parent||!o){i=r.name?a.createElement(r.name,r.ns):a.createComment(\"\");var s=Or(t,e,n);s&&a.appendChild(s,i)}else i=a.selectRootElement(o,!!r.componentRendererType&&r.componentRendererType.encapsulation===Nt.ShadowDom);if(r.attrs)for(var l=0;l<r.attrs.length;l++){var u=c(r.attrs[l],3);a.setAttribute(i,u[1],u[2],u[0])}return i}function Ur(t,e,n,i){for(var r=0;r<n.outputs.length;r++){var o=n.outputs[r],a=zr(t,n.nodeIndex,(h=o.eventName,(u=o.target)?u+\":\"+h:h)),s=o.target,l=t;\"component\"===o.target&&(s=null,l=e);var c=l.renderer.listen(s||i,o.eventName,a);t.disposables[n.outputIndex+r]=c}var u,h}function zr(t,e,n){return function(i){return br(t,e,n,i)}}function Vr(t,e,n,i){if(!gr(t,e,n,i))return!1;var r=e.bindings[n],o=$i(t,e.nodeIndex),a=o.renderElement,s=r.name;switch(15&r.flags){case 1:!function(t,e,n,i,r,o){var a=e.securityContext,s=a?t.root.sanitizer.sanitize(a,o):o;s=null!=s?s.toString():null;var l=t.renderer;null!=o?l.setAttribute(n,r,s,i):l.removeAttribute(n,r,i)}(t,r,a,r.ns,s,i);break;case 2:!function(t,e,n,i){var r=t.renderer;i?r.addClass(e,n):r.removeClass(e,n)}(t,a,s,i);break;case 4:!function(t,e,n,i,r){var o=t.root.sanitizer.sanitize(Fe.STYLE,r);if(null!=o){o=o.toString();var a=e.suffix;null!=a&&(o+=a)}else o=null;var s=t.renderer;null!=o?s.setStyle(n,i,o):s.removeStyle(n,i)}(t,r,a,s,i);break;case 8:!function(t,e,n,i,r){var o=e.securityContext,a=o?t.root.sanitizer.sanitize(o,r):r;t.renderer.setProperty(n,i,a)}(33554432&e.flags&&32&r.flags?o.componentView:t,r,a,s,i)}return!0}var Gr=new Object,Wr=cr(oe),Xr=cr(ie),Yr=cr(Oe);function qr(t,e,n,i){return n=Lt(n),{index:-1,deps:Tr(i,Dt(e)),flags:t,token:e,value:n}}function Kr(t,e,n){void 0===n&&(n=oe.THROW_IF_NOT_FOUND);var i,r,o=Wt(t);try{if(8&e.flags)return e.token;if(2&e.flags&&(n=null),1&e.flags)return t._parent.get(e.token,n);var a=e.tokenKey;switch(a){case Wr:case Xr:case Yr:return t}var s,l=t._def.providersByKey[a];if(l){var c=t._providers[l.index];return void 0===c&&(c=t._providers[l.index]=Zr(t,l)),c===Gr?void 0:c}if((s=_t(e.token))&&(i=t,null!=(r=s).providedIn&&(function(t,e){return t._def.modules.indexOf(r.providedIn)>-1}(i)||\"root\"===r.providedIn&&i._def.isRoot))){var u=t._providers.length;return t._def.providersByKey[e.tokenKey]={flags:5120,value:s.factory,deps:[],index:u,token:e.token},t._providers[u]=Gr,t._providers[u]=Zr(t,t._def.providersByKey[e.tokenKey])}return 4&e.flags?n:t._parent.get(e.token,n)}finally{Wt(o)}}function Zr(t,e){var n;switch(201347067&e.flags){case 512:n=function(t,e,n){var i=n.length;switch(i){case 0:return new e;case 1:return new e(Kr(t,n[0]));case 2:return new e(Kr(t,n[0]),Kr(t,n[1]));case 3:return new e(Kr(t,n[0]),Kr(t,n[1]),Kr(t,n[2]));default:for(var r=new Array(i),o=0;o<i;o++)r[o]=Kr(t,n[o]);return new(e.bind.apply(e,u([void 0],r)))}}(t,e.value,e.deps);break;case 1024:n=function(t,e,n){var i=n.length;switch(i){case 0:return e();case 1:return e(Kr(t,n[0]));case 2:return e(Kr(t,n[0]),Kr(t,n[1]));case 3:return e(Kr(t,n[0]),Kr(t,n[1]),Kr(t,n[2]));default:for(var r=Array(i),o=0;o<i;o++)r[o]=Kr(t,n[o]);return e.apply(void 0,u(r))}}(t,e.value,e.deps);break;case 2048:n=Kr(t,e.deps[0]);break;case 256:n=e.value}return n===Gr||null==n||\"object\"!=typeof n||131072&e.flags||\"function\"!=typeof n.ngOnDestroy||(e.flags|=131072),void 0===n?Gr:n}function Jr(t,e){var n=t.viewContainer._embeddedViews;if((null==e||e>=n.length)&&(e=n.length-1),e<0)return null;var i=n[e];return i.viewContainerParent=null,eo(n,e),ir.dirtyParentQueries(i),$r(i),i}function Qr(t,e,n){var i=e?xr(e,e.def.lastRenderRootNode):t.renderElement,r=n.renderer.parentNode(i),o=n.renderer.nextSibling(i);Ar(n,2,r,o,void 0)}function $r(t){Ar(t,3,null,null,void 0)}function to(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function eo(t,e){e>=t.length-1?t.pop():t.splice(e,1)}var no=new Object;function io(t,e,n,i,r,o){return new ro(t,e,n,i,r,o)}var ro=function(t){function e(e,n,i,r,o,a){var s=t.call(this)||this;return s.selector=e,s.componentType=n,s._inputs=r,s._outputs=o,s.ngContentSelectors=a,s.viewDefFactory=i,s}return r(e,t),Object.defineProperty(e.prototype,\"inputs\",{get:function(){var t=[],e=this._inputs;for(var n in e)t.push({propName:n,templateName:e[n]});return t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"outputs\",{get:function(){var t=[];for(var e in this._outputs)t.push({propName:e,templateName:this._outputs[e]});return t},enumerable:!0,configurable:!0}),e.prototype.create=function(t,e,n,i){if(!i)throw new Error(\"ngModule should be provided\");var r=jr(this.viewDefFactory),o=r.nodes[0].element.componentProvider.nodeIndex,a=ir.createRootView(t,e||[],n,r,i,no),s=tr(a,o).instance;return n&&a.renderer.setAttribute($i(a,0).renderElement,\"ng-version\",Be.full),new oo(a,new co(a),s)},e}(we),oo=function(t){function e(e,n,i){var r=t.call(this)||this;return r._view=e,r._viewRef=n,r._component=i,r._elDef=r._view.def.nodes[0],r.hostView=n,r.changeDetectorRef=n,r.instance=i,r}return r(e,t),Object.defineProperty(e.prototype,\"location\",{get:function(){return new je($i(this._view,this._elDef.nodeIndex).renderElement)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"injector\",{get:function(){return new po(this._view,this._elDef)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"componentType\",{get:function(){return this._component.constructor},enumerable:!0,configurable:!0}),e.prototype.destroy=function(){this._viewRef.destroy()},e.prototype.onDestroy=function(t){this._viewRef.onDestroy(t)},e}(_e);function ao(t,e,n){return new so(t,e,n)}var so=function(){function t(t,e,n){this._view=t,this._elDef=e,this._data=n,this._embeddedViews=[]}return Object.defineProperty(t.prototype,\"element\",{get:function(){return new je(this._data.renderElement)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"injector\",{get:function(){return new po(this._view,this._elDef)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"parentInjector\",{get:function(){for(var t=this._view,e=this._elDef.parent;!e&&t;)e=wr(t),t=t.parent;return t?new po(t,e):new po(this._view,null)},enumerable:!0,configurable:!0}),t.prototype.clear=function(){for(var t=this._embeddedViews.length-1;t>=0;t--){var e=Jr(this._data,t);ir.destroyView(e)}},t.prototype.get=function(t){var e=this._embeddedViews[t];if(e){var n=new co(e);return n.attachToViewContainerRef(this),n}return null},Object.defineProperty(t.prototype,\"length\",{get:function(){return this._embeddedViews.length},enumerable:!0,configurable:!0}),t.prototype.createEmbeddedView=function(t,e,n){var i=t.createEmbeddedView(e||{});return this.insert(i,n),i},t.prototype.createComponent=function(t,e,n,i,r){var o=n||this.parentInjector;r||t instanceof Te||(r=o.get(Oe));var a=t.create(o,i,void 0,r);return this.insert(a.hostView,e),a},t.prototype.insert=function(t,e){if(t.destroyed)throw new Error(\"Cannot insert a destroyed View in a ViewContainer!\");var n,i,r,o,a=t;return o=(n=this._data).viewContainer._embeddedViews,null==(i=e)&&(i=o.length),(r=a._view).viewContainerParent=this._view,to(o,i,r),function(t,e){var n=_r(e);if(n&&n!==t&&!(16&e.state)){e.state|=16;var i=n.template._projectedViews;i||(i=n.template._projectedViews=[]),i.push(e),function(t,n){if(!(4&n.flags)){e.parent.def.nodeFlags|=4,n.flags|=4;for(var i=n.parent;i;)i.childFlags|=4,i=i.parent}}(0,e.parentNodeDef)}}(n,r),ir.dirtyParentQueries(r),Qr(n,i>0?o[i-1]:null,r),a.attachToViewContainerRef(this),t},t.prototype.move=function(t,e){if(t.destroyed)throw new Error(\"Cannot move a destroyed View in a ViewContainer!\");var n,i,r,o,a,s=this._embeddedViews.indexOf(t._view);return r=e,a=(o=(n=this._data).viewContainer._embeddedViews)[i=s],eo(o,i),null==r&&(r=o.length),to(o,r,a),ir.dirtyParentQueries(a),$r(a),Qr(n,r>0?o[r-1]:null,a),t},t.prototype.indexOf=function(t){return this._embeddedViews.indexOf(t._view)},t.prototype.remove=function(t){var e=Jr(this._data,t);e&&ir.destroyView(e)},t.prototype.detach=function(t){var e=Jr(this._data,t);return e?new co(e):null},t}();function lo(t){return new co(t)}var co=function(){function t(t){this._view=t,this._viewContainerRef=null,this._appRef=null}return Object.defineProperty(t.prototype,\"rootNodes\",{get:function(){return Ar(this._view,0,void 0,void 0,t=[]),t;var t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"context\",{get:function(){return this._view.context},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"destroyed\",{get:function(){return 0!=(128&this._view.state)},enumerable:!0,configurable:!0}),t.prototype.markForCheck=function(){vr(this._view)},t.prototype.detach=function(){this._view.state&=-5},t.prototype.detectChanges=function(){var t=this._view.root.rendererFactory;t.begin&&t.begin();try{ir.checkAndUpdateView(this._view)}finally{t.end&&t.end()}},t.prototype.checkNoChanges=function(){ir.checkNoChangesView(this._view)},t.prototype.reattach=function(){this._view.state|=4},t.prototype.onDestroy=function(t){this._view.disposables||(this._view.disposables=[]),this._view.disposables.push(t)},t.prototype.destroy=function(){this._appRef?this._appRef.detachView(this):this._viewContainerRef&&this._viewContainerRef.detach(this._viewContainerRef.indexOf(this)),ir.destroyView(this._view)},t.prototype.detachFromAppRef=function(){this._appRef=null,$r(this._view),ir.dirtyParentQueries(this._view)},t.prototype.attachToAppRef=function(t){if(this._viewContainerRef)throw new Error(\"This view is already attached to a ViewContainer!\");this._appRef=t},t.prototype.attachToViewContainerRef=function(t){if(this._appRef)throw new Error(\"This view is already attached directly to the ApplicationRef!\");this._viewContainerRef=t},t}();function uo(t,e){return new ho(t,e)}var ho=function(t){function e(e,n){var i=t.call(this)||this;return i._parentView=e,i._def=n,i}return r(e,t),e.prototype.createEmbeddedView=function(t){return new co(ir.createEmbeddedView(this._parentView,this._def,this._def.element.template,t))},Object.defineProperty(e.prototype,\"elementRef\",{get:function(){return new je($i(this._parentView,this._def.nodeIndex).renderElement)},enumerable:!0,configurable:!0}),e}(dn);function fo(t,e){return new po(t,e)}var po=function(){function t(t,e){this.view=t,this.elDef=e}return t.prototype.get=function(t,e){return void 0===e&&(e=oe.THROW_IF_NOT_FOUND),ir.resolveDep(this.view,this.elDef,!!this.elDef&&0!=(33554432&this.elDef.flags),{flags:0,token:t,tokenKey:cr(t)},e)},t}();function go(t){return new mo(t.renderer)}var mo=function(){function t(t){this.delegate=t}return t.prototype.selectRootElement=function(t){return this.delegate.selectRootElement(t)},t.prototype.createElement=function(t,e){var n=c(Fr(e),2),i=this.delegate.createElement(n[1],n[0]);return t&&this.delegate.appendChild(t,i),i},t.prototype.createViewRoot=function(t){return t},t.prototype.createTemplateAnchor=function(t){var e=this.delegate.createComment(\"\");return t&&this.delegate.appendChild(t,e),e},t.prototype.createText=function(t,e){var n=this.delegate.createText(e);return t&&this.delegate.appendChild(t,n),n},t.prototype.projectNodes=function(t,e){for(var n=0;n<e.length;n++)this.delegate.appendChild(t,e[n])},t.prototype.attachViewAfter=function(t,e){for(var n=this.delegate.parentNode(t),i=this.delegate.nextSibling(t),r=0;r<e.length;r++)this.delegate.insertBefore(n,e[r],i)},t.prototype.detachView=function(t){for(var e=0;e<t.length;e++){var n=t[e],i=this.delegate.parentNode(n);this.delegate.removeChild(i,n)}},t.prototype.destroyView=function(t,e){for(var n=0;n<e.length;n++)this.delegate.destroyNode(e[n])},t.prototype.listen=function(t,e,n){return this.delegate.listen(t,e,n)},t.prototype.listenGlobal=function(t,e,n){return this.delegate.listen(t,e,n)},t.prototype.setElementProperty=function(t,e,n){this.delegate.setProperty(t,e,n)},t.prototype.setElementAttribute=function(t,e,n){var i=c(Fr(e),2),r=i[0],o=i[1];null!=n?this.delegate.setAttribute(t,o,n,r):this.delegate.removeAttribute(t,o,r)},t.prototype.setBindingDebugInfo=function(t,e,n){},t.prototype.setElementClass=function(t,e,n){n?this.delegate.addClass(t,e):this.delegate.removeClass(t,e)},t.prototype.setElementStyle=function(t,e,n){null!=n?this.delegate.setStyle(t,e,n):this.delegate.removeStyle(t,e)},t.prototype.invokeElementMethod=function(t,e,n){t[e].apply(t,n)},t.prototype.setText=function(t,e){this.delegate.setValue(t,e)},t.prototype.animate=function(){throw new Error(\"Renderer.animate is no longer supported!\")},t}();function vo(t,e,n,i){return new yo(t,e,n,i)}var yo=function(){function t(t,e,n,i){this._moduleType=t,this._parent=e,this._bootstrapComponents=n,this._def=i,this._destroyListeners=[],this._destroyed=!1,this.injector=this,function(t){for(var e=t._def,n=t._providers=new Array(e.providers.length),i=0;i<e.providers.length;i++){var r=e.providers[i];4096&r.flags||void 0===n[i]&&(n[i]=Zr(t,r))}}(this)}return t.prototype.get=function(t,e,n){void 0===e&&(e=oe.THROW_IF_NOT_FOUND),void 0===n&&(n=Vt.Default);var i=0;return n&Vt.SkipSelf?i|=1:n&Vt.Self&&(i|=4),Kr(this,{token:t,tokenKey:cr(t),flags:i},e)},Object.defineProperty(t.prototype,\"instance\",{get:function(){return this.get(this._moduleType)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"componentFactoryResolver\",{get:function(){return this.get(ke)},enumerable:!0,configurable:!0}),t.prototype.destroy=function(){if(this._destroyed)throw new Error(\"The ng module \"+Dt(this.instance.constructor)+\" has already been destroyed.\");this._destroyed=!0,function(t,e){for(var n=t._def,i=new Set,r=0;r<n.providers.length;r++)if(131072&n.providers[r].flags){var o=t._providers[r];if(o&&o!==Gr){var a=o.ngOnDestroy;\"function\"!=typeof a||i.has(o)||(a.apply(o),i.add(o))}}}(this),this._destroyListeners.forEach(function(t){return t()})},t.prototype.onDestroy=function(t){this._destroyListeners.push(t)},t}(),bo=cr(Me),_o=cr(Re),wo=cr(je),xo=cr(bi),Co=cr(dn),So=cr(wi),ko=cr(oe),Eo=cr(ie);function To(t,e,n,i,r,o,a,s){var l=[];if(a)for(var u in a){var h=c(a[u],2);l[h[0]]={flags:8,name:u,nonMinifiedName:h[1],ns:null,securityContext:null,suffix:null}}var d=[];if(s)for(var f in s)d.push({type:1,propName:f,target:null,eventName:s[f]});return function(t,e,n,i,r,o,a,s,l){var c=Er(n),u=c.matchedQueries,h=c.references,d=c.matchedQueryIds;l||(l=[]),s||(s=[]),o=Lt(o);var f=Tr(a,Dt(r));return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:t,flags:e,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:u,matchedQueryIds:d,references:h,ngContentIndex:-1,childCount:i,bindings:s,bindingFlags:Nr(s),outputs:l,element:null,provider:{token:r,value:o,deps:f},text:null,query:null,ngContent:null}}(t,e|=16384,n,i,r,r,o,l,d)}function Oo(t,e){return Mo(t,e)}function Po(t,e){for(var n=t;n.parent&&!Cr(n);)n=n.parent;return Do(n.parent,wr(n),!0,e.provider.value,e.provider.deps)}function jo(t,e){var n=Do(t,e.parent,(32768&e.flags)>0,e.provider.value,e.provider.deps);if(e.outputs.length)for(var i=0;i<e.outputs.length;i++){var r=e.outputs[i],o=n[r.propName];if(!kn(o))throw new Error(\"@Output \"+r.propName+\" not initialized in '\"+n.constructor.name+\"'.\");var a=o.subscribe(Ao(t,e.parent.nodeIndex,r.eventName));t.disposables[e.outputIndex+i]=a.unsubscribe.bind(a)}return n}function Ao(t,e,n){return function(i){return br(t,e,n,i)}}function Mo(t,e){var n=(8192&e.flags)>0,i=e.provider;switch(201347067&e.flags){case 512:return Do(t,e.parent,n,i.value,i.deps);case 1024:return function(t,e,n,i,r){var o=r.length;switch(o){case 0:return i();case 1:return i(Ro(t,e,n,r[0]));case 2:return i(Ro(t,e,n,r[0]),Ro(t,e,n,r[1]));case 3:return i(Ro(t,e,n,r[0]),Ro(t,e,n,r[1]),Ro(t,e,n,r[2]));default:for(var a=Array(o),s=0;s<o;s++)a[s]=Ro(t,e,n,r[s]);return i.apply(void 0,u(a))}}(t,e.parent,n,i.value,i.deps);case 2048:return Ro(t,e.parent,n,i.deps[0]);case 256:return i.value}}function Do(t,e,n,i,r){var o=r.length;switch(o){case 0:return new i;case 1:return new i(Ro(t,e,n,r[0]));case 2:return new i(Ro(t,e,n,r[0]),Ro(t,e,n,r[1]));case 3:return new i(Ro(t,e,n,r[0]),Ro(t,e,n,r[1]),Ro(t,e,n,r[2]));default:for(var a=new Array(o),s=0;s<o;s++)a[s]=Ro(t,e,n,r[s]);return new(i.bind.apply(i,u([void 0],a)))}}var Io={};function Ro(t,e,n,i,r){if(void 0===r&&(r=oe.THROW_IF_NOT_FOUND),8&i.flags)return i.token;var o=t;2&i.flags&&(r=null);var a=i.tokenKey;a===So&&(n=!(!e||!e.element.componentView)),e&&1&i.flags&&(n=!1,e=e.parent);for(var s=t;s;){if(e)switch(a){case bo:return go(Lo(s,e,n));case _o:return Lo(s,e,n).renderer;case wo:return new je($i(s,e.nodeIndex).renderElement);case xo:return $i(s,e.nodeIndex).viewContainer;case Co:if(e.element.template)return $i(s,e.nodeIndex).template;break;case So:return lo(Lo(s,e,n));case ko:case Eo:return fo(s,e);default:var l=(n?e.element.allProviders:e.element.publicProviders)[a];if(l){var c=tr(s,l.nodeIndex);return c||(c={instance:Mo(s,l)},s.nodes[l.nodeIndex]=c),c.instance}}n=Cr(s),e=wr(s),s=s.parent,4&i.flags&&(s=null)}var u=o.root.injector.get(i.token,Io);return u!==Io||r===Io?u:o.root.ngModule.injector.get(i.token,r)}function Lo(t,e,n){var i;if(n)i=$i(t,e.nodeIndex).componentView;else for(i=t;i.parent&&!Cr(i);)i=i.parent;return i}function Fo(t,e,n,i,r,o){if(32768&n.flags){var a=$i(t,n.parent.nodeIndex).componentView;2&a.def.flags&&(a.state|=8)}if(e.instance[n.bindings[i].name]=r,524288&n.flags){o=o||{};var s=Zt.unwrap(t.oldValues[n.bindingIndex+i]);o[n.bindings[i].nonMinifiedName]=new Jt(s,r,0!=(2&t.state))}return t.oldValues[n.bindingIndex+i]=r,o}function No(t,e){if(t.def.nodeFlags&e)for(var n=t.def.nodes,i=0,r=0;r<n.length;r++){var o=n[r],a=o.parent;for(!a&&o.flags&e&&Ho(t,r,o.flags&e,i++),0==(o.childFlags&e)&&(r+=o.childCount);a&&1&a.flags&&r===a.nodeIndex+a.childCount;)a.directChildFlags&e&&(i=Bo(t,a,e,i)),a=a.parent}}function Bo(t,e,n,i){for(var r=e.nodeIndex+1;r<=e.nodeIndex+e.childCount;r++){var o=t.def.nodes[r];o.flags&n&&Ho(t,r,o.flags&n,i++),r+=o.childCount}return i}function Ho(t,e,n,i){var r=tr(t,e);if(r){var o=r.instance;o&&(ir.setCurrentNode(t,e),1048576&n&&Ji(t,512,i)&&o.ngAfterContentInit(),2097152&n&&o.ngAfterContentChecked(),4194304&n&&Ji(t,768,i)&&o.ngAfterViewInit(),8388608&n&&o.ngAfterViewChecked(),131072&n&&o.ngOnDestroy())}}function Uo(t,e,n){var i=[];for(var r in n)i.push({propName:r,bindingType:n[r]});return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:-1,flags:t,childFlags:0,directChildFlags:0,childMatchedQueries:0,ngContentIndex:-1,matchedQueries:{},matchedQueryIds:0,references:{},childCount:0,bindings:[],bindingFlags:0,outputs:[],element:null,provider:null,text:null,query:{id:e,filterId:kr(e),bindings:i},ngContent:null}}function zo(t){for(var e=t.def.nodeMatchedQueries;t.parent&&Sr(t);){var n=t.parentNodeDef;t=t.parent;for(var i=n.nodeIndex+n.childCount,r=0;r<=i;r++)67108864&(o=t.def.nodes[r]).flags&&536870912&o.flags&&(o.query.filterId&e)===o.query.filterId&&nr(t,r).setDirty(),!(1&o.flags&&r+o.childCount<n.nodeIndex)&&67108864&o.childFlags&&536870912&o.childFlags||(r+=o.childCount)}if(134217728&t.def.nodeFlags)for(r=0;r<t.def.nodes.length;r++){var o;134217728&(o=t.def.nodes[r]).flags&&536870912&o.flags&&nr(t,r).setDirty(),r+=o.childCount}}function Vo(t,e){var n=nr(t,e.nodeIndex);if(n.dirty){var i,r=void 0;if(67108864&e.flags){var o=e.parent.parent;r=Go(t,o.nodeIndex,o.nodeIndex+o.childCount,e.query,[]),i=tr(t,e.parent.nodeIndex).instance}else 134217728&e.flags&&(r=Go(t,0,t.def.nodes.length-1,e.query,[]),i=t.component);n.reset(r);for(var a=e.query.bindings,s=!1,l=0;l<a.length;l++){var c=a[l],u=void 0;switch(c.bindingType){case 0:u=n.first;break;case 1:u=n,s=!0}i[c.propName]=u}s&&n.notifyOnChanges()}}function Go(t,e,n,i,r){for(var o=e;o<=n;o++){var a=t.def.nodes[o],s=a.matchedQueries[i.id];if(null!=s&&r.push(Wo(t,a,s)),1&a.flags&&a.element.template&&(a.element.template.nodeMatchedQueries&i.filterId)===i.filterId){var l=$i(t,o);if((a.childMatchedQueries&i.filterId)===i.filterId&&(Go(t,o+1,o+a.childCount,i,r),o+=a.childCount),16777216&a.flags)for(var c=l.viewContainer._embeddedViews,u=0;u<c.length;u++){var h=c[u],d=_r(h);d&&d===l&&Go(h,0,h.def.nodes.length-1,i,r)}var f=l.template._projectedViews;if(f)for(u=0;u<f.length;u++){var p=f[u];Go(p,0,p.def.nodes.length-1,i,r)}}(a.childMatchedQueries&i.filterId)!==i.filterId&&(o+=a.childCount)}return r}function Wo(t,e,n){if(null!=n)switch(n){case 1:return $i(t,e.nodeIndex).renderElement;case 0:return new je($i(t,e.nodeIndex).renderElement);case 2:return $i(t,e.nodeIndex).template;case 3:return $i(t,e.nodeIndex).viewContainer;case 4:return tr(t,e.nodeIndex).instance}}function Xo(t,e,n){var i=Or(t,e,n);i&&Dr(t,n.ngContent.index,1,i,null,void 0)}function Yo(t,e,n){for(var i=new Array(n.length-1),r=1;r<n.length;r++)i[r-1]={flags:8,name:null,ns:null,nonMinifiedName:null,securityContext:null,suffix:n[r]};return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:t,flags:2,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:{},matchedQueryIds:0,references:{},ngContentIndex:e,childCount:0,bindings:i,bindingFlags:8,outputs:[],element:null,provider:null,text:{prefix:n[0]},query:null,ngContent:null}}function qo(t,e,n){var i,r=t.renderer;i=r.createText(n.text.prefix);var o=Or(t,e,n);return o&&r.appendChild(o,i),{renderText:i}}function Ko(t,e){return(null!=t?t.toString():\"\")+e.suffix}function Zo(t,e,n,i){for(var r=0,o=0,a=0,s=0,l=0,c=null,u=null,h=!1,d=!1,f=null,p=0;p<e.length;p++){var g=e[p];if(g.nodeIndex=p,g.parent=c,g.bindingIndex=r,g.outputIndex=o,g.renderParent=u,a|=g.flags,l|=g.matchedQueryIds,g.element){var m=g.element;m.publicProviders=c?c.element.publicProviders:Object.create(null),m.allProviders=m.publicProviders,h=!1,d=!1,g.element.template&&(l|=g.element.template.nodeMatchedQueries)}if(Qo(c,g,e.length),r+=g.bindings.length,o+=g.outputs.length,!u&&3&g.flags&&(f=g),20224&g.flags){h||(h=!0,c.element.publicProviders=Object.create(c.element.publicProviders),c.element.allProviders=c.element.publicProviders);var v=0!=(32768&g.flags);0==(8192&g.flags)||v?c.element.publicProviders[cr(g.provider.token)]=g:(d||(d=!0,c.element.allProviders=Object.create(c.element.publicProviders)),c.element.allProviders[cr(g.provider.token)]=g),v&&(c.element.componentProvider=g)}if(c?(c.childFlags|=g.flags,c.directChildFlags|=g.flags,c.childMatchedQueries|=g.matchedQueryIds,g.element&&g.element.template&&(c.childMatchedQueries|=g.element.template.nodeMatchedQueries)):s|=g.flags,g.childCount>0)c=g,Jo(g)||(u=g);else for(;c&&p===c.nodeIndex+c.childCount;){var y=c.parent;y&&(y.childFlags|=c.childFlags,y.childMatchedQueries|=c.childMatchedQueries),u=(c=y)&&Jo(c)?c.renderParent:c}}return{factory:null,nodeFlags:a,rootNodeFlags:s,nodeMatchedQueries:l,flags:t,nodes:e,updateDirectives:n||sr,updateRenderer:i||sr,handleEvent:function(t,n,i,r){return e[n].element.handleEvent(t,i,r)},bindingCount:r,outputCount:o,lastRenderRootNode:f}}function Jo(t){return 0!=(1&t.flags)&&null===t.element.name}function Qo(t,e,n){var i=e.element&&e.element.template;if(i){if(!i.lastRenderRootNode)throw new Error(\"Illegal State: Embedded templates without nodes are not allowed!\");if(i.lastRenderRootNode&&16777216&i.lastRenderRootNode.flags)throw new Error(\"Illegal State: Last root node of a template can't have embedded views, at index \"+e.nodeIndex+\"!\")}if(20224&e.flags&&0==(1&(t?t.flags:0)))throw new Error(\"Illegal State: StaticProvider/Directive nodes need to be children of elements or anchors, at index \"+e.nodeIndex+\"!\");if(e.query){if(67108864&e.flags&&(!t||0==(16384&t.flags)))throw new Error(\"Illegal State: Content Query nodes need to be children of directives, at index \"+e.nodeIndex+\"!\");if(134217728&e.flags&&t)throw new Error(\"Illegal State: View Query nodes have to be top level nodes, at index \"+e.nodeIndex+\"!\")}if(e.childCount){var r=t?t.nodeIndex+t.childCount:n-1;if(e.nodeIndex<=r&&e.nodeIndex+e.childCount>r)throw new Error(\"Illegal State: childCount of node leads outside of parent, at index \"+e.nodeIndex+\"!\")}}function $o(t,e,n,i){var r=na(t.root,t.renderer,t,e,n);return ia(r,t.component,i),ra(r),r}function ta(t,e,n){var i=na(t,t.renderer,null,null,e);return ia(i,n,n),ra(i),i}function ea(t,e,n,i){var r,o=e.element.componentRendererType;return r=o?t.root.rendererFactory.createRenderer(i,o):t.root.renderer,na(t.root,r,t,e.element.componentProvider,n)}function na(t,e,n,i,r){var o=new Array(r.nodes.length),a=r.outputCount?new Array(r.outputCount):null;return{def:r,parent:n,viewContainerParent:null,parentNodeDef:i,context:null,component:null,nodes:o,state:13,root:t,renderer:e,oldValues:new Array(r.bindingCount),disposables:a,initIndex:-1}}function ia(t,e,n){t.component=e,t.context=n}function ra(t){var e;Cr(t)&&(e=$i(t.parent,t.parentNodeDef.parent.nodeIndex).renderElement);for(var n=t.def,i=t.nodes,r=0;r<n.nodes.length;r++){var o=n.nodes[r];ir.setCurrentNode(t,r);var a=void 0;switch(201347067&o.flags){case 1:var s=Hr(t,e,o),l=void 0;if(33554432&o.flags){var c=jr(o.element.componentView);l=ir.createComponentView(t,o,c,s)}Ur(t,l,o,s),a={renderElement:s,componentView:l,viewContainer:null,template:o.element.template?uo(t,o):void 0},16777216&o.flags&&(a.viewContainer=ao(t,o,a));break;case 2:a=qo(t,e,o);break;case 512:case 1024:case 2048:case 256:(a=i[r])||4096&o.flags||(a={instance:Oo(t,o)});break;case 16:a={instance:Po(t,o)};break;case 16384:(a=i[r])||(a={instance:jo(t,o)}),32768&o.flags&&ia($i(t,o.parent.nodeIndex).componentView,a.instance,a.instance);break;case 32:case 64:case 128:a={value:void 0};break;case 67108864:case 134217728:a=new pi;break;case 8:Xo(t,e,o),a=void 0}i[r]=a}fa(t,da.CreateViewNodes),va(t,201326592,268435456,0)}function oa(t){la(t),ir.updateDirectives(t,1),pa(t,da.CheckNoChanges),ir.updateRenderer(t,1),fa(t,da.CheckNoChanges),t.state&=-97}function aa(t){1&t.state?(t.state&=-2,t.state|=2):t.state&=-3,Zi(t,0,256),la(t),ir.updateDirectives(t,0),pa(t,da.CheckAndUpdate),va(t,67108864,536870912,0);var e=Zi(t,256,512);No(t,2097152|(e?1048576:0)),ir.updateRenderer(t,0),fa(t,da.CheckAndUpdate),va(t,134217728,536870912,0),No(t,8388608|((e=Zi(t,512,768))?4194304:0)),2&t.def.flags&&(t.state&=-9),t.state&=-97,Zi(t,768,1024)}function sa(t,e,n,i,r,o,a,s,l,c,h,d,f){return 0===n?function(t,e,n,i,r,o,a,s,l,c,u,h){switch(201347067&e.flags){case 1:return function(t,e,n,i,r,o,a,s,l,c,u,h){var d=e.bindings.length,f=!1;return d>0&&Vr(t,e,0,n)&&(f=!0),d>1&&Vr(t,e,1,i)&&(f=!0),d>2&&Vr(t,e,2,r)&&(f=!0),d>3&&Vr(t,e,3,o)&&(f=!0),d>4&&Vr(t,e,4,a)&&(f=!0),d>5&&Vr(t,e,5,s)&&(f=!0),d>6&&Vr(t,e,6,l)&&(f=!0),d>7&&Vr(t,e,7,c)&&(f=!0),d>8&&Vr(t,e,8,u)&&(f=!0),d>9&&Vr(t,e,9,h)&&(f=!0),f}(t,e,n,i,r,o,a,s,l,c,u,h);case 2:return function(t,e,n,i,r,o,a,s,l,c,u,h){var d=!1,f=e.bindings,p=f.length;if(p>0&&gr(t,e,0,n)&&(d=!0),p>1&&gr(t,e,1,i)&&(d=!0),p>2&&gr(t,e,2,r)&&(d=!0),p>3&&gr(t,e,3,o)&&(d=!0),p>4&&gr(t,e,4,a)&&(d=!0),p>5&&gr(t,e,5,s)&&(d=!0),p>6&&gr(t,e,6,l)&&(d=!0),p>7&&gr(t,e,7,c)&&(d=!0),p>8&&gr(t,e,8,u)&&(d=!0),p>9&&gr(t,e,9,h)&&(d=!0),d){var g=e.text.prefix;p>0&&(g+=Ko(n,f[0])),p>1&&(g+=Ko(i,f[1])),p>2&&(g+=Ko(r,f[2])),p>3&&(g+=Ko(o,f[3])),p>4&&(g+=Ko(a,f[4])),p>5&&(g+=Ko(s,f[5])),p>6&&(g+=Ko(l,f[6])),p>7&&(g+=Ko(c,f[7])),p>8&&(g+=Ko(u,f[8])),p>9&&(g+=Ko(h,f[9]));var m=Qi(t,e.nodeIndex).renderText;t.renderer.setValue(m,g)}return d}(t,e,n,i,r,o,a,s,l,c,u,h);case 16384:return function(t,e,n,i,r,o,a,s,l,c,u,h){var d=tr(t,e.nodeIndex),f=d.instance,p=!1,g=void 0,m=e.bindings.length;return m>0&&pr(t,e,0,n)&&(p=!0,g=Fo(t,d,e,0,n,g)),m>1&&pr(t,e,1,i)&&(p=!0,g=Fo(t,d,e,1,i,g)),m>2&&pr(t,e,2,r)&&(p=!0,g=Fo(t,d,e,2,r,g)),m>3&&pr(t,e,3,o)&&(p=!0,g=Fo(t,d,e,3,o,g)),m>4&&pr(t,e,4,a)&&(p=!0,g=Fo(t,d,e,4,a,g)),m>5&&pr(t,e,5,s)&&(p=!0,g=Fo(t,d,e,5,s,g)),m>6&&pr(t,e,6,l)&&(p=!0,g=Fo(t,d,e,6,l,g)),m>7&&pr(t,e,7,c)&&(p=!0,g=Fo(t,d,e,7,c,g)),m>8&&pr(t,e,8,u)&&(p=!0,g=Fo(t,d,e,8,u,g)),m>9&&pr(t,e,9,h)&&(p=!0,g=Fo(t,d,e,9,h,g)),g&&f.ngOnChanges(g),65536&e.flags&&Ji(t,256,e.nodeIndex)&&f.ngOnInit(),262144&e.flags&&f.ngDoCheck(),p}(t,e,n,i,r,o,a,s,l,c,u,h);case 32:case 64:case 128:return function(t,e,n,i,r,o,a,s,l,c,u,h){var d=e.bindings,f=!1,p=d.length;if(p>0&&gr(t,e,0,n)&&(f=!0),p>1&&gr(t,e,1,i)&&(f=!0),p>2&&gr(t,e,2,r)&&(f=!0),p>3&&gr(t,e,3,o)&&(f=!0),p>4&&gr(t,e,4,a)&&(f=!0),p>5&&gr(t,e,5,s)&&(f=!0),p>6&&gr(t,e,6,l)&&(f=!0),p>7&&gr(t,e,7,c)&&(f=!0),p>8&&gr(t,e,8,u)&&(f=!0),p>9&&gr(t,e,9,h)&&(f=!0),f){var g=er(t,e.nodeIndex),m=void 0;switch(201347067&e.flags){case 32:m=new Array(d.length),p>0&&(m[0]=n),p>1&&(m[1]=i),p>2&&(m[2]=r),p>3&&(m[3]=o),p>4&&(m[4]=a),p>5&&(m[5]=s),p>6&&(m[6]=l),p>7&&(m[7]=c),p>8&&(m[8]=u),p>9&&(m[9]=h);break;case 64:m={},p>0&&(m[d[0].name]=n),p>1&&(m[d[1].name]=i),p>2&&(m[d[2].name]=r),p>3&&(m[d[3].name]=o),p>4&&(m[d[4].name]=a),p>5&&(m[d[5].name]=s),p>6&&(m[d[6].name]=l),p>7&&(m[d[7].name]=c),p>8&&(m[d[8].name]=u),p>9&&(m[d[9].name]=h);break;case 128:var v=n;switch(p){case 1:m=v.transform(n);break;case 2:m=v.transform(i);break;case 3:m=v.transform(i,r);break;case 4:m=v.transform(i,r,o);break;case 5:m=v.transform(i,r,o,a);break;case 6:m=v.transform(i,r,o,a,s);break;case 7:m=v.transform(i,r,o,a,s,l);break;case 8:m=v.transform(i,r,o,a,s,l,c);break;case 9:m=v.transform(i,r,o,a,s,l,c,u);break;case 10:m=v.transform(i,r,o,a,s,l,c,u,h)}}g.value=m}return f}(t,e,n,i,r,o,a,s,l,c,u,h);default:throw\"unreachable\"}}(t,e,i,r,o,a,s,l,c,h,d,f):function(t,e,n){switch(201347067&e.flags){case 1:return function(t,e,n){for(var i=!1,r=0;r<n.length;r++)Vr(t,e,r,n[r])&&(i=!0);return i}(t,e,n);case 2:return function(t,e,n){for(var i=e.bindings,r=!1,o=0;o<n.length;o++)gr(t,e,o,n[o])&&(r=!0);if(r){var a=\"\";for(o=0;o<n.length;o++)a+=Ko(n[o],i[o]);a=e.text.prefix+a;var s=Qi(t,e.nodeIndex).renderText;t.renderer.setValue(s,a)}return r}(t,e,n);case 16384:return function(t,e,n){for(var i=tr(t,e.nodeIndex),r=i.instance,o=!1,a=void 0,s=0;s<n.length;s++)pr(t,e,s,n[s])&&(o=!0,a=Fo(t,i,e,s,n[s],a));return a&&r.ngOnChanges(a),65536&e.flags&&Ji(t,256,e.nodeIndex)&&r.ngOnInit(),262144&e.flags&&r.ngDoCheck(),o}(t,e,n);case 32:case 64:case 128:return function(t,e,n){for(var i=e.bindings,r=!1,o=0;o<n.length;o++)gr(t,e,o,n[o])&&(r=!0);if(r){var a=er(t,e.nodeIndex),s=void 0;switch(201347067&e.flags){case 32:s=n;break;case 64:for(s={},o=0;o<n.length;o++)s[i[o].name]=n[o];break;case 128:var l=n[0],c=n.slice(1);s=l.transform.apply(l,u(c))}a.value=s}return r}(t,e,n);default:throw\"unreachable\"}}(t,e,i)}function la(t){var e=t.def;if(4&e.nodeFlags)for(var n=0;n<e.nodes.length;n++){var i=e.nodes[n];if(4&i.flags){var r=$i(t,n).template._projectedViews;if(r)for(var o=0;o<r.length;o++){var a=r[o];a.state|=32,yr(a,t)}}else 0==(4&i.childFlags)&&(n+=i.childCount)}}function ca(t,e,n,i,r,o,a,s,l,c,u,h,d){return 0===n?function(t,e,n,i,r,o,a,s,l,c,u,h){var d=e.bindings.length;d>0&&mr(t,e,0,n),d>1&&mr(t,e,1,i),d>2&&mr(t,e,2,r),d>3&&mr(t,e,3,o),d>4&&mr(t,e,4,a),d>5&&mr(t,e,5,s),d>6&&mr(t,e,6,l),d>7&&mr(t,e,7,c),d>8&&mr(t,e,8,u),d>9&&mr(t,e,9,h)}(t,e,i,r,o,a,s,l,c,u,h,d):function(t,e,n){for(var i=0;i<n.length;i++)mr(t,e,i,n[i])}(t,e,i),!1}function ua(t,e){if(nr(t,e.nodeIndex).dirty)throw rr(ir.createDebugContext(t,e.nodeIndex),\"Query \"+e.query.id+\" not dirty\",\"Query \"+e.query.id+\" dirty\",0!=(1&t.state))}function ha(t){if(!(128&t.state)){if(pa(t,da.Destroy),fa(t,da.Destroy),No(t,131072),t.disposables)for(var e=0;e<t.disposables.length;e++)t.disposables[e]();!function(t){if(16&t.state){var e=_r(t);if(e){var n=e.template._projectedViews;n&&(eo(n,n.indexOf(t)),ir.dirtyParentQueries(t))}}}(t),t.renderer.destroyNode&&function(t){for(var e=t.def.nodes.length,n=0;n<e;n++){var i=t.def.nodes[n];1&i.flags?t.renderer.destroyNode($i(t,n).renderElement):2&i.flags?t.renderer.destroyNode(Qi(t,n).renderText):(67108864&i.flags||134217728&i.flags)&&nr(t,n).destroy()}}(t),Cr(t)&&t.renderer.destroy(),t.state|=128}}var da=function(t){return t[t.CreateViewNodes=0]=\"CreateViewNodes\",t[t.CheckNoChanges=1]=\"CheckNoChanges\",t[t.CheckNoChangesProjectedViews=2]=\"CheckNoChangesProjectedViews\",t[t.CheckAndUpdate=3]=\"CheckAndUpdate\",t[t.CheckAndUpdateProjectedViews=4]=\"CheckAndUpdateProjectedViews\",t[t.Destroy=5]=\"Destroy\",t}({});function fa(t,e){var n=t.def;if(33554432&n.nodeFlags)for(var i=0;i<n.nodes.length;i++){var r=n.nodes[i];33554432&r.flags?ga($i(t,i).componentView,e):0==(33554432&r.childFlags)&&(i+=r.childCount)}}function pa(t,e){var n=t.def;if(16777216&n.nodeFlags)for(var i=0;i<n.nodes.length;i++){var r=n.nodes[i];if(16777216&r.flags)for(var o=$i(t,i).viewContainer._embeddedViews,a=0;a<o.length;a++)ga(o[a],e);else 0==(16777216&r.childFlags)&&(i+=r.childCount)}}function ga(t,e){var n=t.state;switch(e){case da.CheckNoChanges:0==(128&n)&&(12==(12&n)?oa(t):64&n&&ma(t,da.CheckNoChangesProjectedViews));break;case da.CheckNoChangesProjectedViews:0==(128&n)&&(32&n?oa(t):64&n&&ma(t,e));break;case da.CheckAndUpdate:0==(128&n)&&(12==(12&n)?aa(t):64&n&&ma(t,da.CheckAndUpdateProjectedViews));break;case da.CheckAndUpdateProjectedViews:0==(128&n)&&(32&n?aa(t):64&n&&ma(t,e));break;case da.Destroy:ha(t);break;case da.CreateViewNodes:ra(t)}}function ma(t,e){pa(t,e),fa(t,e)}function va(t,e,n,i){if(t.def.nodeFlags&e&&t.def.nodeFlags&n)for(var r=t.def.nodes.length,o=0;o<r;o++){var a=t.def.nodes[o];if(a.flags&e&&a.flags&n)switch(ir.setCurrentNode(t,a.nodeIndex),i){case 0:Vo(t,a);break;case 1:ua(t,a)}a.childFlags&e&&a.childFlags&n||(o+=a.childCount)}}var ya=!1;function ba(t,e,n,i,r,o){var a=r.injector.get(De);return ta(wa(t,r,a,e,n),i,o)}function _a(t,e,n,i,r,o){var a=r.injector.get(De),s=wa(t,r,new $a(a),e,n),l=Aa(i);return Ja(Ha.create,ta,null,[s,l,o])}function wa(t,e,n,i,r){var o=e.injector.get(Ne),a=e.injector.get(Cn),s=n.createRenderer(null,null);return{ngModule:e,injector:t,projectableNodes:i,selectorOrNode:r,sanitizer:o,rendererFactory:n,renderer:s,errorHandler:a}}function xa(t,e,n,i){var r=Aa(n);return Ja(Ha.create,$o,null,[t,e,r,i])}function Ca(t,e,n,i){return n=Ta.get(e.element.componentProvider.provider.token)||Aa(n),Ja(Ha.create,ea,null,[t,e,n,i])}function Sa(t,e,n,i){return vo(t,e,n,function(t){var e=function(t){var e=!1,n=!1;return 0===ka.size?{hasOverrides:e,hasDeprecatedOverrides:n}:(t.providers.forEach(function(t){var i=ka.get(t.token);3840&t.flags&&i&&(e=!0,n=n||i.deprecatedBehavior)}),t.modules.forEach(function(t){Ea.forEach(function(i,r){_t(r).providedIn===t&&(e=!0,n=n||i.deprecatedBehavior)})}),{hasOverrides:e,hasDeprecatedOverrides:n})}(t),n=e.hasDeprecatedOverrides;return e.hasOverrides?(function(t){for(var e=0;e<t.providers.length;e++){var i=t.providers[e];n&&(i.flags|=4096);var r=ka.get(i.token);r&&(i.flags=-3841&i.flags|r.flags,i.deps=Tr(r.deps),i.value=r.value)}if(Ea.size>0){var o=new Set(t.modules);Ea.forEach(function(e,i){if(o.has(_t(i).providedIn)){var r={token:i,flags:e.flags|(n?4096:0),deps:Tr(e.deps),value:e.value,index:t.providers.length};t.providers.push(r),t.providersByKey[cr(i)]=r}})}}(t=t.factory(function(){return sr})),t):t}(i))}var ka=new Map,Ea=new Map,Ta=new Map;function Oa(t){var e;ka.set(t.token,t),\"function\"==typeof t.token&&(e=_t(t.token))&&\"function\"==typeof e.providedIn&&Ea.set(t.token,t)}function Pa(t,e){var n=jr(e.viewDefFactory),i=jr(n.nodes[0].element.componentView);Ta.set(t,i)}function ja(){ka.clear(),Ea.clear(),Ta.clear()}function Aa(t){if(0===ka.size)return t;var e=function(t){for(var e=[],n=null,i=0;i<t.nodes.length;i++){var r=t.nodes[i];1&r.flags&&(n=r),n&&3840&r.flags&&ka.has(r.provider.token)&&(e.push(n.nodeIndex),n=null)}return e}(t);if(0===e.length)return t;t=t.factory(function(){return sr});for(var n=0;n<e.length;n++)i(t,e[n]);return t;function i(t,e){for(var n=e+1;n<t.nodes.length;n++){var i=t.nodes[n];if(1&i.flags)return;if(3840&i.flags){var r=i.provider,o=ka.get(r.token);o&&(i.flags=-3841&i.flags|o.flags,r.deps=Tr(o.deps),r.value=o.value)}}}}function Ma(t,e,n,i,r,o,a,s,l,c,u,h,d){var f=t.def.nodes[e];return sa(t,f,n,i,r,o,a,s,l,c,u,h,d),224&f.flags?er(t,e).value:void 0}function Da(t,e,n,i,r,o,a,s,l,c,u,h,d){var f=t.def.nodes[e];return ca(t,f,n,i,r,o,a,s,l,c,u,h,d),224&f.flags?er(t,e).value:void 0}function Ia(t){return Ja(Ha.detectChanges,aa,null,[t])}function Ra(t){return Ja(Ha.checkNoChanges,oa,null,[t])}function La(t){return Ja(Ha.destroy,ha,null,[t])}var Fa,Na,Ba,Ha=function(t){return t[t.create=0]=\"create\",t[t.detectChanges=1]=\"detectChanges\",t[t.checkNoChanges=2]=\"checkNoChanges\",t[t.destroy=3]=\"destroy\",t[t.handleEvent=4]=\"handleEvent\",t}({});function Ua(t,e){Na=t,Ba=e}function za(t,e,n,i){return Ua(t,e),Ja(Ha.handleEvent,t.def.handleEvent,null,[t,e,n,i])}function Va(t,e){if(128&t.state)throw ar(Ha[Fa]);return Ua(t,Ya(t,0)),t.def.updateDirectives(function(t,n,i){for(var r=[],o=3;o<arguments.length;o++)r[o-3]=arguments[o];var a=t.def.nodes[n];return 0===e?Wa(t,a,i,r):Xa(t,a,i,r),16384&a.flags&&Ua(t,Ya(t,n)),224&a.flags?er(t,a.nodeIndex).value:void 0},t)}function Ga(t,e){if(128&t.state)throw ar(Ha[Fa]);return Ua(t,qa(t,0)),t.def.updateRenderer(function(t,n,i){for(var r=[],o=3;o<arguments.length;o++)r[o-3]=arguments[o];var a=t.def.nodes[n];return 0===e?Wa(t,a,i,r):Xa(t,a,i,r),3&a.flags&&Ua(t,qa(t,n)),224&a.flags?er(t,a.nodeIndex).value:void 0},t)}function Wa(t,e,n,i){if(sa.apply(void 0,u([t,e,n],i))){var r=1===n?i[0]:i;if(16384&e.flags){for(var o={},a=0;a<e.bindings.length;a++){var s=e.bindings[a],l=r[a];8&s.flags&&(o[(f=s.nonMinifiedName,\"ng-reflect-\"+f.replace(/[$@]/g,\"_\").replace(Yt,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return\"-\"+t[1].toLowerCase()}))]=qt(l))}var c=e.parent,h=$i(t,c.nodeIndex).renderElement;if(c.element.name)for(var d in o)null!=(l=o[d])?t.renderer.setAttribute(h,d,l):t.renderer.removeAttribute(h,d);else t.renderer.setValue(h,\"bindings=\"+JSON.stringify(o,null,2))}}var f}function Xa(t,e,n,i){ca.apply(void 0,u([t,e,n],i))}function Ya(t,e){for(var n=e;n<t.def.nodes.length;n++){var i=t.def.nodes[n];if(16384&i.flags&&i.bindings&&i.bindings.length)return n}return null}function qa(t,e){for(var n=e;n<t.def.nodes.length;n++){var i=t.def.nodes[n];if(3&i.flags&&i.bindings&&i.bindings.length)return n}return null}var Ka=function(){function t(t,e){this.view=t,this.nodeIndex=e,null==e&&(this.nodeIndex=e=0),this.nodeDef=t.def.nodes[e];for(var n=this.nodeDef,i=t;n&&0==(1&n.flags);)n=n.parent;if(!n)for(;!n&&i;)n=wr(i),i=i.parent;this.elDef=n,this.elView=i}return Object.defineProperty(t.prototype,\"elOrCompView\",{get:function(){return $i(this.elView,this.elDef.nodeIndex).componentView||this.view},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"injector\",{get:function(){return fo(this.elView,this.elDef)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"component\",{get:function(){return this.elOrCompView.component},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"context\",{get:function(){return this.elOrCompView.context},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"providerTokens\",{get:function(){var t=[];if(this.elDef)for(var e=this.elDef.nodeIndex+1;e<=this.elDef.nodeIndex+this.elDef.childCount;e++){var n=this.elView.def.nodes[e];20224&n.flags&&t.push(n.provider.token),e+=n.childCount}return t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"references\",{get:function(){var t={};if(this.elDef){Za(this.elView,this.elDef,t);for(var e=this.elDef.nodeIndex+1;e<=this.elDef.nodeIndex+this.elDef.childCount;e++){var n=this.elView.def.nodes[e];20224&n.flags&&Za(this.elView,n,t),e+=n.childCount}}return t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"componentRenderElement\",{get:function(){var t=function(t){for(;t&&!Cr(t);)t=t.parent;return t.parent?$i(t.parent,wr(t).nodeIndex):null}(this.elOrCompView);return t?t.renderElement:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"renderNode\",{get:function(){return 2&this.nodeDef.flags?xr(this.view,this.nodeDef):xr(this.elView,this.elDef)},enumerable:!0,configurable:!0}),t.prototype.logError=function(t){for(var e,n,i=[],r=1;r<arguments.length;r++)i[r-1]=arguments[r];2&this.nodeDef.flags?(e=this.view.def,n=this.nodeDef.nodeIndex):(e=this.elView.def,n=this.elDef.nodeIndex);var o=function(t,e){for(var n=-1,i=0;i<=e;i++)3&t.nodes[i].flags&&n++;return n}(e,n),a=-1;e.factory(function(){var e;return++a===o?(e=t.error).bind.apply(e,u([t],i)):sr}),a<o&&(t.error(\"Illegal state: the ViewDefinitionFactory did not call the logger!\"),t.error.apply(t,u(i)))},t}();function Za(t,e,n){for(var i in e.references)n[i]=Wo(t,e,e.references[i])}function Ja(t,e,n,i){var r=Fa,o=Na,a=Ba;try{Fa=t;var s=e.apply(n,i);return Na=o,Ba=a,Fa=r,s}catch(l){if(_n(l)||!Na)throw l;throw function(t,e){return t instanceof Error||(t=new Error(t.toString())),or(t,e),t}(l,Qa())}}function Qa(){return Na?new Ka(Na,Ba):null}var $a=function(){function t(t){this.delegate=t}return t.prototype.createRenderer=function(t,e){return new ts(this.delegate.createRenderer(t,e))},t.prototype.begin=function(){this.delegate.begin&&this.delegate.begin()},t.prototype.end=function(){this.delegate.end&&this.delegate.end()},t.prototype.whenRenderingDone=function(){return this.delegate.whenRenderingDone?this.delegate.whenRenderingDone():Promise.resolve(null)},t}(),ts=function(){function t(t){this.delegate=t,this.debugContextFactory=Qa,this.data=this.delegate.data}return t.prototype.createDebugContext=function(t){return this.debugContextFactory(t)},t.prototype.destroyNode=function(t){!function(t){Ei.delete(t.nativeNode)}(Ti(t)),this.delegate.destroyNode&&this.delegate.destroyNode(t)},t.prototype.destroy=function(){this.delegate.destroy()},t.prototype.createElement=function(t,e){var n=this.delegate.createElement(t,e),i=this.createDebugContext(n);if(i){var r=new ki(n,null,i);r.name=t,Oi(r)}return n},t.prototype.createComment=function(t){var e=this.delegate.createComment(t),n=this.createDebugContext(e);return n&&Oi(new Si(e,null,n)),e},t.prototype.createText=function(t){var e=this.delegate.createText(t),n=this.createDebugContext(e);return n&&Oi(new Si(e,null,n)),e},t.prototype.appendChild=function(t,e){var n=Ti(t),i=Ti(e);n&&i&&n instanceof ki&&n.addChild(i),this.delegate.appendChild(t,e)},t.prototype.insertBefore=function(t,e,n){var i=Ti(t),r=Ti(e),o=Ti(n);i&&r&&i instanceof ki&&i.insertBefore(o,r),this.delegate.insertBefore(t,e,n)},t.prototype.removeChild=function(t,e){var n=Ti(t),i=Ti(e);n&&i&&n instanceof ki&&n.removeChild(i),this.delegate.removeChild(t,e)},t.prototype.selectRootElement=function(t,e){var n=this.delegate.selectRootElement(t,e),i=Qa();return i&&Oi(new ki(n,null,i)),n},t.prototype.setAttribute=function(t,e,n,i){var r=Ti(t);r&&r instanceof ki&&(r.attributes[i?i+\":\"+e:e]=n),this.delegate.setAttribute(t,e,n,i)},t.prototype.removeAttribute=function(t,e,n){var i=Ti(t);i&&i instanceof ki&&(i.attributes[n?n+\":\"+e:e]=null),this.delegate.removeAttribute(t,e,n)},t.prototype.addClass=function(t,e){var n=Ti(t);n&&n instanceof ki&&(n.classes[e]=!0),this.delegate.addClass(t,e)},t.prototype.removeClass=function(t,e){var n=Ti(t);n&&n instanceof ki&&(n.classes[e]=!1),this.delegate.removeClass(t,e)},t.prototype.setStyle=function(t,e,n,i){var r=Ti(t);r&&r instanceof ki&&(r.styles[e]=n),this.delegate.setStyle(t,e,n,i)},t.prototype.removeStyle=function(t,e,n){var i=Ti(t);i&&i instanceof ki&&(i.styles[e]=null),this.delegate.removeStyle(t,e,n)},t.prototype.setProperty=function(t,e,n){var i=Ti(t);i&&i instanceof ki&&(i.properties[e]=n),this.delegate.setProperty(t,e,n)},t.prototype.listen=function(t,e,n){if(\"string\"!=typeof t){var i=Ti(t);i&&i.listeners.push(new Ci(e,n))}return this.delegate.listen(t,e,n)},t.prototype.parentNode=function(t){return this.delegate.parentNode(t)},t.prototype.nextSibling=function(t){return this.delegate.nextSibling(t)},t.prototype.setValue=function(t,e){return this.delegate.setValue(t,e)},t}();function es(t,e,n){return new ns(t,e,n)}var ns=function(t){function e(e,n,i){var r=t.call(this)||this;return r.moduleType=e,r._bootstrapComponents=n,r._ngModuleDefFactory=i,r}return r(e,t),e.prototype.create=function(t){!function(){if(!ya){ya=!0;var t=ze()?{setCurrentNode:Ua,createRootView:_a,createEmbeddedView:xa,createComponentView:Ca,createNgModuleRef:Sa,overrideProvider:Oa,overrideComponentView:Pa,clearOverrides:ja,checkAndUpdateView:Ia,checkNoChangesView:Ra,destroyView:La,createDebugContext:function(t,e){return new Ka(t,e)},handleEvent:za,updateDirectives:Va,updateRenderer:Ga}:{setCurrentNode:function(){},createRootView:ba,createEmbeddedView:$o,createComponentView:ea,createNgModuleRef:vo,overrideProvider:sr,overrideComponentView:sr,clearOverrides:sr,checkAndUpdateView:aa,checkNoChangesView:oa,destroyView:ha,createDebugContext:function(t,e){return new Ka(t,e)},handleEvent:function(t,e,n,i){return t.def.handleEvent(t,e,n,i)},updateDirectives:function(t,e){return t.def.updateDirectives(0===e?Ma:Da,t)},updateRenderer:function(t,e){return t.def.updateRenderer(0===e?Ma:Da,t)}};ir.setCurrentNode=t.setCurrentNode,ir.createRootView=t.createRootView,ir.createEmbeddedView=t.createEmbeddedView,ir.createComponentView=t.createComponentView,ir.createNgModuleRef=t.createNgModuleRef,ir.overrideProvider=t.overrideProvider,ir.overrideComponentView=t.overrideComponentView,ir.clearOverrides=t.clearOverrides,ir.checkAndUpdateView=t.checkAndUpdateView,ir.checkNoChangesView=t.checkNoChangesView,ir.destroyView=t.destroyView,ir.resolveDep=Ro,ir.createDebugContext=t.createDebugContext,ir.handleEvent=t.handleEvent,ir.updateDirectives=t.updateDirectives,ir.updateRenderer=t.updateRenderer,ir.dirtyParentQueries=zo}}();var e=function(t){var e=Array.from(t.providers),n=Array.from(t.modules),i={};for(var r in t.providersByKey)i[r]=t.providersByKey[r];return{factory:t.factory,isRoot:t.isRoot,providers:e,modules:n,providersByKey:i}}(jr(this._ngModuleDefFactory));return ir.createNgModuleRef(this.moduleType,t||oe.NULL,this._bootstrapComponents,e)},e}(Pe),is=function(){return function(){}}(),rs=function(){return function(){this.title=\"koka\"}}(),os=function(){return function(){}}(),as=new wt(\"Location Initialized\"),ss=function(){return function(){}}(),ls=new wt(\"appBaseHref\"),cs=function(){function t(t){var n=this;this._subject=new hn,this._platformStrategy=t;var i=this._platformStrategy.getBaseHref();this._baseHref=e.stripTrailingSlash(us(i)),this._platformStrategy.onPopState(function(t){n._subject.emit({url:n.path(!0),pop:!0,state:t.state,type:t.type})})}var e;return e=t,t.prototype.path=function(t){return void 0===t&&(t=!1),this.normalize(this._platformStrategy.path(t))},t.prototype.isCurrentPathEqualTo=function(t,n){return void 0===n&&(n=\"\"),this.path()==this.normalize(t+e.normalizeQueryParams(n))},t.prototype.normalize=function(t){return e.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,us(t)))},t.prototype.prepareExternalUrl=function(t){return t&&\"/\"!==t[0]&&(t=\"/\"+t),this._platformStrategy.prepareExternalUrl(t)},t.prototype.go=function(t,e,n){void 0===e&&(e=\"\"),void 0===n&&(n=null),this._platformStrategy.pushState(n,\"\",t,e)},t.prototype.replaceState=function(t,e,n){void 0===e&&(e=\"\"),void 0===n&&(n=null),this._platformStrategy.replaceState(n,\"\",t,e)},t.prototype.forward=function(){this._platformStrategy.forward()},t.prototype.back=function(){this._platformStrategy.back()},t.prototype.subscribe=function(t,e,n){return this._subject.subscribe({next:t,error:e,complete:n})},t.normalizeQueryParams=function(t){return t&&\"?\"!==t[0]?\"?\"+t:t},t.joinWithSlash=function(t,e){if(0==t.length)return e;if(0==e.length)return t;var n=0;return t.endsWith(\"/\")&&n++,e.startsWith(\"/\")&&n++,2==n?t+e.substring(1):1==n?t+e:t+\"/\"+e},t.stripTrailingSlash=function(t){var e=t.match(/#|\\?|$/),n=e&&e.index||t.length;return t.slice(0,n-(\"/\"===t[n-1]?1:0))+t.slice(n)},t}();function us(t){return t.replace(/\\/index.html$/,\"\")}var hs=function(t){function e(e,n){var i=t.call(this)||this;return i._platformLocation=e,i._baseHref=\"\",null!=n&&(i._baseHref=n),i}return r(e,t),e.prototype.onPopState=function(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)},e.prototype.getBaseHref=function(){return this._baseHref},e.prototype.path=function(t){void 0===t&&(t=!1);var e=this._platformLocation.hash;return null==e&&(e=\"#\"),e.length>0?e.substring(1):e},e.prototype.prepareExternalUrl=function(t){var e=cs.joinWithSlash(this._baseHref,t);return e.length>0?\"#\"+e:e},e.prototype.pushState=function(t,e,n,i){var r=this.prepareExternalUrl(n+cs.normalizeQueryParams(i));0==r.length&&(r=this._platformLocation.pathname),this._platformLocation.pushState(t,e,r)},e.prototype.replaceState=function(t,e,n,i){var r=this.prepareExternalUrl(n+cs.normalizeQueryParams(i));0==r.length&&(r=this._platformLocation.pathname),this._platformLocation.replaceState(t,e,r)},e.prototype.forward=function(){this._platformLocation.forward()},e.prototype.back=function(){this._platformLocation.back()},e}(ss),ds=function(t){function e(e,n){var i=t.call(this)||this;if(i._platformLocation=e,null==n&&(n=i._platformLocation.getBaseHrefFromDOM()),null==n)throw new Error(\"No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.\");return i._baseHref=n,i}return r(e,t),e.prototype.onPopState=function(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)},e.prototype.getBaseHref=function(){return this._baseHref},e.prototype.prepareExternalUrl=function(t){return cs.joinWithSlash(this._baseHref,t)},e.prototype.path=function(t){void 0===t&&(t=!1);var e=this._platformLocation.pathname+cs.normalizeQueryParams(this._platformLocation.search),n=this._platformLocation.hash;return n&&t?\"\"+e+n:e},e.prototype.pushState=function(t,e,n,i){var r=this.prepareExternalUrl(n+cs.normalizeQueryParams(i));this._platformLocation.pushState(t,e,r)},e.prototype.replaceState=function(t,e,n,i){var r=this.prepareExternalUrl(n+cs.normalizeQueryParams(i));this._platformLocation.replaceState(t,e,r)},e.prototype.forward=function(){this._platformLocation.forward()},e.prototype.back=function(){this._platformLocation.back()},e}(ss),fs=void 0,ps=[\"en\",[[\"a\",\"p\"],[\"AM\",\"PM\"],fs],[[\"AM\",\"PM\"],fs,fs],[[\"S\",\"M\",\"T\",\"W\",\"T\",\"F\",\"S\"],[\"Sun\",\"Mon\",\"Tue\",\"Wed\",\"Thu\",\"Fri\",\"Sat\"],[\"Sunday\",\"Monday\",\"Tuesday\",\"Wednesday\",\"Thursday\",\"Friday\",\"Saturday\"],[\"Su\",\"Mo\",\"Tu\",\"We\",\"Th\",\"Fr\",\"Sa\"]],fs,[[\"J\",\"F\",\"M\",\"A\",\"M\",\"J\",\"J\",\"A\",\"S\",\"O\",\"N\",\"D\"],[\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"May\",\"Jun\",\"Jul\",\"Aug\",\"Sep\",\"Oct\",\"Nov\",\"Dec\"],[\"January\",\"February\",\"March\",\"April\",\"May\",\"June\",\"July\",\"August\",\"September\",\"October\",\"November\",\"December\"]],fs,[[\"B\",\"A\"],[\"BC\",\"AD\"],[\"Before Christ\",\"Anno Domini\"]],0,[6,0],[\"M/d/yy\",\"MMM d, y\",\"MMMM d, y\",\"EEEE, MMMM d, y\"],[\"h:mm a\",\"h:mm:ss a\",\"h:mm:ss a z\",\"h:mm:ss a zzzz\"],[\"{1}, {0}\",fs,\"{1} 'at' {0}\",fs],[\".\",\",\",\";\",\"%\",\"+\",\"-\",\"E\",\"\\xd7\",\"\\u2030\",\"\\u221e\",\"NaN\",\":\"],[\"#,##0.###\",\"#,##0%\",\"\\xa4#,##0.00\",\"#E0\"],\"$\",\"US Dollar\",{},function(t){var e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\\.?/,\"\").length;return 1===e&&0===n?1:5}],gs={},ms=function(t){return t[t.Zero=0]=\"Zero\",t[t.One=1]=\"One\",t[t.Two=2]=\"Two\",t[t.Few=3]=\"Few\",t[t.Many=4]=\"Many\",t[t.Other=5]=\"Other\",t}({}),vs=new wt(\"UseV4Plurals\"),ys=function(){return function(){}}(),bs=function(t){function e(e,n){var i=t.call(this)||this;return i.locale=e,i.deprecatedPluralFn=n,i}return r(e,t),e.prototype.getPluralCategory=function(t,e){switch(this.deprecatedPluralFn?this.deprecatedPluralFn(e||this.locale,t):function(t){return function(t){var e=t.toLowerCase().replace(/_/g,\"-\"),n=gs[e];if(n)return n;var i=e.split(\"-\")[0];if(n=gs[i])return n;if(\"en\"===i)return ps;throw new Error('Missing locale data for the locale \"'+t+'\".')}(t)[18]}(e||this.locale)(t)){case ms.Zero:return\"zero\";case ms.One:return\"one\";case ms.Two:return\"two\";case ms.Few:return\"few\";case ms.Many:return\"many\";default:return\"other\"}},e}(ys),_s=function(){return function(){}}(),ws=new wt(\"DocumentToken\"),xs=\"server\",Cs=function(){function t(){}return t.ngInjectableDef=bt({providedIn:\"root\",factory:function(){return new Ss(Xt(ws),window,Xt(Cn))}}),t}(),Ss=function(){function t(t,e,n){this.document=t,this.window=e,this.errorHandler=n,this.offset=function(){return[0,0]}}return t.prototype.setOffset=function(t){this.offset=Array.isArray(t)?function(){return t}:t},t.prototype.getScrollPosition=function(){return this.supportScrollRestoration()?[this.window.scrollX,this.window.scrollY]:[0,0]},t.prototype.scrollToPosition=function(t){this.supportScrollRestoration()&&this.window.scrollTo(t[0],t[1])},t.prototype.scrollToAnchor=function(t){if(this.supportScrollRestoration()){t=this.window.CSS&&this.window.CSS.escape?this.window.CSS.escape(t):t.replace(/(\\\"|\\'\\ |:|\\.|\\[|\\]|,|=)/g,\"\\\\$1\");try{var e=this.document.querySelector(\"#\"+t);if(e)return void this.scrollToElement(e);var n=this.document.querySelector(\"[name='\"+t+\"']\");if(n)return void this.scrollToElement(n)}catch(i){this.errorHandler.handleError(i)}}},t.prototype.setHistoryScrollRestoration=function(t){if(this.supportScrollRestoration()){var e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}},t.prototype.scrollToElement=function(t){var e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,i=e.top+this.window.pageYOffset,r=this.offset();this.window.scrollTo(n-r[0],i-r[1])},t.prototype.supportScrollRestoration=function(){try{return!!this.window&&!!this.window.scrollTo}catch(t){return!1}},t}(),ks=new D(function(t){return t.complete()});function Es(t){return t?function(t){return new D(function(e){return t.schedule(function(){return e.complete()})})}(t):ks}function Ts(t){var e=new D(function(e){e.next(t),e.complete()});return e._isScalar=!0,e.value=t,e}function Os(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t[t.length-1];switch(U(n)?t.pop():n=void 0,t.length){case 0:return Es(n);case 1:return n?it(t,n):Ts(t[0]);default:return it(t,n)}}var Ps=function(t){function e(e){var n=t.call(this)||this;return n._value=e,n}return r(e,t),Object.defineProperty(e.prototype,\"value\",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),e.prototype._subscribe=function(e){var n=t.prototype._subscribe.call(this,e);return n&&!n.closed&&e.next(this._value),n},e.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new L;return this._value},e.prototype.next=function(e){t.prototype.next.call(this,this._value=e)},e}(B);function js(){return Error.call(this),this.message=\"no elements in sequence\",this.name=\"EmptyError\",this}js.prototype=Object.create(Error.prototype);var As=js,Ms={},Ds=function(){function t(t){this.resultSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new Is(t,this.resultSelector))},t}(),Is=function(t){function e(e,n){var i=t.call(this,e)||this;return i.resultSelector=n,i.active=0,i.values=[],i.observables=[],i}return r(e,t),e.prototype._next=function(t){this.values.push(Ms),this.observables.push(t)},e.prototype._complete=function(){var t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(var n=0;n<e;n++){var i=t[n];this.add(Q(this,i,i,n))}}},e.prototype.notifyComplete=function(t){0==(this.active-=1)&&this.destination.complete()},e.prototype.notifyNext=function(t,e,n,i,r){var o=this.values,a=this.toRespond?o[n]===Ms?--this.toRespond:this.toRespond:0;o[n]=e,0===a&&(this.resultSelector?this._tryResultSelector(o):this.destination.next(o.slice()))},e.prototype._tryResultSelector=function(t){var e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)},e}($);function Rs(t){return new D(function(e){var n;try{n=t()}catch(i){return void e.error(i)}return(n?rt(n):Es()).subscribe(e)})}function Ls(){return ct(1)}function Fs(t,e){return function(n){return n.lift(new Ns(t,e))}}var Ns=function(){function t(t,e){this.predicate=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new Bs(t,this.predicate,this.thisArg))},t}(),Bs=function(t){function e(e,n,i){var r=t.call(this,e)||this;return r.predicate=n,r.thisArg=i,r.count=0,r}return r(e,t),e.prototype._next=function(t){var e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)},e}(T);function Hs(){return Error.call(this),this.message=\"argument out of range\",this.name=\"ArgumentOutOfRangeError\",this}Hs.prototype=Object.create(Error.prototype);var Us=Hs;function zs(t){return function(e){return 0===t?Es():e.lift(new Vs(t))}}var Vs=function(){function t(t){if(this.total=t,this.total<0)throw new Us}return t.prototype.call=function(t,e){return e.subscribe(new Gs(t,this.total))},t}(),Gs=function(t){function e(e,n){var i=t.call(this,e)||this;return i.total=n,i.ring=new Array,i.count=0,i}return r(e,t),e.prototype._next=function(t){var e=this.ring,n=this.total,i=this.count++;e.length<n?e.push(t):e[i%n]=t},e.prototype._complete=function(){var t=this.destination,e=this.count;if(e>0)for(var n=this.count>=this.total?this.total:this.count,i=this.ring,r=0;r<n;r++){var o=e++%n;t.next(i[o])}t.complete()},e}(T);function Ws(t,e,n){return function(i){return i.lift(new Xs(t,e,n))}}var Xs=function(){function t(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}return t.prototype.call=function(t,e){return e.subscribe(new Ys(t,this.nextOrObserver,this.error,this.complete))},t}(),Ys=function(t){function e(e,n,i,r){var o=t.call(this,e)||this;return o._tapNext=j,o._tapError=j,o._tapComplete=j,o._tapError=i||j,o._tapComplete=r||j,f(n)?(o._context=o,o._tapNext=n):n&&(o._context=n,o._tapNext=n.next||j,o._tapError=n.error||j,o._tapComplete=n.complete||j),o}return r(e,t),e.prototype._next=function(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)},e.prototype._error=function(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)},e.prototype._complete=function(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()},e}(T),qs=function(t){return void 0===t&&(t=Ks),Ws({hasValue:!1,next:function(){this.hasValue=!0},complete:function(){if(!this.hasValue)throw t()}})};function Ks(){return new As}function Zs(t){return void 0===t&&(t=null),function(e){return e.lift(new Js(t))}}var Js=function(){function t(t){this.defaultValue=t}return t.prototype.call=function(t,e){return e.subscribe(new Qs(t,this.defaultValue))},t}(),Qs=function(t){function e(e,n){var i=t.call(this,e)||this;return i.defaultValue=n,i.isEmpty=!0,i}return r(e,t),e.prototype._next=function(t){this.isEmpty=!1,this.destination.next(t)},e.prototype._complete=function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()},e}(T);function $s(t,e){var n=arguments.length>=2;return function(i){return i.pipe(t?Fs(function(e,n){return t(e,n,i)}):lt,zs(1),n?Zs(e):qs(function(){return new As}))}}function tl(t){return function(e){var n=new el(t),i=e.lift(n);return n.caught=i}}var el=function(){function t(t){this.selector=t}return t.prototype.call=function(t,e){return e.subscribe(new nl(t,this.selector,this.caught))},t}(),nl=function(t){function e(e,n,i){var r=t.call(this,e)||this;return r.selector=n,r.caught=i,r}return r(e,t),e.prototype.error=function(e){if(!this.isStopped){var n=void 0;try{n=this.selector(e,this.caught)}catch(r){return void t.prototype.error.call(this,r)}this._unsubscribeAndRecycle();var i=new z(this,void 0,void 0);this.add(i),Q(this,n,void 0,void 0,i)}},e}($);function il(t){return function(e){return 0===t?Es():e.lift(new rl(t))}}var rl=function(){function t(t){if(this.total=t,this.total<0)throw new Us}return t.prototype.call=function(t,e){return e.subscribe(new ol(t,this.total))},t}(),ol=function(t){function e(e,n){var i=t.call(this,e)||this;return i.total=n,i.count=0,i}return r(e,t),e.prototype._next=function(t){var e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))},e}(T);function al(t,e){var n=arguments.length>=2;return function(i){return i.pipe(t?Fs(function(e,n){return t(e,n,i)}):lt,il(1),n?Zs(e):qs(function(){return new As}))}}var sl=function(){function t(t,e,n){this.predicate=t,this.thisArg=e,this.source=n}return t.prototype.call=function(t,e){return e.subscribe(new ll(t,this.predicate,this.thisArg,this.source))},t}(),ll=function(t){function e(e,n,i,r){var o=t.call(this,e)||this;return o.predicate=n,o.thisArg=i,o.source=r,o.index=0,o.thisArg=i||o,o}return r(e,t),e.prototype.notifyComplete=function(t){this.destination.next(t),this.destination.complete()},e.prototype._next=function(t){var e=!1;try{e=this.predicate.call(this.thisArg,t,this.index++,this.source)}catch(n){return void this.destination.error(n)}e||this.notifyComplete(!1)},e.prototype._complete=function(){this.notifyComplete(!0)},e}(T);function cl(t,e){return\"function\"==typeof e?function(n){return n.pipe(cl(function(n,i){return rt(t(n,i)).pipe(tt(function(t,r){return e(n,t,i,r)}))}))}:function(e){return e.lift(new ul(t))}}var ul=function(){function t(t){this.project=t}return t.prototype.call=function(t,e){return e.subscribe(new hl(t,this.project))},t}(),hl=function(t){function e(e,n){var i=t.call(this,e)||this;return i.project=n,i.index=0,i}return r(e,t),e.prototype._next=function(t){var e,n=this.index++;try{e=this.project(t,n)}catch(i){return void this.destination.error(i)}this._innerSub(e,t,n)},e.prototype._innerSub=function(t,e,n){var i=this.innerSubscription;i&&i.unsubscribe();var r=new z(this,void 0,void 0);this.destination.add(r),this.innerSubscription=Q(this,t,e,n,r)},e.prototype._complete=function(){var e=this.innerSubscription;e&&!e.closed||t.prototype._complete.call(this),this.unsubscribe()},e.prototype._unsubscribe=function(){this.innerSubscription=null},e.prototype.notifyComplete=function(e){this.destination.remove(e),this.innerSubscription=null,this.isStopped&&t.prototype._complete.call(this)},e.prototype.notifyNext=function(t,e,n,i,r){this.destination.next(e)},e}($);function dl(t,e){var n=!1;return arguments.length>=2&&(n=!0),function(i){return i.lift(new fl(t,e,n))}}var fl=function(){function t(t,e,n){void 0===n&&(n=!1),this.accumulator=t,this.seed=e,this.hasSeed=n}return t.prototype.call=function(t,e){return e.subscribe(new pl(t,this.accumulator,this.seed,this.hasSeed))},t}(),pl=function(t){function e(e,n,i,r){var o=t.call(this,e)||this;return o.accumulator=n,o._seed=i,o.hasSeed=r,o.index=0,o}return r(e,t),Object.defineProperty(e.prototype,\"seed\",{get:function(){return this._seed},set:function(t){this.hasSeed=!0,this._seed=t},enumerable:!0,configurable:!0}),e.prototype._next=function(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)},e.prototype._tryNext=function(t){var e,n=this.index++;try{e=this.accumulator(this.seed,t,n)}catch(i){this.destination.error(i)}this.seed=e,this.destination.next(e)},e}(T);function gl(t,e){return ot(t,e,1)}var ml=function(){function t(t){this.callback=t}return t.prototype.call=function(t,e){return e.subscribe(new vl(t,this.callback))},t}(),vl=function(t){function e(e,n){var i=t.call(this,e)||this;return i.add(new _(n)),i}return r(e,t),e}(T),yl=null;function bl(){return yl}var _l,wl={class:\"className\",innerHtml:\"innerHTML\",readonly:\"readOnly\",tabindex:\"tabIndex\"},xl={\"\\b\":\"Backspace\",\"\\t\":\"Tab\",\"\\x7f\":\"Delete\",\"\\x1b\":\"Escape\",Del:\"Delete\",Esc:\"Escape\",Left:\"ArrowLeft\",Right:\"ArrowRight\",Up:\"ArrowUp\",Down:\"ArrowDown\",Menu:\"ContextMenu\",Scroll:\"ScrollLock\",Win:\"OS\"},Cl={A:\"1\",B:\"2\",C:\"3\",D:\"4\",E:\"5\",F:\"6\",G:\"7\",H:\"8\",I:\"9\",J:\"*\",K:\"+\",M:\"-\",N:\".\",O:\"/\",\"`\":\"0\",\"\\x90\":\"NumLock\"};Tt.Node&&(_l=Tt.Node.prototype.contains||function(t){return!!(16&this.compareDocumentPosition(t))});var Sl,kl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.parse=function(t){throw new Error(\"parse not implemented\")},e.makeCurrent=function(){var t;t=new e,yl||(yl=t)},e.prototype.hasProperty=function(t,e){return e in t},e.prototype.setProperty=function(t,e,n){t[e]=n},e.prototype.getProperty=function(t,e){return t[e]},e.prototype.invoke=function(t,e,n){var i;(i=t)[e].apply(i,u(n))},e.prototype.logError=function(t){window.console&&(console.error?console.error(t):console.log(t))},e.prototype.log=function(t){window.console&&window.console.log&&window.console.log(t)},e.prototype.logGroup=function(t){window.console&&window.console.group&&window.console.group(t)},e.prototype.logGroupEnd=function(){window.console&&window.console.groupEnd&&window.console.groupEnd()},Object.defineProperty(e.prototype,\"attrToPropMap\",{get:function(){return wl},enumerable:!0,configurable:!0}),e.prototype.contains=function(t,e){return _l.call(t,e)},e.prototype.querySelector=function(t,e){return t.querySelector(e)},e.prototype.querySelectorAll=function(t,e){return t.querySelectorAll(e)},e.prototype.on=function(t,e,n){t.addEventListener(e,n,!1)},e.prototype.onAndCancel=function(t,e,n){return t.addEventListener(e,n,!1),function(){t.removeEventListener(e,n,!1)}},e.prototype.dispatchEvent=function(t,e){t.dispatchEvent(e)},e.prototype.createMouseEvent=function(t){var e=this.getDefaultDocument().createEvent(\"MouseEvent\");return e.initEvent(t,!0,!0),e},e.prototype.createEvent=function(t){var e=this.getDefaultDocument().createEvent(\"Event\");return e.initEvent(t,!0,!0),e},e.prototype.preventDefault=function(t){t.preventDefault(),t.returnValue=!1},e.prototype.isPrevented=function(t){return t.defaultPrevented||null!=t.returnValue&&!t.returnValue},e.prototype.getInnerHTML=function(t){return t.innerHTML},e.prototype.getTemplateContent=function(t){return\"content\"in t&&this.isTemplateElement(t)?t.content:null},e.prototype.getOuterHTML=function(t){return t.outerHTML},e.prototype.nodeName=function(t){return t.nodeName},e.prototype.nodeValue=function(t){return t.nodeValue},e.prototype.type=function(t){return t.type},e.prototype.content=function(t){return this.hasProperty(t,\"content\")?t.content:t},e.prototype.firstChild=function(t){return t.firstChild},e.prototype.nextSibling=function(t){return t.nextSibling},e.prototype.parentElement=function(t){return t.parentNode},e.prototype.childNodes=function(t){return t.childNodes},e.prototype.childNodesAsList=function(t){for(var e=t.childNodes,n=new Array(e.length),i=0;i<e.length;i++)n[i]=e[i];return n},e.prototype.clearNodes=function(t){for(;t.firstChild;)t.removeChild(t.firstChild)},e.prototype.appendChild=function(t,e){t.appendChild(e)},e.prototype.removeChild=function(t,e){t.removeChild(e)},e.prototype.replaceChild=function(t,e,n){t.replaceChild(e,n)},e.prototype.remove=function(t){return t.parentNode&&t.parentNode.removeChild(t),t},e.prototype.insertBefore=function(t,e,n){t.insertBefore(n,e)},e.prototype.insertAllBefore=function(t,e,n){n.forEach(function(n){return t.insertBefore(n,e)})},e.prototype.insertAfter=function(t,e,n){t.insertBefore(n,e.nextSibling)},e.prototype.setInnerHTML=function(t,e){t.innerHTML=e},e.prototype.getText=function(t){return t.textContent},e.prototype.setText=function(t,e){t.textContent=e},e.prototype.getValue=function(t){return t.value},e.prototype.setValue=function(t,e){t.value=e},e.prototype.getChecked=function(t){return t.checked},e.prototype.setChecked=function(t,e){t.checked=e},e.prototype.createComment=function(t){return this.getDefaultDocument().createComment(t)},e.prototype.createTemplate=function(t){var e=this.getDefaultDocument().createElement(\"template\");return e.innerHTML=t,e},e.prototype.createElement=function(t,e){return(e=e||this.getDefaultDocument()).createElement(t)},e.prototype.createElementNS=function(t,e,n){return(n=n||this.getDefaultDocument()).createElementNS(t,e)},e.prototype.createTextNode=function(t,e){return(e=e||this.getDefaultDocument()).createTextNode(t)},e.prototype.createScriptTag=function(t,e,n){var i=(n=n||this.getDefaultDocument()).createElement(\"SCRIPT\");return i.setAttribute(t,e),i},e.prototype.createStyleElement=function(t,e){var n=(e=e||this.getDefaultDocument()).createElement(\"style\");return this.appendChild(n,this.createTextNode(t,e)),n},e.prototype.createShadowRoot=function(t){return t.createShadowRoot()},e.prototype.getShadowRoot=function(t){return t.shadowRoot},e.prototype.getHost=function(t){return t.host},e.prototype.clone=function(t){return t.cloneNode(!0)},e.prototype.getElementsByClassName=function(t,e){return t.getElementsByClassName(e)},e.prototype.getElementsByTagName=function(t,e){return t.getElementsByTagName(e)},e.prototype.classList=function(t){return Array.prototype.slice.call(t.classList,0)},e.prototype.addClass=function(t,e){t.classList.add(e)},e.prototype.removeClass=function(t,e){t.classList.remove(e)},e.prototype.hasClass=function(t,e){return t.classList.contains(e)},e.prototype.setStyle=function(t,e,n){t.style[e]=n},e.prototype.removeStyle=function(t,e){t.style[e]=\"\"},e.prototype.getStyle=function(t,e){return t.style[e]},e.prototype.hasStyle=function(t,e,n){var i=this.getStyle(t,e)||\"\";return n?i==n:i.length>0},e.prototype.tagName=function(t){return t.tagName},e.prototype.attributeMap=function(t){for(var e=new Map,n=t.attributes,i=0;i<n.length;i++){var r=n.item(i);e.set(r.name,r.value)}return e},e.prototype.hasAttribute=function(t,e){return t.hasAttribute(e)},e.prototype.hasAttributeNS=function(t,e,n){return t.hasAttributeNS(e,n)},e.prototype.getAttribute=function(t,e){return t.getAttribute(e)},e.prototype.getAttributeNS=function(t,e,n){return t.getAttributeNS(e,n)},e.prototype.setAttribute=function(t,e,n){t.setAttribute(e,n)},e.prototype.setAttributeNS=function(t,e,n,i){t.setAttributeNS(e,n,i)},e.prototype.removeAttribute=function(t,e){t.removeAttribute(e)},e.prototype.removeAttributeNS=function(t,e,n){t.removeAttributeNS(e,n)},e.prototype.templateAwareRoot=function(t){return this.isTemplateElement(t)?this.content(t):t},e.prototype.createHtmlDocument=function(){return document.implementation.createHTMLDocument(\"fakeTitle\")},e.prototype.getDefaultDocument=function(){return document},e.prototype.getBoundingClientRect=function(t){try{return t.getBoundingClientRect()}catch(e){return{top:0,bottom:0,left:0,right:0,width:0,height:0}}},e.prototype.getTitle=function(t){return t.title},e.prototype.setTitle=function(t,e){t.title=e||\"\"},e.prototype.elementMatches=function(t,e){return!!this.isElementNode(t)&&(t.matches&&t.matches(e)||t.msMatchesSelector&&t.msMatchesSelector(e)||t.webkitMatchesSelector&&t.webkitMatchesSelector(e))},e.prototype.isTemplateElement=function(t){return this.isElementNode(t)&&\"TEMPLATE\"===t.nodeName},e.prototype.isTextNode=function(t){return t.nodeType===Node.TEXT_NODE},e.prototype.isCommentNode=function(t){return t.nodeType===Node.COMMENT_NODE},e.prototype.isElementNode=function(t){return t.nodeType===Node.ELEMENT_NODE},e.prototype.hasShadowRoot=function(t){return null!=t.shadowRoot&&t instanceof HTMLElement},e.prototype.isShadowRoot=function(t){return t instanceof DocumentFragment},e.prototype.importIntoDoc=function(t){return document.importNode(this.templateAwareRoot(t),!0)},e.prototype.adoptNode=function(t){return document.adoptNode(t)},e.prototype.getHref=function(t){return t.getAttribute(\"href\")},e.prototype.getEventKey=function(t){var e=t.key;if(null==e){if(null==(e=t.keyIdentifier))return\"Unidentified\";e.startsWith(\"U+\")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&Cl.hasOwnProperty(e)&&(e=Cl[e]))}return xl[e]||e},e.prototype.getGlobalEventTarget=function(t,e){return\"window\"===e?window:\"document\"===e?t:\"body\"===e?t.body:null},e.prototype.getHistory=function(){return window.history},e.prototype.getLocation=function(){return window.location},e.prototype.getBaseHref=function(t){var e,n=El||(El=document.querySelector(\"base\"))?El.getAttribute(\"href\"):null;return null==n?null:(e=n,Sl||(Sl=document.createElement(\"a\")),Sl.setAttribute(\"href\",e),\"/\"===Sl.pathname.charAt(0)?Sl.pathname:\"/\"+Sl.pathname)},e.prototype.resetBaseElement=function(){El=null},e.prototype.getUserAgent=function(){return window.navigator.userAgent},e.prototype.setData=function(t,e,n){this.setAttribute(t,\"data-\"+e,n)},e.prototype.getData=function(t,e){return this.getAttribute(t,\"data-\"+e)},e.prototype.getComputedStyle=function(t){return getComputedStyle(t)},e.prototype.supportsWebAnimation=function(){return\"function\"==typeof Element.prototype.animate},e.prototype.performanceNow=function(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()},e.prototype.supportsCookies=function(){return!0},e.prototype.getCookie=function(t){return function(t,e){var n,i;e=encodeURIComponent(e);try{for(var r=l(t.split(\";\")),o=r.next();!o.done;o=r.next()){var a=o.value,s=a.indexOf(\"=\"),u=c(-1==s?[a,\"\"]:[a.slice(0,s),a.slice(s+1)],2),h=u[1];if(u[0].trim()===e)return decodeURIComponent(h)}}catch(d){n={error:d}}finally{try{o&&!o.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}return null}(document.cookie,t)},e.prototype.setCookie=function(t,e){document.cookie=encodeURIComponent(t)+\"=\"+encodeURIComponent(e)},e}(function(t){function e(){var e=t.call(this)||this;e._animationPrefix=null,e._transitionEnd=null;try{var n=e.createElement(\"div\",document);if(null!=e.getStyle(n,\"animationName\"))e._animationPrefix=\"\";else for(var i=[\"Webkit\",\"Moz\",\"O\",\"ms\"],r=0;r<i.length;r++)if(null!=e.getStyle(n,i[r]+\"AnimationName\")){e._animationPrefix=\"-\"+i[r].toLowerCase()+\"-\";break}var o={WebkitTransition:\"webkitTransitionEnd\",MozTransition:\"transitionend\",OTransition:\"oTransitionEnd otransitionend\",transition:\"transitionend\"};Object.keys(o).forEach(function(t){null!=e.getStyle(n,t)&&(e._transitionEnd=o[t])})}catch(a){e._animationPrefix=null,e._transitionEnd=null}return e}return r(e,t),e.prototype.getDistributedNodes=function(t){return t.getDistributedNodes()},e.prototype.resolveAndSetHref=function(t,e,n){t.href=null==n?e:e+\"/../\"+n},e.prototype.supportsDOMEvents=function(){return!0},e.prototype.supportsNativeShadowDOM=function(){return\"function\"==typeof document.body.createShadowRoot},e.prototype.getAnimationPrefix=function(){return this._animationPrefix?this._animationPrefix:\"\"},e.prototype.getTransitionEnd=function(){return this._transitionEnd?this._transitionEnd:\"\"},e.prototype.supportsAnimation=function(){return null!=this._animationPrefix&&null!=this._transitionEnd},e}(function(){function t(){this.resourceLoaderType=null}return Object.defineProperty(t.prototype,\"attrToPropMap\",{get:function(){return this._attrToPropMap},set:function(t){this._attrToPropMap=t},enumerable:!0,configurable:!0}),t}())),El=null,Tl=ws;function Ol(){return!!window.history.pushState}var Pl=function(t){function e(e){var n=t.call(this)||this;return n._doc=e,n._init(),n}var n;return r(e,t),e.prototype._init=function(){this.location=bl().getLocation(),this._history=bl().getHistory()},e.prototype.getBaseHrefFromDOM=function(){return bl().getBaseHref(this._doc)},e.prototype.onPopState=function(t){bl().getGlobalEventTarget(this._doc,\"window\").addEventListener(\"popstate\",t,!1)},e.prototype.onHashChange=function(t){bl().getGlobalEventTarget(this._doc,\"window\").addEventListener(\"hashchange\",t,!1)},Object.defineProperty(e.prototype,\"pathname\",{get:function(){return this.location.pathname},set:function(t){this.location.pathname=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"search\",{get:function(){return this.location.search},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"hash\",{get:function(){return this.location.hash},enumerable:!0,configurable:!0}),e.prototype.pushState=function(t,e,n){Ol()?this._history.pushState(t,e,n):this.location.hash=n},e.prototype.replaceState=function(t,e,n){Ol()?this._history.replaceState(t,e,n):this.location.hash=n},e.prototype.forward=function(){this._history.forward()},e.prototype.back=function(){this._history.back()},a([(n=Bt(Tl),function(t,e){n(t,e,0)}),s(\"design:paramtypes\",[Object])],e)}(os),jl=new wt(\"TRANSITION_ID\"),Al=[{provide:En,useFactory:function(t,e,n){return function(){n.get(Tn).donePromise.then(function(){var n=bl();Array.prototype.slice.apply(n.querySelectorAll(e,\"style[ng-transition]\")).filter(function(e){return n.getAttribute(e,\"ng-transition\")===t}).forEach(function(t){return n.remove(t)})})}},deps:[jl,Tl,oe],multi:!0}],Ml=function(){function t(){}return t.init=function(){var e;e=new t,oi=e},t.prototype.addToWindow=function(t){Tt.getAngularTestability=function(e,n){void 0===n&&(n=!0);var i=t.findTestabilityInTree(e,n);if(null==i)throw new Error(\"Could not find testability for element.\");return i},Tt.getAllAngularTestabilities=function(){return t.getAllTestabilities()},Tt.getAllAngularRootElements=function(){return t.getAllRootElements()},Tt.frameworkStabilizers||(Tt.frameworkStabilizers=[]),Tt.frameworkStabilizers.push(function(t){var e=Tt.getAllAngularTestabilities(),n=e.length,i=!1,r=function(e){i=i||e,0==--n&&t(i)};e.forEach(function(t){t.whenStable(r)})})},t.prototype.findTestabilityInTree=function(t,e,n){if(null==e)return null;var i=t.getTestability(e);return null!=i?i:n?bl().isShadowRoot(e)?this.findTestabilityInTree(t,bl().getHost(e),!0):this.findTestabilityInTree(t,bl().parentElement(e),!0):null},t}();function Dl(t,e){\"undefined\"!=typeof COMPILED&&COMPILED||((Tt.ng=Tt.ng||{})[t]=e)}var Il={ApplicationRef:di,NgZone:Kn};function Rl(t){return Ti(t)}var Ll=new wt(\"EventManagerPlugins\"),Fl=function(){function t(t,e){var n=this;this._zone=e,this._eventNameToPlugin=new Map,t.forEach(function(t){return t.manager=n}),this._plugins=t.slice().reverse()}return t.prototype.addEventListener=function(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)},t.prototype.addGlobalEventListener=function(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)},t.prototype.getZone=function(){return this._zone},t.prototype._findPluginFor=function(t){var e=this._eventNameToPlugin.get(t);if(e)return e;for(var n=this._plugins,i=0;i<n.length;i++){var r=n[i];if(r.supports(t))return this._eventNameToPlugin.set(t,r),r}throw new Error(\"No event manager plugin found for event \"+t)},t}(),Nl=function(){function t(t){this._doc=t}return t.prototype.addGlobalEventListener=function(t,e,n){var i=bl().getGlobalEventTarget(this._doc,t);if(!i)throw new Error(\"Unsupported event target \"+i+\" for event \"+e);return this.addEventListener(i,e,n)},t}(),Bl=function(){function t(){this._stylesSet=new Set}return t.prototype.addStyles=function(t){var e=this,n=new Set;t.forEach(function(t){e._stylesSet.has(t)||(e._stylesSet.add(t),n.add(t))}),this.onStylesAdded(n)},t.prototype.onStylesAdded=function(t){},t.prototype.getAllStyles=function(){return Array.from(this._stylesSet)},t}(),Hl=function(t){function e(e){var n=t.call(this)||this;return n._doc=e,n._hostNodes=new Set,n._styleNodes=new Set,n._hostNodes.add(e.head),n}return r(e,t),e.prototype._addStylesToHost=function(t,e){var n=this;t.forEach(function(t){var i=n._doc.createElement(\"style\");i.textContent=t,n._styleNodes.add(e.appendChild(i))})},e.prototype.addHost=function(t){this._addStylesToHost(this._stylesSet,t),this._hostNodes.add(t)},e.prototype.removeHost=function(t){this._hostNodes.delete(t)},e.prototype.onStylesAdded=function(t){var e=this;this._hostNodes.forEach(function(n){return e._addStylesToHost(t,n)})},e.prototype.ngOnDestroy=function(){this._styleNodes.forEach(function(t){return bl().remove(t)})},e}(Bl),Ul={svg:\"http://www.w3.org/2000/svg\",xhtml:\"http://www.w3.org/1999/xhtml\",xlink:\"http://www.w3.org/1999/xlink\",xml:\"http://www.w3.org/XML/1998/namespace\",xmlns:\"http://www.w3.org/2000/xmlns/\"},zl=/%COMP%/g,Vl=\"_nghost-%COMP%\",Gl=\"_ngcontent-%COMP%\";function Wl(t,e,n){for(var i=0;i<e.length;i++){var r=e[i];Array.isArray(r)?Wl(t,r,n):(r=r.replace(zl,t),n.push(r))}return n}function Xl(t){return function(e){!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}var Yl=function(){function t(t,e,n){this.eventManager=t,this.sharedStylesHost=e,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new ql(t)}return t.prototype.createRenderer=function(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case Nt.Emulated:var n=this.rendererByCompId.get(e.id);return n||(n=new Ql(this.eventManager,this.sharedStylesHost,e,this.appId),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n;case Nt.Native:case Nt.ShadowDom:return new $l(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){var i=Wl(e.id,e.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}},t.prototype.begin=function(){},t.prototype.end=function(){},t}(),ql=function(){function t(t){this.eventManager=t,this.data=Object.create(null)}return t.prototype.destroy=function(){},t.prototype.createElement=function(t,e){return e?document.createElementNS(Ul[e],t):document.createElement(t)},t.prototype.createComment=function(t){return document.createComment(t)},t.prototype.createText=function(t){return document.createTextNode(t)},t.prototype.appendChild=function(t,e){t.appendChild(e)},t.prototype.insertBefore=function(t,e,n){t&&t.insertBefore(e,n)},t.prototype.removeChild=function(t,e){t&&t.removeChild(e)},t.prototype.selectRootElement=function(t,e){var n=\"string\"==typeof t?document.querySelector(t):t;if(!n)throw new Error('The selector \"'+t+'\" did not match any elements');return e||(n.textContent=\"\"),n},t.prototype.parentNode=function(t){return t.parentNode},t.prototype.nextSibling=function(t){return t.nextSibling},t.prototype.setAttribute=function(t,e,n,i){if(i){e=i+\":\"+e;var r=Ul[i];r?t.setAttributeNS(r,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)},t.prototype.removeAttribute=function(t,e,n){if(n){var i=Ul[n];i?t.removeAttributeNS(i,e):t.removeAttribute(n+\":\"+e)}else t.removeAttribute(e)},t.prototype.addClass=function(t,e){t.classList.add(e)},t.prototype.removeClass=function(t,e){t.classList.remove(e)},t.prototype.setStyle=function(t,e,n,i){i&Ie.DashCase?t.style.setProperty(e,n,i&Ie.Important?\"important\":\"\"):t.style[e]=n},t.prototype.removeStyle=function(t,e,n){n&Ie.DashCase?t.style.removeProperty(e):t.style[e]=\"\"},t.prototype.setProperty=function(t,e,n){Zl(e,\"property\"),t[e]=n},t.prototype.setValue=function(t,e){t.nodeValue=e},t.prototype.listen=function(t,e,n){return Zl(e,\"listener\"),\"string\"==typeof t?this.eventManager.addGlobalEventListener(t,e,Xl(n)):this.eventManager.addEventListener(t,e,Xl(n))},t}(),Kl=\"@\".charCodeAt(0);function Zl(t,e){if(t.charCodeAt(0)===Kl)throw new Error(\"Found the synthetic \"+e+\" \"+t+'. Please include either \"BrowserAnimationsModule\" or \"NoopAnimationsModule\" in your application.')}var Jl,Ql=function(t){function e(e,n,i,r){var o=t.call(this,e)||this;o.component=i;var a=Wl(r+\"-\"+i.id,i.styles,[]);return n.addStyles(a),o.contentAttr=Gl.replace(zl,r+\"-\"+i.id),o.hostAttr=Vl.replace(zl,r+\"-\"+i.id),o}return r(e,t),e.prototype.applyToHost=function(e){t.prototype.setAttribute.call(this,e,this.hostAttr,\"\")},e.prototype.createElement=function(e,n){var i=t.prototype.createElement.call(this,e,n);return t.prototype.setAttribute.call(this,i,this.contentAttr,\"\"),i},e}(ql),$l=function(t){function e(e,n,i,r){var o=t.call(this,e)||this;o.sharedStylesHost=n,o.hostEl=i,o.component=r,o.shadowRoot=r.encapsulation===Nt.ShadowDom?i.attachShadow({mode:\"open\"}):i.createShadowRoot(),o.sharedStylesHost.addHost(o.shadowRoot);for(var a=Wl(r.id,r.styles,[]),s=0;s<a.length;s++){var l=document.createElement(\"style\");l.textContent=a[s],o.shadowRoot.appendChild(l)}return o}return r(e,t),e.prototype.nodeOrShadowRoot=function(t){return t===this.hostEl?this.shadowRoot:t},e.prototype.destroy=function(){this.sharedStylesHost.removeHost(this.shadowRoot)},e.prototype.appendChild=function(e,n){return t.prototype.appendChild.call(this,this.nodeOrShadowRoot(e),n)},e.prototype.insertBefore=function(e,n,i){return t.prototype.insertBefore.call(this,this.nodeOrShadowRoot(e),n,i)},e.prototype.removeChild=function(e,n){return t.prototype.removeChild.call(this,this.nodeOrShadowRoot(e),n)},e.prototype.parentNode=function(e){return this.nodeOrShadowRoot(t.prototype.parentNode.call(this,this.nodeOrShadowRoot(e)))},e}(ql),tc=\"undefined\"!=typeof Zone&&Zone.__symbol__||function(t){return\"__zone_symbol__\"+t},ec=tc(\"addEventListener\"),nc=tc(\"removeEventListener\"),ic={},rc=\"__zone_symbol__propagationStopped\";\"undefined\"!=typeof Zone&&Zone[tc(\"BLACK_LISTED_EVENTS\")]&&(Jl={});var oc=function(t){return!!Jl&&Jl.hasOwnProperty(t)},ac=function(t){var e=ic[t.type];if(e){var n=this[e];if(n){var i=[t];if(1===n.length)return(a=n[0]).zone!==Zone.current?a.zone.run(a.handler,this,i):a.handler.apply(this,i);for(var r=n.slice(),o=0;o<r.length&&!0!==t[rc];o++){var a;(a=r[o]).zone!==Zone.current?a.zone.run(a.handler,this,i):a.handler.apply(this,i)}}}},sc=function(t){function e(e,n,i){var r=t.call(this,e)||this;return r.ngZone=n,i&&function(t){return t===xs}(i)||r.patchEvent(),r}return r(e,t),e.prototype.patchEvent=function(){if(\"undefined\"!=typeof Event&&Event&&Event.prototype&&!Event.prototype.__zone_symbol__stopImmediatePropagation){var t=Event.prototype.__zone_symbol__stopImmediatePropagation=Event.prototype.stopImmediatePropagation;Event.prototype.stopImmediatePropagation=function(){this&&(this[rc]=!0),t&&t.apply(this,arguments)}}},e.prototype.supports=function(t){return!0},e.prototype.addEventListener=function(t,e,n){var i=this,r=n;if(!t[ec]||Kn.isInAngularZone()&&!oc(e))t.addEventListener(e,r,!1);else{var o=ic[e];o||(o=ic[e]=tc(\"ANGULAR\"+e+\"FALSE\"));var a=t[o],s=a&&a.length>0;a||(a=t[o]=[]);var l=oc(e)?Zone.root:Zone.current;if(0===a.length)a.push({zone:l,handler:r});else{for(var c=!1,u=0;u<a.length;u++)if(a[u].handler===r){c=!0;break}c||a.push({zone:l,handler:r})}s||t[ec](e,ac,!1)}return function(){return i.removeEventListener(t,e,r)}},e.prototype.removeEventListener=function(t,e,n){var i=t[nc];if(!i)return t.removeEventListener.apply(t,[e,n,!1]);var r=ic[e],o=r&&t[r];if(!o)return t.removeEventListener.apply(t,[e,n,!1]);for(var a=!1,s=0;s<o.length;s++)if(o[s].handler===n){a=!0,o.splice(s,1);break}a?0===o.length&&i.apply(t,[e,ac,!1]):t.removeEventListener.apply(t,[e,n,!1])},e}(Nl),lc={pan:!0,panstart:!0,panmove:!0,panend:!0,pancancel:!0,panleft:!0,panright:!0,panup:!0,pandown:!0,pinch:!0,pinchstart:!0,pinchmove:!0,pinchend:!0,pinchcancel:!0,pinchin:!0,pinchout:!0,press:!0,pressup:!0,rotate:!0,rotatestart:!0,rotatemove:!0,rotateend:!0,rotatecancel:!0,swipe:!0,swipeleft:!0,swiperight:!0,swipeup:!0,swipedown:!0,tap:!0},cc=new wt(\"HammerGestureConfig\"),uc=new wt(\"HammerLoader\"),hc=function(){function t(){this.events=[],this.overrides={}}return t.prototype.buildHammer=function(t){var e=new Hammer(t,this.options);for(var n in e.get(\"pinch\").set({enable:!0}),e.get(\"rotate\").set({enable:!0}),this.overrides)e.get(n).set(this.overrides[n]);return e},t}(),dc=function(t){function e(e,n,i,r){var o=t.call(this,e)||this;return o._config=n,o.console=i,o.loader=r,o}return r(e,t),e.prototype.supports=function(t){return!(!lc.hasOwnProperty(t.toLowerCase())&&!this.isCustomEvent(t)||!window.Hammer&&!this.loader&&(this.console.warn('The \"'+t+'\" event cannot be bound because Hammer.JS is not loaded and no custom loader has been specified.'),1))},e.prototype.addEventListener=function(t,e,n){var i=this,r=this.manager.getZone();if(e=e.toLowerCase(),!window.Hammer&&this.loader){var o=!1,a=function(){o=!0};return this.loader().then(function(){if(!window.Hammer)return i.console.warn(\"The custom HAMMER_LOADER completed, but Hammer.JS is not present.\"),void(a=function(){});o||(a=i.addEventListener(t,e,n))}).catch(function(){i.console.warn('The \"'+e+'\" event cannot be bound because the custom Hammer.JS loader failed.'),a=function(){}}),function(){a()}}return r.runOutsideAngular(function(){var o=i._config.buildHammer(t),a=function(t){r.runGuarded(function(){n(t)})};return o.on(e,a),function(){o.off(e,a),\"function\"==typeof o.destroy&&o.destroy()}})},e.prototype.isCustomEvent=function(t){return this._config.events.indexOf(t)>-1},e}(Nl),fc=[\"alt\",\"control\",\"meta\",\"shift\"],pc={alt:function(t){return t.altKey},control:function(t){return t.ctrlKey},meta:function(t){return t.metaKey},shift:function(t){return t.shiftKey}},gc=function(t){function e(e){return t.call(this,e)||this}var n;return r(e,t),n=e,e.prototype.supports=function(t){return null!=n.parseEventName(t)},e.prototype.addEventListener=function(t,e,i){var r=n.parseEventName(e),o=n.eventCallback(r.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(function(){return bl().onAndCancel(t,r.domEventName,o)})},e.parseEventName=function(t){var e=t.toLowerCase().split(\".\"),i=e.shift();if(0===e.length||\"keydown\"!==i&&\"keyup\"!==i)return null;var r=n._normalizeKey(e.pop()),o=\"\";if(fc.forEach(function(t){var n=e.indexOf(t);n>-1&&(e.splice(n,1),o+=t+\".\")}),o+=r,0!=e.length||0===r.length)return null;var a={};return a.domEventName=i,a.fullKey=o,a},e.getEventFullKey=function(t){var e=\"\",n=bl().getEventKey(t);return\" \"===(n=n.toLowerCase())?n=\"space\":\".\"===n&&(n=\"dot\"),fc.forEach(function(i){i!=n&&(0,pc[i])(t)&&(e+=i+\".\")}),e+=n},e.eventCallback=function(t,e,i){return function(r){n.getEventFullKey(r)===t&&i.runGuarded(function(){return e(r)})}},e._normalizeKey=function(t){switch(t){case\"esc\":return\"escape\";default:return t}},e}(Nl),mc=function(){return function(){}}(),vc=function(t){function e(e){var n=t.call(this)||this;return n._doc=e,n}return r(e,t),e.prototype.sanitize=function(t,e){if(null==e)return null;switch(t){case Fe.NONE:return e;case Fe.HTML:return e instanceof bc?e.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(e,\"HTML\"),function(t,e){var n=null;try{Ke=Ke||new Ve(t);var i=e?String(e):\"\";n=Ke.getInertBodyElement(i);var r=5,o=i;do{if(0===r)throw new Error(\"Failed to sanitize html because the input is unstable\");r--,i=o,o=n.innerHTML,n=Ke.getInertBodyElement(i)}while(i!==o);var a=new an,s=a.sanitizeChildren(un(n)||n);return ze()&&a.sanitizedSomething&&console.warn(\"WARNING: sanitizing HTML stripped some content, see http://g.co/ng/security#xss\"),s}finally{if(n)for(var l=un(n)||n;l.firstChild;)l.removeChild(l.firstChild)}}(this._doc,String(e)));case Fe.STYLE:return e instanceof _c?e.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(e,\"Style\"),function(t){if(!(t=String(t).trim()))return\"\";var e=t.match(gn);return e&&Xe(e[1])===e[1]||t.match(pn)&&function(t){for(var e=!0,n=!0,i=0;i<t.length;i++){var r=t.charAt(i);\"'\"===r&&n?e=!e:'\"'===r&&e&&(n=!n)}return e&&n}(t)?t:(ze()&&console.warn(\"WARNING: sanitizing unsafe style value \"+t+\" (see http://g.co/ng/security#xss).\"),\"unsafe\")}(e));case Fe.SCRIPT:if(e instanceof wc)return e.changingThisBreaksApplicationSecurity;throw this.checkNotSafeValue(e,\"Script\"),new Error(\"unsafe value used in a script context\");case Fe.URL:return e instanceof Cc||e instanceof xc?e.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(e,\"URL\"),Xe(String(e)));case Fe.RESOURCE_URL:if(e instanceof Cc)return e.changingThisBreaksApplicationSecurity;throw this.checkNotSafeValue(e,\"ResourceURL\"),new Error(\"unsafe value used in a resource URL context (see http://g.co/ng/security#xss)\");default:throw new Error(\"Unexpected SecurityContext \"+t+\" (see http://g.co/ng/security#xss)\")}},e.prototype.checkNotSafeValue=function(t,e){if(t instanceof yc)throw new Error(\"Required a safe \"+e+\", got a \"+t.getTypeName()+\" (see http://g.co/ng/security#xss)\")},e.prototype.bypassSecurityTrustHtml=function(t){return new bc(t)},e.prototype.bypassSecurityTrustStyle=function(t){return new _c(t)},e.prototype.bypassSecurityTrustScript=function(t){return new wc(t)},e.prototype.bypassSecurityTrustUrl=function(t){return new xc(t)},e.prototype.bypassSecurityTrustResourceUrl=function(t){return new Cc(t)},e}(mc),yc=function(){function t(t){this.changingThisBreaksApplicationSecurity=t}return t.prototype.toString=function(){return\"SafeValue must use [property]=binding: \"+this.changingThisBreaksApplicationSecurity+\" (see http://g.co/ng/security#xss)\"},t}(),bc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.getTypeName=function(){return\"HTML\"},e}(yc),_c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.getTypeName=function(){return\"Style\"},e}(yc),wc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.getTypeName=function(){return\"Script\"},e}(yc),xc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.getTypeName=function(){return\"URL\"},e}(yc),Cc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.getTypeName=function(){return\"ResourceURL\"},e}(yc),Sc=li(Gi,\"browser\",[{provide:Mn,useValue:\"browser\"},{provide:An,useValue:function(){kl.makeCurrent(),Ml.init()},multi:!0},{provide:os,useClass:Pl,deps:[Tl]},{provide:Tl,useFactory:function(){return document},deps:[]}]);function kc(){return new Cn}var Ec=function(){function t(t){if(t)throw new Error(\"BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.\")}var e;return e=t,t.withServerTransition=function(t){return{ngModule:e,providers:[{provide:On,useValue:t.appId},{provide:jl,useExisting:On},Al]}},t}();\"undefined\"!=typeof window&&window;var Tc=function(){return function(t,e){this.id=t,this.url=e}}(),Oc=function(t){function e(e,n,i,r){void 0===i&&(i=\"imperative\"),void 0===r&&(r=null);var o=t.call(this,e,n)||this;return o.navigationTrigger=i,o.restoredState=r,o}return r(e,t),e.prototype.toString=function(){return\"NavigationStart(id: \"+this.id+\", url: '\"+this.url+\"')\"},e}(Tc),Pc=function(t){function e(e,n,i){var r=t.call(this,e,n)||this;return r.urlAfterRedirects=i,r}return r(e,t),e.prototype.toString=function(){return\"NavigationEnd(id: \"+this.id+\", url: '\"+this.url+\"', urlAfterRedirects: '\"+this.urlAfterRedirects+\"')\"},e}(Tc),jc=function(t){function e(e,n,i){var r=t.call(this,e,n)||this;return r.reason=i,r}return r(e,t),e.prototype.toString=function(){return\"NavigationCancel(id: \"+this.id+\", url: '\"+this.url+\"')\"},e}(Tc),Ac=function(t){function e(e,n,i){var r=t.call(this,e,n)||this;return r.error=i,r}return r(e,t),e.prototype.toString=function(){return\"NavigationError(id: \"+this.id+\", url: '\"+this.url+\"', error: \"+this.error+\")\"},e}(Tc),Mc=function(t){function e(e,n,i,r){var o=t.call(this,e,n)||this;return o.urlAfterRedirects=i,o.state=r,o}return r(e,t),e.prototype.toString=function(){return\"RoutesRecognized(id: \"+this.id+\", url: '\"+this.url+\"', urlAfterRedirects: '\"+this.urlAfterRedirects+\"', state: \"+this.state+\")\"},e}(Tc),Dc=function(t){function e(e,n,i,r){var o=t.call(this,e,n)||this;return o.urlAfterRedirects=i,o.state=r,o}return r(e,t),e.prototype.toString=function(){return\"GuardsCheckStart(id: \"+this.id+\", url: '\"+this.url+\"', urlAfterRedirects: '\"+this.urlAfterRedirects+\"', state: \"+this.state+\")\"},e}(Tc),Ic=function(t){function e(e,n,i,r,o){var a=t.call(this,e,n)||this;return a.urlAfterRedirects=i,a.state=r,a.shouldActivate=o,a}return r(e,t),e.prototype.toString=function(){return\"GuardsCheckEnd(id: \"+this.id+\", url: '\"+this.url+\"', urlAfterRedirects: '\"+this.urlAfterRedirects+\"', state: \"+this.state+\", shouldActivate: \"+this.shouldActivate+\")\"},e}(Tc),Rc=function(t){function e(e,n,i,r){var o=t.call(this,e,n)||this;return o.urlAfterRedirects=i,o.state=r,o}return r(e,t),e.prototype.toString=function(){return\"ResolveStart(id: \"+this.id+\", url: '\"+this.url+\"', urlAfterRedirects: '\"+this.urlAfterRedirects+\"', state: \"+this.state+\")\"},e}(Tc),Lc=function(t){function e(e,n,i,r){var o=t.call(this,e,n)||this;return o.urlAfterRedirects=i,o.state=r,o}return r(e,t),e.prototype.toString=function(){return\"ResolveEnd(id: \"+this.id+\", url: '\"+this.url+\"', urlAfterRedirects: '\"+this.urlAfterRedirects+\"', state: \"+this.state+\")\"},e}(Tc),Fc=function(){function t(t){this.route=t}return t.prototype.toString=function(){return\"RouteConfigLoadStart(path: \"+this.route.path+\")\"},t}(),Nc=function(){function t(t){this.route=t}return t.prototype.toString=function(){return\"RouteConfigLoadEnd(path: \"+this.route.path+\")\"},t}(),Bc=function(){function t(t){this.snapshot=t}return t.prototype.toString=function(){return\"ChildActivationStart(path: '\"+(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||\"\")+\"')\"},t}(),Hc=function(){function t(t){this.snapshot=t}return t.prototype.toString=function(){return\"ChildActivationEnd(path: '\"+(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||\"\")+\"')\"},t}(),Uc=function(){function t(t){this.snapshot=t}return t.prototype.toString=function(){return\"ActivationStart(path: '\"+(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||\"\")+\"')\"},t}(),zc=function(){function t(t){this.snapshot=t}return t.prototype.toString=function(){return\"ActivationEnd(path: '\"+(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||\"\")+\"')\"},t}(),Vc=function(){function t(t,e,n){this.routerEvent=t,this.position=e,this.anchor=n}return t.prototype.toString=function(){return\"Scroll(anchor: '\"+this.anchor+\"', position: '\"+(this.position?this.position[0]+\", \"+this.position[1]:null)+\"')\"},t}(),Gc=function(){return function(){}}(),Wc=\"primary\",Xc=function(){function t(t){this.params=t||{}}return t.prototype.has=function(t){return this.params.hasOwnProperty(t)},t.prototype.get=function(t){if(this.has(t)){var e=this.params[t];return Array.isArray(e)?e[0]:e}return null},t.prototype.getAll=function(t){if(this.has(t)){var e=this.params[t];return Array.isArray(e)?e:[e]}return[]},Object.defineProperty(t.prototype,\"keys\",{get:function(){return Object.keys(this.params)},enumerable:!0,configurable:!0}),t}();function Yc(t){return new Xc(t)}var qc=\"ngNavigationCancelingError\";function Kc(t){var e=Error(\"NavigationCancelingError: \"+t);return e[qc]=!0,e}function Zc(t,e,n){var i=n.path.split(\"/\");if(i.length>t.length)return null;if(\"full\"===n.pathMatch&&(e.hasChildren()||i.length<t.length))return null;for(var r={},o=0;o<i.length;o++){var a=i[o],s=t[o];if(a.startsWith(\":\"))r[a.substring(1)]=s;else if(a!==s.path)return null}return{consumed:t.slice(0,i.length),posParams:r}}var Jc=function(){return function(t,e){this.routes=t,this.module=e}}();function Qc(t,e){void 0===e&&(e=\"\");for(var n=0;n<t.length;n++){var i=t[n];$c(i,tu(e,i))}}function $c(t,e){if(!t)throw new Error(\"\\n      Invalid configuration of route '\"+e+\"': Encountered undefined route.\\n      The reason might be an extra comma.\\n\\n      Example:\\n      const routes: Routes = [\\n        { path: '', redirectTo: '/dashboard', pathMatch: 'full' },\\n        { path: 'dashboard',  component: DashboardComponent },, << two commas\\n        { path: 'detail/:id', component: HeroDetailComponent }\\n      ];\\n    \");if(Array.isArray(t))throw new Error(\"Invalid configuration of route '\"+e+\"': Array cannot be specified\");if(!t.component&&!t.children&&!t.loadChildren&&t.outlet&&t.outlet!==Wc)throw new Error(\"Invalid configuration of route '\"+e+\"': a componentless route without children or loadChildren cannot have a named outlet set\");if(t.redirectTo&&t.children)throw new Error(\"Invalid configuration of route '\"+e+\"': redirectTo and children cannot be used together\");if(t.redirectTo&&t.loadChildren)throw new Error(\"Invalid configuration of route '\"+e+\"': redirectTo and loadChildren cannot be used together\");if(t.children&&t.loadChildren)throw new Error(\"Invalid configuration of route '\"+e+\"': children and loadChildren cannot be used together\");if(t.redirectTo&&t.component)throw new Error(\"Invalid configuration of route '\"+e+\"': redirectTo and component cannot be used together\");if(t.path&&t.matcher)throw new Error(\"Invalid configuration of route '\"+e+\"': path and matcher cannot be used together\");if(void 0===t.redirectTo&&!t.component&&!t.children&&!t.loadChildren)throw new Error(\"Invalid configuration of route '\"+e+\"'. One of the following must be provided: component, redirectTo, children or loadChildren\");if(void 0===t.path&&void 0===t.matcher)throw new Error(\"Invalid configuration of route '\"+e+\"': routes must have either a path or a matcher specified\");if(\"string\"==typeof t.path&&\"/\"===t.path.charAt(0))throw new Error(\"Invalid configuration of route '\"+e+\"': path cannot start with a slash\");if(\"\"===t.path&&void 0!==t.redirectTo&&void 0===t.pathMatch)throw new Error(\"Invalid configuration of route '{path: \\\"\"+e+'\", redirectTo: \"'+t.redirectTo+\"\\\"}': please provide 'pathMatch'. The default value of 'pathMatch' is 'prefix', but often the intent is to use 'full'.\");if(void 0!==t.pathMatch&&\"full\"!==t.pathMatch&&\"prefix\"!==t.pathMatch)throw new Error(\"Invalid configuration of route '\"+e+\"': pathMatch can only be set to 'prefix' or 'full'\");t.children&&Qc(t.children,e)}function tu(t,e){return e?t||e.path?t&&!e.path?t+\"/\":!t&&e.path?e.path:t+\"/\"+e.path:\"\":t}function eu(t){var e=t.children&&t.children.map(eu),n=e?o({},t,{children:e}):o({},t);return!n.component&&(e||n.loadChildren)&&n.outlet&&n.outlet!==Wc&&(n.component=Gc),n}function nu(t,e){var n,i=Object.keys(t),r=Object.keys(e);if(i.length!=r.length)return!1;for(var o=0;o<i.length;o++)if(t[n=i[o]]!==e[n])return!1;return!0}function iu(t){return Array.prototype.concat.apply([],t)}function ru(t){return t.length>0?t[t.length-1]:null}function ou(t,e){for(var n in t)t.hasOwnProperty(n)&&e(t[n],n)}function au(t){return kn(t)?t:Sn(t)?rt(Promise.resolve(t)):Os(t)}function su(t,e,n){return n?function(t,e){return nu(t,e)}(t.queryParams,e.queryParams)&&function t(e,n){if(!hu(e.segments,n.segments))return!1;if(e.numberOfChildren!==n.numberOfChildren)return!1;for(var i in n.children){if(!e.children[i])return!1;if(!t(e.children[i],n.children[i]))return!1}return!0}(t.root,e.root):function(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(function(n){return e[n]===t[n]})}(t.queryParams,e.queryParams)&&function t(e,n){return function e(n,i,r){if(n.segments.length>r.length)return!!hu(a=n.segments.slice(0,r.length),r)&&!i.hasChildren();if(n.segments.length===r.length){if(!hu(n.segments,r))return!1;for(var o in i.children){if(!n.children[o])return!1;if(!t(n.children[o],i.children[o]))return!1}return!0}var a=r.slice(0,n.segments.length),s=r.slice(n.segments.length);return!!hu(n.segments,a)&&!!n.children[Wc]&&e(n.children[Wc],i,s)}(e,n,n.segments)}(t.root,e.root)}var lu=function(){function t(t,e,n){this.root=t,this.queryParams=e,this.fragment=n}return Object.defineProperty(t.prototype,\"queryParamMap\",{get:function(){return this._queryParamMap||(this._queryParamMap=Yc(this.queryParams)),this._queryParamMap},enumerable:!0,configurable:!0}),t.prototype.toString=function(){return gu.serialize(this)},t}(),cu=function(){function t(t,e){var n=this;this.segments=t,this.children=e,this.parent=null,ou(e,function(t,e){return t.parent=n})}return t.prototype.hasChildren=function(){return this.numberOfChildren>0},Object.defineProperty(t.prototype,\"numberOfChildren\",{get:function(){return Object.keys(this.children).length},enumerable:!0,configurable:!0}),t.prototype.toString=function(){return mu(this)},t}(),uu=function(){function t(t,e){this.path=t,this.parameters=e}return Object.defineProperty(t.prototype,\"parameterMap\",{get:function(){return this._parameterMap||(this._parameterMap=Yc(this.parameters)),this._parameterMap},enumerable:!0,configurable:!0}),t.prototype.toString=function(){return xu(this)},t}();function hu(t,e){return t.length===e.length&&t.every(function(t,n){return t.path===e[n].path})}function du(t,e){var n=[];return ou(t.children,function(t,i){i===Wc&&(n=n.concat(e(t,i)))}),ou(t.children,function(t,i){i!==Wc&&(n=n.concat(e(t,i)))}),n}var fu=function(){return function(){}}(),pu=function(){function t(){}return t.prototype.parse=function(t){var e=new Tu(t);return new lu(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())},t.prototype.serialize=function(t){var e,n;return\"/\"+function t(e,n){if(!e.hasChildren())return mu(e);if(n){var i=e.children[Wc]?t(e.children[Wc],!1):\"\",r=[];return ou(e.children,function(e,n){n!==Wc&&r.push(n+\":\"+t(e,!1))}),r.length>0?i+\"(\"+r.join(\"//\")+\")\":i}var o=du(e,function(n,i){return i===Wc?[t(e.children[Wc],!1)]:[i+\":\"+t(n,!1)]});return mu(e)+\"/(\"+o.join(\"//\")+\")\"}(t.root,!0)+(e=t.queryParams,(n=Object.keys(e).map(function(t){var n=e[t];return Array.isArray(n)?n.map(function(e){return yu(t)+\"=\"+yu(e)}).join(\"&\"):yu(t)+\"=\"+yu(n)})).length?\"?\"+n.join(\"&\"):\"\")+(\"string\"==typeof t.fragment?\"#\"+encodeURI(t.fragment):\"\")},t}(),gu=new pu;function mu(t){return t.segments.map(function(t){return xu(t)}).join(\"/\")}function vu(t){return encodeURIComponent(t).replace(/%40/g,\"@\").replace(/%3A/gi,\":\").replace(/%24/g,\"$\").replace(/%2C/gi,\",\")}function yu(t){return vu(t).replace(/%3B/gi,\";\")}function bu(t){return vu(t).replace(/\\(/g,\"%28\").replace(/\\)/g,\"%29\").replace(/%26/gi,\"&\")}function _u(t){return decodeURIComponent(t)}function wu(t){return _u(t.replace(/\\+/g,\"%20\"))}function xu(t){return\"\"+bu(t.path)+(e=t.parameters,Object.keys(e).map(function(t){return\";\"+bu(t)+\"=\"+bu(e[t])}).join(\"\"));var e}var Cu=/^[^\\/()?;=#]+/;function Su(t){var e=t.match(Cu);return e?e[0]:\"\"}var ku=/^[^=?&#]+/,Eu=/^[^?&#]+/,Tu=function(){function t(t){this.url=t,this.remaining=t}return t.prototype.parseRootSegment=function(){return this.consumeOptional(\"/\"),\"\"===this.remaining||this.peekStartsWith(\"?\")||this.peekStartsWith(\"#\")?new cu([],{}):new cu([],this.parseChildren())},t.prototype.parseQueryParams=function(){var t={};if(this.consumeOptional(\"?\"))do{this.parseQueryParam(t)}while(this.consumeOptional(\"&\"));return t},t.prototype.parseFragment=function(){return this.consumeOptional(\"#\")?decodeURIComponent(this.remaining):null},t.prototype.parseChildren=function(){if(\"\"===this.remaining)return{};this.consumeOptional(\"/\");var t=[];for(this.peekStartsWith(\"(\")||t.push(this.parseSegment());this.peekStartsWith(\"/\")&&!this.peekStartsWith(\"//\")&&!this.peekStartsWith(\"/(\");)this.capture(\"/\"),t.push(this.parseSegment());var e={};this.peekStartsWith(\"/(\")&&(this.capture(\"/\"),e=this.parseParens(!0));var n={};return this.peekStartsWith(\"(\")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n[Wc]=new cu(t,e)),n},t.prototype.parseSegment=function(){var t=Su(this.remaining);if(\"\"===t&&this.peekStartsWith(\";\"))throw new Error(\"Empty path url segment cannot have parameters: '\"+this.remaining+\"'.\");return this.capture(t),new uu(_u(t),this.parseMatrixParams())},t.prototype.parseMatrixParams=function(){for(var t={};this.consumeOptional(\";\");)this.parseParam(t);return t},t.prototype.parseParam=function(t){var e=Su(this.remaining);if(e){this.capture(e);var n=\"\";if(this.consumeOptional(\"=\")){var i=Su(this.remaining);i&&this.capture(n=i)}t[_u(e)]=_u(n)}},t.prototype.parseQueryParam=function(t){var e,n=(e=this.remaining.match(ku))?e[0]:\"\";if(n){this.capture(n);var i=\"\";if(this.consumeOptional(\"=\")){var r=function(t){var e=t.match(Eu);return e?e[0]:\"\"}(this.remaining);r&&this.capture(i=r)}var o=wu(n),a=wu(i);if(t.hasOwnProperty(o)){var s=t[o];Array.isArray(s)||(t[o]=s=[s]),s.push(a)}else t[o]=a}},t.prototype.parseParens=function(t){var e={};for(this.capture(\"(\");!this.consumeOptional(\")\")&&this.remaining.length>0;){var n=Su(this.remaining),i=this.remaining[n.length];if(\"/\"!==i&&\")\"!==i&&\";\"!==i)throw new Error(\"Cannot parse url '\"+this.url+\"'\");var r=void 0;n.indexOf(\":\")>-1?(r=n.substr(0,n.indexOf(\":\")),this.capture(r),this.capture(\":\")):t&&(r=Wc);var o=this.parseChildren();e[r]=1===Object.keys(o).length?o[Wc]:new cu([],o),this.consumeOptional(\"//\")}return e},t.prototype.peekStartsWith=function(t){return this.remaining.startsWith(t)},t.prototype.consumeOptional=function(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)},t.prototype.capture=function(t){if(!this.consumeOptional(t))throw new Error('Expected \"'+t+'\".')},t}(),Ou=function(){function t(t){this._root=t}return Object.defineProperty(t.prototype,\"root\",{get:function(){return this._root.value},enumerable:!0,configurable:!0}),t.prototype.parent=function(t){var e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null},t.prototype.children=function(t){var e=Pu(t,this._root);return e?e.children.map(function(t){return t.value}):[]},t.prototype.firstChild=function(t){var e=Pu(t,this._root);return e&&e.children.length>0?e.children[0].value:null},t.prototype.siblings=function(t){var e=ju(t,this._root);return e.length<2?[]:e[e.length-2].children.map(function(t){return t.value}).filter(function(e){return e!==t})},t.prototype.pathFromRoot=function(t){return ju(t,this._root).map(function(t){return t.value})},t}();function Pu(t,e){var n,i;if(t===e.value)return e;try{for(var r=l(e.children),o=r.next();!o.done;o=r.next()){var a=Pu(t,o.value);if(a)return a}}catch(s){n={error:s}}finally{try{o&&!o.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}return null}function ju(t,e){var n,i;if(t===e.value)return[e];try{for(var r=l(e.children),o=r.next();!o.done;o=r.next()){var a=ju(t,o.value);if(a.length)return a.unshift(e),a}}catch(s){n={error:s}}finally{try{o&&!o.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}return[]}var Au=function(){function t(t,e){this.value=t,this.children=e}return t.prototype.toString=function(){return\"TreeNode(\"+this.value+\")\"},t}();function Mu(t){var e={};return t&&t.children.forEach(function(t){return e[t.value.outlet]=t}),e}var Du=function(t){function e(e,n){var i=t.call(this,e)||this;return i.snapshot=n,Bu(i,e),i}return r(e,t),e.prototype.toString=function(){return this.snapshot.toString()},e}(Ou);function Iu(t,e){var n=function(t,e){var n=new Fu([],{},{},\"\",{},Wc,e,null,t.root,-1,{});return new Nu(\"\",new Au(n,[]))}(t,e),i=new Ps([new uu(\"\",{})]),r=new Ps({}),o=new Ps({}),a=new Ps({}),s=new Ps(\"\"),l=new Ru(i,r,a,s,o,Wc,e,n.root);return l.snapshot=n.root,new Du(new Au(l,[]),n)}var Ru=function(){function t(t,e,n,i,r,o,a,s){this.url=t,this.params=e,this.queryParams=n,this.fragment=i,this.data=r,this.outlet=o,this.component=a,this._futureSnapshot=s}return Object.defineProperty(t.prototype,\"routeConfig\",{get:function(){return this._futureSnapshot.routeConfig},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"root\",{get:function(){return this._routerState.root},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"parent\",{get:function(){return this._routerState.parent(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"firstChild\",{get:function(){return this._routerState.firstChild(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"children\",{get:function(){return this._routerState.children(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"pathFromRoot\",{get:function(){return this._routerState.pathFromRoot(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"paramMap\",{get:function(){return this._paramMap||(this._paramMap=this.params.pipe(tt(function(t){return Yc(t)}))),this._paramMap},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"queryParamMap\",{get:function(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(tt(function(t){return Yc(t)}))),this._queryParamMap},enumerable:!0,configurable:!0}),t.prototype.toString=function(){return this.snapshot?this.snapshot.toString():\"Future(\"+this._futureSnapshot+\")\"},t}();function Lu(t,e){void 0===e&&(e=\"emptyOnly\");var n=t.pathFromRoot,i=0;if(\"always\"!==e)for(i=n.length-1;i>=1;){var r=n[i],a=n[i-1];if(r.routeConfig&&\"\"===r.routeConfig.path)i--;else{if(a.component)break;i--}}return function(t){return t.reduce(function(t,e){return{params:o({},t.params,e.params),data:o({},t.data,e.data),resolve:o({},t.resolve,e._resolvedData)}},{params:{},data:{},resolve:{}})}(n.slice(i))}var Fu=function(){function t(t,e,n,i,r,o,a,s,l,c,u){this.url=t,this.params=e,this.queryParams=n,this.fragment=i,this.data=r,this.outlet=o,this.component=a,this.routeConfig=s,this._urlSegment=l,this._lastPathIndex=c,this._resolve=u}return Object.defineProperty(t.prototype,\"root\",{get:function(){return this._routerState.root},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"parent\",{get:function(){return this._routerState.parent(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"firstChild\",{get:function(){return this._routerState.firstChild(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"children\",{get:function(){return this._routerState.children(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"pathFromRoot\",{get:function(){return this._routerState.pathFromRoot(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"paramMap\",{get:function(){return this._paramMap||(this._paramMap=Yc(this.params)),this._paramMap},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"queryParamMap\",{get:function(){return this._queryParamMap||(this._queryParamMap=Yc(this.queryParams)),this._queryParamMap},enumerable:!0,configurable:!0}),t.prototype.toString=function(){return\"Route(url:'\"+this.url.map(function(t){return t.toString()}).join(\"/\")+\"', path:'\"+(this.routeConfig?this.routeConfig.path:\"\")+\"')\"},t}(),Nu=function(t){function e(e,n){var i=t.call(this,n)||this;return i.url=e,Bu(i,n),i}return r(e,t),e.prototype.toString=function(){return Hu(this._root)},e}(Ou);function Bu(t,e){e.value._routerState=t,e.children.forEach(function(e){return Bu(t,e)})}function Hu(t){var e=t.children.length>0?\" { \"+t.children.map(Hu).join(\", \")+\" } \":\"\";return\"\"+t.value+e}function Uu(t){if(t.snapshot){var e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,nu(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),nu(e.params,n.params)||t.params.next(n.params),function(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;++n)if(!nu(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),nu(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function zu(t,e){var n,i;return nu(t.params,e.params)&&hu(n=t.url,i=e.url)&&n.every(function(t,e){return nu(t.parameters,i[e].parameters)})&&!(!t.parent!=!e.parent)&&(!t.parent||zu(t.parent,e.parent))}function Vu(t){return\"object\"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function Gu(t,e,n,i,r){var o={};return i&&ou(i,function(t,e){o[e]=Array.isArray(t)?t.map(function(t){return\"\"+t}):\"\"+t}),new lu(n.root===t?e:function t(e,n,i){var r={};return ou(e.children,function(e,o){r[o]=e===n?i:t(e,n,i)}),new cu(e.segments,r)}(n.root,t,e),o,r)}var Wu=function(){function t(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&Vu(n[0]))throw new Error(\"Root segment cannot have matrix parameters\");var i=n.find(function(t){return\"object\"==typeof t&&null!=t&&t.outlets});if(i&&i!==ru(n))throw new Error(\"{outlets:{}} has to be the last command\")}return t.prototype.toRoot=function(){return this.isAbsolute&&1===this.commands.length&&\"/\"==this.commands[0]},t}(),Xu=function(){return function(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}}();function Yu(t){return\"object\"==typeof t&&null!=t&&t.outlets?t.outlets[Wc]:\"\"+t}function qu(t,e,n){if(t||(t=new cu([],{})),0===t.segments.length&&t.hasChildren())return Ku(t,e,n);var i=function(t,e,n){for(var i=0,r=e,o={match:!1,pathIndex:0,commandIndex:0};r<t.segments.length;){if(i>=n.length)return o;var a=t.segments[r],s=Yu(n[i]),l=i<n.length-1?n[i+1]:null;if(r>0&&void 0===s)break;if(s&&l&&\"object\"==typeof l&&void 0===l.outlets){if(!$u(s,l,a))return o;i+=2}else{if(!$u(s,{},a))return o;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}(t,e,n),r=n.slice(i.commandIndex);if(i.match&&i.pathIndex<t.segments.length){var o=new cu(t.segments.slice(0,i.pathIndex),{});return o.children[Wc]=new cu(t.segments.slice(i.pathIndex),t.children),Ku(o,0,r)}return i.match&&0===r.length?new cu(t.segments,{}):i.match&&!t.hasChildren()?Zu(t,e,n):i.match?Ku(t,0,r):Zu(t,e,n)}function Ku(t,e,n){if(0===n.length)return new cu(t.segments,{});var i=function(t){var e,n;return\"object\"!=typeof t[0]?((e={})[Wc]=t,e):void 0===t[0].outlets?((n={})[Wc]=t,n):t[0].outlets}(n),r={};return ou(i,function(n,i){null!==n&&(r[i]=qu(t.children[i],e,n))}),ou(t.children,function(t,e){void 0===i[e]&&(r[e]=t)}),new cu(t.segments,r)}function Zu(t,e,n){for(var i=t.segments.slice(0,e),r=0;r<n.length;){if(\"object\"==typeof n[r]&&void 0!==n[r].outlets){var o=Ju(n[r].outlets);return new cu(i,o)}if(0===r&&Vu(n[0]))i.push(new uu(t.segments[e].path,n[0])),r++;else{var a=Yu(n[r]),s=r<n.length-1?n[r+1]:null;a&&s&&Vu(s)?(i.push(new uu(a,Qu(s))),r+=2):(i.push(new uu(a,{})),r++)}}return new cu(i,{})}function Ju(t){var e={};return ou(t,function(t,n){null!==t&&(e[n]=Zu(new cu([],{}),0,t))}),e}function Qu(t){var e={};return ou(t,function(t,n){return e[n]=\"\"+t}),e}function $u(t,e,n){return t==n.path&&nu(e,n.parameters)}var th=function(){function t(t,e,n,i){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=i}return t.prototype.activate=function(t){var e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),Uu(this.futureState.root),this.activateChildRoutes(e,n,t)},t.prototype.deactivateChildRoutes=function(t,e,n){var i=this,r=Mu(e);t.children.forEach(function(t){var e=t.value.outlet;i.deactivateRoutes(t,r[e],n),delete r[e]}),ou(r,function(t,e){i.deactivateRouteAndItsChildren(t,n)})},t.prototype.deactivateRoutes=function(t,e,n){var i=t.value,r=e?e.value:null;if(i===r)if(i.component){var o=n.getContext(i.outlet);o&&this.deactivateChildRoutes(t,e,o.children)}else this.deactivateChildRoutes(t,e,n);else r&&this.deactivateRouteAndItsChildren(e,n)},t.prototype.deactivateRouteAndItsChildren=function(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)},t.prototype.detachAndStoreRouteSubtree=function(t,e){var n=e.getContext(t.value.outlet);if(n&&n.outlet){var i=n.outlet.detach(),r=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:i,route:t,contexts:r})}},t.prototype.deactivateRouteAndOutlet=function(t,e){var n=this,i=e.getContext(t.value.outlet);if(i){var r=Mu(t),o=t.value.component?i.children:e;ou(r,function(t,e){return n.deactivateRouteAndItsChildren(t,o)}),i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated())}},t.prototype.activateChildRoutes=function(t,e,n){var i=this,r=Mu(e);t.children.forEach(function(t){i.activateRoutes(t,r[t.value.outlet],n),i.forwardEvent(new zc(t.value.snapshot))}),t.children.length&&this.forwardEvent(new Hc(t.value.snapshot))},t.prototype.activateRoutes=function(t,e,n){var i=t.value,r=e?e.value:null;if(Uu(i),i===r)if(i.component){var o=n.getOrCreateContext(i.outlet);this.activateChildRoutes(t,e,o.children)}else this.activateChildRoutes(t,e,n);else if(i.component)if(o=n.getOrCreateContext(i.outlet),this.routeReuseStrategy.shouldAttach(i.snapshot)){var a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),eh(a.route)}else{var s=function(t){for(var e=i.snapshot.parent;e;e=e.parent){var n=e.routeConfig;if(n&&n._loadedConfig)return n._loadedConfig;if(n&&n.component)return null}return null}(),l=s?s.module.componentFactoryResolver:null;o.attachRef=null,o.route=i,o.resolver=l,o.outlet&&o.outlet.activateWith(i,l),this.activateChildRoutes(t,null,o.children)}else this.activateChildRoutes(t,null,n)},t}();function eh(t){Uu(t.value),t.children.forEach(eh)}function nh(t){return\"function\"==typeof t}function ih(t){return t instanceof lu}var rh=function(){return function(t){this.segmentGroup=t||null}}(),oh=function(){return function(t){this.urlTree=t}}();function ah(t){return new D(function(e){return e.error(new rh(t))})}function sh(t){return new D(function(e){return e.error(new oh(t))})}function lh(t){return new D(function(e){return e.error(new Error(\"Only absolute redirects can have named outlets. redirectTo: '\"+t+\"'\"))})}var ch=function(){function t(t,e,n,i,r){this.configLoader=e,this.urlSerializer=n,this.urlTree=i,this.config=r,this.allowRedirects=!0,this.ngModule=t.get(Oe)}return t.prototype.apply=function(){var t=this;return this.expandSegmentGroup(this.ngModule,this.config,this.urlTree.root,Wc).pipe(tt(function(e){return t.createUrlTree(e,t.urlTree.queryParams,t.urlTree.fragment)})).pipe(tl(function(e){if(e instanceof oh)return t.allowRedirects=!1,t.match(e.urlTree);if(e instanceof rh)throw t.noMatchError(e);throw e}))},t.prototype.match=function(t){var e=this;return this.expandSegmentGroup(this.ngModule,this.config,t.root,Wc).pipe(tt(function(n){return e.createUrlTree(n,t.queryParams,t.fragment)})).pipe(tl(function(t){if(t instanceof rh)throw e.noMatchError(t);throw t}))},t.prototype.noMatchError=function(t){return new Error(\"Cannot match any routes. URL Segment: '\"+t.segmentGroup+\"'\")},t.prototype.createUrlTree=function(t,e,n){var i,r=t.segments.length>0?new cu([],((i={})[Wc]=t,i)):t;return new lu(r,e,n)},t.prototype.expandSegmentGroup=function(t,e,n,i){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe(tt(function(t){return new cu([],t)})):this.expandSegment(t,n,e,n.segments,i,!0)},t.prototype.expandChildren=function(t,e,n){var i=this;return function(n,r){if(0===Object.keys(n).length)return Os({});var o=[],a=[],s={};return ou(n,function(n,r){var l,c,u=(l=r,c=n,i.expandSegmentGroup(t,e,c,l)).pipe(tt(function(t){return s[r]=t}));r===Wc?o.push(u):a.push(u)}),Os.apply(null,o.concat(a)).pipe(Ls(),$s(),tt(function(){return s}))}(n.children)},t.prototype.expandSegment=function(t,e,n,i,r,o){var a=this;return Os.apply(void 0,u(n)).pipe(tt(function(s){return a.expandSegmentAgainstRoute(t,e,n,s,i,r,o).pipe(tl(function(t){if(t instanceof rh)return Os(null);throw t}))}),Ls(),al(function(t){return!!t}),tl(function(t,n){if(t instanceof As||\"EmptyError\"===t.name){if(a.noLeftoversInUrl(e,i,r))return Os(new cu([],{}));throw new rh(e)}throw t}))},t.prototype.noLeftoversInUrl=function(t,e,n){return 0===e.length&&!t.children[n]},t.prototype.expandSegmentAgainstRoute=function(t,e,n,i,r,o,a){return fh(i)!==o?ah(e):void 0===i.redirectTo?this.matchSegmentAgainstRoute(t,e,i,r):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,i,r,o):ah(e)},t.prototype.expandSegmentAgainstRouteUsingRedirect=function(t,e,n,i,r,o){return\"**\"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,i,o):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,i,r,o)},t.prototype.expandWildCardWithParamsAgainstRouteUsingRedirect=function(t,e,n,i){var r=this,o=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith(\"/\")?sh(o):this.lineralizeSegments(n,o).pipe(ot(function(n){var o=new cu(n,{});return r.expandSegment(t,o,e,n,i,!1)}))},t.prototype.expandRegularSegmentAgainstRouteUsingRedirect=function(t,e,n,i,r,o){var a=this,s=uh(e,i,r),l=s.consumedSegments,c=s.lastChild,u=s.positionalParamSegments;if(!s.matched)return ah(e);var h=this.applyRedirectCommands(l,i.redirectTo,u);return i.redirectTo.startsWith(\"/\")?sh(h):this.lineralizeSegments(i,h).pipe(ot(function(i){return a.expandSegment(t,e,n,i.concat(r.slice(c)),o,!1)}))},t.prototype.matchSegmentAgainstRoute=function(t,e,n,i){var r=this;if(\"**\"===n.path)return n.loadChildren?this.configLoader.load(t.injector,n).pipe(tt(function(t){return n._loadedConfig=t,new cu(i,{})})):Os(new cu(i,{}));var a=uh(e,n,i),s=a.consumedSegments,c=a.lastChild;if(!a.matched)return ah(e);var u=i.slice(c);return this.getChildConfig(t,n,i).pipe(ot(function(t){var n=t.module,i=t.routes,a=function(t,e,n,i){return n.length>0&&function(t,e,n){return i.some(function(n){return dh(t,e,n)&&fh(n)!==Wc})}(t,n)?{segmentGroup:hh(new cu(e,function(t,e){var n,i,r={};r[Wc]=e;try{for(var o=l(t),a=o.next();!a.done;a=o.next()){var s=a.value;\"\"===s.path&&fh(s)!==Wc&&(r[fh(s)]=new cu([],{}))}}catch(c){n={error:c}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}return r}(i,new cu(n,t.children)))),slicedSegments:[]}:0===n.length&&function(t,e,n){return i.some(function(n){return dh(t,e,n)})}(t,n)?{segmentGroup:hh(new cu(t.segments,function(t,e,n,i){var r,a,s={};try{for(var c=l(n),u=c.next();!u.done;u=c.next()){var h=u.value;dh(t,e,h)&&!i[fh(h)]&&(s[fh(h)]=new cu([],{}))}}catch(d){r={error:d}}finally{try{u&&!u.done&&(a=c.return)&&a.call(c)}finally{if(r)throw r.error}}return o({},i,s)}(t,n,i,t.children))),slicedSegments:n}:{segmentGroup:t,slicedSegments:n}}(e,s,u,i),c=a.segmentGroup,h=a.slicedSegments;return 0===h.length&&c.hasChildren()?r.expandChildren(n,i,c).pipe(tt(function(t){return new cu(s,t)})):0===i.length&&0===h.length?Os(new cu(s,{})):r.expandSegment(n,c,i,h,Wc,!0).pipe(tt(function(t){return new cu(s.concat(t.segments),t.children)}))}))},t.prototype.getChildConfig=function(t,e,n){var i=this;return e.children?Os(new Jc(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?Os(e._loadedConfig):function(t,e,n){var i,r=e.canLoad;return r&&0!==r.length?rt(r).pipe(tt(function(i){var r,o=t.get(i);if(function(t){return t&&nh(t.canLoad)}(o))r=o.canLoad(e,n);else{if(!nh(o))throw new Error(\"Invalid CanLoad guard\");r=o(e,n)}return au(r)})).pipe(Ls(),(i=function(t){return!0===t},function(t){return t.lift(new sl(i,void 0,t))})):Os(!0)}(t.injector,e,n).pipe(ot(function(n){return n?i.configLoader.load(t.injector,e).pipe(tt(function(t){return e._loadedConfig=t,t})):function(t){return new D(function(e){return e.error(Kc(\"Cannot load children because the guard of the route \\\"path: '\"+t.path+\"'\\\" returned false\"))})}(e)})):Os(new Jc([],t))},t.prototype.lineralizeSegments=function(t,e){for(var n=[],i=e.root;;){if(n=n.concat(i.segments),0===i.numberOfChildren)return Os(n);if(i.numberOfChildren>1||!i.children[Wc])return lh(t.redirectTo);i=i.children[Wc]}},t.prototype.applyRedirectCommands=function(t,e,n){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,n)},t.prototype.applyRedirectCreatreUrlTree=function(t,e,n,i){var r=this.createSegmentGroup(t,e.root,n,i);return new lu(r,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)},t.prototype.createQueryParams=function(t,e){var n={};return ou(t,function(t,i){if(\"string\"==typeof t&&t.startsWith(\":\")){var r=t.substring(1);n[i]=e[r]}else n[i]=t}),n},t.prototype.createSegmentGroup=function(t,e,n,i){var r=this,o=this.createSegments(t,e.segments,n,i),a={};return ou(e.children,function(e,o){a[o]=r.createSegmentGroup(t,e,n,i)}),new cu(o,a)},t.prototype.createSegments=function(t,e,n,i){var r=this;return e.map(function(e){return e.path.startsWith(\":\")?r.findPosParam(t,e,i):r.findOrReturn(e,n)})},t.prototype.findPosParam=function(t,e,n){var i=n[e.path.substring(1)];if(!i)throw new Error(\"Cannot redirect to '\"+t+\"'. Cannot find '\"+e.path+\"'.\");return i},t.prototype.findOrReturn=function(t,e){var n,i,r=0;try{for(var o=l(e),a=o.next();!a.done;a=o.next()){var s=a.value;if(s.path===t.path)return e.splice(r),s;r++}}catch(c){n={error:c}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}return t},t}();function uh(t,e,n){if(\"\"===e.path)return\"full\"===e.pathMatch&&(t.hasChildren()||n.length>0)?{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}:{matched:!0,consumedSegments:[],lastChild:0,positionalParamSegments:{}};var i=(e.matcher||Zc)(n,t,e);return i?{matched:!0,consumedSegments:i.consumed,lastChild:i.consumed.length,positionalParamSegments:i.posParams}:{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}}function hh(t){if(1===t.numberOfChildren&&t.children[Wc]){var e=t.children[Wc];return new cu(t.segments.concat(e.segments),e.children)}return t}function dh(t,e,n){return(!(t.hasChildren()||e.length>0)||\"full\"!==n.pathMatch)&&\"\"===n.path&&void 0!==n.redirectTo}function fh(t){return t.outlet||Wc}var ph=function(){return function(t){this.path=t,this.route=this.path[this.path.length-1]}}(),gh=function(){return function(t,e){this.component=t,this.route=e}}();function mh(t,e,n){var i=function(t){if(!t)return null;for(var e=t.parent;e;e=e.parent){var n=e.routeConfig;if(n&&n._loadedConfig)return n._loadedConfig}return null}(e);return(i?i.module.injector:n).get(t)}function vh(t,e,n,i,r){void 0===r&&(r={canDeactivateChecks:[],canActivateChecks:[]});var o=Mu(e);return t.children.forEach(function(t){!function(t,e,n,i,r){void 0===r&&(r={canDeactivateChecks:[],canActivateChecks:[]});var o=t.value,a=e?e.value:null,s=n?n.getContext(t.value.outlet):null;if(a&&o.routeConfig===a.routeConfig){var l=function(t,e,n){if(\"function\"==typeof n)return n(t,e);switch(n){case\"pathParamsChange\":return!hu(t.url,e.url);case\"pathParamsOrQueryParamsChange\":return!hu(t.url,e.url)||!nu(t.queryParams,e.queryParams);case\"always\":return!0;case\"paramsOrQueryParamsChange\":return!zu(t,e)||!nu(t.queryParams,e.queryParams);case\"paramsChange\":default:return!zu(t,e)}}(a,o,o.routeConfig.runGuardsAndResolvers);l?r.canActivateChecks.push(new ph(i)):(o.data=a.data,o._resolvedData=a._resolvedData),vh(t,e,o.component?s?s.children:null:n,i,r),l&&r.canDeactivateChecks.push(new gh(s&&s.outlet&&s.outlet.component||null,a))}else a&&yh(e,s,r),r.canActivateChecks.push(new ph(i)),vh(t,null,o.component?s?s.children:null:n,i,r)}(t,o[t.value.outlet],n,i.concat([t.value]),r),delete o[t.value.outlet]}),ou(o,function(t,e){return yh(t,n.getContext(e),r)}),r}function yh(t,e,n){var i=Mu(t),r=t.value;ou(i,function(t,i){yh(t,r.component?e?e.children.getContext(i):null:e,n)}),n.canDeactivateChecks.push(new gh(r.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,r))}var bh=Symbol(\"INITIAL_VALUE\");function _h(){return cl(function(t){return(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=null,i=null;return U(t[t.length-1])&&(i=t.pop()),\"function\"==typeof t[t.length-1]&&(n=t.pop()),1===t.length&&h(t[0])&&(t=t[0]),it(t,i).lift(new Ds(n))}).apply(void 0,u(t.map(function(t){return t.pipe(il(1),function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e){var n=t[t.length-1];U(n)?t.pop():n=null;var i=t.length;return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 1===t.length||2===t.length&&U(t[1])?rt(t[0]):Ls()(Os.apply(void 0,t))}(1!==i||n?i>0?it(t,n):Es(n):Ts(t[0]),e)}}(bh))}))).pipe(dl(function(t,e){var n=!1;return e.reduce(function(t,i,r){if(t!==bh)return t;if(i===bh&&(n=!0),!n){if(!1===i)return i;if(r===e.length-1||ih(i))return i}return t},t)},bh),Fs(function(t){return t!==bh}),tt(function(t){return ih(t)?t:!0===t}),il(1))})}function wh(t,e){return null!==t&&e&&e(new Uc(t)),Os(!0)}function xh(t,e){return null!==t&&e&&e(new Bc(t)),Os(!0)}function Ch(t,e,n){var i=e.routeConfig?e.routeConfig.canActivate:null;return i&&0!==i.length?Os(i.map(function(i){return Rs(function(){var r,o=mh(i,e,n);if(function(t){return t&&nh(t.canActivate)}(o))r=au(o.canActivate(e,t));else{if(!nh(o))throw new Error(\"Invalid CanActivate guard\");r=au(o(e,t))}return r.pipe(al())})})).pipe(_h()):Os(!0)}function Sh(t,e,n){var i=e[e.length-1],r=e.slice(0,e.length-1).reverse().map(function(t){return function(t){var e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(t)}).filter(function(t){return null!==t}).map(function(e){return Rs(function(){return Os(e.guards.map(function(r){var o,a=mh(r,e.node,n);if(function(t){return t&&nh(t.canActivateChild)}(a))o=au(a.canActivateChild(i,t));else{if(!nh(a))throw new Error(\"Invalid CanActivateChild guard\");o=au(a(i,t))}return o.pipe(al())})).pipe(_h())})});return Os(r).pipe(_h())}var kh=function(){return function(){}}(),Eh=function(){function t(t,e,n,i,r,o){this.rootComponentType=t,this.config=e,this.urlTree=n,this.url=i,this.paramsInheritanceStrategy=r,this.relativeLinkResolution=o}return t.prototype.recognize=function(){try{var t=Ph(this.urlTree.root,[],[],this.config,this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,Wc),n=new Fu([],Object.freeze({}),Object.freeze(o({},this.urlTree.queryParams)),this.urlTree.fragment,{},Wc,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new Au(n,e),r=new Nu(this.url,i);return this.inheritParamsAndData(r._root),Os(r)}catch(a){return new D(function(t){return t.error(a)})}},t.prototype.inheritParamsAndData=function(t){var e=this,n=t.value,i=Lu(n,this.paramsInheritanceStrategy);n.params=Object.freeze(i.params),n.data=Object.freeze(i.data),t.children.forEach(function(t){return e.inheritParamsAndData(t)})},t.prototype.processSegmentGroup=function(t,e,n){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,n)},t.prototype.processChildren=function(t,e){var n,i=this,r=du(e,function(e,n){return i.processSegmentGroup(t,e,n)});return n={},r.forEach(function(t){var e=n[t.value.outlet];if(e){var i=e.url.map(function(t){return t.toString()}).join(\"/\"),r=t.value.url.map(function(t){return t.toString()}).join(\"/\");throw new Error(\"Two segments cannot have the same outlet name: '\"+i+\"' and '\"+r+\"'.\")}n[t.value.outlet]=t.value}),r.sort(function(t,e){return t.value.outlet===Wc?-1:e.value.outlet===Wc?1:t.value.outlet.localeCompare(e.value.outlet)}),r},t.prototype.processSegment=function(t,e,n,i){var r,o;try{for(var a=l(t),s=a.next();!s.done;s=a.next()){var c=s.value;try{return this.processSegmentAgainstRoute(c,e,n,i)}catch(u){if(!(u instanceof kh))throw u}}}catch(h){r={error:h}}finally{try{s&&!s.done&&(o=a.return)&&o.call(a)}finally{if(r)throw r.error}}if(this.noLeftoversInUrl(e,n,i))return[];throw new kh},t.prototype.noLeftoversInUrl=function(t,e,n){return 0===e.length&&!t.children[n]},t.prototype.processSegmentAgainstRoute=function(t,e,n,i){if(t.redirectTo)throw new kh;if((t.outlet||Wc)!==i)throw new kh;var r,a=[],s=[];if(\"**\"===t.path){var l=n.length>0?ru(n).parameters:{};r=new Fu(n,l,Object.freeze(o({},this.urlTree.queryParams)),this.urlTree.fragment,Mh(t),i,t.component,t,Th(e),Oh(e)+n.length,Dh(t))}else{var c=function(t,e,n){if(\"\"===e.path){if(\"full\"===e.pathMatch&&(t.hasChildren()||n.length>0))throw new kh;return{consumedSegments:[],lastChild:0,parameters:{}}}var i=(e.matcher||Zc)(n,t,e);if(!i)throw new kh;var r={};ou(i.posParams,function(t,e){r[e]=t.path});var a=i.consumed.length>0?o({},r,i.consumed[i.consumed.length-1].parameters):r;return{consumedSegments:i.consumed,lastChild:i.consumed.length,parameters:a}}(e,t,n);a=c.consumedSegments,s=n.slice(c.lastChild),r=new Fu(a,c.parameters,Object.freeze(o({},this.urlTree.queryParams)),this.urlTree.fragment,Mh(t),i,t.component,t,Th(e),Oh(e)+a.length,Dh(t))}var u=function(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(t),h=Ph(e,a,s,u,this.relativeLinkResolution),d=h.segmentGroup,f=h.slicedSegments;if(0===f.length&&d.hasChildren()){var p=this.processChildren(u,d);return[new Au(r,p)]}if(0===u.length&&0===f.length)return[new Au(r,[])];var g=this.processSegment(u,d,f,Wc);return[new Au(r,g)]},t}();function Th(t){for(var e=t;e._sourceSegment;)e=e._sourceSegment;return e}function Oh(t){for(var e=t,n=e._segmentIndexShift?e._segmentIndexShift:0;e._sourceSegment;)n+=(e=e._sourceSegment)._segmentIndexShift?e._segmentIndexShift:0;return n-1}function Ph(t,e,n,i,r){if(n.length>0&&function(t,e,n){return i.some(function(n){return jh(t,e,n)&&Ah(n)!==Wc})}(t,n)){var a=new cu(e,function(t,e,n,i){var r,o,a={};a[Wc]=i,i._sourceSegment=t,i._segmentIndexShift=e.length;try{for(var s=l(n),c=s.next();!c.done;c=s.next()){var u=c.value;if(\"\"===u.path&&Ah(u)!==Wc){var h=new cu([],{});h._sourceSegment=t,h._segmentIndexShift=e.length,a[Ah(u)]=h}}}catch(d){r={error:d}}finally{try{c&&!c.done&&(o=s.return)&&o.call(s)}finally{if(r)throw r.error}}return a}(t,e,i,new cu(n,t.children)));return a._sourceSegment=t,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:[]}}if(0===n.length&&function(t,e,n){return i.some(function(n){return jh(t,e,n)})}(t,n)){var s=new cu(t.segments,function(t,e,n,i,r,a){var s,c,u={};try{for(var h=l(i),d=h.next();!d.done;d=h.next()){var f=d.value;if(jh(t,n,f)&&!r[Ah(f)]){var p=new cu([],{});p._sourceSegment=t,p._segmentIndexShift=\"legacy\"===a?t.segments.length:e.length,u[Ah(f)]=p}}}catch(g){s={error:g}}finally{try{d&&!d.done&&(c=h.return)&&c.call(h)}finally{if(s)throw s.error}}return o({},r,u)}(t,e,n,i,t.children,r));return s._sourceSegment=t,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:n}}var c=new cu(t.segments,t.children);return c._sourceSegment=t,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:n}}function jh(t,e,n){return(!(t.hasChildren()||e.length>0)||\"full\"!==n.pathMatch)&&\"\"===n.path&&void 0===n.redirectTo}function Ah(t){return t.outlet||Wc}function Mh(t){return t.data||{}}function Dh(t){return t.resolve||{}}function Ih(t,e,n,i){var r=mh(t,e,i);return au(r.resolve?r.resolve(e,n):r(e,n))}function Rh(t){return function(e){return e.pipe(cl(function(e){var n=t(e);return n?rt(n).pipe(tt(function(){return e})):rt([e])}))}}var Lh=function(){return function(){}}(),Fh=function(){function t(){}return t.prototype.shouldDetach=function(t){return!1},t.prototype.store=function(t,e){},t.prototype.shouldAttach=function(t){return!1},t.prototype.retrieve=function(t){return null},t.prototype.shouldReuseRoute=function(t,e){return t.routeConfig===e.routeConfig},t}(),Nh=new wt(\"ROUTES\"),Bh=function(){function t(t,e,n,i){this.loader=t,this.compiler=e,this.onLoadStartListener=n,this.onLoadEndListener=i}return t.prototype.load=function(t,e){var n=this;return this.onLoadStartListener&&this.onLoadStartListener(e),this.loadModuleFactory(e.loadChildren).pipe(tt(function(i){n.onLoadEndListener&&n.onLoadEndListener(e);var r=i.create(t);return new Jc(iu(r.injector.get(Nh)).map(eu),r)}))},t.prototype.loadModuleFactory=function(t){var e=this;return\"string\"==typeof t?rt(this.loader.load(t)):au(t()).pipe(ot(function(t){return t instanceof Pe?Os(t):rt(e.compiler.compileModuleAsync(t))}))},t}(),Hh=function(){return function(){}}(),Uh=function(){function t(){}return t.prototype.shouldProcessUrl=function(t){return!0},t.prototype.extract=function(t){return t},t.prototype.merge=function(t,e){return t},t}();function zh(t){throw t}function Vh(t,e,n){return e.parse(\"/\")}function Gh(t,e){return Os(null)}var Wh=function(){function t(t,e,n,i,r,o,a,s){var l=this;this.rootComponentType=t,this.urlSerializer=e,this.rootContexts=n,this.location=i,this.config=s,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.navigationId=0,this.isNgZoneEnabled=!1,this.events=new B,this.errorHandler=zh,this.malformedUriErrorHandler=Vh,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Gh,afterPreactivation:Gh},this.urlHandlingStrategy=new Uh,this.routeReuseStrategy=new Fh,this.onSameUrlNavigation=\"ignore\",this.paramsInheritanceStrategy=\"emptyOnly\",this.urlUpdateStrategy=\"deferred\",this.relativeLinkResolution=\"legacy\",this.ngModule=r.get(Oe),this.console=r.get(In);var c=r.get(Kn);this.isNgZoneEnabled=c instanceof Kn,this.resetConfig(s),this.currentUrlTree=new lu(new cu([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Bh(o,a,function(t){return l.triggerEvent(new Fc(t))},function(t){return l.triggerEvent(new Nc(t))}),this.routerState=Iu(this.currentUrlTree,this.rootComponentType),this.transitions=new Ps({id:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:\"imperative\",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}return t.prototype.setupNavigations=function(t){var e=this,n=this.events;return t.pipe(Fs(function(t){return 0!==t.id}),tt(function(t){return o({},t,{extractedUrl:e.urlHandlingStrategy.extract(t.rawUrl)})}),cl(function(t){var i,r,a,s,c=!1,u=!1;return Os(t).pipe(Ws(function(t){e.currentNavigation={id:t.id,initialUrl:t.currentRawUrl,extractedUrl:t.extractedUrl,trigger:t.source,extras:t.extras,previousNavigation:e.lastSuccessfulNavigation?o({},e.lastSuccessfulNavigation,{previousNavigation:null}):null}}),cl(function(t){var i,r,a,s,l=!e.navigated||t.extractedUrl.toString()!==e.browserUrlTree.toString();if((\"reload\"===e.onSameUrlNavigation||l)&&e.urlHandlingStrategy.shouldProcessUrl(t.rawUrl))return Os(t).pipe(cl(function(t){var i=e.transitions.getValue();return n.next(new Oc(t.id,e.serializeUrl(t.extractedUrl),t.source,t.restoredState)),i!==e.transitions.getValue()?ks:[t]}),cl(function(t){return Promise.resolve(t)}),(i=e.ngModule.injector,r=e.configLoader,a=e.urlSerializer,s=e.config,function(t){return t.pipe(cl(function(t){return function(e,n,i,r,o){return new ch(e,n,i,t.extractedUrl,o).apply()}(i,r,a,0,s).pipe(tt(function(e){return o({},t,{urlAfterRedirects:e})}))}))}),Ws(function(t){e.currentNavigation=o({},e.currentNavigation,{finalUrl:t.urlAfterRedirects})}),function(t,n,i,r,a){return function(i){return i.pipe(ot(function(i){return function(t,e,n,i,r,o){return void 0===r&&(r=\"emptyOnly\"),void 0===o&&(o=\"legacy\"),new Eh(t,e,n,i,r,o).recognize()}(t,n,i.urlAfterRedirects,(s=i.urlAfterRedirects,e.serializeUrl(s)),r,a).pipe(tt(function(t){return o({},i,{targetSnapshot:t})}));var s}))}}(e.rootComponentType,e.config,0,e.paramsInheritanceStrategy,e.relativeLinkResolution),Ws(function(t){\"eager\"===e.urlUpdateStrategy&&(t.extras.skipLocationChange||e.setBrowserUrl(t.urlAfterRedirects,!!t.extras.replaceUrl,t.id),e.browserUrlTree=t.urlAfterRedirects)}),Ws(function(t){var i=new Mc(t.id,e.serializeUrl(t.extractedUrl),e.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);n.next(i)}));if(l&&e.rawUrlTree&&e.urlHandlingStrategy.shouldProcessUrl(e.rawUrlTree)){var c=t.extractedUrl,u=t.source,h=t.restoredState,d=t.extras,f=new Oc(t.id,e.serializeUrl(c),u,h);n.next(f);var p=Iu(c,e.rootComponentType).snapshot;return Os(o({},t,{targetSnapshot:p,urlAfterRedirects:c,extras:o({},d,{skipLocationChange:!1,replaceUrl:!1})}))}return e.rawUrlTree=t.rawUrl,t.resolve(null),ks}),Rh(function(t){var n=t.extras;return e.hooks.beforePreactivation(t.targetSnapshot,{navigationId:t.id,appliedUrlTree:t.extractedUrl,rawUrlTree:t.rawUrl,skipLocationChange:!!n.skipLocationChange,replaceUrl:!!n.replaceUrl})}),Ws(function(t){var n=new Dc(t.id,e.serializeUrl(t.extractedUrl),e.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.triggerEvent(n)}),tt(function(t){return o({},t,{guards:(n=t.targetSnapshot,i=t.currentSnapshot,r=e.rootContexts,a=n._root,vh(a,i?i._root:null,r,[a.value]))});var n,i,r,a}),function(t,e){return function(n){return n.pipe(ot(function(n){var i=n.targetSnapshot,r=n.currentSnapshot,a=n.guards,s=a.canActivateChecks,l=a.canDeactivateChecks;return 0===l.length&&0===s.length?Os(o({},n,{guardsResult:!0})):function(t,e,n,i){return rt(l).pipe(ot(function(t){return function(t,e,n,i,r){var o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return o&&0!==o.length?Os(o.map(function(o){var a,s=mh(o,e,r);if(function(t){return t&&nh(t.canDeactivate)}(s))a=au(s.canDeactivate(t,e,n,i));else{if(!nh(s))throw new Error(\"Invalid CanDeactivate guard\");a=au(s(t,e,n,i))}return a.pipe(al())})).pipe(_h()):Os(!0)}(t.component,t.route,n,e,i)}),al(function(t){return!0!==t},!0))}(0,i,r,t).pipe(ot(function(n){return n&&\"boolean\"==typeof n?function(t,e,n,i){return rt(s).pipe(gl(function(e){return rt([xh(e.route.parent,i),wh(e.route,i),Sh(t,e.path,n),Ch(t,e.route,n)]).pipe(Ls(),al(function(t){return!0!==t},!0))}),al(function(t){return!0!==t},!0))}(i,0,t,e):Os(n)}),tt(function(t){return o({},n,{guardsResult:t})}))}))}}(e.ngModule.injector,function(t){return e.triggerEvent(t)}),Ws(function(t){if(ih(t.guardsResult)){var n=Kc('Redirecting to \"'+e.serializeUrl(t.guardsResult)+'\"');throw n.url=t.guardsResult,n}}),Ws(function(t){var n=new Ic(t.id,e.serializeUrl(t.extractedUrl),e.serializeUrl(t.urlAfterRedirects),t.targetSnapshot,!!t.guardsResult);e.triggerEvent(n)}),Fs(function(t){if(!t.guardsResult){e.resetUrlToCurrentUrlTree();var i=new jc(t.id,e.serializeUrl(t.extractedUrl),\"\");return n.next(i),t.resolve(!1),!1}return!0}),Rh(function(t){if(t.guards.canActivateChecks.length)return Os(t).pipe(Ws(function(t){var n=new Rc(t.id,e.serializeUrl(t.extractedUrl),e.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.triggerEvent(n)}),(n=e.paramsInheritanceStrategy,i=e.ngModule.injector,function(t){return t.pipe(ot(function(t){var e=t.targetSnapshot,r=t.guards.canActivateChecks;return r.length?rt(r).pipe(gl(function(t){return function(t,n,i,r){return function(t,e,n,i){var r=Object.keys(t);if(0===r.length)return Os({});if(1===r.length){var o=r[0];return Ih(t[o],e,n,i).pipe(tt(function(t){var e;return(e={})[o]=t,e}))}var a={};return rt(r).pipe(ot(function(r){return Ih(t[r],e,n,i).pipe(tt(function(t){return a[r]=t,t}))})).pipe($s(),tt(function(){return a}))}(t._resolve,t,e,r).pipe(tt(function(e){return t._resolvedData=e,t.data=o({},t.data,Lu(t,i).resolve),null}))}(t.route,0,n,i)}),function(t,e){return arguments.length>=2?function(e){return A(dl(t,void 0),zs(1),Zs(void 0))(e)}:function(e){return A(dl(function(e,n,i){return t(e)}),zs(1))(e)}}(function(t,e){return t}),tt(function(e){return t})):Os(t)}))}),Ws(function(t){var n=new Lc(t.id,e.serializeUrl(t.extractedUrl),e.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.triggerEvent(n)}));var n,i}),Rh(function(t){var n=t.extras;return e.hooks.afterPreactivation(t.targetSnapshot,{navigationId:t.id,appliedUrlTree:t.extractedUrl,rawUrlTree:t.rawUrl,skipLocationChange:!!n.skipLocationChange,replaceUrl:!!n.replaceUrl})}),tt(function(t){var n,i,r,a=(r=function t(e,n,i){if(i&&e.shouldReuseRoute(n.value,i.value.snapshot)){(c=i.value)._futureSnapshot=n.value;var r=function(e,n,i){return n.children.map(function(n){var r,o;try{for(var a=l(i.children),s=a.next();!s.done;s=a.next()){var c=s.value;if(e.shouldReuseRoute(c.value.snapshot,n.value))return t(e,n,c)}}catch(u){r={error:u}}finally{try{s&&!s.done&&(o=a.return)&&o.call(a)}finally{if(r)throw r.error}}return t(e,n)})}(e,n,i);return new Au(c,r)}var o=e.retrieve(n.value);if(o){var a=o.route;return function t(e,n){if(e.value.routeConfig!==n.value.routeConfig)throw new Error(\"Cannot reattach ActivatedRouteSnapshot created from a different route\");if(e.children.length!==n.children.length)throw new Error(\"Cannot reattach ActivatedRouteSnapshot with a different number of children\");n.value._futureSnapshot=e.value;for(var i=0;i<e.children.length;++i)t(e.children[i],n.children[i])}(n,a),a}var s,c=new Ru(new Ps((s=n.value).url),new Ps(s.params),new Ps(s.queryParams),new Ps(s.fragment),new Ps(s.data),s.outlet,s.component,s);return r=n.children.map(function(n){return t(e,n)}),new Au(c,r)}(e.routeReuseStrategy,(n=t.targetSnapshot)._root,(i=t.currentRouterState)?i._root:void 0),new Du(r,n));return o({},t,{targetRouterState:a})}),Ws(function(t){e.currentUrlTree=t.urlAfterRedirects,e.rawUrlTree=e.urlHandlingStrategy.merge(e.currentUrlTree,t.rawUrl),e.routerState=t.targetRouterState,\"deferred\"===e.urlUpdateStrategy&&(t.extras.skipLocationChange||e.setBrowserUrl(e.rawUrlTree,!!t.extras.replaceUrl,t.id,t.extras.state),e.browserUrlTree=t.urlAfterRedirects)}),(r=e.rootContexts,a=e.routeReuseStrategy,s=function(t){return e.triggerEvent(t)},tt(function(t){return new th(a,t.targetRouterState,t.currentRouterState,s).activate(r),t})),Ws({next:function(){c=!0},complete:function(){c=!0}}),(i=function(){if(!c&&!u){e.resetUrlToCurrentUrlTree();var i=new jc(t.id,e.serializeUrl(t.extractedUrl),\"Navigation ID \"+t.id+\" is not equal to the current navigation id \"+e.navigationId);n.next(i),t.resolve(!1)}e.currentNavigation=null},function(t){return t.lift(new ml(i))}),tl(function(i){if(u=!0,(s=i)&&s[qc]){var r=ih(i.url);r||(e.navigated=!0,e.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl));var o=new jc(t.id,e.serializeUrl(t.extractedUrl),i.message);n.next(o),t.resolve(!1),r&&e.navigateByUrl(i.url)}else{e.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl);var a=new Ac(t.id,e.serializeUrl(t.extractedUrl),i);n.next(a);try{t.resolve(e.errorHandler(i))}catch(l){t.reject(l)}}var s;return ks}))}))},t.prototype.resetRootComponentType=function(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType},t.prototype.getTransition=function(){return this.transitions.value},t.prototype.setTransition=function(t){this.transitions.next(o({},this.getTransition(),t))},t.prototype.initialNavigation=function(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})},t.prototype.setUpLocationChangeListener=function(){var t=this;this.locationSubscription||(this.locationSubscription=this.location.subscribe(function(e){var n=t.parseUrl(e.url),i=\"popstate\"===e.type?\"popstate\":\"hashchange\",r=e.state&&e.state.navigationId?e.state:null;setTimeout(function(){t.scheduleNavigation(n,i,r,{replaceUrl:!0})},0)}))},Object.defineProperty(t.prototype,\"url\",{get:function(){return this.serializeUrl(this.currentUrlTree)},enumerable:!0,configurable:!0}),t.prototype.getCurrentNavigation=function(){return this.currentNavigation},t.prototype.triggerEvent=function(t){this.events.next(t)},t.prototype.resetConfig=function(t){Qc(t),this.config=t.map(eu),this.navigated=!1,this.lastSuccessfulId=-1},t.prototype.ngOnDestroy=function(){this.dispose()},t.prototype.dispose=function(){this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=null)},t.prototype.createUrlTree=function(t,e){void 0===e&&(e={});var n=e.relativeTo,i=e.queryParams,r=e.fragment,a=e.preserveQueryParams,s=e.queryParamsHandling,l=e.preserveFragment;ze()&&a&&console&&console.warn&&console.warn(\"preserveQueryParams is deprecated, use queryParamsHandling instead.\");var c=n||this.routerState.root,h=l?this.currentUrlTree.fragment:r,d=null;if(s)switch(s){case\"merge\":d=o({},this.currentUrlTree.queryParams,i);break;case\"preserve\":d=this.currentUrlTree.queryParams;break;default:d=i||null}else d=a?this.currentUrlTree.queryParams:i||null;return null!==d&&(d=this.removeEmptyProps(d)),function(t,e,n,i,r){if(0===n.length)return Gu(e.root,e.root,e,i,r);var o=function(t){if(\"string\"==typeof t[0]&&1===t.length&&\"/\"===t[0])return new Wu(!0,0,t);var e=0,n=!1,i=t.reduce(function(t,i,r){if(\"object\"==typeof i&&null!=i){if(i.outlets){var o={};return ou(i.outlets,function(t,e){o[e]=\"string\"==typeof t?t.split(\"/\"):t}),u(t,[{outlets:o}])}if(i.segmentPath)return u(t,[i.segmentPath])}return\"string\"!=typeof i?u(t,[i]):0===r?(i.split(\"/\").forEach(function(i,r){0==r&&\".\"===i||(0==r&&\"\"===i?n=!0:\"..\"===i?e++:\"\"!=i&&t.push(i))}),t):u(t,[i])},[]);return new Wu(n,e,i)}(n);if(o.toRoot())return Gu(e.root,new cu([],{}),e,i,r);var a=function(t,n,i){if(t.isAbsolute)return new Xu(e.root,!0,0);if(-1===i.snapshot._lastPathIndex)return new Xu(i.snapshot._urlSegment,!0,0);var r=Vu(t.commands[0])?0:1;return function(e,n,o){for(var a=i.snapshot._urlSegment,s=i.snapshot._lastPathIndex+r,l=t.numberOfDoubleDots;l>s;){if(l-=s,!(a=a.parent))throw new Error(\"Invalid number of '../'\");s=a.segments.length}return new Xu(a,!1,s-l)}()}(o,0,t),s=a.processChildren?Ku(a.segmentGroup,a.index,o.commands):qu(a.segmentGroup,a.index,o.commands);return Gu(a.segmentGroup,s,e,i,r)}(c,this.currentUrlTree,t,d,h)},t.prototype.navigateByUrl=function(t,e){void 0===e&&(e={skipLocationChange:!1}),ze()&&this.isNgZoneEnabled&&!Kn.isInAngularZone()&&this.console.warn(\"Navigation triggered outside Angular zone, did you forget to call 'ngZone.run()'?\");var n=ih(t)?t:this.parseUrl(t),i=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(i,\"imperative\",null,e)},t.prototype.navigate=function(t,e){return void 0===e&&(e={skipLocationChange:!1}),function(t){for(var e=0;e<t.length;e++){var n=t[e];if(null==n)throw new Error(\"The requested path contains \"+n+\" segment at index \"+e)}}(t),this.navigateByUrl(this.createUrlTree(t,e),e)},t.prototype.serializeUrl=function(t){return this.urlSerializer.serialize(t)},t.prototype.parseUrl=function(t){var e;try{e=this.urlSerializer.parse(t)}catch(n){e=this.malformedUriErrorHandler(n,this.urlSerializer,t)}return e},t.prototype.isActive=function(t,e){if(ih(t))return su(this.currentUrlTree,t,e);var n=this.parseUrl(t);return su(this.currentUrlTree,n,e)},t.prototype.removeEmptyProps=function(t){return Object.keys(t).reduce(function(e,n){var i=t[n];return null!=i&&(e[n]=i),e},{})},t.prototype.processNavigations=function(){var t=this;this.navigations.subscribe(function(e){t.navigated=!0,t.lastSuccessfulId=e.id,t.events.next(new Pc(e.id,t.serializeUrl(e.extractedUrl),t.serializeUrl(t.currentUrlTree))),t.lastSuccessfulNavigation=t.currentNavigation,t.currentNavigation=null,e.resolve(!0)},function(e){t.console.warn(\"Unhandled Navigation Error: \")})},t.prototype.scheduleNavigation=function(t,e,n,i){var r=this.getTransition();if(r&&\"imperative\"!==e&&\"imperative\"===r.source&&r.rawUrl.toString()===t.toString())return Promise.resolve(!0);if(r&&\"hashchange\"==e&&\"popstate\"===r.source&&r.rawUrl.toString()===t.toString())return Promise.resolve(!0);if(r&&\"popstate\"==e&&\"hashchange\"===r.source&&r.rawUrl.toString()===t.toString())return Promise.resolve(!0);var o=null,a=null,s=new Promise(function(t,e){o=t,a=e}),l=++this.navigationId;return this.setTransition({id:l,source:e,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:i,resolve:o,reject:a,promise:s,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),s.catch(function(t){return Promise.reject(t)})},t.prototype.setBrowserUrl=function(t,e,n,i){var r=this.urlSerializer.serialize(t);i=i||{},this.location.isCurrentPathEqualTo(r)||e?this.location.replaceState(r,\"\",o({},i,{navigationId:n})):this.location.go(r,\"\",o({},i,{navigationId:n}))},t.prototype.resetStateAndUrl=function(t,e,n){this.routerState=t,this.currentUrlTree=e,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()},t.prototype.resetUrlToCurrentUrlTree=function(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),\"\",{navigationId:this.lastSuccessfulId})},t}(),Xh=function(){return function(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Yh,this.attachRef=null}}(),Yh=function(){function t(){this.contexts=new Map}return t.prototype.onChildOutletCreated=function(t,e){var n=this.getOrCreateContext(t);n.outlet=e,this.contexts.set(t,n)},t.prototype.onChildOutletDestroyed=function(t){var e=this.getContext(t);e&&(e.outlet=null)},t.prototype.onOutletDeactivated=function(){var t=this.contexts;return this.contexts=new Map,t},t.prototype.onOutletReAttached=function(t){this.contexts=t},t.prototype.getOrCreateContext=function(t){var e=this.getContext(t);return e||(e=new Xh,this.contexts.set(t,e)),e},t.prototype.getContext=function(t){return this.contexts.get(t)||null},t}(),qh=function(){function t(t,e,n,i,r){this.parentContexts=t,this.location=e,this.resolver=n,this.changeDetector=r,this.activated=null,this._activatedRoute=null,this.activateEvents=new hn,this.deactivateEvents=new hn,this.name=i||Wc,t.onChildOutletCreated(this.name,this)}return t.prototype.ngOnDestroy=function(){this.parentContexts.onChildOutletDestroyed(this.name)},t.prototype.ngOnInit=function(){if(!this.activated){var t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}},Object.defineProperty(t.prototype,\"isActivated\",{get:function(){return!!this.activated},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"component\",{get:function(){if(!this.activated)throw new Error(\"Outlet is not activated\");return this.activated.instance},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"activatedRoute\",{get:function(){if(!this.activated)throw new Error(\"Outlet is not activated\");return this._activatedRoute},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"activatedRouteData\",{get:function(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}},enumerable:!0,configurable:!0}),t.prototype.detach=function(){if(!this.activated)throw new Error(\"Outlet is not activated\");this.location.detach();var t=this.activated;return this.activated=null,this._activatedRoute=null,t},t.prototype.attach=function(t,e){this.activated=t,this._activatedRoute=e,this.location.insert(t.hostView)},t.prototype.deactivate=function(){if(this.activated){var t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}},t.prototype.activateWith=function(t,e){if(this.isActivated)throw new Error(\"Cannot activate an already activated outlet\");this._activatedRoute=t;var n=(e=e||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),i=this.parentContexts.getOrCreateContext(this.name).children,r=new Kh(t,i,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,r),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)},t}(),Kh=function(){function t(t,e,n){this.route=t,this.childContexts=e,this.parent=n}return t.prototype.get=function(t,e){return t===Ru?this.route:t===Yh?this.childContexts:this.parent.get(t,e)},t}(),Zh=function(){return function(){}}(),Jh=function(){function t(){}return t.prototype.preload=function(t,e){return e().pipe(tl(function(){return Os(null)}))},t}(),Qh=function(){function t(){}return t.prototype.preload=function(t,e){return Os(null)},t}(),$h=function(){function t(t,e,n,i,r){this.router=t,this.injector=i,this.preloadingStrategy=r,this.loader=new Bh(e,n,function(e){return t.triggerEvent(new Fc(e))},function(e){return t.triggerEvent(new Nc(e))})}return t.prototype.setUpPreloading=function(){var t=this;this.subscription=this.router.events.pipe(Fs(function(t){return t instanceof Pc}),gl(function(){return t.preload()})).subscribe(function(){})},t.prototype.preload=function(){var t=this.injector.get(Oe);return this.processRoutes(t,this.router.config)},t.prototype.ngOnDestroy=function(){this.subscription.unsubscribe()},t.prototype.processRoutes=function(t,e){var n,i,r=[];try{for(var o=l(e),a=o.next();!a.done;a=o.next()){var s=a.value;if(s.loadChildren&&!s.canLoad&&s._loadedConfig){var c=s._loadedConfig;r.push(this.processRoutes(c.module,c.routes))}else s.loadChildren&&!s.canLoad?r.push(this.preloadConfig(t,s)):s.children&&r.push(this.processRoutes(t,s.children))}}catch(u){n={error:u}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}return rt(r).pipe(ct(),tt(function(t){}))},t.prototype.preloadConfig=function(t,e){var n=this;return this.preloadingStrategy.preload(e,function(){return n.loader.load(t.injector,e).pipe(ot(function(t){return e._loadedConfig=t,n.processRoutes(t.module,t.routes)}))})},t}(),td=function(){function t(t,e,n){void 0===n&&(n={}),this.router=t,this.viewportScroller=e,this.options=n,this.lastId=0,this.lastSource=\"imperative\",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||\"disabled\",n.anchorScrolling=n.anchorScrolling||\"disabled\"}return t.prototype.init=function(){\"disabled\"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration(\"manual\"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()},t.prototype.createScrollEvents=function(){var t=this;return this.router.events.subscribe(function(e){e instanceof Oc?(t.store[t.lastId]=t.viewportScroller.getScrollPosition(),t.lastSource=e.navigationTrigger,t.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof Pc&&(t.lastId=e.id,t.scheduleScrollEvent(e,t.router.parseUrl(e.urlAfterRedirects).fragment))})},t.prototype.consumeScrollEvents=function(){var t=this;return this.router.events.subscribe(function(e){e instanceof Vc&&(e.position?\"top\"===t.options.scrollPositionRestoration?t.viewportScroller.scrollToPosition([0,0]):\"enabled\"===t.options.scrollPositionRestoration&&t.viewportScroller.scrollToPosition(e.position):e.anchor&&\"enabled\"===t.options.anchorScrolling?t.viewportScroller.scrollToAnchor(e.anchor):\"disabled\"!==t.options.scrollPositionRestoration&&t.viewportScroller.scrollToPosition([0,0]))})},t.prototype.scheduleScrollEvent=function(t,e){this.router.triggerEvent(new Vc(t,\"popstate\"===this.lastSource?this.store[this.restoredId]:null,e))},t.prototype.ngOnDestroy=function(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()},t}(),ed=new wt(\"ROUTER_CONFIGURATION\"),nd=new wt(\"ROUTER_FORROOT_GUARD\"),id=[cs,{provide:fu,useClass:pu},{provide:Wh,useFactory:ud,deps:[di,fu,Yh,cs,oe,mn,zn,Nh,ed,[Hh,new Ht],[Lh,new Ht]]},Yh,{provide:Ru,useFactory:hd,deps:[Wh]},{provide:mn,useClass:vi},$h,Qh,Jh,{provide:ed,useValue:{enableTracing:!1}}];function rd(){return new si(\"Router\",Wh)}var od=function(){function t(t,e){}var e;return e=t,t.forRoot=function(t,n){return{ngModule:e,providers:[id,cd(t),{provide:nd,useFactory:ld,deps:[[Wh,new Ht,new zt]]},{provide:ed,useValue:n||{}},{provide:ss,useFactory:sd,deps:[os,[new Bt(ls),new Ht],ed]},{provide:td,useFactory:ad,deps:[Wh,Cs,ed]},{provide:Zh,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:Qh},{provide:si,multi:!0,useFactory:rd},[dd,{provide:En,multi:!0,useFactory:fd,deps:[dd]},{provide:gd,useFactory:pd,deps:[dd]},{provide:Dn,multi:!0,useExisting:gd}]]}},t.forChild=function(t){return{ngModule:e,providers:[cd(t)]}},t}();function ad(t,e,n){return n.scrollOffset&&e.setOffset(n.scrollOffset),new td(t,e,n)}function sd(t,e,n){return void 0===n&&(n={}),n.useHash?new hs(t,e):new ds(t,e)}function ld(t){if(t)throw new Error(\"RouterModule.forRoot() called twice. Lazy loaded modules should use RouterModule.forChild() instead.\");return\"guarded\"}function cd(t){return[{provide:St,multi:!0,useValue:t},{provide:Nh,multi:!0,useValue:t}]}function ud(t,e,n,i,r,o,a,s,l,c,u){void 0===l&&(l={});var h=new Wh(null,e,n,i,r,o,a,iu(s));if(c&&(h.urlHandlingStrategy=c),u&&(h.routeReuseStrategy=u),l.errorHandler&&(h.errorHandler=l.errorHandler),l.malformedUriErrorHandler&&(h.malformedUriErrorHandler=l.malformedUriErrorHandler),l.enableTracing){var d=bl();h.events.subscribe(function(t){d.logGroup(\"Router Event: \"+t.constructor.name),d.log(t.toString()),d.log(t),d.logGroupEnd()})}return l.onSameUrlNavigation&&(h.onSameUrlNavigation=l.onSameUrlNavigation),l.paramsInheritanceStrategy&&(h.paramsInheritanceStrategy=l.paramsInheritanceStrategy),l.urlUpdateStrategy&&(h.urlUpdateStrategy=l.urlUpdateStrategy),l.relativeLinkResolution&&(h.relativeLinkResolution=l.relativeLinkResolution),h}function hd(t){return t.routerState.root}var dd=function(){function t(t){this.injector=t,this.initNavigation=!1,this.resultOfPreactivationDone=new B}return t.prototype.appInitializer=function(){var t=this;return this.injector.get(as,Promise.resolve(null)).then(function(){var e=null,n=new Promise(function(t){return e=t}),i=t.injector.get(Wh),r=t.injector.get(ed);if(t.isLegacyDisabled(r)||t.isLegacyEnabled(r))e(!0);else if(\"disabled\"===r.initialNavigation)i.setUpLocationChangeListener(),e(!0);else{if(\"enabled\"!==r.initialNavigation)throw new Error(\"Invalid initialNavigation options: '\"+r.initialNavigation+\"'\");i.hooks.afterPreactivation=function(){return t.initNavigation?Os(null):(t.initNavigation=!0,e(!0),t.resultOfPreactivationDone)},i.initialNavigation()}return n})},t.prototype.bootstrapListener=function(t){var e=this.injector.get(ed),n=this.injector.get($h),i=this.injector.get(td),r=this.injector.get(Wh),o=this.injector.get(di);t===o.components[0]&&(this.isLegacyEnabled(e)?r.initialNavigation():this.isLegacyDisabled(e)&&r.setUpLocationChangeListener(),n.setUpPreloading(),i.init(),r.resetRootComponentType(o.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())},t.prototype.isLegacyEnabled=function(t){return\"legacy_enabled\"===t.initialNavigation||!0===t.initialNavigation||void 0===t.initialNavigation},t.prototype.isLegacyDisabled=function(t){return\"legacy_disabled\"===t.initialNavigation||!1===t.initialNavigation},t}();function fd(t){return t.appInitializer.bind(t)}function pd(t){return t.bootstrapListener.bind(t)}var gd=new wt(\"Router Initializer\"),md=dr({encapsulation:2,styles:[],data:{}});function vd(t){return Zo(0,[(t()(),Br(0,16777216,null,null,1,\"router-outlet\",[],null,null,null,null,null)),To(1,212992,null,0,qh,[Yh,bi,ke,[8,null],wi],null,null)],function(t,e){t(e,1,0)},null)}function yd(t){return Zo(0,[(t()(),Br(0,0,null,null,1,\"ng-component\",[],null,null,null,vd,md)),To(1,49152,null,0,Gc,[],null,null)],null,null)}var bd=io(\"ng-component\",Gc,yd,{},{},[]),_d=n(\"q+JS\"),wd=n.n(_d),xd=(n(\"Zn6t\"),n(\"rsCt\"),n(\"yDQ0\"),n(\"qMs7\"),\"addText\"),Cd={includeUI:{initMenu:\"filter\"}},Sd={cssMaxWidth:700,cssMaxHeight:500},kd=function(){function t(){this.includeUI=!0,this.addText=new hn,this.mousedown=new hn,this.objectActivated=new hn,this.objectMoved=new hn,this.objectScaled=new hn,this.redoStackChanged=new hn,this.textEditing=new hn,this.undoStackChanged=new hn}return t.prototype.ngAfterViewInit=function(){var t=Sd;this.includeUI&&(t=Object.assign(Cd,this.options)),this.editorInstance=new wd.a(this.editorRef.nativeElement,t),this.addEventListeners()},t.prototype.ngOnDestroy=function(){this.removeEventListeners(),this.editorInstance.destroy()},t.prototype.addEventListeners=function(){var t=this;this.editorInstance.on(xd,function(e){return t.addText.emit(e)}),this.editorInstance.on(\"mousedown\",function(e,n){return t.mousedown.emit({event:e,originPointer:n})}),this.editorInstance.on(\"objectActivated\",function(e){return t.objectActivated.emit(e)}),this.editorInstance.on(\"objectMoved\",function(e){return t.objectMoved.emit(e)}),this.editorInstance.on(\"objectScaled\",function(e){return t.objectScaled.emit(e)}),this.editorInstance.on(\"redoStackChanged\",function(e){return t.redoStackChanged.emit(e)}),this.editorInstance.on(\"textEditing\",function(){return t.textEditing.emit()}),this.editorInstance.on(\"undoStackChanged\",function(e){return t.undoStackChanged.emit(e)})},t.prototype.removeEventListeners=function(){this.editorInstance.off(xd),this.editorInstance.off(\"mousedown\"),this.editorInstance.off(\"objectActivated\"),this.editorInstance.off(\"objectMoved\"),this.editorInstance.off(\"objectScaled\"),this.editorInstance.off(\"redoStackChanged\"),this.editorInstance.off(\"textEditing\"),this.editorInstance.off(\"undoStackChanged\")},t}(),Ed=function(){return function(){}}(),Td=dr({encapsulation:2,styles:[\"body>textarea{position:fixed!important}.tui-image-editor-container{marign:0;padding:0;box-sizing:border-box;min-height:300px;height:100%;position:relative;background-color:#282828;overflow:hidden;letter-spacing:.3px}.tui-image-editor-container div,.tui-image-editor-container input,.tui-image-editor-container label,.tui-image-editor-container li,.tui-image-editor-container ul{box-sizing:border-box;margin:0;padding:0;-ms-user-select:none;-moz-user-select:-moz-none;-webkit-user-select:none;user-select:none}.tui-image-editor-container .tui-image-editor-header{min-width:533px;position:absolute;background-color:#151515;top:0;width:100%}.tui-image-editor-container .tui-image-editor-controls-buttons,.tui-image-editor-container .tui-image-editor-header-buttons{float:right;margin:8px}.tui-image-editor-container .tui-image-editor-controls-logo,.tui-image-editor-container .tui-image-editor-header-logo{float:left;width:30%;padding:17px}.tui-image-editor-container .tui-image-editor-controls-buttons,.tui-image-editor-container .tui-image-editor-controls-logo{width:270px;height:100%;display:none}.tui-image-editor-container .tui-image-editor-controls-buttons button,.tui-image-editor-container .tui-image-editor-header-buttons button,.tui-image-editor-container .tui-image-editor-header-buttons div{display:inline-block;position:relative;width:120px;height:40px;padding:0;line-height:40px;outline:0;border-radius:20px;border:1px solid #ddd;font-family:'Noto Sans',sans-serif;font-size:12px;font-weight:700;cursor:pointer;vertical-align:middle;letter-spacing:.3px;text-align:center}.tui-image-editor-container .tui-image-editor-download-btn{background-color:#fdba3b;border-color:#fdba3b;color:#fff}.tui-image-editor-container .tui-image-editor-load-btn{position:absolute;left:0;right:0;display:inline-block;top:0;bottom:0;width:100%;cursor:pointer;opacity:0}.tui-image-editor-container .tui-image-editor-main-container{position:absolute;width:100%;top:0;bottom:64px}.tui-image-editor-container .tui-image-editor-main{position:absolute;text-align:center;top:64px;bottom:0;right:0;left:0}.tui-image-editor-container .tui-image-editor-wrap{bottom:0;width:100%;overflow:auto}.tui-image-editor-container .tui-image-editor-wrap .tui-image-editor-size-wrap{display:table;width:100%;height:100%}.tui-image-editor-container .tui-image-editor-wrap .tui-image-editor-size-wrap .tui-image-editor-align-wrap{display:table-cell;vertical-align:middle}.tui-image-editor-container .tui-image-editor{position:relative;display:inline-block}.tui-image-editor-container .tui-image-editor-menu{width:auto;list-style:none;padding:0;margin:0 auto;display:table-cell;text-align:center;vertical-align:middle;white-space:nowrap}.tui-image-editor-container .tui-image-editor-menu>.tui-image-editor-item{position:relative;display:inline-block;border-radius:2px;padding:7px 8px 3px;cursor:pointer;margin:0 4px}.tui-image-editor-container .tui-image-editor-menu>.tui-image-editor-item[title]:hover:before{content:'';display:inline-block;margin:0 auto;width:0;height:0;border-right:7px solid transparent;border-top:7px solid #2f2f2f;border-left:7px solid transparent;position:absolute;left:13px;top:-2px}.tui-image-editor-container .tui-image-editor-menu>.tui-image-editor-item[title]:hover:after{content:attr(title);position:absolute;display:inline-block;background-color:#2f2f2f;color:#fff;padding:5px 8px;font-size:11px;font-weight:lighter;border-radius:3px;max-height:23px;top:-22px;left:0;min-width:24px}.tui-image-editor-container .tui-image-editor-menu>.tui-image-editor-item.active{background-color:#fff;transition:.3s}.tui-image-editor-container .tui-image-editor-wrap{position:absolute}.tui-image-editor-container .tui-image-editor-grid-visual{display:none;position:absolute;width:100%;height:100%;border:1px solid rgba(255,255,255,.7)}.tui-image-editor-container .tui-image-editor-main.tui-image-editor-menu-flip .tui-image-editor,.tui-image-editor-container .tui-image-editor-main.tui-image-editor-menu-rotate .tui-image-editor{transition:none}.tui-image-editor-container .tui-image-editor-main.tui-image-editor-menu-flip .tui-image-editor-grid-visual,.tui-image-editor-container .tui-image-editor-main.tui-image-editor-menu-rotate .tui-image-editor-grid-visual{display:block}.tui-image-editor-container .tui-image-editor-grid-visual table{width:100%;height:100%;border-collapse:collapse}.tui-image-editor-container .tui-image-editor-grid-visual table td{border:1px solid rgba(255,255,255,.3)}.tui-image-editor-container .tui-image-editor-grid-visual table td.dot:before{content:'';position:absolute;box-sizing:border-box;width:10px;height:10px;border:0;box-shadow:0 0 1px 0 rgba(0,0,0,.3);border-radius:100%;background-color:#fff}.tui-image-editor-container .tui-image-editor-grid-visual table td.dot.left-top:before{top:-5px;left:-5px}.tui-image-editor-container .tui-image-editor-grid-visual table td.dot.right-top:before{top:-5px;right:-5px}.tui-image-editor-container .tui-image-editor-grid-visual table td.dot.left-bottom:before{bottom:-5px;left:-5px}.tui-image-editor-container .tui-image-editor-grid-visual table td.dot.right-bottom:before{bottom:-5px;right:-5px}.tui-image-editor-container .tui-image-editor-submenu{display:none;position:absolute;bottom:0;width:100%;height:150px;white-space:nowrap;z-index:2}.tui-image-editor-container .tui-image-editor-submenu .tui-image-editor-button:hover svg>use.active{display:block}.tui-image-editor-container .tui-image-editor-submenu .tui-image-editor-submenu-item li{display:inline-block;vertical-align:top}.tui-image-editor-container .tui-image-editor-submenu .tui-image-editor-submenu-item .tui-image-editor-newline{display:block;margin-top:0}.tui-image-editor-container .tui-image-editor-submenu .tui-image-editor-submenu-item .tui-image-editor-button{position:relative;cursor:pointer;display:inline-block;font-weight:400;font-size:11px;margin:0 9px}.tui-image-editor-container .tui-image-editor-submenu .tui-image-editor-submenu-item .tui-image-editor-button.preset{margin:0 9px 20px 5px}.tui-image-editor-container .tui-image-editor-submenu .tui-image-editor-submenu-item label{display:inline-block;cursor:pointer;padding-top:5px;font-family:\\\"Noto Sans\\\",sans-serif;font-size:11px}.tui-image-editor-container .tui-image-editor-submenu .tui-image-editor-submenu-item .tui-image-editor-button.apply label,.tui-image-editor-container .tui-image-editor-submenu .tui-image-editor-submenu-item .tui-image-editor-button.cancel label{vertical-align:7px}.tui-image-editor-container .tui-image-editor-submenu>div{display:none;vertical-align:bottom}.tui-image-editor-container .tui-image-editor-submenu .tui-image-editor-submenu-style{opacity:.95;z-index:-1;position:absolute;top:0;bottom:0;left:0;right:0;display:block}.tui-image-editor-container .tui-image-editor-partition>div{width:1px;height:52px;border-left:1px solid #3c3c3c;margin:0 8px}.tui-image-editor-container .tui-image-editor-main.tui-image-editor-menu-filter .tui-image-editor-partition>div{height:108px;margin:0 29px 0 0}.tui-image-editor-container .tui-image-editor-submenu-align{text-align:left;margin-right:30px}.tui-image-editor-container .tui-image-editor-submenu-align label{width:55px;white-space:nowrap}.tui-image-editor-container .tui-image-editor-submenu-align:first-child{margin-right:0}.tui-image-editor-container .tui-image-editor-submenu-align:first-child label{width:70px}.tui-image-editor-container .tui-image-editor-main.tui-image-editor-menu-crop .tui-image-editor-submenu>div.tui-image-editor-menu-crop,.tui-image-editor-container .tui-image-editor-main.tui-image-editor-menu-draw .tui-image-editor-submenu>div.tui-image-editor-menu-draw,.tui-image-editor-container .tui-image-editor-main.tui-image-editor-menu-filter .tui-image-editor-submenu>div.tui-image-editor-menu-filter,.tui-image-editor-container .tui-image-editor-main.tui-image-editor-menu-flip .tui-image-editor-submenu>div.tui-image-editor-menu-flip,.tui-image-editor-container .tui-image-editor-main.tui-image-editor-menu-icon .tui-image-editor-submenu>div.tui-image-editor-menu-icon,.tui-image-editor-container .tui-image-editor-main.tui-image-editor-menu-mask .tui-image-editor-submenu>div.tui-image-editor-menu-mask,.tui-image-editor-container .tui-image-editor-main.tui-image-editor-menu-rotate .tui-image-editor-submenu>div.tui-image-editor-menu-rotate,.tui-image-editor-container .tui-image-editor-main.tui-image-editor-menu-shape .tui-image-editor-submenu>div.tui-image-editor-menu-shape,.tui-image-editor-container .tui-image-editor-main.tui-image-editor-menu-text .tui-image-editor-submenu>div.tui-image-editor-menu-text{display:table-cell}.tui-image-editor-container .tui-image-editor-main.tui-image-editor-menu-crop .tui-image-editor-submenu,.tui-image-editor-container .tui-image-editor-main.tui-image-editor-menu-draw .tui-image-editor-submenu,.tui-image-editor-container .tui-image-editor-main.tui-image-editor-menu-filter .tui-image-editor-submenu,.tui-image-editor-container .tui-image-editor-main.tui-image-editor-menu-flip .tui-image-editor-submenu,.tui-image-editor-container .tui-image-editor-main.tui-image-editor-menu-icon .tui-image-editor-submenu,.tui-image-editor-container .tui-image-editor-main.tui-image-editor-menu-mask .tui-image-editor-submenu,.tui-image-editor-container .tui-image-editor-main.tui-image-editor-menu-rotate .tui-image-editor-submenu,.tui-image-editor-container .tui-image-editor-main.tui-image-editor-menu-shape .tui-image-editor-submenu,.tui-image-editor-container .tui-image-editor-main.tui-image-editor-menu-text .tui-image-editor-submenu{display:table}.tui-image-editor-container .filter-color-item{display:inline-block}.tui-image-editor-container .filter-color-item .tui-image-editor-checkbox{display:block}.tui-image-editor-container .tui-image-editor-checkbox-wrap{display:inline-block!important;text-align:left}.tui-image-editor-container .tui-image-editor-checkbox-wrap.fixed-width{width:187px;white-space:normal}.tui-image-editor-container .tui-image-editor-checkbox{display:inline-block;margin:1px 0}.tui-image-editor-container .tui-image-editor-checkbox input{width:14px;height:14px;opacity:0}.tui-image-editor-container .tui-image-editor-checkbox input+label{color:#fff;height:14px;position:relative}.tui-image-editor-container .tui-image-editor-checkbox input+label:before{content:'';position:absolute;width:14px;height:14px;background-color:#fff;top:6px;left:-19px;display:inline-block;margin:0;text-align:center;font-size:11px;border:0;border-radius:2px;padding-top:1px;box-sizing:border-box}.tui-image-editor-container .tui-image-editor-checkbox input[type=checkbox]:checked+label:before{background-size:cover;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAAAXNSR0IArs4c6QAAAMBJREFUKBWVkjEOwjAMRe2WgZW7IIHEDdhghhuwcQ42rlJugAQS54Cxa5cq1QM5TUpByZfS2j9+dlJVt/tX5ZxbS4ZU9VLkQvSHKTIGRaVJYFmKrBbTCJxE2UgCdDzMZDkHrOV6b95V0US6UmgKodujEZbJg0B0ZgEModO5lrY1TMQf1TpyJGBEjD+E2NPN7ukIUDiF/BfEXgRiGEw8NgkffYGYwCi808fpn/6OvfUfsDr/Vc1IfRf8sKnFVqeiVQfDu0tf/nWH9gAAAABJRU5ErkJggg==)}.tui-image-editor-container .tui-image-editor-selectlist-wrap{position:relative}.tui-image-editor-container .tui-image-editor-selectlist-wrap select{width:100%;height:28px;margin-top:4px;border:1px solid #cbdbdb;outline:0;border-radius:0;background-color:#fff;-webkit-appearance:none;-moz-appearance:none;appearance:none;padding:0 7px 0 10px}.tui-image-editor-container .tui-image-editor-selectlist-wrap .tui-image-editor-selectlist{display:none;position:relative;top:-1px;border:1px solid #ccc;background-color:#fff;border-top:0;padding:4px 0}.tui-image-editor-container .tui-image-editor-selectlist-wrap .tui-image-editor-selectlist li{display:block;text-align:left;padding:7px 10px;font-family:'Noto Sans',sans-serif}.tui-image-editor-container .tui-image-editor-selectlist-wrap .tui-image-editor-selectlist li:hover{background-color:rgba(81,92,230,.05)}.tui-image-editor-container .tui-image-editor-selectlist-wrap:before{content:'';position:absolute;display:inline-block;width:14px;height:14px;right:5px;top:10px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAAAXNSR0IArs4c6QAAAHlJREFUKBVjYBgFOEOAEVkmPDxc89+/f6eAYjzI4kD2FyYmJrOVK1deh4kzwRggGiQBVJCELAZig8SQNYHEmEEEMrh69eo1HR0dfqCYJUickZGxf9WqVf3IakBsFBthklpaWmVA9mEQhrJhUoTp0NBQCRAmrHL4qgAAuu4cWZOZIGsAAAAASUVORK5CYII=);background-size:cover}.tui-image-editor-container .tui-image-editor-selectlist-wrap select::-ms-expand{display:none}.tui-image-editor-container .tui-image-editor-virtual-range-bar .tui-image-editor-disabled,.tui-image-editor-container .tui-image-editor-virtual-range-pointer .tui-image-editor-disabled,.tui-image-editor-container .tui-image-editor-virtual-range-subbar .tui-image-editor-disabled{backbround-color:red}.tui-image-editor-container .tui-image-editor-range{position:relative;top:5px;width:166px;height:17px;display:inline-block}.tui-image-editor-container .tui-image-editor-virtual-range-bar{top:7px;position:absolute;width:100%;height:2px;background-color:#666}.tui-image-editor-container .tui-image-editor-virtual-range-subbar{position:absolute;height:100%;left:0;right:0;background-color:#d1d1d1}.tui-image-editor-container .tui-image-editor-virtual-range-pointer{position:absolute;cursor:pointer;top:-5px;left:0;width:12px;height:12px;background-color:#fff;border-radius:100%}.tui-image-editor-container .tui-image-editor-range-wrap{display:inline-block;margin-left:4px}.tui-image-editor-container .tui-image-editor-range-wrap.short .tui-image-editor-range{width:100px}.tui-image-editor-container .color-picker-control .tui-image-editor-range{width:108px;margin-left:10px}.tui-image-editor-container .color-picker-control .tui-image-editor-virtual-range-pointer{background-color:#333}.tui-image-editor-container .color-picker-control .tui-image-editor-virtual-range-bar{background-color:#ccc}.tui-image-editor-container .color-picker-control .tui-image-editor-virtual-range-subbar{background-color:#606060}.tui-image-editor-container .tui-image-editor-range-wrap.tui-image-editor-newline.short{margin-top:-2px;margin-left:19px}.tui-image-editor-container .tui-image-editor-range-wrap.tui-image-editor-newline.short label{color:#8e8e8e;font-weight:400}.tui-image-editor-container .tui-image-editor-range-wrap label{vertical-align:baseline;font-size:11px;margin-right:7px;color:#fff}.tui-image-editor-container .tui-image-editor-range-value{cursor:default;width:40px;height:24px;outline:0;border-radius:2px;box-shadow:none;border:1px solid #d5d5d5;text-align:center;background-color:#1c1c1c;color:#fff;font-weight:lighter;vertical-align:baseline;font-family:'Noto Sans',sans-serif;margin-top:21px;margin-left:4px}.tui-image-editor-container .tui-image-editor-controls{position:absolute;background-color:#151515;width:100%;height:64px;display:table;bottom:0;z-index:2}.tui-image-editor-container .tui-image-editor-icpartition{display:inline-block;background-color:#282828;width:1px;height:24px}.tui-image-editor-container.left .tui-image-editor-menu>.tui-image-editor-item[title]:before{left:28px;top:11px;border-right:7px solid #2f2f2f;border-top:7px solid transparent;border-bottom:7px solid transparent}.tui-image-editor-container.left .tui-image-editor-menu>.tui-image-editor-item[title]:after{top:7px;left:39px;white-space:nowrap}.tui-image-editor-container.left .tui-image-editor-submenu{left:0;height:100%;width:248px}.tui-image-editor-container.left .tui-image-editor-main-container{left:64px;width:calc(100% - 64px);height:100%}.tui-image-editor-container.left .tui-image-editor-controls{width:64px;height:100%;display:table}.tui-image-editor-container.left .tui-image-editor-menu,.tui-image-editor-container.right .tui-image-editor-menu{white-space:inherit}.tui-image-editor-container.left .tui-image-editor-submenu,.tui-image-editor-container.right .tui-image-editor-submenu{white-space:normal}.tui-image-editor-container.left .tui-image-editor-submenu>div,.tui-image-editor-container.right .tui-image-editor-submenu>div{vertical-align:middle}.tui-image-editor-container.left .tui-image-editor-controls li,.tui-image-editor-container.right .tui-image-editor-controls li{display:inline-block;margin:4px auto}.tui-image-editor-container.left .tui-image-editor-icpartition,.tui-image-editor-container.right .tui-image-editor-icpartition{position:relative;top:-7px;width:24px;height:1px}.tui-image-editor-container.left .tui-image-editor-submenu .tui-image-editor-partition,.tui-image-editor-container.right .tui-image-editor-submenu .tui-image-editor-partition{display:block;width:75%;margin:auto}.tui-image-editor-container.left .tui-image-editor-submenu .tui-image-editor-partition>div,.tui-image-editor-container.right .tui-image-editor-submenu .tui-image-editor-partition>div{border-left:0;height:10px;border-bottom:1px solid #3c3c3c;width:100%;margin:0}.tui-image-editor-container.left .tui-image-editor-submenu .tui-image-editor-submenu-align,.tui-image-editor-container.right .tui-image-editor-submenu .tui-image-editor-submenu-align{margin-right:0}.tui-image-editor-container.left .tui-image-editor-submenu .tui-image-editor-submenu-item li,.tui-image-editor-container.right .tui-image-editor-submenu .tui-image-editor-submenu-item li{margin-top:15px}.tui-image-editor-container.left .tui-image-editor-submenu .tui-image-editor-submenu-item .tui-colorpicker-clearfix li,.tui-image-editor-container.right .tui-image-editor-submenu .tui-image-editor-submenu-item .tui-colorpicker-clearfix li{margin-top:0}.tui-image-editor-container.left .tui-image-editor-checkbox-wrap.fixed-width,.tui-image-editor-container.right .tui-image-editor-checkbox-wrap.fixed-width{width:182px;white-space:normal}.tui-image-editor-container.left .tui-image-editor-range-wrap.tui-image-editor-newline label.range,.tui-image-editor-container.right .tui-image-editor-range-wrap.tui-image-editor-newline label.range{display:block;text-align:left;width:75%;margin:auto}.tui-image-editor-container.left .tui-image-editor-range,.tui-image-editor-container.right .tui-image-editor-range{width:136px}.tui-image-editor-container.right .tui-image-editor-menu>.tui-image-editor-item[title]:before{left:-3px;top:11px;border-left:7px solid #2f2f2f;border-top:7px solid transparent;border-bottom:7px solid transparent}.tui-image-editor-container.right .tui-image-editor-menu>.tui-image-editor-item[title]:after{top:7px;left:-44px;white-space:nowrap}.tui-image-editor-container.right .tui-image-editor-submenu{right:0;height:100%;width:248px}.tui-image-editor-container.right .tui-image-editor-main-container{right:64px;width:calc(100% - 64px);height:100%}.tui-image-editor-container.right .tui-image-editor-controls{right:0;width:64px;height:100%;display:table}.tui-image-editor-container.bottom .tui-image-editor-submenu .tui-image-editor-partition.only-left-right,.tui-image-editor-container.top .tui-image-editor-submenu .tui-image-editor-partition.only-left-right{display:none}.tui-image-editor-container.bottom .tui-image-editor-submenu>div{padding-bottom:24px}.tui-image-editor-container.top .color-picker-control .triangle{top:-8px;border-right:7px solid transparent;border-top:0;border-left:7px solid transparent;border-bottom:8px solid #fff}.tui-image-editor-container.top .tui-image-editor-size-wrap{height:100%}.tui-image-editor-container.top .tui-image-editor-main-container{bottom:0}.tui-image-editor-container.top .tui-image-editor-menu>.tui-image-editor-item[title]:before{left:13px;border-top:0;border-bottom:7px solid #2f2f2f;top:33px}.tui-image-editor-container.top .tui-image-editor-menu>.tui-image-editor-item[title]:after{top:38px}.tui-image-editor-container.top .tui-image-editor-submenu{top:0;bottom:inherit}.tui-image-editor-container.top .tui-image-editor-submenu>div{padding-top:24px;vertical-align:top}.tui-image-editor-container.top .tui-image-editor-controls-buttons,.tui-image-editor-container.top .tui-image-editor-controls-logo{display:table-cell}.tui-image-editor-container.top .tui-image-editor-main{top:64px;height:calc(100% - 64px)}.tui-image-editor-container.top .tui-image-editor-controls{top:0;bottom:inherit}.tui-image-editor-container #tie-icon-add-button .tui-image-editor-button{min-width:42px}.tui-image-editor-container .svg_ic-menu{width:24px;height:24px}.tui-image-editor-container .svg_ic-submenu{width:32px;height:32px}.tui-image-editor-container .svg_img-bi{width:257px;height:26px}.tui-image-editor-container .tui-image-editor-controls svg>use{display:none}.tui-image-editor-container .tui-image-editor-controls .enabled svg:hover>use.hover,.tui-image-editor-container .tui-image-editor-controls .normal svg:hover>use.hover{display:block}.tui-image-editor-container .tui-image-editor-controls .active svg:hover>use.hover{display:none}.tui-image-editor-container .tui-image-editor-controls .active svg>use.active,.tui-image-editor-container .tui-image-editor-controls .enabled svg>use.enabled,.tui-image-editor-container .tui-image-editor-controls svg>use.normal{display:block}.tui-image-editor-container .tui-image-editor-controls .active svg>use.normal,.tui-image-editor-container .tui-image-editor-controls .enabled svg>use.normal{display:none}.tui-image-editor-container .tui-image-editor-controls:hover{z-index:3}.tui-image-editor-container div.tui-colorpicker-clearfix{width:159px;height:28px;border:1px solid #d5d5d5;border-radius:2px;background-color:#f5f5f5;margin-top:6px;padding:4px 7px}.tui-image-editor-container .tui-colorpicker-palette-hex{width:114px;background-color:#f5f5f5;border:0;font-size:11px;margin-top:2px;font-family:'Noto Sans',sans-serif}.tui-image-editor-container .tui-colorpicker-palette-hex[value='#ffffff']+.tui-colorpicker-palette-preview,.tui-image-editor-container .tui-colorpicker-palette-hex[value='']+.tui-colorpicker-palette-preview{border:1px solid #ccc}.tui-image-editor-container .tui-colorpicker-palette-hex[value='']+.tui-colorpicker-palette-preview{background-size:cover;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAdBJREFUWAnFl0FuwjAQRZ0ukiugHqFSOQNdseuKW3ALzkA4BateICvUGyCxrtRFd4WuunH/TzykaYJrnLEYaTJJsP2+x8GZZCbQrLU5mj7Bn+EP8HvnCObd+R7xBV5lWfaNON4AnsA38E94qLEt+0yiFaBzAV/Bv+Cxxr4co7hKCDpw1q9wLeNYYdlAwyn8TYt8Hme3+8D5ozcTaMCZ68PXa2tnM2sbEcOZAJhrrpl2DAcTOGNjZPSfCdzkw6JrfbiMv+osBe4y9WOedhm4jZfhbENWuxS44H9Wz/xw4WzqLOAqh1+zycgAwzEMzr5k5gaHOa9ULBwuuDkFlHI1Kl4PJ66kgIpnoywOTmRFAYcbwYk9UMApWkD8zAV5ihcwHk4Rx7gl0IFTQL0EFc+CTQ9OZHWH3YhlVJiVpTHbrTGLhTHLZVgff6s9lyBsI9KduSS83oj+34rTwJutmBmCnMsvozRwZqB5GTkBw6/jdPDu69iJ6BYk6eCcfbcgcQIK/MByaaiMqm8rHcjol2TnpWDhyAKSGdA3FrxtJUToX0ODqatetfGE+8tyEUOV8GY5dGRwLP/MBS4RHQr4bT7NRAQjlcOTfZxmv2G+c4hI8nn+Ax5PG/zhI393AAAAAElFTkSuQmCC)}.tui-image-editor-container .tui-colorpicker-palette-preview{border-radius:100%;float:left;width:17px;height:17px;border:0}.tui-image-editor-container .color-picker-control{position:absolute;display:none;z-index:99;width:192px;background-color:#fff;box-shadow:0 3px 22px 6px rgba(0,0,0,.15);padding:16px;border-radius:2px}.tui-image-editor-container .color-picker-control .tui-colorpicker-palette-toggle-slider{display:none}.tui-image-editor-container .color-picker-control .tui-colorpicker-palette-button{border:0;border-radius:100%;margin:2px;background-size:cover;font-size:1px}.tui-image-editor-container .color-picker-control .tui-colorpicker-palette-button[title='#ffffff'],.tui-image-editor-container .color-picker-control .tui-colorpicker-palette-button[title='']{border:1px solid #ccc}.tui-image-editor-container .color-picker-control .triangle{width:0;height:0;border-right:7px solid transparent;border-top:8px solid #fff;border-left:7px solid transparent;position:absolute;bottom:-8px;left:84px}.tui-image-editor-container .color-picker-control .tui-colorpicker-container,.tui-image-editor-container .color-picker-control .tui-colorpicker-palette-container,.tui-image-editor-container .color-picker-control .tui-colorpicker-palette-container ul{width:100%;height:auto}.tui-image-editor-container .filter-color-item .color-picker-control label{font-color:#333;font-weight:400;margin-right:7pxleft}.tui-image-editor-container .filter-color-item .tui-image-editor-checkbox{margin-top:0}.tui-image-editor-container .filter-color-item .tui-image-editor-checkbox input+label:before{left:-16px}.tui-image-editor-container .color-picker{width:100%;height:auto}.tui-image-editor-container .color-picker-value{width:32px;height:32px;border:0;border-radius:100%;margin:auto auto 1px}.tui-image-editor-container .color-picker-value.transparent{border:1px solid #cbcbcb;background-size:cover;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAdBJREFUWAnFl0FuwjAQRZ0ukiugHqFSOQNdseuKW3ALzkA4BateICvUGyCxrtRFd4WuunH/TzykaYJrnLEYaTJJsP2+x8GZZCbQrLU5mj7Bn+EP8HvnCObd+R7xBV5lWfaNON4AnsA38E94qLEt+0yiFaBzAV/Bv+Cxxr4co7hKCDpw1q9wLeNYYdlAwyn8TYt8Hme3+8D5ozcTaMCZ68PXa2tnM2sbEcOZAJhrrpl2DAcTOGNjZPSfCdzkw6JrfbiMv+osBe4y9WOedhm4jZfhbENWuxS44H9Wz/xw4WzqLOAqh1+zycgAwzEMzr5k5gaHOa9ULBwuuDkFlHI1Kl4PJ66kgIpnoywOTmRFAYcbwYk9UMApWkD8zAV5ihcwHk4Rx7gl0IFTQL0EFc+CTQ9OZHWH3YhlVJiVpTHbrTGLhTHLZVgff6s9lyBsI9KduSS83oj+34rTwJutmBmCnMsvozRwZqB5GTkBw6/jdPDu69iJ6BYk6eCcfbcgcQIK/MByaaiMqm8rHcjol2TnpWDhyAKSGdA3FrxtJUToX0ODqatetfGE+8tyEUOV8GY5dGRwLP/MBS4RHQr4bT7NRAQjlcOTfZxmv2G+c4hI8nn+Ax5PG/zhI393AAAAAElFTkSuQmCC)}.tui-image-editor-container .color-picker-value+label{color:#fff}.tui-image-editor-container .tui-image-editor-submenu svg>use{display:none}#tie-icon-add-button.icon-arrow .tui-image-editor-button[data-icontype=icon-arrow] svg>use.active,#tie-icon-add-button.icon-arrow-2 .tui-image-editor-button[data-icontype=icon-arrow-2] svg>use.active,#tie-icon-add-button.icon-arrow-3 .tui-image-editor-button[data-icontype=icon-arrow-3] svg>use.active,#tie-icon-add-button.icon-bubble .tui-image-editor-button[data-icontype=icon-bubble] svg>use.active,#tie-icon-add-button.icon-heart .tui-image-editor-button[data-icontype=icon-heart] svg>use.active,#tie-icon-add-button.icon-location .tui-image-editor-button[data-icontype=icon-location] svg>use.active,#tie-icon-add-button.icon-polygon .tui-image-editor-button[data-icontype=icon-polygon] svg>use.active,#tie-icon-add-button.icon-star .tui-image-editor-button[data-icontype=icon-star] svg>use.active,#tie-icon-add-button.icon-star-2 .tui-image-editor-button[data-icontype=icon-star-2] svg>use.active,.tui-image-editor-container .tui-image-editor-submenu svg>use.normal{display:block}#tie-draw-line-select-button.free .tui-image-editor-button.free svg>use.normal,#tie-draw-line-select-button.line .tui-image-editor-button.line svg>use.normal{display:none}#tie-draw-line-select-button.free .tui-image-editor-button.free svg>use.active,#tie-draw-line-select-button.line .tui-image-editor-button.line svg>use.active{display:block}#tie-flip-button.flipX .tui-image-editor-button.flipX svg>use.normal,#tie-flip-button.flipY .tui-image-editor-button.flipY svg>use.normal,#tie-flip-button.resetFlip .tui-image-editor-button.resetFlip svg>use.normal{display:none}#tie-flip-button.flipX .tui-image-editor-button.flipX svg>use.active,#tie-flip-button.flipY .tui-image-editor-button.flipY svg>use.active,#tie-flip-button.resetFlip .tui-image-editor-button.resetFlip svg>use.active{display:block}#tie-mask-apply.apply.active .tui-image-editor-button.apply label{color:#fff}#tie-mask-apply.apply.active .tui-image-editor-button.apply svg>use.active{display:block}#tie-crop-button .tui-image-editor-button.apply,#tie-crop-preset-button .tui-image-editor-button.apply{margin-right:24px}#tie-crop-button .tui-image-editor-button.apply.active svg>use.active,#tie-crop-button .tui-image-editor-button.preset.active svg>use.active,#tie-crop-preset-button .tui-image-editor-button.apply.active svg>use.active,#tie-crop-preset-button .tui-image-editor-button.preset.active svg>use.active{display:block}#tie-shape-button.circle .tui-image-editor-button.circle svg>use.normal,#tie-shape-button.rect .tui-image-editor-button.rect svg>use.normal,#tie-shape-button.triangle .tui-image-editor-button.triangle svg>use.normal{display:none}#tie-shape-button.circle .tui-image-editor-button.circle svg>use.active,#tie-shape-button.rect .tui-image-editor-button.rect svg>use.active,#tie-shape-button.triangle .tui-image-editor-button.triangle svg>use.active,#tie-text-align-button.center .tui-image-editor-button.center svg>use.active,#tie-text-align-button.left .tui-image-editor-button.left svg>use.active,#tie-text-align-button.right .tui-image-editor-button.right svg>use.active,#tie-text-effect-button .tui-image-editor-button.active svg>use.active{display:block}#tie-icon-image-file,#tie-mask-image-file{opacity:0;position:absolute;width:100%;height:100%;border:1px solid green;cursor:inherit;left:0;top:0}.tui-image-editor-container.top.tui-image-editor-top-optimization .tui-image-editor-controls ul{text-align:right}.tui-image-editor-container.top.tui-image-editor-top-optimization .tui-image-editor-controls-logo{display:none}\"],data:{}});function Od(t){return Zo(0,[Uo(402653184,1,{editorRef:0}),(t()(),Br(1,0,[[1,0],[\"imageEditor\",1]],null,0,\"div\",[[\"id\",\"tuiImageEditor\"],[\"style\",\"width: 100%;height: 100%;\"]],null,null,null,null,null))],null,null)}var Pd=dr({encapsulation:0,styles:[[\"\"]],data:{}});function jd(t){return Zo(0,[(t()(),Br(0,0,null,null,1,\"h2\",[[\"style\",\"text-align:center\"]],null,null,null,null,null)),(t()(),Yo(-1,null,[\"Here START kOKA: \"])),(t()(),Br(2,0,null,null,2,\"div\",[[\"style\",\"height: 700px; width: 100%\"]],null,null,null,null,null)),(t()(),Br(3,0,null,null,1,\"tui-image-editor\",[],null,null,null,Od,Td)),To(4,4374528,null,0,kd,[],null,null),(t()(),Br(5,16777216,null,null,1,\"router-outlet\",[],null,null,null,null,null)),To(6,212992,null,0,qh,[Yh,bi,ke,[8,null],wi],null,null)],function(t,e){t(e,6,0)},null)}function Ad(t){return Zo(0,[(t()(),Br(0,0,null,null,1,\"app-root\",[],null,null,null,jd,Pd)),To(1,49152,null,0,rs,[],null,null)],null,null)}var Md=io(\"app-root\",rs,Ad,{},{},[]),Dd=function(){return function(){}}(),Id=es(is,[rs],function(t){return function(t){for(var e={},n=[],i=!1,r=0;r<t.length;r++){var o=t[r];o.token===be&&!0===o.value&&(i=!0),1073741824&o.flags&&n.push(o.token),o.index=r,e[cr(o.token)]=o}return{factory:null,providersByKey:e,providers:t,modules:n,isRoot:i}}([qr(512,ke,Ee,[[8,[bd,Md]],[3,ke],Oe]),qr(5120,Wi,qi,[[3,Wi]]),qr(4608,ys,bs,[Wi,[2,vs]]),qr(5120,On,Pn,[]),qr(5120,Bi,Xi,[]),qr(5120,Hi,Yi,[]),qr(4608,mc,vc,[ws]),qr(6144,Ne,null,[mc]),qr(4608,cc,hc,[]),qr(5120,Ll,function(t,e,n,i,r,o,a,s){return[new sc(t,e,n),new gc(i),new dc(r,o,a,s)]},[ws,Kn,Mn,ws,ws,cc,In,[2,uc]]),qr(4608,Fl,Fl,[Ll,Kn]),qr(135680,Hl,Hl,[ws]),qr(4608,Yl,Yl,[Fl,Hl,On]),qr(6144,De,null,[Yl]),qr(6144,Bl,null,[Hl]),qr(4608,ii,ii,[Kn]),qr(5120,Ru,hd,[Wh]),qr(4608,Qh,Qh,[]),qr(6144,Zh,null,[Qh]),qr(135680,$h,$h,[Wh,mn,zn,oe,Zh]),qr(4608,Jh,Jh,[]),qr(5120,td,ad,[Wh,Cs,ed]),qr(5120,gd,pd,[dd]),qr(5120,Dn,function(t){return[t]},[gd]),qr(1073742336,_s,_s,[]),qr(1024,Cn,kc,[]),qr(1024,si,function(){return[rd()]},[]),qr(512,dd,dd,[oe]),qr(1024,En,function(t,e){return[(n=t,Dl(\"probe\",Rl),Dl(\"coreTokens\",o({},Il,(n||[]).reduce(function(t,e){return t[e.name]=e.token,t},{}))),function(){return Rl}),fd(e)];var n},[[2,si],dd]),qr(512,Tn,Tn,[[2,En]]),qr(131584,di,di,[Kn,In,oe,Cn,ke,Tn]),qr(1073742336,Ki,Ki,[di]),qr(1073742336,Ec,Ec,[[3,Ec]]),qr(1024,nd,ld,[[3,Wh]]),qr(512,fu,pu,[]),qr(512,Yh,Yh,[]),qr(256,ed,{},[]),qr(1024,ss,sd,[os,[2,ls],ed]),qr(512,cs,cs,[ss]),qr(512,zn,zn,[]),qr(512,mn,vi,[zn,[2,gi]]),qr(1024,Nh,function(){return[[]]},[]),qr(1024,Wh,ud,[di,fu,Yh,cs,oe,mn,zn,Nh,ed,[2,Hh],[2,Lh]]),qr(1073742336,od,od,[[2,nd],[2,Wh]]),qr(1073742336,Dd,Dd,[]),qr(1073742336,Ed,Ed,[]),qr(1073742336,is,is,[]),qr(256,be,!0,[])])});(function(){if(Ue)throw new Error(\"Cannot enable prod mode after platform setup.\");He=!1})(),Sc().bootstrapModuleFactory(Id).catch(function(t){return console.error(t)})}},[[0,0]]]);","extractedComments":[]}